!function(){"use strict";let et,er,ea,ei;var es,ed,ec,ev,eC,eI,eD,eP,eL,eM,eV,eF,eU,e=function(et){if(null===et)return"null";if(void 0===et)return"undefined";var er=typeof et;return"object"===er&&(Array.prototype.isPrototypeOf(et)||et.constructor&&"Array"===et.constructor.name)?"array":"object"===er&&(String.prototype.isPrototypeOf(et)||et.constructor&&"String"===et.constructor.name)?"string":er},t=function(et){return{eq:et}},eH=t(function(et,er){return et===er}),o=function(et){return t(function(er,ea){if(er.length!==ea.length)return!1;for(var ei=er.length,es=0;es<ei;es++)if(!et.eq(er[es],ea[es]))return!1;return!0})},r=function(et){return t(function(er,ea){var ei,es,ed=Object.keys(er),ec=Object.keys(ea);if(!(ei=o(eH),es=function(et){return Array.prototype.slice.call(et).sort(void 0)},t(function(et,er){return ei.eq(es(et),es(er))})).eq(ed,ec))return!1;for(var ev=ed.length,eC=0;eC<ev;eC++){var eI=ed[eC];if(!et.eq(er[eI],ea[eI]))return!1}return!0})},ez=t(function(et,er){if(et===er)return!0;var ea=e(et);return ea===e(er)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(ea)?et===er:"array"===ea?o(ez).eq(et,er):"object"===ea&&r(ez).eq(et,er))});let ej=Object.getPrototypeOf,i=(et,er,ea)=>{var ei;return!!ea(et,er.prototype)||(null===(ei=et.constructor)||void 0===ei?void 0:ei.name)===er.name},l=et=>er=>(et=>{let er=typeof et;return null===et?"null":"object"===er&&Array.isArray(et)?"array":"object"===er&&i(et,String,(et,er)=>er.isPrototypeOf(et))?"string":er})(er)===et,d=et=>er=>typeof er===et,c=et=>er=>et===er,u=(et,er)=>eq(et)&&i(et,er,(et,er)=>ej(et)===er),e$=l("string"),eq=l("object"),g=et=>u(et,Object),eW=l("array"),eY=c(null),eK=d("boolean"),eX=c(void 0),y=et=>null==et,C=et=>!y(et),eJ=d("function"),eG=d("number"),E=(et,er)=>{if(eW(et)){for(let ea=0,ei=et.length;ea<ei;++ea)if(!er(et[ea]))return!1;return!0}return!1},_=()=>{},k=(et,er)=>(...ea)=>et(er.apply(null,ea)),S=(et,er)=>ea=>et(er(ea)),N=et=>()=>et,R=et=>et,A=(et,er)=>et===er;function T(et,...er){return(...ea)=>{let ei=er.concat(ea);return et.apply(null,ei)}}let O=et=>er=>!et(er),B=et=>()=>{throw Error(et)},P=et=>et(),D=et=>{et()},eQ=N(!1),eZ=N(!0);let I=class I{constructor(et,er){this.tag=et,this.value=er}static some(et){return new I(!0,et)}static none(){return I.singletonNone}fold(et,er){return this.tag?er(this.value):et()}isSome(){return this.tag}isNone(){return!this.tag}map(et){return this.tag?I.some(et(this.value)):I.none()}bind(et){return this.tag?et(this.value):I.none()}exists(et){return this.tag&&et(this.value)}forall(et){return!this.tag||et(this.value)}filter(et){return!this.tag||et(this.value)?this:I.none()}getOr(et){return this.tag?this.value:et}or(et){return this.tag?this:et}getOrThunk(et){return this.tag?this.value:et()}orThunk(et){return this.tag?this:et()}getOrDie(et){if(this.tag)return this.value;throw Error(null!=et?et:"Called getOrDie on None")}static from(et){return C(et)?I.some(et):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(et){this.tag&&et(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};I.singletonNone=new I(!1);let e0=Array.prototype.slice,e1=Array.prototype.indexOf,e2=Array.prototype.push,j=(et,er)=>e1.call(et,er),H=(et,er)=>j(et,er)>-1,$=(et,er)=>{for(let ea=0,ei=et.length;ea<ei;ea++)if(er(et[ea],ea))return!0;return!1},q=(et,er)=>{let ea=et.length,ei=Array(ea);for(let es=0;es<ea;es++){let ea=et[es];ei[es]=er(ea,es)}return ei},V=(et,er)=>{for(let ea=0,ei=et.length;ea<ei;ea++)er(et[ea],ea)},W=(et,er)=>{for(let ea=et.length-1;ea>=0;ea--)er(et[ea],ea)},K=(et,er)=>{let ea=[],ei=[];for(let es=0,ed=et.length;es<ed;es++){let ed=et[es];(er(ed,es)?ea:ei).push(ed)}return{pass:ea,fail:ei}},Y=(et,er)=>{let ea=[];for(let ei=0,es=et.length;ei<es;ei++){let es=et[ei];er(es,ei)&&ea.push(es)}return ea},G=(et,er,ea)=>(W(et,(et,ei)=>{ea=er(ea,et,ei)}),ea),X=(et,er,ea)=>(V(et,(et,ei)=>{ea=er(ea,et,ei)}),ea),Q=(et,er,ea)=>{for(let ei=0,es=et.length;ei<es;ei++){let es=et[ei];if(er(es,ei))return I.some(es);if(ea(es,ei))break}return I.none()},J=(et,er)=>Q(et,er,eQ),Z=(et,er)=>{for(let ea=0,ei=et.length;ea<ei;ea++)if(er(et[ea],ea))return I.some(ea);return I.none()},ee=et=>{let er=[];for(let ea=0,ei=et.length;ea<ei;++ea){if(!eW(et[ea]))throw Error("Arr.flatten item "+ea+" was not an array, input: "+et);e2.apply(er,et[ea])}return er},te=(et,er)=>ee(q(et,er)),ne=(et,er)=>{for(let ea=0,ei=et.length;ea<ei;++ea)if(!0!==er(et[ea],ea))return!1;return!0},oe=et=>{let er=e0.call(et,0);return er.reverse(),er},re=(et,er)=>Y(et,et=>!H(er,et)),se=(et,er)=>{let ea={};for(let ei=0,es=et.length;ei<es;ei++){let es=et[ei];ea[String(es)]=er(es,ei)}return ea},ae=(et,er)=>{let ea=e0.call(et,0);return ea.sort(er),ea},ie=(et,er)=>er>=0&&er<et.length?I.some(et[er]):I.none(),le=et=>ie(et,0),de=et=>ie(et,et.length-1),e3=eJ(Array.from)?Array.from:et=>e0.call(et),ue=(et,er)=>{for(let ea=0;ea<et.length;ea++){let ei=er(et[ea],ea);if(ei.isSome())return ei}return I.none()},e8=Object.keys,e5=Object.hasOwnProperty,ge=(et,er)=>{let ea=e8(et);for(let ei=0,es=ea.length;ei<es;ei++){let es=ea[ei];er(et[es],es)}},pe=(et,er)=>he(et,(et,ea)=>({k:ea,v:er(et,ea)})),he=(et,er)=>{let ea={};return ge(et,(et,ei)=>{let es=er(et,ei);ea[es.k]=es.v}),ea},be=et=>(er,ea)=>{et[ea]=er},ve=(et,er,ea,ei)=>{ge(et,(et,es)=>{(er(et,es)?ea:ei)(et,es)})},ye=(et,er)=>{let ea={};return ve(et,er,be(ea),_),ea},Ce=(et,er)=>{let ea=[];return ge(et,(et,ei)=>{ea.push(er(et,ei))}),ea},we=et=>Ce(et,R),xe=(et,er)=>Ee(et,er)?I.from(et[er]):I.none(),Ee=(et,er)=>e5.call(et,er),_e=(et,er)=>Ee(et,er)&&void 0!==et[er]&&null!==et[er],ke=et=>{let er={};return V(et,et=>{er[et]={}}),e8(er)},Se=et=>void 0!==et.length,e6=Array.isArray,Re=(et,er,ea)=>{if(!et)return!1;if(ea=ea||et,Se(et)){for(let ei=0,es=et.length;ei<es;ei++)if(!1===er.call(ea,et[ei],ei,et))return!1}else for(let ei in et)if(Ee(et,ei)&&!1===er.call(ea,et[ei],ei,et))return!1;return!0},Ae=(et,er)=>{let ea=[];return Re(et,(ei,es)=>{ea.push(er(ei,es,et))}),ea},Te=(et,er)=>{let ea=[];return Re(et,(ei,es)=>{er&&!er(ei,es,et)||ea.push(ei)}),ea},Oe=(et,er,ea,ei)=>{let es=eX(ea)?et[0]:ea;for(let ea=0;ea<et.length;ea++)es=er.call(ei,es,et[ea],ea);return es},Be=(et,er,ea)=>{for(let ei=0,es=et.length;ei<es;ei++)if(er.call(ea,et[ei],ei,et))return ei;return -1},Pe=et=>et[et.length-1],De=et=>{let er,ea=!1;return(...ei)=>(ea||(ea=!0,er=et.apply(null,ei)),er)},Le=()=>Me(0,0),Me=(et,er)=>({major:et,minor:er}),e9={nu:Me,detect:(et,er)=>{let ea=String(er).toLowerCase();return 0===et.length?Le():((et,er)=>{let ea=((et,er)=>{for(let ea=0;ea<et.length;ea++){let ei=et[ea];if(ei.test(er))return ei}})(et,er);if(!ea)return{major:0,minor:0};let o=et=>Number(er.replace(ea,"$"+et));return Me(o(1),o(2))})(et,ea)},unknown:Le},Fe=(et,er)=>{let ea=String(er).toLowerCase();return J(et,et=>et.search(ea))},Ue=(et,er,ea)=>""===er||et.length>=er.length&&et.substr(ea,ea+er.length)===er,ze=(et,er)=>{var ea;return He(et,er)?(ea=er.length,et.substring(ea)):et},je=(et,er,ea=0,ei)=>{let es=et.indexOf(er,ea);return -1!==es&&(!!eX(ei)||es+er.length<=ei)},He=(et,er)=>Ue(et,er,0),$e=(et,er)=>Ue(et,er,et.length-er.length),qe=et=>er=>er.replace(et,""),e4=qe(/^\s+|\s+$/g),e7=qe(/^\s+/g),tt=qe(/\s+$/g),Ye=et=>et.length>0,Ge=et=>!Ye(et),Xe=(et,er=10)=>{let ea=parseInt(et,er);return isNaN(ea)?I.none():I.some(ea)},tr=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Je=et=>er=>je(er,et),ti=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:et=>je(et,"edge/")&&je(et,"chrome")&&je(et,"safari")&&je(et,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,tr],search:et=>je(et,"chrome")&&!je(et,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:et=>je(et,"msie")||je(et,"trident")},{name:"Opera",versionRegexes:[tr,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Je("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Je("firefox")},{name:"Safari",versionRegexes:[tr,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:et=>(je(et,"safari")||je(et,"mobile/"))&&je(et,"applewebkit")}],td=[{name:"Windows",search:Je("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:et=>je(et,"iphone")||je(et,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Je("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Je("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Je("linux"),versionRegexes:[]},{name:"Solaris",search:Je("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Je("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Je("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],tc={browsers:N(ti),oses:N(td)},tv="Edge",tC="Chromium",tR="Opera",tI="Firefox",tD="Safari",it=et=>{let er=et.current,ea=et.version,o=et=>()=>er===et;return{current:er,version:ea,isEdge:o(tv),isChromium:o(tC),isIE:o("IE"),isOpera:o(tR),isFirefox:o(tI),isSafari:o(tD)}},lt=()=>it({current:void 0,version:e9.unknown()}),tP=(N(tv),N(tC),N("IE"),N(tR),N(tI),N(tD),"Windows"),tL="Android",tM="Linux",tV="macOS",tF="Solaris",tU="FreeBSD",tH="ChromeOS",bt=et=>{let er=et.current,ea=et.version,o=et=>()=>er===et;return{current:er,version:ea,isWindows:o(tP),isiOS:o("iOS"),isAndroid:o(tL),isMacOS:o(tV),isLinux:o(tM),isSolaris:o(tF),isFreeBSD:o(tU),isChromeOS:o(tH)}},vt=()=>bt({current:void 0,version:e9.unknown()}),tz=(N(tP),N("iOS"),N(tL),N(tM),N(tV),N(tF),N(tU),N(tH),et=>window.matchMedia(et).matches),tj=De(()=>((et,er,ea)=>{let ei=tc.browsers(),es=tc.oses(),ed=er.bind(et=>ue(et.brands,et=>{let er=et.brand.toLowerCase();return J(ei,et=>{var ea;return er===(null===(ea=et.brand)||void 0===ea?void 0:ea.toLowerCase())}).map(er=>({current:er.name,version:e9.nu(parseInt(et.version,10),0)}))})).orThunk(()=>Fe(ei,et).map(er=>{let ea=e9.detect(er.versionRegexes,et);return{current:er.name,version:ea}})).fold(lt,it),ec=Fe(es,et).map(er=>{let ea=e9.detect(er.versionRegexes,et);return{current:er.name,version:ea}}).fold(vt,bt),ev=((et,er,ea,ei)=>{let es=et.isiOS()&&!0===/ipad/i.test(ea),ed=et.isiOS()&&!es,ec=et.isiOS()||et.isAndroid(),ev=ec||ei("(pointer:coarse)"),eC=es||!ed&&ec&&ei("(min-device-width:768px)"),eI=ed||ec&&!eC,eD=er.isSafari()&&et.isiOS()&&!1===/safari/i.test(ea),eP=!eI&&!eC&&!eD;return{isiPad:N(es),isiPhone:N(ed),isTablet:N(eC),isPhone:N(eI),isTouch:N(ev),isAndroid:et.isAndroid,isiOS:et.isiOS,isWebView:N(eD),isDesktop:N(eP)}})(ec,ed,et,ea);return{browser:ed,os:ec,deviceType:ev}})(navigator.userAgent,I.from(navigator.userAgentData),tz)),xt=()=>tj(),t$=navigator.userAgent,tq=xt(),tW=tq.browser,tY=tq.os,tK=tq.deviceType,tX=-1!==t$.indexOf("Windows Phone"),tJ={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tW.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tW.isIE(),windowsPhone:tX,browser:{current:tW.current,version:tW.version,isChromium:tW.isChromium,isEdge:tW.isEdge,isFirefox:tW.isFirefox,isIE:tW.isIE,isOpera:tW.isOpera,isSafari:tW.isSafari},os:{current:tY.current,version:tY.version,isAndroid:tY.isAndroid,isChromeOS:tY.isChromeOS,isFreeBSD:tY.isFreeBSD,isiOS:tY.isiOS,isLinux:tY.isLinux,isMacOS:tY.isMacOS,isSolaris:tY.isSolaris,isWindows:tY.isWindows},deviceType:{isDesktop:tK.isDesktop,isiPad:tK.isiPad,isiPhone:tK.isiPhone,isPhone:tK.isPhone,isTablet:tK.isTablet,isTouch:tK.isTouch,isWebView:tK.isWebView}},tG=/^\s*|\s*$/g,Ot=et=>y(et)?"":(""+et).replace(tG,""),Bt=function(et,er,ea,ei){ei=ei||this,et&&(ea&&(et=et[ea]),Re(et,(et,es)=>!1!==er.call(ei,et,es,ea)&&(Bt(et,er,ea,ei),!0)))},tQ={trim:Ot,isArray:e6,is:(et,er)=>er?!("array"!==er||!e6(et))||typeof et===er:void 0!==et,toArray:et=>{if(e6(et))return et;{let er=[];for(let ea=0,ei=et.length;ea<ei;ea++)er[ea]=et[ea];return er}},makeMap:(et,er,ea={})=>{let ei=e$(et)?et.split(er||","):et||[],es=ei.length;for(;es--;)ea[ei[es]]={};return ea},each:Re,map:Ae,grep:Te,inArray:(et,er)=>{if(et){for(let ea=0,ei=et.length;ea<ei;ea++)if(et[ea]===er)return ea}return -1},hasOwn:Ee,extend:(et,...er)=>{for(let ea=0;ea<er.length;ea++){let ei=er[ea];for(let er in ei)if(Ee(ei,er)){let ea=ei[er];void 0!==ea&&(et[er]=ea)}}return et},walk:Bt,resolve:(et,er=window)=>{let ea=et.split(".");for(let et=0,ei=ea.length;et<ei&&(er=er[ea[et]]);et++);return er},explode:(et,er)=>eW(et)?et:""===et?[]:Ae(et.split(er||","),Ot),_addCacheSuffix:et=>{let er=tJ.cacheSuffix;return er&&(et+=(-1===et.indexOf("?")?"?":"&")+er),et}},Dt=(et,er,ea=A)=>et.exists(et=>ea(et,er)),Lt=(et,er,ea=A)=>Mt(et,er,ea).getOr(et.isNone()&&er.isNone()),Mt=(et,er,ea)=>et.isSome()&&er.isSome()?I.some(ea(et.getOrDie(),er.getOrDie())):I.none(),It=(et,er)=>et?I.some(er):I.none(),tZ="undefined"!=typeof window?window:Function("return this;")(),Ut=(et,er)=>((et,er)=>{let ea=null!=er?er:tZ;for(let er=0;er<et.length&&null!=ea;++er)ea=ea[et[er]];return ea})(et.split("."),er),t0=Object.getPrototypeOf,jt=et=>{let er=Ut("ownerDocument.defaultView",et);return eq(et)&&(((et,er)=>{let ea=Ut(et,er);if(null==ea)throw Error(et+" not available on this browser");return ea})("HTMLElement",er).prototype.isPrototypeOf(et)||/^HTML\w*Element$/.test(t0(et).constructor.name))},Ht=et=>et.dom.nodeName.toLowerCase(),$t=et=>et.dom.nodeType,qt=et=>er=>$t(er)===et,Vt=et=>t1(et)&&jt(et.dom),t1=qt(1),t2=qt(3),t3=qt(9),t8=qt(11),Xt=et=>er=>t1(er)&&Ht(er)===et,Qt=(et,er,ea)=>{if(!(e$(ea)||eK(ea)||eG(ea)))throw console.error("Invalid call to Attribute.set. Key ",er,":: Value ",ea,":: Element ",et),Error("Attribute value was not simple");et.setAttribute(er,ea+"")},Jt=(et,er,ea)=>{Qt(et.dom,er,ea)},Zt=(et,er)=>{let ea=et.dom;ge(er,(et,er)=>{Qt(ea,er,et)})},en=(et,er)=>{let ea=et.dom.getAttribute(er);return null===ea?void 0:ea},tn=(et,er)=>I.from(en(et,er)),nn=(et,er)=>{let ea=et.dom;return!(!ea||!ea.hasAttribute)&&ea.hasAttribute(er)},on=(et,er)=>{et.dom.removeAttribute(er)},rn=et=>X(et.dom.attributes,(et,er)=>(et[er.name]=er.value,et),{}),sn=(et,er)=>{let ea=en(et,er);return void 0===ea||""===ea?[]:ea.split(" ")},an=et=>void 0!==et.dom.classList,ln=et=>sn(et,"class"),dn=(et,er)=>((et,er,ea)=>{let ei=sn(et,er).concat([ea]);return Jt(et,er,ei.join(" ")),!0})(et,"class",er),cn=(et,er)=>((et,er,ea)=>{let ei=Y(sn(et,er),et=>et!==ea);return ei.length>0?Jt(et,er,ei.join(" ")):on(et,er),!1})(et,"class",er),un=(et,er)=>{an(et)?et.dom.classList.add(er):dn(et,er)},mn=et=>{0===(an(et)?et.dom.classList:ln(et)).length&&on(et,"class")},fn=(et,er)=>{an(et)?et.dom.classList.remove(er):cn(et,er),mn(et)},gn=(et,er)=>an(et)&&et.dom.classList.contains(er),pn=et=>{if(null==et)throw Error("Node cannot be null or undefined");return{dom:et}},hn=(et,er)=>{let ea=(er||document).createElement("div");if(ea.innerHTML=et,!ea.hasChildNodes()||ea.childNodes.length>1){let er="HTML does not have a single root node";throw console.error(er,et),Error(er)}return pn(ea.childNodes[0])},bn=(et,er)=>{let ea=(er||document).createElement(et);return pn(ea)},vn=(et,er)=>{let ea=(er||document).createTextNode(et);return pn(ea)},Cn=(et,er,ea)=>I.from(et.dom.elementFromPoint(er,ea)).map(pn),wn=(et,er)=>{let ea=[],o=et=>(ea.push(et),er(et)),ei=er(et);do ei=ei.bind(o);while(ei.isSome());return ea},xn=(et,er)=>{let ea=et.dom;if(1!==ea.nodeType)return!1;if(void 0!==ea.matches)return ea.matches(er);if(void 0!==ea.msMatchesSelector)return ea.msMatchesSelector(er);if(void 0!==ea.webkitMatchesSelector)return ea.webkitMatchesSelector(er);if(void 0!==ea.mozMatchesSelector)return ea.mozMatchesSelector(er);throw Error("Browser lacks native selectors")},En=et=>1!==et.nodeType&&9!==et.nodeType&&11!==et.nodeType||0===et.childElementCount,_n=(et,er)=>et.dom===er.dom,kn=(et,er)=>{let ea=et.dom,ei=er.dom;return ea!==ei&&ea.contains(ei)},Sn=et=>pn(et.dom.ownerDocument),Nn=et=>t3(et)?et:Sn(et),Rn=et=>pn(Nn(et).dom.defaultView),An=et=>I.from(et.dom.parentNode).map(pn),Tn=et=>I.from(et.dom.parentElement).map(pn),On=(et,er)=>{let ea=eJ(er)?er:eQ,ei=et.dom,es=[];for(;null!==ei.parentNode&&void 0!==ei.parentNode;){let et=ei.parentNode,er=pn(et);if(es.push(er),!0===ea(er))break;ei=et}return es},Bn=et=>I.from(et.dom.previousSibling).map(pn),Pn=et=>I.from(et.dom.nextSibling).map(pn),Dn=et=>oe(wn(et,Bn)),Ln=et=>wn(et,Pn),Mn=et=>q(et.dom.childNodes,pn),In=(et,er)=>{let ea=et.dom.childNodes;return I.from(ea[er]).map(pn)},Fn=et=>In(et,0),Un=et=>In(et,et.dom.childNodes.length-1),zn=et=>et.dom.childNodes.length,jn=et=>t8(et)&&C(et.dom.host),t5=eJ(Element.prototype.attachShadow)&&eJ(Node.prototype.getRootNode),t6=N(t5),t9=t5?et=>pn(et.dom.getRootNode()):Nn,Vn=et=>jn(et)?et:(et=>{let er=et.dom.head;if(null==er)throw Error("Head is not available yet");return pn(er)})(Nn(et)),Wn=et=>pn(et.dom.host),Kn=et=>{if(t6()&&C(et.target)){let er=pn(et.target);if(t1(er)&&Yn(er)&&et.composed&&et.composedPath){let er=et.composedPath();if(er)return le(er)}}return I.from(et.target)},Yn=et=>C(et.dom.shadowRoot),Gn=et=>{let er=t2(et)?et.dom.parentNode:et.dom;if(null==er||null===er.ownerDocument)return!1;let ea=er.ownerDocument;return(et=>{let er=t9(et);return jn(er)?I.some(er):I.none()})(pn(er)).fold(()=>ea.body.contains(er),S(Gn,Wn))};var Xn=(et,er,ea,ei,es)=>et(ea,ei)?I.some(ea):eJ(es)&&es(ea)?I.none():er(ea,ei,es);let Qn=(et,er,ea)=>{let ei=et.dom,es=eJ(ea)?ea:eQ;for(;ei.parentNode;){ei=ei.parentNode;let et=pn(ei);if(er(et))return I.some(et);if(es(et))break}return I.none()},Jn=(et,er,ea)=>Xn((et,er)=>er(et),Qn,et,er,ea),Zn=(et,er)=>{let n=et=>{for(let ea=0;ea<et.childNodes.length;ea++){let ei=pn(et.childNodes[ea]);if(er(ei))return I.some(ei);let es=n(et.childNodes[ea]);if(es.isSome())return es}return I.none()};return n(et.dom)},eo=(et,er,ea)=>Qn(et,et=>xn(et,er),ea),to=(et,er)=>((et,er)=>{let ea=void 0===er?document:er.dom;return En(ea)?I.none():I.from(ea.querySelector(et)).map(pn)})(er,et),no=(et,er,ea)=>Xn((et,er)=>xn(et,er),eo,et,er,ea),oo=(et,er=!1)=>Gn(et)?et.dom.isContentEditable:no(et,"[contenteditable]").fold(N(er),et=>"true"===ro(et)),ro=et=>et.dom.contentEditable,so=et=>void 0!==et.style&&eJ(et.style.getPropertyValue),ao=(et,er,ea)=>{if(!e$(ea))throw console.error("Invalid call to CSS.set. Property ",er,":: Value ",ea,":: Element ",et),Error("CSS value must be a string: "+ea);so(et)&&et.style.setProperty(er,ea)},io=(et,er,ea)=>{let ei=et.dom;ao(ei,er,ea)},lo=(et,er)=>{let ea=et.dom;ge(er,(et,er)=>{ao(ea,er,et)})},co=(et,er)=>{let ea=et.dom,ei=window.getComputedStyle(ea).getPropertyValue(er);return""!==ei||Gn(et)?ei:uo(ea,er)},uo=(et,er)=>so(et)?et.style.getPropertyValue(er):"",mo=(et,er)=>{let ea=et.dom,ei=uo(ea,er);return I.from(ei).filter(et=>et.length>0)},fo=et=>{let er={},ea=et.dom;if(so(ea))for(let et=0;et<ea.style.length;et++){let ei=ea.style.item(et);er[ei]=ea.style[ei]}return er},go=(et,er)=>{var ea;so(ea=et.dom)&&ea.style.removeProperty(er),Dt(tn(et,"style").map(e4),"")&&on(et,"style")},po=(et,er)=>{An(et).each(ea=>{ea.dom.insertBefore(er.dom,et.dom)})},ho=(et,er)=>{Pn(et).fold(()=>{An(et).each(et=>{vo(et,er)})},et=>{po(et,er)})},bo=(et,er)=>{Fn(et).fold(()=>{vo(et,er)},ea=>{et.dom.insertBefore(er.dom,ea.dom)})},vo=(et,er)=>{et.dom.appendChild(er.dom)},yo=(et,er)=>{po(et,er),vo(er,et)},Co=(et,er)=>{V(er,er=>{vo(et,er)})},wo=et=>{et.dom.textContent="",V(Mn(et),et=>{xo(et)})},xo=et=>{let er=et.dom;null!==er.parentNode&&er.parentNode.removeChild(er)},Eo=et=>{let er=Mn(et);er.length>0&&V(er,(ea,ei)=>{let es=0===ei?et:er[ei-1];ho(es,ea)}),xo(et)},_o=et=>q(et,pn),ko=et=>et.dom.innerHTML,So=(et,er)=>{let ea=Sn(et).dom,ei=pn(ea.createDocumentFragment()),es=((et,er)=>{let ea=(er||document).createElement("div");return ea.innerHTML=et,Mn(pn(ea))})(er,ea);Co(ei,es),wo(et),vo(et,ei)},No=(et,er,ea,ei)=>((et,er,ea,ei,es)=>{let s=et=>{ea(et)&&ei((et=>{let er=pn(Kn(et).getOr(et.target)),n=()=>et.stopPropagation(),o=()=>et.preventDefault(),ea=k(o,n);return{target:er,x:et.clientX,y:et.clientY,stop:n,prevent:o,kill:ea,raw:et}})(et))};return et.dom.addEventListener(er,s,!1),{unbind:T(Ro,et,er,s,!1)}})(et,er,ea,ei),Ro=(et,er,ea,ei)=>{et.dom.removeEventListener(er,ea,ei)},Ao=(et,er)=>({left:et,top:er,translate:(ea,ei)=>Ao(et+ea,er+ei)}),Oo=(et,er)=>void 0!==et?et:void 0!==er?er:0,Bo=et=>{let er=et.dom,ea=er.ownerDocument.body;return ea===er?Ao(ea.offsetLeft,ea.offsetTop):Gn(et)?(et=>{let er=et.getBoundingClientRect();return Ao(er.left,er.top)})(er):Ao(0,0)},Po=et=>{let er=void 0!==et?et.dom:document,ea=er.body.scrollLeft||er.documentElement.scrollLeft,ei=er.body.scrollTop||er.documentElement.scrollTop;return Ao(ea,ei)},Do=(et,er,ea)=>{let ei=(void 0!==ea?ea.dom:document).defaultView;ei&&ei.scrollTo(et,er)},Lo=(et,er)=>{xt().browser.isSafari()&&eJ(et.dom.scrollIntoViewIfNeeded)?et.dom.scrollIntoViewIfNeeded(!1):et.dom.scrollIntoView(er)},Mo=(et,er,ea,ei)=>({x:et,y:er,width:ea,height:ei,right:et+ea,bottom:er+ei}),Io=et=>{let er=void 0===et?window:et,ea=er.document,ei=Po(pn(ea));return(et=>{let er=void 0===et?window:et;return xt().browser.isFirefox()?I.none():I.from(er.visualViewport)})(er).fold(()=>{let et=er.document.documentElement,ea=et.clientWidth,es=et.clientHeight;return Mo(ei.left,ei.top,ea,es)},et=>Mo(Math.max(et.pageLeft,ei.left),Math.max(et.pageTop,ei.top),et.width,et.height))},Fo=(et,er)=>{let ea=[];return V(Mn(et),et=>{er(et)&&(ea=ea.concat([et])),ea=ea.concat(Fo(et,er))}),ea},Uo=(et,er)=>((et,er)=>{let ea=void 0===er?document:er.dom;return En(ea)?[]:q(ea.querySelectorAll(et),pn)})(er,et),zo=(et,er,ea)=>eo(et,er,ea).isSome();let jo=class jo{constructor(et,er){this.node=et,this.rootNode=er,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(et){return this.node=this.findSibling(this.node,"firstChild","nextSibling",et),this.node}prev(et){return this.node=this.findSibling(this.node,"lastChild","previousSibling",et),this.node}prev2(et){return this.node=this.findPreviousNode(this.node,et),this.node}findSibling(et,er,ea,ei){if(et){if(!ei&&et[er])return et[er];if(et!==this.rootNode){let er=et[ea];if(er)return er;for(let ei=et.parentNode;ei&&ei!==this.rootNode;ei=ei.parentNode)if(er=ei[ea])return er}}}findPreviousNode(et,er){if(et){let ea=et.previousSibling;if(this.rootNode&&ea===this.rootNode)return;if(ea){if(!er){for(let et=ea.lastChild;et;et=et.lastChild)if(!et.lastChild)return et}return ea}let ei=et.parentNode;if(ei&&ei!==this.rootNode)return ei}}};let Ho=et=>er=>!!er&&er.nodeType===et,$o=et=>!!et&&!Object.getPrototypeOf(et),t4=Ho(1),Vo=et=>t4(et)&&Vt(pn(et)),Wo=et=>{let er=et.toLowerCase();return et=>C(et)&&et.nodeName.toLowerCase()===er},Ko=et=>{let er=et.map(et=>et.toLowerCase());return et=>{if(et&&et.nodeName){let ea=et.nodeName.toLowerCase();return H(er,ea)}return!1}},Yo=(et,er)=>{let ea=er.toLowerCase().split(" ");return er=>{if(t4(er)){let ei=er.ownerDocument.defaultView;if(ei)for(let es=0;es<ea.length;es++){let ed=ei.getComputedStyle(er,null);if((ed?ed.getPropertyValue(et):null)===ea[es])return!0}}return!1}},Go=et=>er=>t4(er)&&er.hasAttribute(et),Xo=et=>t4(et)&&et.hasAttribute("data-mce-bogus"),Qo=et=>t4(et)&&"TABLE"===et.tagName,Jo=et=>er=>!!Vo(er)&&(er.contentEditable===et||er.getAttribute("data-mce-contenteditable")===et),t7=Ko(["textarea","input"]),rt=Ho(3),rr=Ho(4),ra=Ho(7),ri=Ho(8),rs=Ho(9),rd=Ho(11),rc=Wo("br"),rp=Wo("img"),ry=Jo("true"),rC=Jo("false"),r_=Ko(["td","th"]),rR=Ko(["td","th","caption"]),rI=Ko(["video","audio","object","embed"]),rB=Wo("li"),rD=Wo("details"),rP=Wo("summary"),vr=et=>"\uFEFF"===et,rL=((et,er)=>{let n=er=>et(er)?I.from(er.dom.nodeValue):I.none();return{get:er=>{if(!et(er))throw Error("Can only get text value of a text node");return n(er).getOr("")},getOption:n,set:(er,ea)=>{if(!et(er))throw Error("Can only set raw text value of a text node");er.dom.nodeValue=ea}}})(t2),Cr=et=>rL.get(et),wr=et=>rL.getOption(et),xr=et=>{let er;return ea=>Ee(er=er||se(et,eZ),Ht(ea))},Er=et=>t1(et)&&"br"===Ht(et),rM=xr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),rV=xr(["ul","ol","dl"]),rF=xr(["li","dd","dt"]),rU=xr(["thead","tbody","tfoot"]),rH=xr(["td","th"]),rz=xr(["pre","script","textarea","style"]),Tr=()=>{let et=bn("br");return Jt(et,"data-mce-bogus","1"),et},Or=et=>{wo(et),vo(et,Tr())},Dr=et=>et.replace(/\uFEFF/g,""),Ir=et=>(rt(et)&&(et=et.parentNode),t4(et)&&et.hasAttribute("data-mce-caret")),Fr=et=>rt(et)&&vr(et.data),Ur=et=>Ir(et)||Fr(et),zr=et=>et.firstChild!==et.lastChild||!rc(et.firstChild),jr=et=>{let er=et.container();return!!rt(er)&&("\uFEFF"===er.data.charAt(et.offset())||et.isAtStart()&&Fr(er.previousSibling))},Hr=et=>{let er=et.container();return!!rt(er)&&("\uFEFF"===er.data.charAt(et.offset()-1)||et.isAtEnd()&&Fr(er.nextSibling))},$r=et=>rt(et)&&"\uFEFF"===et.data[0],qr=et=>rt(et)&&"\uFEFF"===et.data[et.data.length-1],Vr=et=>et&&et.hasAttribute("data-mce-caret")?((et=>{var er;let ea=et.getElementsByTagName("br"),ei=ea[ea.length-1];Xo(ei)&&(null===(er=ei.parentNode)||void 0===er||er.removeChild(ei))})(et),et.removeAttribute("data-mce-caret"),et.removeAttribute("data-mce-bogus"),et.removeAttribute("style"),et.removeAttribute("data-mce-style"),et.removeAttribute("_moz_abspos"),et):null,Wr=et=>Ir(et.startContainer),rj=Ko(["script","style","textarea"]),r$=Ko(["img","input","textarea","hr","iframe","video","audio","object","embed"]),rq=Ko(["table"]),ts=et=>!Ur(et)&&(rt(et)?!rj(et.parentNode):r$(et)||rc(et)||rq(et)||ns(et)),ns=et=>(!t4(et)||"true"!==et.getAttribute("unselectable"))&&rC(et),os=(et,er)=>ts(et)&&((et,er)=>{for(let ea=et.parentNode;ea&&ea!==er;ea=ea.parentNode){if(ns(ea))return!1;if(ry(ea))break}return!0})(et,er),rW=/^[ \t\r\n]*$/,ss=et=>rW.test(et),as=et=>{for(let er of et)if(!vr(er))return!1;return!0},is=et=>"\n"===et||"\r"===et,ls=(et,er=4,ea=!0,ei=!0)=>{let es=er<=0?"":Array(er+1).join(" "),ed=et.replace(/\t/g,es),ec=X(ed,(et,er)=>{var es;return -1!==" \f	\v".indexOf(er)||"\xa0"===er?et.pcIsSpace||""===et.str&&ea||et.str.length===ed.length-1&&ei||(es=et.str.length+1)<ed.length&&es>=0&&is(ed[es])?{pcIsSpace:!1,str:et.str+"\xa0"}:{pcIsSpace:!0,str:et.str+" "}:{pcIsSpace:is(er),str:et.str+er}},{pcIsSpace:!1,str:""});return ec.str},ds=(et,er)=>ts(et)&&(!(rt(et)&&ss(et.data))||!!((et,er)=>{let ea=pn(er),ei=pn(et);return zo(ei,"pre,code",T(_n,ea))})(et,er))||t4(et)&&"A"===et.nodeName&&!et.hasAttribute("href")&&(et.hasAttribute("name")||et.hasAttribute("id"))||rY(et),rY=Go("data-mce-bookmark"),rK=Go("data-mce-bogus"),ms=et=>t4(et)&&"all"===et.getAttribute("data-mce-bogus"),fs=et=>Tn(pn(et)).exists(et=>!oo(et)),gs=(et,er=!0)=>((et,er)=>{let ea=0;if(ds(et,et))return!1;{let ei=et.firstChild;if(!ei)return!0;let es=new jo(ei,et);do{if(er){if(ms(ei)){ei=es.next(!0);continue}if(rK(ei)){ei=es.next();continue}}if(ry(ei)&&fs(ei))return!1;if(rc(ei))ea++,ei=es.next();else{if(ds(ei,et))return!1;ei=es.next()}}while(ei);return ea<=1}})(et.dom,er),ps=et=>"svg"===et.toLowerCase(),hs=et=>ps(et.nodeName),bs=et=>"svg"===(null==et?void 0:et.nodeName)?"svg":"html",rX=["svg"],rJ="data-mce-block",Cs=et=>q(Y(e8(et),et=>!/[A-Z]/.test(et)),et=>`${et}:`+q(rX,er=>`not(${er} ${et})`).join(":")).join(","),ws=(et,er)=>C(er.querySelector(et))?(er.setAttribute(rJ,"true"),"inline-boundary"===er.getAttribute("data-mce-selected")&&er.removeAttribute("data-mce-selected"),!0):(er.removeAttribute(rJ),!1),xs=(et,er)=>{let ea=Cs(et.getTransparentElements()),ei=Cs(et.getBlockElements());return Y(er.querySelectorAll(ea),et=>ws(ei,et))},Es=(et,er)=>{var ea;let ei=er?"lastChild":"firstChild";for(let er=et[ei];er;er=er[ei])if(gs(pn(er)))return void(null===(ea=er.parentNode)||void 0===ea||ea.removeChild(er))},_s=(et,er,ea)=>{let ei=et.getBlockElements(),es=pn(er),s=et=>Ht(et) in ei,a=et=>_n(et,es);V(_o(ea),er=>{Qn(er,s,a).each(ea=>{let ei=Y(Mn(er),er=>s(er)&&!et.isValidChild(Ht(ea),Ht(er)));if(ei.length>0){let er=Tn(ea);V(ei,et=>{Qn(et,s,a).each(er=>{((et,er)=>{let ea=document.createRange(),ei=et.parentNode;if(ei){ea.setStartBefore(et),ea.setEndBefore(er);let es=ea.extractContents();Es(es,!0),ea.setStartAfter(er),ea.setEndAfter(et);let ed=ea.extractContents();Es(ed,!1),gs(pn(es))||ei.insertBefore(es,et),gs(pn(er))||ei.insertBefore(er,et),gs(pn(ed))||ei.insertBefore(ed,et),ei.removeChild(et)}})(er.dom,et.dom)})}),er.each(er=>xs(et,er.dom))}})})},ks=(et,er)=>{let ea=xs(et,er);_s(et,er,ea),V([...ea,...Ts(et,er)?[er]:[]],er=>V(Uo(pn(er),er.nodeName.toLowerCase()),er=>{Os(et,er.dom)&&Eo(er)}))},Ss=(et,er)=>{if(As(et,er)){let ea=Cs(et.getBlockElements());ws(ea,er)}},Ns=et=>et.hasAttribute(rJ),Rs=(et,er)=>Ee(et.getTransparentElements(),er),As=(et,er)=>t4(er)&&Rs(et,er.nodeName),Ts=(et,er)=>As(et,er)&&Ns(er),Os=(et,er)=>As(et,er)&&!Ns(er),Bs=(et,er)=>1===er.type&&Rs(et,er.name)&&e$(er.attr(rJ)),rG=xt().browser,Ds=et=>J(et,t1),Ls=(et,er)=>et.children&&H(et.children,er),Ms=(et,er={})=>{let ea=0,ei={},es=pn(et),ed=Nn(es),a=et=>{vo(Vn(es),et)},i=et=>{let er=Vn(es);to(er,"#"+et).each(xo)},l=et=>xe(ei,et).getOrThunk(()=>({id:"mce-u"+ea++,passed:[],failed:[],count:0})),d=et=>new Promise((ea,es)=>{let ec;let ev=tQ._addCacheSuffix(et),eC=l(ev);ei[ev]=eC,eC.count++;let u=(et,er)=>{V(et,D),eC.status=er,eC.passed=[],eC.failed=[],ec&&(ec.onload=null,ec.onerror=null,ec=null)},m=()=>u(eC.passed,2),f=()=>u(eC.failed,3);if(ea&&eC.passed.push(ea),es&&eC.failed.push(es),1===eC.status)return;if(2===eC.status)return void m();if(3===eC.status)return void f();eC.status=1;let eI=bn("link",ed.dom);Zt(eI,{rel:"stylesheet",type:"text/css",id:eC.id}),er.contentCssCors&&Jt(eI,"crossOrigin","anonymous"),er.referrerPolicy&&Jt(eI,"referrerpolicy",er.referrerPolicy),(ec=eI.dom).onload=m,ec.onerror=f,a(eI),Jt(eI,"href",ev)}),c=et=>{let er=tQ._addCacheSuffix(et);xe(ei,er).each(et=>{0==--et.count&&(delete ei[er],i(et.id))})};return{load:d,loadRawCss:(et,er)=>{let ea=l(et);ei[et]=ea,ea.count++;let es=bn("style",ed.dom);Zt(es,{rel:"stylesheet",type:"text/css",id:ea.id}),es.dom.innerHTML=er,a(es)},loadAll:et=>Promise.allSettled(q(et,et=>d(et).then(N(et)))).then(et=>{let er=K(et,et=>"fulfilled"===et.status);return er.fail.length>0?Promise.reject(q(er.fail,et=>et.reason)):q(er.pass,et=>et.value)}),unload:c,unloadRawCss:et=>{xe(ei,et).each(er=>{0==--er.count&&(delete ei[et],i(er.id))})},unloadAll:et=>{V(et,et=>{c(et)})},_setReferrerPolicy:et=>{er.referrerPolicy=et},_setContentCssCors:et=>{er.contentCssCors=et}}},rQ=(()=>{let et=new WeakMap;return{forElement:(er,ea)=>{let ei=t9(er).dom;return I.from(et.get(ei)).getOrThunk(()=>{let er=Ms(ei,ea);return et.set(ei,er),er})}}})(),Fs=(et,er,ea)=>C(et)&&(ds(et,er)||ea.isInline(et.nodeName.toLowerCase())),Us=et=>"span"===et.nodeName.toLowerCase()&&"bookmark"===et.getAttribute("data-mce-type"),zs=(et,er,ea,ei)=>{var es;let ed=ei||er;if(t4(er)&&Us(er))return er;let ec=er.childNodes;for(let er=ec.length-1;er>=0;er--)zs(et,ec[er],ea,ed);if(t4(er)){let et=er.childNodes;1===et.length&&Us(et[0])&&(null===(es=er.parentNode)||void 0===es||es.insertBefore(et[0],er))}return rd(er)||rs(er)||ds(er,ed)||t4(er)&&er.childNodes.length>0||rt(er)&&er.data.length>0&&((et,er,ea)=>{let ei=new jo(et,er).prev(!1),es=new jo(et,er).next(!1),ed=eX(ei)||Fs(ei,er,ea),ec=eX(es)||Fs(es,er,ea);return ed&&ec})(er,ed,ea)||et.remove(er),er},rZ=tQ.makeMap,r0=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r1=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,r2=/[<>&\"\']/g,r3=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,r8={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},r5={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},r6={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Gs=(et,er)=>{let ea={};if(et){let ei=et.split(",");er=er||10;for(let et=0;et<ei.length;et+=2){let es=String.fromCharCode(parseInt(ei[et],er));if(!r5[es]){let er="&"+ei[et+1]+";";ea[es]=er,ea[er]=es}}return ea}},r9=Gs("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Qs=(et,er)=>et.replace(er?r0:r1,et=>r5[et]||et),Js=(et,er)=>et.replace(er?r0:r1,et=>et.length>1?"&#"+(1024*(et.charCodeAt(0)-55296)+(et.charCodeAt(1)-56320)+65536)+";":r5[et]||"&#"+et.charCodeAt(0)+";"),Zs=(et,er,ea)=>{let ei=ea||r9;return et.replace(er?r0:r1,et=>r5[et]||ei[et]||et)},r4={encodeRaw:Qs,encodeAllRaw:et=>(""+et).replace(r2,et=>r5[et]||et),encodeNumeric:Js,encodeNamed:Zs,getEncodeFunc:(et,er)=>{let ea=Gs(er)||r9,ei=rZ(et.replace(/\+/g,","));return ei.named&&ei.numeric?(et,er)=>et.replace(er?r0:r1,et=>void 0!==r5[et]?r5[et]:void 0!==ea[et]?ea[et]:et.length>1?"&#"+(1024*(et.charCodeAt(0)-55296)+(et.charCodeAt(1)-56320)+65536)+";":"&#"+et.charCodeAt(0)+";"):ei.named?er?(et,er)=>Zs(et,er,ea):Zs:ei.numeric?Js:Qs},decode:et=>et.replace(r3,(et,er)=>er?(er="x"===er.charAt(0).toLowerCase()?parseInt(er.substr(1),16):parseInt(er,10))>65535?String.fromCharCode(55296+((er-=65536)>>10),56320+(1023&er)):r8[er]||String.fromCharCode(er):r6[et]||r9[et]||(et=>{let er=bn("div").dom;return er.innerHTML=et,er.textContent||er.innerText||et})(et))},ta=(et,er)=>(et=tQ.trim(et))?et.split(er||" "):[],na=et=>RegExp("^"+et.replace(/([?+*])/g,".$1")+"$"),r7={},nt=tQ.makeMap,nr=tQ.each,ni=tQ.extend,nd=tQ.explode,la=(et,er={})=>{let ea=nt(et," ",nt(et.toUpperCase()," "));return ni(ea,er)},da=et=>la("td th li dt dd figcaption caption details summary",et.getTextBlockElements()),ca=(et,er)=>{if(et){let ea={};return e$(et)&&(et={"*":et}),nr(et,(et,ei)=>{ea[ei]=ea[ei.toUpperCase()]="map"===er?nt(et,/[, ]/):nd(et,/[, ]/)}),ea}},ua=(et={})=>{var er;let ea={},ei={},es=[],ed={},ec={},i=(er,ea,ei)=>{let es=et[er];if(es)return nt(es,/[, ]/,nt(es.toUpperCase(),/[, ]/));{let et=r7[er];return et||(et=la(ea,ei),r7[er]=et),et}},ev=null!==(er=et.schema)&&void 0!==er?er:"html5",eC=(et=>{let{globalAttributes:er,phrasingContent:ea,flowContent:ei}=(et=>{let er,ea,ei;er="id accesskey class dir lang style tabindex title role",ea="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",ei="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==et&&(er+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",ea+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",ei+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==et&&(er+=" xml:lang",ei=[ei,"acronym applet basefont big font strike tt"].join(" "),ea=[ea,"center dir isindex noframes"].join(" "));let es=[ea,ei].join(" ");return{globalAttributes:er,blockContent:ea,phrasingContent:ei,flowContent:es}})(et),es={},s=(et,er,ea)=>{es[et]={attributes:se(er,N({})),attributesOrder:er,children:se(ea,N({}))}},a=(et,ea="",ei="")=>{let es=ta(ei),ed=ta(et),ec=ed.length,ev=ta([er,ea].join(" "));for(;ec--;)s(ed[ec],ev.slice(),es)},i=(et,er)=>{let ea=ta(et),ei=ta(er),ed=ea.length;for(;ed--;){let et=es[ea[ed]];for(let er=0,ea=ei.length;er<ea;er++)et.attributes[ei[er]]={},et.attributesOrder.push(ei[er])}};return"html5-strict"!==et&&(V(ta("acronym applet basefont big font strike tt"),et=>{a(et,"",ea)}),V(ta("center dir isindex noframes"),et=>{a(et,"",ei)})),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",ei),a("dd div","",ei),a("address dt caption","","html4"===et?ea:ei),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",ea),a("blockquote","cite",ei),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",ei),a("dl","","dt dd"),a("a","href target rel media hreflang type","html4"===et?ea:ei),a("q","cite",ea),a("ins del","cite datetime",ei),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",ei),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[ei,"param"].join(" ")),a("param","name value"),a("map","name",[ei,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===et?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",ei),a("th","colspan rowspan headers scope abbr",ei),a("form","accept-charset action autocomplete enctype method name novalidate target",ei),a("fieldset","disabled form name",[ei,"legend"].join(" ")),a("label","form for",ea),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===et?ei:ea),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[ei,"li"].join(" ")),a("noscript","",ei),"html4"!==et&&(a("wbr"),a("ruby","",[ea,"rt rp"].join(" ")),a("figcaption","",ei),a("mark rt rp bdi","",ea),a("summary","",[ea,"h1 h2 h3 h4 h5 h6"].join(" ")),a("canvas","width height",ei),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[ei,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[ei,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[ea,"option"].join(" ")),a("article section nav aside main header footer","",ei),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[ei,"figcaption"].join(" ")),a("time","datetime",ea),a("dialog","open",ei),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",ea),a("progress","value max",ea),a("meter","value min max low high optimum",ea),a("details","open",[ei,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name"),s("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==et&&(i("script","language xml:space"),i("style","xml:space"),i("object","declare classid code codebase codetype archive standby align border hspace vspace"),i("embed","align name hspace vspace"),i("param","valuetype type"),i("a","charset name rev shape coords"),i("br","clear"),i("applet","codebase archive code object alt name width height align hspace vspace"),i("img","name longdesc align border hspace vspace"),i("iframe","longdesc frameborder marginwidth marginheight scrolling align"),i("font basefont","size color face"),i("input","usemap align"),i("select"),i("textarea"),i("h1 h2 h3 h4 h5 h6 div p legend caption","align"),i("ul","type compact"),i("li","type"),i("ol dl menu dir","compact"),i("pre","width xml:space"),i("hr","align noshade size width"),i("isindex","prompt"),i("table","summary width frame rules cellspacing cellpadding align bgcolor"),i("col","width align char charoff valign"),i("colgroup","width align char charoff valign"),i("thead","align char charoff valign"),i("tr","align char charoff valign bgcolor"),i("th","axis align char charoff valign nowrap bgcolor width height"),i("form","accept"),i("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),i("tfoot","align char charoff valign"),i("tbody","align char charoff valign"),i("area","nohref"),i("body","background bgcolor text link vlink alink")),"html4"!==et&&(i("input button select textarea","autofocus"),i("input textarea","placeholder"),i("a","download"),i("link script img","crossorigin"),i("img","loading"),i("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==et&&V([es.video,es.audio],et=>{delete et.children.audio,delete et.children.video}),V(ta("a form meter progress dfn"),et=>{es[et]&&delete es[et].children[et]}),delete es.caption.children.table,delete es.script,es})(ev);!1===et.verify_html&&(et.valid_elements="*[*]");let eI=ca(et.valid_styles),eD=ca(et.invalid_styles,"map"),eP=ca(et.valid_classes,"map"),eL=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),eM=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),eV=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),eF=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),eU="td th iframe video audio object script code",eH=i("non_empty_elements",eU+" pre svg",eV),ez=i("move_caret_before_on_enter_elements",eU+" table",eV),ej="h1 h2 h3 h4 h5 h6",e$=i("text_block_elements",ej+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),eq=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",e$),eW=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),eY=i("transparent_elements","a ins del canvas map"),eK=i("wrap_block_elements","pre "+ej);nr("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),et=>{ec[et]=RegExp("</"+et+"[^>]*>","gi")});let S=et=>{let er=I.from(ea["@"]),ei=/[*?+]/;V(((et,er)=>{let ea=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return te(ta(er,","),er=>{let ei=ea.exec(er);if(ei){let er=ei[1],ea=ei[2],es=ei[3],ed=ei[4],ec=ei[5],ev={attributes:{},attributesOrder:[]};if(et.each(et=>{ge(et.attributes,(et,er)=>{ev.attributes[er]=et}),ev.attributesOrder.push(...et.attributesOrder)}),"#"===er?ev.paddEmpty=!0:"-"===er&&(ev.removeEmpty=!0),"!"===ed&&(ev.removeEmptyAttrs=!0),ec&&((et,er)=>{let ea=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,ei=/[*?+]/,{attributes:es,attributesOrder:ed}=er;V(ta(et,"|"),et=>{let ec=ea.exec(et);if(ec){let et={},ea=ec[1],ev=ec[2].replace(/[\\:]:/g,":"),eC=ec[3],eI=ec[4];if("!"===ea&&(er.attributesRequired=er.attributesRequired||[],er.attributesRequired.push(ev),et.required=!0),"-"===ea)return delete es[ev],void ed.splice(tQ.inArray(ed,ev),1);(eC&&("="===eC?(er.attributesDefault=er.attributesDefault||[],er.attributesDefault.push({name:ev,value:eI}),et.defaultValue=eI):"~"===eC?(er.attributesForced=er.attributesForced||[],er.attributesForced.push({name:ev,value:eI}),et.forcedValue=eI):"<"===eC&&(et.validValues=tQ.makeMap(eI,"?"))),ei.test(ev))?(er.attributePatterns=er.attributePatterns||[],et.pattern=na(ev),er.attributePatterns.push(et)):(es[ev]||ed.push(ev),es[ev]=et)}})})(ec,ev),es&&(ev.outputName=ea),"@"===ea){if(!et.isNone())return[];et=I.some(ev)}return[es?{name:ea,element:ev,aliasName:es}:{name:ea,element:ev}]}return[]})})(er,null!=et?et:""),({name:et,element:er,aliasName:ed})=>{(ed&&(ea[ed]=er),ei.test(et))?(er.pattern=na(et),es.push(er)):ea[et]=er})},R=et=>{es=[],V(e8(ea),et=>{delete ea[et]}),S(et)},A=et=>{delete r7.text_block_elements,delete r7.block_elements,V((et=>{let er=/^(~)?(.+)$/;return te(ta(et,","),et=>{let ea=er.exec(et);if(ea){let et="~"===ea[1];return[{inline:et,cloneName:et?"span":"div",name:ea[2]}]}return[]})})(null!=et?et:""),({inline:et,name:er,cloneName:es})=>{if(ei[er]=ei[es],ed[er]=es,eH[er.toUpperCase()]={},eH[er]={},et||(eq[er.toUpperCase()]={},eq[er]={}),!ea[er]){let et=ea[es];et=ni({},et),delete et.removeEmptyAttrs,delete et.removeEmpty,ea[er]=et}ge(ei,(et,ea)=>{et[es]&&(ei[ea]=et=ni({},ei[ea]),et[er]=et[es])})})},T=et=>{V((et=>{let er=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return te(ta(et,","),et=>{let ea=er.exec(et);if(ea){let et=ea[1];return[{operation:et?"-"===et?"remove":"add":"replace",name:ea[2],validChildren:ta(ea[3],"|")}]}return[]})})(null!=et?et:""),({operation:et,name:er,validChildren:ea})=>{let es="replace"===et?{"#comment":{}}:ei[er];V(ea,er=>{"remove"===et?delete es[er]:es[er]={}}),ei[er]=es})},O=et=>{let er=ea[et];if(er)return er;let ei=es.length;for(;ei--;){let er=es[ei];if(er.pattern.test(et))return er}};et.valid_elements?(R(et.valid_elements),nr(eC,(et,er)=>{ei[er]=et.children})):(nr(eC,(et,er)=>{ea[er]={attributes:et.attributes,attributesOrder:et.attributesOrder},ei[er]=et.children}),nr(ta("strong/b em/i"),et=>{let er=ta(et,"/");ea[er[1]].outputName=er[0]}),nr(eW,(er,ei)=>{ea[ei]&&(et.padd_empty_block_inline_children&&(ea[ei].paddInEmptyBlock=!0),ea[ei].removeEmpty=!0)}),nr(ta("ol ul blockquote a table tbody"),et=>{ea[et]&&(ea[et].removeEmpty=!0)}),nr(ta("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),et=>{ea[et]&&(ea[et].paddEmpty=!0)}),nr(ta("span"),et=>{ea[et].removeEmptyAttrs=!0})),delete ea.svg,A(et.custom_elements),T(et.valid_children),S(et.extended_valid_elements),T("+ol[ul|ol],+ul[ul|ol]"),nr({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(et,er)=>{ea[er]&&(ea[er].parentsRequired=ta(et))}),et.invalid_elements&&nr(nd(et.invalid_elements),et=>{ea[et]&&delete ea[et]}),O("span")||S("span[!data-mce-type|*]");let eX=N(eI),eJ=N(eD),eG=N(eP),eQ=N(eF),eZ=N(eq),e0=N(e$),e1=N(eW),e2=N(Object.seal(eV)),e3=N(eM),e5=N(eH),e6=N(ez),e9=N(eL),e4=N(eY),e7=N(eK),tt=N(Object.seal(ec)),G=(et,er)=>{let ea=O(et);if(ea){if(!er)return!0;{if(ea.attributes[er])return!0;let et=ea.attributePatterns;if(et){let ea=et.length;for(;ea--;)if(et[ea].pattern.test(er))return!0}}}return!1},X=et=>Ee(eZ(),et),Q=et=>!He(et,"#")&&G(et)&&!X(et),tr=N(ed);return{type:ev,children:ei,elements:ea,getValidStyles:eX,getValidClasses:eG,getBlockElements:eZ,getInvalidStyles:eJ,getVoidElements:e2,getTextBlockElements:e0,getTextInlineElements:e1,getBoolAttrs:eQ,getElementRule:O,getSelfClosingElements:e3,getNonEmptyElements:e5,getMoveCaretBeforeOnEnterElements:e6,getWhitespaceElements:e9,getTransparentElements:e4,getSpecialElements:tt,isValidChild:(et,er)=>{let ea=ei[et.toLowerCase()];return!(!ea||!ea[er.toLowerCase()])},isValid:G,isBlock:X,isInline:Q,isWrapper:et=>Ee(e7(),et)||Q(et),getCustomElements:tr,addValidElements:S,setValidElements:R,addCustomElements:A,addValidChildren:T}},ma=et=>{let er=et.toString(16);return(1===er.length?"0"+er:er).toUpperCase()},fa=et=>({value:ze(ma(et.red)+ma(et.green)+ma(et.blue),"#").toUpperCase()}),nc=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,nu=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,ha=(et,er,ea,ei)=>({red:et,green:er,blue:ea,alpha:ei}),ba=(et,er,ea,ei)=>{let es=parseInt(et,10),ed=parseInt(er,10),ec=parseInt(ea,10),ev=parseFloat(ei);return ha(es,ed,ec,ev)},va=et=>{if("transparent"===et)return I.some(ha(0,0,0,0));let er=nc.exec(et);if(null!==er)return I.some(ba(er[1],er[2],er[3],"1"));let ea=nu.exec(et);return null!==ea?I.some(ba(ea[1],ea[2],ea[3],ea[4])):I.none()},ya=et=>`rgba(${et.red},${et.green},${et.blue},${et.alpha})`,Ca=et=>va(et).map(fa).map(et=>"#"+et.value).getOr(et),wa=(et={},er)=>{let ea,ei;let es=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,ed=/\s*([^:]+):\s*([^;]+);?/g,ec=/\s+$/,ev={};er&&(ea=er.getValidStyles(),ei=er.getInvalidStyles());let eC="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let et=0;et<eC.length;et++)ev[eC[et]]="\uFEFF"+et,ev["\uFEFF"+et]=eC[et];let eI={parse:er=>{var ea,ei,eC;let eD={},eP=!1,eL=et.url_converter,eM=et.url_converter_scope||eI,f=(et,er,ea)=>{let ei=eD[et+"-top"+er];if(!ei)return;let es=eD[et+"-right"+er];if(!es)return;let ed=eD[et+"-bottom"+er];if(!ed)return;let ec=eD[et+"-left"+er];if(!ec)return;let ev=[ei,es,ed,ec],eC=ev.length-1;for(;eC--&&ev[eC]===ev[eC+1];);eC>-1&&ea||(eD[et+er]=-1===eC?ev[0]:ev.join(" "),delete eD[et+"-top"+er],delete eD[et+"-right"+er],delete eD[et+"-bottom"+er],delete eD[et+"-left"+er])},g=et=>{let er=eD[et];if(!er)return;let ea=er.indexOf(",")>-1?[er]:er.split(" "),ei=ea.length;for(;ei--;)if(ea[ei]!==ea[0])return!1;return eD[et]=ea[0],!0},p=et=>(eP=!0,ev[et]),h=(et,er)=>(eP&&(et=et.replace(/\uFEFF[0-9]/g,et=>ev[et])),er||(et=et.replace(/\\([\'\";:])/g,"$1")),et),b=et=>String.fromCharCode(parseInt(et.slice(1),16)),v=et=>et.replace(/\\[0-9a-f]+/gi,b),y=(er,ea,ei,es,ed,ec)=>{if(ed=ed||ec)return"'"+(ed=h(ed)).replace(/\'/g,"\\'")+"'";if(ea=h(ea||ei||es||""),!et.allow_script_urls){let er=ea.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(er)||!et.allow_svg_data_urls&&/^data:image\/svg/i.test(er))return""}return eL&&(ea=eL.call(eM,ea,"style")),"url('"+ea.replace(/\'/g,"\\'")+"')"};if(er){let ev;for(er=(er=er.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,p).replace(/\"[^\"]+\"|\'[^\']+\'/g,et=>et.replace(/[;:]/g,p));ev=ed.exec(er);){ed.lastIndex=ev.index+ev[0].length;let er=ev[1].replace(ec,"").toLowerCase(),ea=ev[2].replace(ec,"");if(er&&ea){if(er=v(er),ea=v(ea),-1!==er.indexOf("\uFEFF")||-1!==er.indexOf('"')||!et.allow_script_urls&&("behavior"===er||/expression\s*\(|\/\*|\*\//.test(ea)))continue;"font-weight"===er&&"700"===ea?ea="bold":"color"!==er&&"background-color"!==er||(ea=ea.toLowerCase()),e$(et.force_hex_color)&&"off"!==et.force_hex_color&&va(ea).each(er=>{"always"!==et.force_hex_color&&1!==er.alpha||(ea=Ca(ya(er)))}),ea=ea.replace(es,y),eD[er]=eP?h(ea,!0):ea}}f("border","",!0),f("border","-width"),f("border","-color"),f("border","-style"),f("padding",""),f("margin",""),ei="border-style",eC="border-color",g(ea="border-width")&&g(ei)&&g(eC)&&(eD.border=eD[ea]+" "+eD[ei]+" "+eD[eC],delete eD[ea],delete eD[ei],delete eD[eC]),"medium none"===eD.border&&delete eD.border,"none"===eD["border-image"]&&delete eD["border-image"]}return eD},serialize:(et,er)=>{let es="",o=(er,ea)=>{let ei=ea[er];if(ei)for(let er=0,ea=ei.length;er<ea;er++){let ea=ei[er],ed=et[ea];ed&&(es+=(es.length>0?" ":"")+ea+": "+ed+";")}};return er&&ea?(o("*",ea),o(er,ea)):ge(et,(et,ea)=>{et&&((et,er)=>{if(!ei||!er)return!0;let ea=ei["*"];return!(ea&&ea[et]||(ea=ei[er])&&ea[et])})(ea,er)&&(es+=(es.length>0?" ":"")+ea+": "+et+";")}),es}};return eI},nv={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Ea=(et,er)=>{let ea=null!=er?er:{};for(let er in et)Ee(nv,er)||(ea[er]=et[er]);return C(et.composedPath)&&(ea.composedPath=()=>et.composedPath()),C(et.getModifierState)&&(ea.getModifierState=er=>et.getModifierState(er)),C(et.getTargetRanges)&&(ea.getTargetRanges=()=>et.getTargetRanges()),ea},_a=(et,er,ea,ei)=>{var es;let ed=Ea(er,ei);return ed.type=et,y(ed.target)&&(ed.target=null!==(es=ed.srcElement)&&void 0!==es?es:ea),(y(er.preventDefault)||er instanceof Event||eJ(er.initEvent))&&(ed.preventDefault=()=>{ed.defaultPrevented=!0,ed.isDefaultPrevented=eZ,eJ(er.preventDefault)&&er.preventDefault()},ed.stopPropagation=()=>{ed.cancelBubble=!0,ed.isPropagationStopped=eZ,eJ(er.stopPropagation)&&er.stopPropagation()},ed.stopImmediatePropagation=()=>{ed.isImmediatePropagationStopped=eZ,ed.stopPropagation()},ed.isDefaultPrevented===eZ||ed.isDefaultPrevented===eQ||(ed.isDefaultPrevented=!0===ed.defaultPrevented?eZ:eQ,ed.isPropagationStopped=!0===ed.cancelBubble?eZ:eQ,ed.isImmediatePropagationStopped=eQ)),ed},ny=/^(?:mouse|contextmenu)|click/,Sa=(et,er,ea,ei)=>{et.addEventListener(er,ea,ei||!1)},Na=(et,er,ea,ei)=>{et.removeEventListener(er,ea,ei||!1)},Ra=(et,er)=>{let ea=_a(et.type,et,document,er);if(C(et)&&ny.test(et.type)&&eX(et.pageX)&&!eX(et.clientX)){let er=ea.target.ownerDocument||document,ei=er.documentElement,es=er.body;ea.pageX=et.clientX+(ei&&ei.scrollLeft||es&&es.scrollLeft||0)-(ei&&ei.clientLeft||es&&es.clientLeft||0),ea.pageY=et.clientY+(ei&&ei.scrollTop||es&&es.scrollTop||0)-(ei&&ei.clientTop||es&&es.clientTop||0)}return ea},Aa=(et,er,ea)=>{let ei=et.document,es={type:"ready"};if(ea.domLoaded)return void er(es);let s=()=>{Na(et,"DOMContentLoaded",s),Na(et,"load",s),ea.domLoaded||(ea.domLoaded=!0,er(es)),et=null};"complete"===ei.readyState||"interactive"===ei.readyState&&ei.body?s():Sa(et,"DOMContentLoaded",s),ea.domLoaded||Sa(et,"load",s)};let Ta=class Ta{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(et,er,ea,ei){let es,ed;let ec=this,ev=window,i=et=>{ec.executeHandlers(Ra(et||ev.event),ed)};if(!et||rt(et)||ri(et))return ea;et[ec.expando]?ed=et[ec.expando]:(ed=ec.count++,et[ec.expando]=ed,ec.events[ed]={}),ei=ei||et;let eC=er.split(" "),eI=eC.length;for(;eI--;){let er=eC[eI],eD=i,eP=!1,eL=!1;"DOMContentLoaded"===er&&(er="ready"),ec.domLoaded&&"ready"===er&&"complete"===et.readyState?ea.call(ei,Ra({type:er})):(ec.hasFocusIn||"focusin"!==er&&"focusout"!==er||(eP=!0,eL="focusin"===er?"focus":"blur",eD=et=>{let er=Ra(et||ev.event);er.type="focus"===er.type?"focusin":"focusout",ec.executeHandlers(er,ed)}),(es=ec.events[ed][er])?"ready"===er&&ec.domLoaded?ea(Ra({type:er})):es.push({func:ea,scope:ei}):(ec.events[ed][er]=es=[{func:ea,scope:ei}],es.fakeName=eL,es.capture=eP,es.nativeHandler=eD,"ready"===er?Aa(et,eD,ec):Sa(et,eL||er,eD,eP)))}return et=es=null,ea}unbind(et,er,ea){if(!et||rt(et)||ri(et))return this;let ei=et[this.expando];if(ei){let es=this.events[ei];if(er){let ei=er.split(" "),ed=ei.length;for(;ed--;){let er=ei[ed],ec=es[er];if(ec){if(ea){let et=ec.length;for(;et--;)if(ec[et].func===ea){let ea=ec.nativeHandler,ei=ec.fakeName,ed=ec.capture,ev=ec.slice(0,et).concat(ec.slice(et+1));ev.nativeHandler=ea,ev.fakeName=ei,ev.capture=ed,es[er]=ev}}ea&&0!==ec.length||(delete es[er],Na(et,ec.fakeName||er,ec.nativeHandler,ec.capture))}}}else ge(es,(er,ea)=>{Na(et,er.fakeName||ea,er.nativeHandler,er.capture)}),es={};for(let et in es)if(Ee(es,et))return this;delete this.events[ei];try{delete et[this.expando]}catch(er){et[this.expando]=null}}return this}fire(et,er,ea){return this.dispatch(et,er,ea)}dispatch(et,er,ea){if(!et||rt(et)||ri(et))return this;let ei=Ra({type:er,target:et},ea);do{let er=et[this.expando];er&&this.executeHandlers(ei,er),et=et.parentNode||et.ownerDocument||et.defaultView||et.parentWindow}while(et&&!ei.isPropagationStopped());return this}clean(et){if(!et||rt(et)||ri(et))return this;if(et[this.expando]&&this.unbind(et),et.getElementsByTagName||(et=et.document),et&&et.getElementsByTagName){this.unbind(et);let er=et.getElementsByTagName("*"),ea=er.length;for(;ea--;)(et=er[ea])[this.expando]&&this.unbind(et)}return this}destroy(){this.events={}}cancel(et){return et&&(et.preventDefault(),et.stopImmediatePropagation()),!1}executeHandlers(et,er){let ea=this.events[er],ei=ea&&ea[et.type];if(ei)for(let er=0,ea=ei.length;er<ea;er++){let ea=ei[er];if(ea&&!1===ea.func.call(ea.scope,et)&&et.preventDefault(),et.isImmediatePropagationStopped())return}}};Ta.Event=new Ta;let nR=tQ.each,nI=tQ.grep,nO="data-mce-style",nD=tQ.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),La=(et,er,ea)=>{y(ea)||""===ea?on(et,er):Jt(et,er,ea)},Ma=et=>et.replace(/[A-Z]/g,et=>"-"+et.toLowerCase()),Ia=(et,er)=>{let ea=0;if(et)for(let ei=et.nodeType,es=et.previousSibling;es;es=es.previousSibling){let et=es.nodeType;er&&rt(es)&&(et===ei||!es.data.length)||(ea++,ei=et)}return ea},Fa=(et,er)=>{let ea=en(er,"style"),ei=et.serialize(et.parse(ea),Ht(er));La(er,nO,ei)},Ua=(et,er,ea)=>{let ei=Ma(er);y(ea)||""===ea?go(et,ei):io(et,ei,eG(ea)?Ee(nD,ei)?ea+"":ea+"px":ea)},za=(et,er={})=>{let ea={},ei=window,es={},ed=0,ec=rQ.forElement(pn(et),{contentCssCors:er.contentCssCors,referrerPolicy:er.referrerPolicy}),ev=[],eC=er.schema?er.schema:ua({}),eI=wa({url_converter:er.url_converter,url_converter_scope:er.url_converter_scope,force_hex_color:er.force_hex_color},er.schema),eD=er.ownEvents?new Ta:Ta.Event,eP=eC.getBlockElements(),f=er=>er&&et&&e$(er)?et.getElementById(er):er,g=et=>{let er=f(et);return C(er)?pn(er):null},h=(et,er,ea="")=>{let ei;let es=g(et);if(C(es)&&t1(es)){let et=eV[er];ei=et&&et.get?et.get(es.dom,er):en(es,er)}return C(ei)?ei:ea},b=et=>{let er=f(et);return y(er)?[]:er.attributes},v=(et,ea,ei)=>{O(et,et=>{if(t4(et)){let es=pn(et),ed=""===ei?null:ei,ec=en(es,ea),ev=eV[ea];ev&&ev.set?ev.set(es.dom,ed,ea):La(es,ea,ed),ec!==ed&&er.onSetAttrib&&er.onSetAttrib({attrElm:es.dom,attrName:ea,attrValue:ed})}})},x=()=>er.root_element||et.body,E=(er,ea)=>((et,er,ea)=>{let ei=0,es=0,ed=et.ownerDocument;if(ea=ea||et,er){var ec;if(ea===et&&er.getBoundingClientRect&&"static"===co(pn(et),"position")){let ea=er.getBoundingClientRect();return{x:ei=ea.left+(ed.documentElement.scrollLeft||et.scrollLeft)-ed.documentElement.clientLeft,y:es=ea.top+(ed.documentElement.scrollTop||et.scrollTop)-ed.documentElement.clientTop}}let ev=er;for(;ev&&ev!==ea&&ev.nodeType&&!Ls(ev,ea);){let et=ev;ei+=et.offsetLeft||0,es+=et.offsetTop||0,ev=et.offsetParent}for(ev=er.parentNode;ev&&ev!==ea&&ev.nodeType&&!Ls(ev,ea);)ei-=ev.scrollLeft||0,es-=ev.scrollTop||0,ev=ev.parentNode;es+=(ec=pn(er),rG.isFirefox()&&"table"===Ht(ec)?Ds(Mn(ec)).filter(et=>"caption"===Ht(et)).bind(et=>Ds(Ln(et)).map(er=>{let ea=er.dom.offsetTop,ei=et.dom.offsetTop,es=et.dom.offsetHeight;return ea<=ei?-es:0})).getOr(0):0)}return{x:ei,y:es}})(et.body,f(er),ea),k=(et,er,ea)=>{let ei=f(et);if(!y(ei)&&(Vo(ei)||t4(ei)&&"http://www.w3.org/2000/svg"===ei.namespaceURI))return ea?co(pn(ei),Ma(er)):("float"===(er=er.replace(/-(\D)/g,(et,er)=>er.toUpperCase()))&&(er="cssFloat"),ei.style?ei.style[er]:void 0)},S=et=>{let er=f(et);if(!er)return{w:0,h:0};let ea=k(er,"width"),ei=k(er,"height");return ea&&-1!==ea.indexOf("px")||(ea="0"),ei&&-1!==ei.indexOf("px")||(ei="0"),{w:parseInt(ea,10)||er.offsetWidth||er.clientWidth,h:parseInt(ei,10)||er.offsetHeight||er.clientHeight}},R=(et,er)=>{if(!et)return!1;let ea=eW(et)?et:[et];return $(ea,et=>xn(pn(et),er))},A=(et,er,ea,ei)=>{let es=[],ed=f(et);ei=void 0===ei;let ec=ea||("BODY"!==x().nodeName?x().parentNode:null);if(e$(er)){if("*"===er)er=t4;else{let et=er;er=er=>R(er,et)}}for(;ed&&!(ed===ec||y(ed.nodeType)||rs(ed)||rd(ed));){if(!er||er(ed)){if(!ei)return[ed];es.push(ed)}ed=ed.parentNode}return ei?es:null},T=(et,er,ea)=>{let ei=er;if(et){e$(er)&&(ei=et=>R(et,er));for(let er=et[ea];er;er=er[ea])if(eJ(ei)&&ei(er))return er}return null},O=function(et,er,ea){let ei=null!=ea?ea:this;if(eW(et)){let ea=[];return nR(et,(et,es)=>{let ed=f(et);ed&&ea.push(er.call(ei,ed,es))}),ea}{let ea=f(et);return!!ea&&er.call(ei,ea)}},B=(et,er)=>{O(et,et=>{ge(er,(er,ea)=>{v(et,ea,er)})})},P=(et,er)=>{O(et,et=>{let ea=pn(et);So(ea,er)})},D=(er,ea,ei,es,ed)=>O(er,er=>{let ec=e$(ea)?et.createElement(ea):ea;return C(ei)&&B(ec,ei),es&&(!e$(es)&&es.nodeType?ec.appendChild(es):e$(es)&&P(ec,es)),ed?ec:er.appendChild(ec)}),L=(er,ea,ei)=>D(et.createElement(er),er,ea,ei,!0),eL=r4.encodeAllRaw,I=(et,er)=>O(et,et=>{let ea=pn(et);return er&&V(Mn(ea),et=>{t2(et)&&0===et.dom.length?xo(et):po(ea,et)}),xo(ea),ea.dom}),F=(et,er,ea)=>{O(et,et=>{if(t4(et)){let ei=pn(et),es=er.split(" ");V(es,et=>{C(ea)?(ea?un:fn)(ei,et):(an(ei)?ei.dom.classList.toggle(et):H(ln(ei),et)?cn(ei,et):dn(ei,et),mn(ei))})}})},U=(et,er,ea)=>O(er,ei=>{var es;let ed=eW(er)?et.cloneNode(!0):et;return ea&&nR(nI(ei.childNodes),et=>{ed.appendChild(et)}),null===(es=ei.parentNode)||void 0===es||es.replaceChild(ed,ei),ei}),z=et=>{if(t4(et)){let er="a"===et.nodeName.toLowerCase()&&!h(et,"href")&&h(et,"id");if(h(et,"name")||h(et,"data-mce-bookmark")||er)return!0}return!1},j=()=>et.createRange(),q=(ea,es,ed,ec)=>{if(eW(ea)){let et=ea.length,er=[];for(;et--;)er[et]=q(ea[et],es,ed,ec);return er}return er.collect&&(ea===et||ea===ei)&&ev.push([ea,es,ed,ec]),eD.bind(ea,es,ed,ec||eM)},W=(er,ea,es)=>{if(eW(er)){let et=er.length,ei=[];for(;et--;)ei[et]=W(er[et],ea,es);return ei}if(ev.length>0&&(er===et||er===ei)){let et=ev.length;for(;et--;){let[ei,ed,ec]=ev[et];er!==ei||ea&&ea!==ed||es&&es!==ec||eD.unbind(ei,ed,ec)}}return eD.unbind(er,ea,es)},K=et=>{if(et&&Vo(et)){let er=et.getAttribute("data-mce-contenteditable");return er&&"inherit"!==er?er:"inherit"!==et.contentEditable?et.contentEditable:null}return null},eM={doc:et,settings:er,win:ei,files:es,stdMode:!0,boxModel:!0,styleSheetLoader:ec,boundEvents:ev,styles:eI,schema:eC,events:eD,isBlock:et=>e$(et)?Ee(eP,et):t4(et)&&(Ee(eP,et.nodeName)||Ts(eC,et)),root:null,clone:(et,er)=>et.cloneNode(er),getRoot:x,getViewPort:et=>{let er=Io(et);return{x:er.x,y:er.y,w:er.width,h:er.height}},getRect:et=>{let er=f(et),ea=E(er),ei=S(er);return{x:ea.x,y:ea.y,w:ei.w,h:ei.h}},getSize:S,getParent:(et,er,ea)=>{let ei=A(et,er,ea,!1);return ei&&ei.length>0?ei[0]:null},getParents:A,get:f,getNext:(et,er)=>T(et,er,"nextSibling"),getPrev:(et,er)=>T(et,er,"previousSibling"),select:(ea,ei)=>{var es,ed;let ec=null!==(ed=null!==(es=f(ei))&&void 0!==es?es:er.root_element)&&void 0!==ed?ed:et;return eJ(ec.querySelectorAll)?e3(ec.querySelectorAll(ea)):[]},is:R,add:D,create:L,createHTML:(et,er,ea="")=>{let ei="<"+et;for(let et in er)_e(er,et)&&(ei+=" "+et+'="'+eL(er[et])+'"');return Ge(ea)&&Ee(eC.getVoidElements(),et)?ei+" />":ei+">"+ea+"</"+et+">"},createFragment:er=>{let ea;let ei=et.createElement("div"),es=et.createDocumentFragment();for(es.appendChild(ei),er&&(ei.innerHTML=er);ea=ei.firstChild;)es.appendChild(ea);return es.removeChild(ei),es},remove:I,setStyle:(et,ea,ei)=>{O(et,et=>{let es=pn(et);Ua(es,ea,ei),er.update_styles&&Fa(eI,es)})},getStyle:k,setStyles:(et,ea)=>{O(et,et=>{let ei=pn(et);ge(ea,(et,er)=>{Ua(ei,er,et)}),er.update_styles&&Fa(eI,ei)})},removeAllAttribs:et=>O(et,et=>{let er=et.attributes;for(let ea=er.length-1;ea>=0;ea--)et.removeAttributeNode(er.item(ea))}),setAttrib:v,setAttribs:B,getAttrib:h,getPos:E,parseStyle:et=>eI.parse(et),serializeStyle:(et,er)=>eI.serialize(et,er),addStyle:er=>{if(eM!==za.DOM&&et===document){if(ea[er])return;ea[er]=!0}let ei=et.getElementById("mceDefaultStyles");if(!ei){(ei=et.createElement("style")).id="mceDefaultStyles",ei.type="text/css";let er=et.head;er.firstChild?er.insertBefore(ei,er.firstChild):er.appendChild(ei)}ei.styleSheet?ei.styleSheet.cssText+=er:ei.appendChild(et.createTextNode(er))},loadCSS:et=>{et||(et=""),V(et.split(","),et=>{es[et]=!0,ec.load(et).catch(_)})},addClass:(et,er)=>{F(et,er,!0)},removeClass:(et,er)=>{F(et,er,!1)},hasClass:(et,er)=>{let ea=g(et),ei=er.split(" ");return C(ea)&&ne(ei,et=>gn(ea,et))},toggleClass:F,show:et=>{O(et,et=>go(pn(et),"display"))},hide:et=>{O(et,et=>io(pn(et),"display","none"))},isHidden:et=>{let er=g(et);return C(er)&&Dt(mo(er,"display"),"none")},uniqueId:et=>(et||"mce_")+ed++,setHTML:P,getOuterHTML:et=>{let er=g(et);return C(er)?t4(er.dom)?er.dom.outerHTML:(et=>{let er=bn("div"),ea=pn(et.dom.cloneNode(!0));return vo(er,ea),ko(er)})(er):""},setOuterHTML:(et,er)=>{O(et,et=>{t4(et)&&(et.outerHTML=er)})},decode:r4.decode,encode:eL,insertAfter:(et,er)=>{let ea=f(er);return O(et,et=>{let er=null==ea?void 0:ea.parentNode,ei=null==ea?void 0:ea.nextSibling;return er&&(ei?er.insertBefore(et,ei):er.appendChild(et)),et})},replace:U,rename:(et,er)=>{if(et.nodeName!==er.toUpperCase()){let ea=L(er);return nR(b(et),er=>{v(ea,er.nodeName,h(et,er.nodeName))}),U(ea,et,!0),ea}return et},findCommonAncestor:(et,er)=>{let ea=et;for(;ea;){let et=er;for(;et&&ea!==et;)et=et.parentNode;if(ea===et)break;ea=ea.parentNode}return!ea&&et.ownerDocument?et.ownerDocument.documentElement:ea},run:O,getAttribs:b,isEmpty:(et,er,ea)=>{let ei=0;if(z(et))return!1;let es=et.firstChild;if(es){let ed=new jo(es,et),ec=eC?eC.getWhitespaceElements():{},ev=er||(eC?eC.getNonEmptyElements():null),eI=es;do{if(t4(eI)){let et=eI.getAttribute("data-mce-bogus");if(et){eI=ed.next("all"===et);continue}let er=eI.nodeName.toLowerCase();if(ev&&ev[er]){if("br"===er){ei++,eI=ed.next();continue}return!1}if(z(eI))return!1}if(ri(eI)||rt(eI)&&!ss(eI.data)&&(!(null==ea?void 0:ea.includeZwsp)||!as(eI.data))||rt(eI)&&eI.parentNode&&ec[eI.parentNode.nodeName]&&ss(eI.data))return!1;eI=ed.next()}while(eI)}return ei<=1},createRng:j,nodeIndex:Ia,split:(et,er,ea)=>{let ei,es,ed=j();if(et&&er&&et.parentNode&&er.parentNode){let ec=et.parentNode;return ed.setStart(ec,Ia(et)),ed.setEnd(er.parentNode,Ia(er)),ei=ed.extractContents(),(ed=j()).setStart(er.parentNode,Ia(er)+1),ed.setEnd(ec,Ia(et)+1),es=ed.extractContents(),ec.insertBefore(zs(eM,ei,eC),et),ea?ec.insertBefore(ea,et):ec.insertBefore(er,et),ec.insertBefore(zs(eM,es,eC),et),I(et),ea||er}},bind:q,unbind:W,fire:(et,er,ea)=>eD.dispatch(et,er,ea),dispatch:(et,er,ea)=>eD.dispatch(et,er,ea),getContentEditable:K,getContentEditableParent:et=>{let er=x(),ea=null;for(let ei=et;ei&&ei!==er&&null===(ea=K(ei));ei=ei.parentNode);return ea},isEditable:et=>{if(C(et)){let er=t4(et)?et:et.parentElement;return C(er)&&Vo(er)&&oo(pn(er))}return!1},destroy:()=>{if(ev.length>0){let et=ev.length;for(;et--;){let[er,ea,ei]=ev[et];eD.unbind(er,ea,ei)}}ge(es,(et,er)=>{ec.unload(er),delete es[er]})},isChildOf:(et,er)=>et===er||er.contains(et),dumpRng:et=>"startContainer: "+et.startContainer.nodeName+", startOffset: "+et.startOffset+", endContainer: "+et.endContainer.nodeName+", endOffset: "+et.endOffset},eV=((et,er,ea)=>{let ei=er.keep_values,es={set:(et,ei,es)=>{let ed=pn(et);eJ(er.url_converter)&&C(ei)&&(ei=er.url_converter.call(er.url_converter_scope||ea(),String(ei),es,et)),La(ed,"data-mce-"+es,ei),La(ed,es,ei)},get:(et,er)=>{let ea=pn(et);return en(ea,"data-mce-"+er)||en(ea,er)}},ed={style:{set:(er,ea)=>{let es=pn(er);ei&&La(es,nO,ea),on(es,"style"),e$(ea)&&lo(es,et.parse(ea))},get:er=>{let ea=pn(er),ei=en(ea,nO)||en(ea,"style");return et.serialize(et.parse(ei),Ht(ea))}}};return ei&&(ed.href=ed.src=es),ed})(eI,er,N(eM));return eM};za.DOM=za(document),za.nodeIndex=Ia;let nP=za.DOM;let Ha=class Ha{constructor(et={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=et}_setReferrerPolicy(et){this.settings.referrerPolicy=et}loadScript(et){return new Promise((er,ea)=>{let ei;let s=()=>{nP.remove(es),ei&&(ei.onerror=ei.onload=ei=null)},es=nP.uniqueId();(ei=document.createElement("script")).id=es,ei.type="text/javascript",ei.src=tQ._addCacheSuffix(et),this.settings.referrerPolicy&&nP.setAttrib(ei,"referrerpolicy",this.settings.referrerPolicy),ei.onload=()=>{s(),er()},ei.onerror=()=>{s(),ea("Failed to load script: "+et)},(document.getElementsByTagName("head")[0]||document.body).appendChild(ei)})}isDone(et){return 2===this.states[et]}markDone(et){this.states[et]=2}add(et){let er=this;return er.queue.push(et),void 0===er.states[et]&&(er.states[et]=0),new Promise((ea,ei)=>{er.scriptLoadedCallbacks[et]||(er.scriptLoadedCallbacks[et]=[]),er.scriptLoadedCallbacks[et].push({resolve:ea,reject:ei})})}load(et){return this.add(et)}remove(et){delete this.states[et],delete this.scriptLoadedCallbacks[et]}loadQueue(){let et=this.queue;return this.queue=[],this.loadScripts(et)}loadScripts(et){let er=this,n=(et,ea)=>{xe(er.scriptLoadedCallbacks,ea).each(er=>{V(er,er=>er[et](ea))}),delete er.scriptLoadedCallbacks[ea]},o=et=>{let er=Y(et,et=>"rejected"===et.status);return er.length>0?Promise.reject(te(er,({reason:et})=>eW(et)?et:[et])):Promise.resolve()},r=et=>Promise.allSettled(q(et,et=>2===er.states[et]?(n("resolve",et),Promise.resolve()):3===er.states[et]?(n("reject",et),Promise.reject(et)):(er.states[et]=1,er.loadScript(et).then(()=>{er.states[et]=2,n("resolve",et);let ea=er.queue;return ea.length>0?(er.queue=[],r(ea).then(o)):Promise.resolve()},()=>(er.states[et]=3,n("reject",et),Promise.reject(et)))))),s=et=>(er.loading=!0,r(et).then(et=>{er.loading=!1;let ea=er.queueLoadedCallbacks.shift();return I.from(ea).each(D),o(et)})),ea=ke(et);return er.loading?new Promise((et,ei)=>{er.queueLoadedCallbacks.push(()=>{s(ea).then(et,ei)})}):s(ea)}};Ha.ScriptLoader=new Ha;let $a=et=>{let er=et;return{get:()=>er,set:et=>{er=et}}},nL={},nM=$a("en"),Wa=()=>xe(nL,nM.get()),nV={getData:()=>pe(nL,et=>({...et})),setCode:et=>{et&&nM.set(et)},getCode:()=>nM.get(),add:(et,er)=>{let ea=nL[et];ea||(nL[et]=ea={});let ei=q(e8(er),et=>et.toLowerCase());ge(er,(et,es)=>{let ed=es.toLowerCase();ed!==es&&((et,er)=>{let ea=et.indexOf(er);return -1!==ea&&et.indexOf(er,ea+1)>ea})(ei,ed)?(Ee(er,ed)||(ea[ed]=et),ea[es]=et):ea[ed]=et})},translate:et=>{let er=Wa().getOr({}),n=et=>eJ(et)?Object.prototype.toString.call(et):o(et)?"":""+et,o=et=>""===et||null==et,r=et=>{let ea=n(et);return Ee(er,ea)?n(er[ea]):xe(er,ea.toLowerCase()).map(n).getOr(ea)},s=et=>et.replace(/{context:\w+}$/,"");if(o(et))return"";if(eq(et)&&Ee(et,"raw"))return n(et.raw);if(eW(et)&&et.length>1){let er=et.slice(1);return s(r(et[0]).replace(/\{([0-9]+)\}/g,(et,ea)=>Ee(er,ea)?n(er[ea]):et))}return s(r(et))},isRtl:()=>Wa().bind(et=>xe(et,"_dir")).exists(et=>"rtl"===et),hasCode:et=>Ee(nL,et)},Ya=()=>{let et=[],er={},ea={},ei=[],r=(et,er)=>{let ea=Y(ei,ea=>ea.name===et&&ea.state===er);V(ea,et=>et.resolve())},s=et=>Ee(er,et),a=(et,ea)=>{let ei=nV.getCode();!ei||ea&&-1===(","+(ea||"")+",").indexOf(","+ei+",")||Ha.ScriptLoader.add(er[et]+"/langs/"+ei+".js")},i=(et,er="added")=>"added"===er&&Ee(ea,et)||"loaded"===er&&s(et)?Promise.resolve():new Promise(ea=>{ei.push({name:et,state:er,resolve:ea})});return{items:et,urls:er,lookup:ea,get:et=>{if(ea[et])return ea[et].instance},requireLangPack:(et,er)=>{!1!==Ya.languageLoad&&(s(et)?a(et,er):i(et,"loaded").then(()=>a(et,er)))},add:(er,ei)=>(et.push(ei),ea[er]={instance:ei},r(er,"added"),ei),remove:et=>{delete er[et],delete ea[et]},createUrl:(et,er)=>e$(er)?e$(et)?{prefix:"",resource:er,suffix:""}:{prefix:et.prefix,resource:er,suffix:et.suffix}:er,load:(et,ei)=>{if(er[et])return Promise.resolve();let es=e$(ei)?ei:ei.prefix+ei.resource+ei.suffix;0!==es.indexOf("/")&&-1===es.indexOf("://")&&(es=Ya.baseURL+"/"+es),er[et]=es.substring(0,es.lastIndexOf("/"));let a=()=>(r(et,"loaded"),Promise.resolve());return ea[et]?a():Ha.ScriptLoader.add(es).then(a)},waitFor:i}};Ya.languageLoad=!0,Ya.baseURL="",Ya.PluginManager=Ya(),Ya.ThemeManager=Ya(),Ya.ModelManager=Ya();let Ga=et=>{let er=$a(I.none()),n=()=>er.get().each(et=>clearInterval(et));return{clear:()=>{n(),er.set(I.none())},isSet:()=>er.get().isSome(),get:()=>er.get(),set:ea=>{n(),er.set(I.some(setInterval(ea,et)))}}},Xa=()=>{let et=(et=>{let er=$a(I.none()),n=()=>er.get().each(et);return{clear:()=>{n(),er.set(I.none())},isSet:()=>er.get().isSome(),get:()=>er.get(),set:et=>{n(),er.set(I.some(et))}}})(_);return{...et,on:er=>et.get().each(er)}},Qa=(et,er)=>{let ea=null;return{cancel:()=>{eY(ea)||(clearTimeout(ea),ea=null)},throttle:(...ei)=>{eY(ea)&&(ea=setTimeout(()=>{ea=null,et.apply(null,ei)},er))}}},Ja=(et,er)=>{let ea=null,o=()=>{eY(ea)||(clearTimeout(ea),ea=null)};return{cancel:o,throttle:(...ei)=>{o(),ea=setTimeout(()=>{ea=null,et.apply(null,ei)},er)}}},nF=N("mce-annotation"),nU=N("data-mce-annotation"),nH=N("data-mce-annotation-uid"),nz=N("data-mce-annotation-active"),nj=N("data-mce-annotation-classes"),n$=N("data-mce-annotation-attrs"),si=et=>er=>_n(er,et),ai=(et,er)=>{let ea=et.selection.getRng(),ei=pn(ea.startContainer),es=pn(et.getBody()),ed=er.fold(()=>"."+nF(),et=>`[${nU()}="${et}"]`),ec=In(ei,ea.startOffset).getOr(ei);return no(ec,ed,si(es)).bind(er=>tn(er,`${nH()}`).bind(ea=>tn(er,`${nU()}`).map(er=>{let ei=li(et,ea);return{uid:ea,name:er,elements:ei}})))},ii=(et,er)=>nn(et,"data-mce-bogus")||zo(et,'[data-mce-bogus="all"]',si(er)),li=(et,er)=>{let ea=pn(et.getBody()),ei=Uo(ea,`[${nH()}="${er}"]`);return Y(ei,et=>!ii(et,ea))},di=(et,er)=>{let ea=pn(et.getBody()),ei=Uo(ea,`[${nU()}="${er}"]`),es={};return V(ei,et=>{if(!ii(et,ea)){let er=en(et,nH()),ea=xe(es,er).getOr([]);es[er]=ea.concat([et])}}),es},nq=0,ui=et=>{let er=(new Date).getTime();return et+"_"+Math.floor(1e9*Math.random())+ ++nq+String(er)},mi=(et,er)=>pn(et.dom.cloneNode(er)),fi=et=>mi(et,!1),gi=et=>mi(et,!0),pi=(et,er,ea=eQ)=>{let ei=new jo(et,er),r=et=>{let er;do er=ei[et]();while(er&&!rt(er)&&!ea(er));return I.from(er).filter(rt)};return{current:()=>I.from(ei.current()).filter(rt),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},hi=(et,er)=>{let ea=er||(er=>et.isBlock(er)||rc(er)||rC(er)),o=(et,er,ea,ei)=>{if(rt(et)){let ea=ei(et,er,et.data);if(-1!==ea)return I.some({container:et,offset:ea})}return ea().bind(et=>o(et.container,et.offset,ea,ei))};return{backwards:(er,ei,es,ed)=>{let ec=pi(er,null!=ed?ed:et.getRoot(),ea);return o(er,ei,()=>ec.prev().map(et=>({container:et,offset:et.length})),es).getOrNull()},forwards:(er,ei,es,ed)=>{let ec=pi(er,null!=ed?ed:et.getRoot(),ea);return o(er,ei,()=>ec.next().map(et=>({container:et,offset:0})),es).getOrNull()}}},nW=Math.round,vi=et=>et?{left:nW(et.left),top:nW(et.top),bottom:nW(et.bottom),right:nW(et.right),width:nW(et.width),height:nW(et.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},yi=(et,er)=>(et=vi(et),er||(et.left=et.left+et.width),et.right=et.left,et.width=0,et),Ci=(et,er,ea)=>et>=0&&et<=Math.min(er.height,ea.height)/2,wi=(et,er)=>{let ea=Math.min(er.height/2,et.height/2);return et.bottom-ea<er.top||!(et.top>er.bottom)&&Ci(er.top-et.bottom,et,er)},xi=(et,er)=>et.top>er.bottom||!(et.bottom<er.top)&&Ci(er.bottom-et.top,et,er),Ei=(et,er,ea)=>{let ei=Math.max(Math.min(er,et.left+et.width),et.left),es=Math.max(Math.min(ea,et.top+et.height),et.top);return Math.sqrt((er-ei)*(er-ei)+(ea-es)*(ea-es))},_i=et=>{let er=et.startContainer,ea=et.startOffset;return er===et.endContainer&&er.hasChildNodes()&&et.endOffset===ea+1?er.childNodes[ea]:null},ki=(et,er)=>{if(t4(et)&&et.hasChildNodes()){let ea=et.childNodes,ei=Math.min(Math.max(er,0),ea.length-1);return ea[ei]}return et},nY=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),Ni=et=>e$(et)&&et.charCodeAt(0)>=768&&nY.test(et),nK=Yo("display","block table"),nX=Yo("float","left right"),nJ=((...et)=>er=>{for(let ea=0;ea<et.length;ea++)if(!et[ea](er))return!1;return!0})(t4,ts,O(nX)),nG=O(Yo("white-space","pre pre-line pre-wrap")),nQ=za.nodeIndex,Ii=(et,er)=>er<0&&t4(et)&&et.hasChildNodes()?void 0:ki(et,er),Fi=et=>et?et.createRange():za.DOM.createRng(),Ui=et=>e$(et)&&/[\r\n\t ]/.test(et),zi=et=>!!et.setStart&&!!et.setEnd,ji=et=>{let er=et.startContainer,ea=et.startOffset;if(Ui(et.toString())&&nG(er.parentNode)&&rt(er)){let et=er.data;if(Ui(et[ea-1])||Ui(et[ea+1]))return!0}return!1},Hi=et=>0===et.left&&0===et.right&&0===et.top&&0===et.bottom,$i=et=>{var er;let ea;let ei=et.getClientRects();return ea=ei.length>0?vi(ei[0]):vi(et.getBoundingClientRect()),!zi(et)&&rc(et)&&Hi(ea)?(et=>{let er=et.ownerDocument,ea=Fi(er),ei=er.createTextNode("\xa0"),es=et.parentNode;es.insertBefore(ei,et),ea.setStart(ei,0),ea.setEnd(ei,1);let ed=vi(ea.getBoundingClientRect());return es.removeChild(ei),ed})(et):Hi(ea)&&zi(et)&&null!==(er=(et=>{let er=et.startContainer,ea=et.endContainer,ei=et.startOffset,es=et.endOffset;if(er===ea&&rt(ea)&&0===ei&&1===es){let er=et.cloneRange();return er.setEndAfter(ea),$i(er)}return null})(et))&&void 0!==er?er:ea},qi=(et,er)=>{let ea=yi(et,er);return ea.width=1,ea.right=ea.left+1,ea},Vi=(et,er,ea)=>{let o=()=>(ea||(ea=(et=>{let er=[],n=et=>{var ea;0!==et.height&&(er.length>0&&(ea=er[er.length-1],et.left===ea.left&&et.top===ea.top&&et.bottom===ea.bottom&&et.right===ea.right)||er.push(et))},o=(et,er)=>{let ea=Fi(et.ownerDocument);if(er<et.data.length){if(Ni(et.data[er]))return;if(Ni(et.data[er-1])&&(ea.setStart(et,er),ea.setEnd(et,er+1),!ji(ea)))return void n(qi($i(ea),!1))}er>0&&(ea.setStart(et,er-1),ea.setEnd(et,er),ji(ea)||n(qi($i(ea),!1))),er<et.data.length&&(ea.setStart(et,er),ea.setEnd(et,er+1),ji(ea)||n(qi($i(ea),!0)))},ea=et.container(),ei=et.offset();if(rt(ea))return o(ea,ei),er;if(t4(ea)){if(et.isAtEnd()){let et=Ii(ea,ei);rt(et)&&o(et,et.data.length),nJ(et)&&!rc(et)&&n(qi($i(et),!1))}else{let es=Ii(ea,ei);if(rt(es)&&o(es,0),nJ(es)&&et.isAtEnd())return n(qi($i(es),!1)),er;let ed=Ii(et.container(),et.offset()-1);nJ(ed)&&!rc(ed)&&(nK(ed)||nK(es)||!nJ(es))&&n(qi($i(ed),!1)),nJ(es)&&n(qi($i(es),!0))}}return er})(Vi(et,er))),ea);return{container:N(et),offset:N(er),toRange:()=>{let ea=Fi(et.ownerDocument);return ea.setStart(et,er),ea.setEnd(et,er),ea},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(rt(et),0===er),isAtEnd:()=>rt(et)?er>=et.data.length:er>=et.childNodes.length,isEqual:ea=>ea&&et===ea.container()&&er===ea.offset(),getNode:ea=>Ii(et,ea?er-1:er)}};Vi.fromRangeStart=et=>Vi(et.startContainer,et.startOffset),Vi.fromRangeEnd=et=>Vi(et.endContainer,et.endOffset),Vi.after=et=>Vi(et.parentNode,nQ(et)+1),Vi.before=et=>Vi(et.parentNode,nQ(et)),Vi.isAbove=(et,er)=>Mt(le(er.getClientRects()),de(et.getClientRects()),wi).getOr(!1),Vi.isBelow=(et,er)=>Mt(de(er.getClientRects()),le(et.getClientRects()),xi).getOr(!1),Vi.isAtStart=et=>!!et&&et.isAtStart(),Vi.isAtEnd=et=>!!et&&et.isAtEnd(),Vi.isTextPosition=et=>!!et&&rt(et.container()),Vi.isElementPosition=et=>!Vi.isTextPosition(et);let Wi=(et,er)=>{rt(er)&&0===er.data.length&&et.remove(er)},Ki=(et,er,ea)=>{rd(ea)?((et,er,ea)=>{let ei=I.from(ea.firstChild),es=I.from(ea.lastChild);er.insertNode(ea),ei.each(er=>Wi(et,er.previousSibling)),es.each(er=>Wi(et,er.nextSibling))})(et,er,ea):(er.insertNode(ea),Wi(et,ea.previousSibling),Wi(et,ea.nextSibling))},nZ=za.nodeIndex,Qi=et=>{let er=et.parentNode;return Xo(er)?Qi(er):er},Ji=et=>et?Oe(et.childNodes,(et,er)=>(Xo(er)&&"BR"!==er.nodeName?et=et.concat(Ji(er)):et.push(er),et),[]):[],Zi=et=>er=>et===er,el=et=>(rt(et)?"text()":et.nodeName.toLowerCase())+"["+(et=>{let er,ea;ea=Be(er=Ji(Qi(et)),Zi(et),et),er=er.slice(0,ea+1);let ei=Oe(er,(et,ea,ei)=>(rt(ea)&&rt(er[ei-1])&&et++,et),0);return(ea=Be(er=Te(er,Ko([et.nodeName])),Zi(et),et))-ei})(et)+"]",tl=(et,er)=>{let ea,ei=[],es=er.container(),ed=er.offset();if(rt(es))ea=((et,er)=>{let ea=et;for(;(ea=ea.previousSibling)&&rt(ea);)er+=ea.data.length;return er})(es,ed);else{let et=es.childNodes;ed>=et.length?(ea="after",ed=et.length-1):ea="before",es=et[ed]}ei.push(el(es));let ec=((et,er,ea)=>{let ei=[];for(let ea=er.parentNode;ea&&ea!==et;ea=ea.parentNode)ei.push(ea);return ei})(et,es);return ec=Te(ec,O(Xo)),(ei=ei.concat(Ae(ec,et=>el(et)))).reverse().join("/")+","+ea},nl=(et,er)=>{if(!er)return null;let ea=er.split(","),ei=ea[0].split("/"),es=ea.length>1?ea[1]:"before",ed=Oe(ei,(et,er)=>{var ea,ei;let es;let ed=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(er);return ed?("text()"===ed[1]&&(ed[1]="#text"),ea=ed[1],ei=parseInt(ed[2],10),es=Te(es=Ji(et),(et,er)=>!rt(et)||!rt(es[er-1])),(es=Te(es,Ko([ea])))[ei]):null},et);if(!ed)return null;if(!rt(ed)&&ed.parentNode){let et;return et="after"===es?nZ(ed)+1:nZ(ed),Vi(ed.parentNode,et)}return((et,er)=>{let ea=et,ei=0;for(;rt(ea);){let es=ea.data.length;if(er>=ei&&er<=ei+es){et=ea,er-=ei;break}if(!rt(ea.nextSibling)){et=ea,er=es;break}ei+=es,ea=ea.nextSibling}return rt(et)&&er>et.data.length&&(er=et.data.length),Vi(et,er)})(ed,parseInt(es,10))},rl=(et,er,ea,ei,es)=>{let ed=es?ei.startContainer:ei.endContainer,ec=es?ei.startOffset:ei.endOffset,ev=[],eC=et.getRoot();if(rt(ed))ev.push(ea?((et,er,ea)=>{let ei=et(er.data.slice(0,ea)).length;for(let ea=er.previousSibling;ea&&rt(ea);ea=ea.previousSibling)ei+=et(ea.data).length;return ei})(er,ed,ec):ec);else{let er=0,ei=ed.childNodes;ec>=ei.length&&ei.length&&(er=1,ec=Math.max(0,ei.length-1)),ev.push(et.nodeIndex(ei[ec],ea)+er)}for(let er=ed;er&&er!==eC;er=er.parentNode)ev.push(et.nodeIndex(er,ea));return ev},sl=(et,er,ea)=>{let ei=0;return tQ.each(et.select(er),et=>"all"===et.getAttribute("data-mce-bogus")?void 0:et!==ea&&void ei++),ei},al=(et,er)=>{let ea=er?et.startContainer:et.endContainer,ei=er?et.startOffset:et.endOffset;if(t4(ea)&&"TR"===ea.nodeName){let es=ea.childNodes;(ea=es[Math.min(er?ei:ei-1,es.length-1)])&&(ei=er?0:ea.childNodes.length,er?et.setStart(ea,ei):et.setEnd(ea,ei))}},il=et=>(al(et,!0),al(et,!1),et),ll=(et,er)=>{if(t4(et)&&rC(et=ki(et,er)))return et;if(Ur(et)){rt(et)&&Ir(et)&&(et=et.parentNode);let er=et.previousSibling;if(rC(er)||rC(er=et.nextSibling))return er}},dl=(et,er,ea)=>{let ei=ea.getNode(),es=ea.getRng();if("IMG"===ei.nodeName||rC(ei)){let et=ei.nodeName;return{name:et,index:sl(ea.dom,et,ei)}}let ed=ll(es.startContainer,es.startOffset)||ll(es.endContainer,es.endOffset);if(ed){let et=ed.tagName;return{name:et,index:sl(ea.dom,et,ed)}}return((et,er,ea,ei)=>{let es=er.dom,ed=rl(es,et,ea,ei,!0),ec=er.isForward(),ev=Wr(ei)?{isFakeCaret:!0}:{};return er.isCollapsed()?{start:ed,forward:ec,...ev}:{start:ed,end:rl(es,et,ea,ei,!1),forward:ec,...ev}})(et,ea,er,es)},cl=(et,er,ea)=>{let ei={"data-mce-type":"bookmark",id:er,style:"overflow:hidden;line-height:0px"};return ea?et.create("span",ei,"&#xFEFF;"):et.create("span",ei)},ul=(et,er)=>{let ea=et.dom,ei=et.getRng(),es=ea.uniqueId(),ed=et.isCollapsed(),ec=et.getNode(),ev=ec.nodeName,eC=et.isForward();if("IMG"===ev)return{name:ev,index:sl(ea,ev,ec)};let eI=il(ei.cloneRange());if(!ed){eI.collapse(!1);let et=cl(ea,es+"_end",er);Ki(ea,eI,et)}(ei=il(ei)).collapse(!0);let eD=cl(ea,es+"_start",er);return Ki(ea,ei,eD),et.moveToBookmark({id:es,keep:!0,forward:eC}),{id:es,forward:eC}},n0=T(dl,R,!0),fl=et=>{let t=er=>er(et),er=N(et),o=()=>ea,ea={tag:!0,inner:et,fold:(er,ea)=>ea(et),isValue:eZ,isError:eQ,map:er=>n1.value(er(et)),mapError:o,bind:t,exists:t,forall:t,getOr:er,or:o,getOrThunk:er,orThunk:o,getOrDie:er,each:er=>{er(et)},toOptional:()=>I.some(et)};return ea},gl=et=>{let t=()=>er,er={tag:!1,inner:et,fold:(er,ea)=>er(et),isValue:eQ,isError:eZ,map:t,mapError:er=>n1.error(er(et)),bind:t,exists:eQ,forall:eZ,getOr:R,or:R,getOrThunk:P,orThunk:P,getOrDie:B(String(et)),each:_,toOptional:I.none};return er},n1={value:fl,error:gl,fromOption:(et,er)=>et.fold(()=>gl(er),fl)},hl=et=>{if(!eW(et))throw Error("cases must be an array");if(0===et.length)throw Error("there must be at least one case");let er=[],ea={};return V(et,(ei,es)=>{let ed=e8(ei);if(1!==ed.length)throw Error("one and only one name per case");let ec=ed[0],ev=ei[ec];if(void 0!==ea[ec])throw Error("duplicate key detected:"+ec);if("cata"===ec)throw Error("cannot have a case named cata (sorry)");if(!eW(ev))throw Error("case arguments must be an array");er.push(ec),ea[ec]=(...ea)=>{let ei=ea.length;if(ei!==ev.length)throw Error("Wrong number of arguments to case "+ec+". Expected "+ev.length+" ("+ev+"), got "+ei);return{fold:(...er)=>{if(er.length!==et.length)throw Error("Wrong number of arguments to fold. Expected "+et.length+", got "+er.length);return er[es].apply(null,ea)},match:et=>{let ei=e8(et);if(er.length!==ei.length)throw Error("Wrong number of arguments to match. Expected: "+er.join(",")+"\nActual: "+ei.join(","));if(!ne(er,et=>H(ei,et)))throw Error("Not all branches were specified when using match. Specified: "+ei.join(", ")+"\nRequired: "+er.join(", "));return et[ec].apply(null,ea)},log:et=>{console.log(et,{constructors:er,constructor:ec,params:ea})}}}}),ea};hl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let bl=et=>"inline-command"===et.type||"inline-format"===et.type,vl=et=>"block-command"===et.type||"block-format"===et.type,yl=et=>{let t=er=>n1.error({message:er,pattern:et}),n=(er,ea,ei)=>{if(void 0!==et.format){let ei;if(eW(et.format)){if(!ne(et.format,e$))return t(er+" pattern has non-string items in the `format` array");ei=et.format}else{if(!e$(et.format))return t(er+" pattern has non-string `format` parameter");ei=[et.format]}return n1.value(ea(ei))}return void 0!==et.cmd?e$(et.cmd)?n1.value(ei(et.cmd,et.value)):t(er+" pattern has non-string `cmd` parameter"):t(er+" pattern is missing both `format` and `cmd` parameters")};if(!eq(et))return t("Raw pattern is not an object");if(!e$(et.start))return t("Raw pattern is missing `start` parameter");if(void 0!==et.end){if(!e$(et.end))return t("Inline pattern has non-string `end` parameter");if(0===et.start.length&&0===et.end.length)return t("Inline pattern has empty `start` and `end` parameters");let er=et.start,ea=et.end;return 0===ea.length&&(ea=er,er=""),n("Inline",et=>({type:"inline-format",start:er,end:ea,format:et}),(et,ei)=>({type:"inline-command",start:er,end:ea,cmd:et,value:ei}))}return void 0!==et.replacement?e$(et.replacement)?0===et.start.length?t("Replacement pattern has empty `start` parameter"):n1.value({type:"inline-command",start:"",end:et.start,cmd:"mceInsertContent",value:et.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===et.start.length?t("Block pattern has empty `start` parameter"):n("Block",er=>({type:"block-format",start:et.start,format:er[0]}),(er,ea)=>({type:"block-command",start:et.start,cmd:er,value:ea}))},Cl=et=>Y(et,vl),wl=et=>Y(et,bl),xl=et=>{let er=(et=>{let er=[],ea=[];return V(et,et=>{et.fold(et=>{er.push(et)},et=>{ea.push(et)})}),{errors:er,values:ea}})(q(et,yl));return V(er.errors,et=>console.error(et.message,et.pattern)),er.values},n2=xt().deviceType,n3=n2.isTouch(),n8=za.DOM,Sl=et=>u(et,RegExp),Nl=et=>er=>er.options.get(et),Rl=et=>e$(et)||eq(et),Al=(et,er="")=>ea=>{let ei=e$(ea);if(ei){if(-1!==ea.indexOf("=")){let es=(et=>{let er=et.indexOf("=")>0?et.split(/[;,](?![^=;,]*(?:[;,]|$))/):et.split(",");return X(er,(et,er)=>{let ea=er.split("="),ei=ea[0],es=ea.length>1?ea[1]:ei;return et[e4(ei)]=e4(es),et},{})})(ea);return{value:xe(es,et.id).getOr(er),valid:ei}}return{value:ea,valid:ei}}return{valid:!1,message:"Must be a string."}},n5=Nl("iframe_attrs"),n6=Nl("doctype"),n9=Nl("document_base_url"),n4=Nl("body_id"),n7=Nl("body_class"),ot=Nl("content_security_policy"),or=Nl("br_in_pre"),oa=Nl("forced_root_block"),ol=Nl("forced_root_block_attrs"),oi=Nl("newline_behavior"),od=Nl("br_newline_selector"),oc=Nl("no_newline_selector"),ou=Nl("keep_styles"),op=Nl("end_container_on_empty_block"),oy=Nl("automatic_uploads"),oS=Nl("images_reuse_filename"),oI=Nl("images_replace_blob_uris"),oO=Nl("icons"),oB=Nl("icons_url"),oD=Nl("images_upload_url"),oP=Nl("images_upload_base_path"),oL=Nl("images_upload_credentials"),oM=Nl("images_upload_handler"),oV=Nl("content_css_cors"),oF=Nl("referrer_policy"),oU=Nl("language"),oH=Nl("language_url"),oz=Nl("indent_use_margin"),oj=Nl("indentation"),o$=Nl("content_css"),oq=Nl("content_style"),oW=Nl("font_css"),oY=Nl("directionality"),oK=Nl("inline_boundaries_selector"),oX=Nl("object_resizing"),oJ=Nl("resize_img_proportional"),oG=Nl("placeholder"),oQ=Nl("event_root"),oZ=Nl("service_message"),o0=Nl("theme"),o1=Nl("theme_url"),o2=Nl("model"),o3=Nl("model_url"),o8=Nl("inline_boundaries"),o5=Nl("formats"),o6=Nl("preview_styles"),o9=Nl("format_empty_lines"),o4=Nl("format_noneditable_selector"),o7=Nl("custom_ui_selector"),at=Nl("inline"),ar=Nl("hidden_input"),aa=Nl("submit_patch"),ad=Nl("add_form_submit_trigger"),ac=Nl("add_unload_trigger"),af=Nl("custom_undo_redo_levels"),ay=Nl("disable_nodechange"),aC=Nl("readonly"),aI=Nl("editable_root"),aO=Nl("content_css_cors"),aB=Nl("plugins"),aD=Nl("external_plugins"),aP=Nl("block_unsupported_drop"),aL=Nl("visual"),aM=Nl("visual_table_class"),aV=Nl("visual_anchor_class"),aF=Nl("iframe_aria_text"),aU=Nl("setup"),aH=Nl("init_instance_callback"),az=Nl("urlconverter_callback"),aj=Nl("auto_focus"),a$=Nl("browser_spellcheck"),aq=Nl("protect"),aW=Nl("paste_block_drop"),aY=Nl("paste_data_images"),aK=Nl("paste_preprocess"),aX=Nl("paste_postprocess"),aJ=Nl("newdocument_content"),aG=Nl("paste_webkit_styles"),aQ=Nl("paste_remove_styles_if_webkit"),aZ=Nl("paste_merge_formats"),a0=Nl("smart_paste"),a1=Nl("paste_as_text"),a2=Nl("paste_tab_spaces"),a3=Nl("allow_html_data_urls"),a8=Nl("text_patterns"),a5=Nl("text_patterns_lookup"),a6=Nl("noneditable_class"),a9=Nl("editable_class"),a4=Nl("noneditable_regexp"),a7=Nl("preserve_cdata"),lr=Nl("highlight_on_focus"),ld=Nl("xss_sanitization"),lc=Nl("init_content_sync"),pc=et=>tQ.explode(et.options.get("images_file_types")),lf=Nl("table_tab_navigation"),lv=Nl("details_initial_state"),ly=Nl("details_serialized_state"),lx=Nl("force_hex_color"),lk=Nl("sandbox_iframes"),Ec=et=>{let er=et.parentNode;er&&er.removeChild(et)},_c=et=>{let er=Dr(et);return{count:et.length-er.length,text:er}},kc=et=>{let er;for(;-1!==(er=et.data.lastIndexOf("\uFEFF"));)et.deleteData(er,1)},Sc=(et,er)=>(Rc(et),er),Nc=(et,er)=>Vi.isTextPosition(er)?rt(et)&&er.container()===et?((et,er)=>{let ea=_c(et.data.substr(0,er.offset())),ei=_c(et.data.substr(er.offset()));return(ea.text+ei.text).length>0?(kc(et),Vi(et,er.offset()-ea.count)):er})(et,er):Sc(et,er):er.container()===et.parentNode?((et,er)=>{let ea=er.container(),ei=((et,er)=>{let ea=j(et,er);return -1===ea?I.none():I.some(ea)})(e3(ea.childNodes),et).map(et=>et<er.offset()?Vi(ea,er.offset()-1):er).getOr(er);return Rc(et),ei})(et,er):Sc(et,er),Rc=et=>{t4(et)&&Ur(et)&&(zr(et)?et.removeAttribute("data-mce-caret"):Ec(et)),rt(et)&&(kc(et),0===et.data.length&&Ec(et))},Bc=(et,er,ea)=>{let ei,es;let ed=yi(er.getBoundingClientRect(),ea);if("BODY"===et.tagName){let er=et.ownerDocument.documentElement;ei=et.scrollLeft||er.scrollLeft,es=et.scrollTop||er.scrollTop}else{let er=et.getBoundingClientRect();ei=et.scrollLeft-er.left,es=et.scrollTop-er.top}ed.left+=ei,ed.right+=ei,ed.top+=es,ed.bottom+=es,ed.width=1;let ec=er.offsetWidth-er.clientWidth;return ec>0&&(ea&&(ec*=-1),ed.left+=ec,ed.right+=ec),ed},Pc=(et,er,ea,ei)=>{let es,ed;let ec=Xa(),ev=oa(et),eC=et.dom,d=()=>{(et=>{var er,ea;let ei=Uo(pn(et),"*[contentEditable=false],video,audio,embed,object");for(let et=0;et<ei.length;et++){let es=ei[et].dom,ed=es.previousSibling;if(qr(ed)){let et=ed.data;1===et.length?null===(er=ed.parentNode)||void 0===er||er.removeChild(ed):ed.deleteData(et.length-1,1)}$r(ed=es.nextSibling)&&(1===ed.data.length?null===(ea=ed.parentNode)||void 0===ea||ea.removeChild(ed):ed.deleteData(0,1))}})(er),ed&&(Rc(ed),ed=null),ec.on(et=>{eC.remove(et.caret),ec.clear()}),es&&(clearInterval(es),es=void 0)};return{show:(et,eI)=>{let eD;if(d(),r_(eI))return null;if(!ea(eI))return ed=((et,er)=>{var ea;let ei=(null!==(ea=et.ownerDocument)&&void 0!==ea?ea:document).createTextNode("\uFEFF"),es=et.parentNode;if(er){let er=et.previousSibling;if(rt(er)){if(Ur(er))return er;if(qr(er))return er.splitText(er.data.length-1)}null==es||es.insertBefore(ei,et)}else{let er=et.nextSibling;if(rt(er)){if(Ur(er))return er;if($r(er))return er.splitText(1),er}et.nextSibling?null==es||es.insertBefore(ei,et.nextSibling):null==es||es.appendChild(ei)}return ei})(eI,et),eD=eI.ownerDocument.createRange(),Lc(ed.nextSibling)?(eD.setStart(ed,0),eD.setEnd(ed,0)):(eD.setStart(ed,1),eD.setEnd(ed,1)),eD;{let ea=((et,er,ea)=>{var ei;let es=(null!==(ei=er.ownerDocument)&&void 0!==ei?ei:document).createElement(et);es.setAttribute("data-mce-caret",ea?"before":"after"),es.setAttribute("data-mce-bogus","all"),es.appendChild(Tr().dom);let ed=er.parentNode;return ea?null==ed||ed.insertBefore(es,er):er.nextSibling?null==ed||ed.insertBefore(es,er.nextSibling):null==ed||ed.appendChild(es),es})(ev,eI,et),eP=Bc(er,eI,et);eC.setStyle(ea,"top",eP.top),ed=ea;let eL=eC.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});eC.setStyles(eL,{...eP}),eC.add(er,eL),ec.set({caret:eL,element:eI,before:et}),et&&eC.addClass(eL,"mce-visual-caret-before"),es=setInterval(()=>{ec.on(et=>{ei()?eC.toggleClass(et.caret,"mce-visual-caret-hidden"):eC.addClass(et.caret,"mce-visual-caret-hidden")})},500),(eD=eI.ownerDocument.createRange()).setStart(ea,0),eD.setEnd(ea,0)}return eD},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{ec.on(et=>{let ea=Bc(er,et.element,et.before);eC.setStyles(et.caret,{...ea})})},destroy:()=>clearInterval(es)}},Dc=()=>tJ.browser.isFirefox(),Lc=et=>rC(et)||rI(et),Mc=et=>(Lc(et)||Qo(et)&&Dc())&&Tn(pn(et)).exists(oo),lI=Yo("display","block table table-cell table-caption list-item"),Wc=et=>et>0,Kc=et=>et<0,Yc=(et,er)=>{let ea;for(;ea=et(er);)if(!Ir(ea))return ea;return null},Gc=(et,er,ea,ei,es)=>{let ed;let ec=new jo(et,ei),ev=rC(et)||Ir(et);if(Kc(er)){if(ev&&ea(ed=Yc(ec.prev.bind(ec),!0)))return ed;for(;ed=Yc(ec.prev.bind(ec),es);)if(ea(ed))return ed}if(Wc(er)){if(ev&&ea(ed=Yc(ec.next.bind(ec),!0)))return ed;for(;ed=Yc(ec.next.bind(ec),es);)if(ea(ed))return ed}return null},Xc=(et,er)=>{for(;et&&et!==er;){if(lI(et))return et;et=et.parentNode}return null},Qc=(et,er,ea)=>Xc(et.container(),ea)===Xc(er.container(),ea),Jc=(et,er)=>{if(!er)return I.none();let ea=er.container(),ei=er.offset();return t4(ea)?I.from(ea.childNodes[ei+et]):I.none()},Zc=(et,er)=>{var ea;let ei=(null!==(ea=er.ownerDocument)&&void 0!==ea?ea:document).createRange();return et?(ei.setStartBefore(er),ei.setEndBefore(er)):(ei.setStartAfter(er),ei.setEndAfter(er)),ei},eu=(et,er,ea)=>Xc(er,et)===Xc(ea,et),tu=(et,er,ea)=>{let ei=et?"previousSibling":"nextSibling",es=ea;for(;es&&es!==er;){let et=es[ei];if(et&&Ur(et)&&(et=et[ei]),rC(et)||rI(et)){if(eu(er,et,es))return et;break}if(ts(et))break;es=es.parentNode}return null},lB=T(Zc,!0),lD=T(Zc,!1),ru=(et,er,ea)=>{let ei;let es=T(tu,!0,er),ed=T(tu,!1,er),ec=ea.startContainer,ev=ea.startOffset;if(Ir(ec)){let et=rt(ec)?ec.parentNode:ec,er=et.getAttribute("data-mce-caret");if("before"===er&&Mc(ei=et.nextSibling))return lB(ei);if("after"===er&&Mc(ei=et.previousSibling))return lD(ei)}if(!ea.collapsed)return ea;if(rt(ec)){if(Ur(ec)){if(1===et){if(ei=ed(ec))return lB(ei);if(ei=es(ec))return lD(ei)}if(-1===et){if(ei=es(ec))return lD(ei);if(ei=ed(ec))return lB(ei)}return ea}if(qr(ec)&&ev>=ec.data.length-1)return 1===et&&(ei=ed(ec))?lB(ei):ea;if($r(ec)&&ev<=1)return -1===et&&(ei=es(ec))?lD(ei):ea;if(ev===ec.data.length)return(ei=ed(ec))?lB(ei):ea;if(0===ev)return(ei=es(ec))?lD(ei):ea}return ea},su=(et,er)=>Jc(et?0:-1,er).filter(rC),au=(et,er,ea)=>{let ei=ru(et,er,ea);return -1===et?Vi.fromRangeStart(ei):Vi.fromRangeEnd(ei)},iu=et=>I.from(et.getNode()).map(pn),lu=(et,er)=>{let ea=er;for(;(ea=et(ea))&&!ea.isVisible(););return ea},du=(et,er)=>{let ea=Qc(et,er);return!(ea||!rc(et.getNode()))||ea};(es=eP||(eP={}))[es.Backwards=-1]="Backwards",es[es.Forwards=1]="Forwards";let hu=et=>r$(et)||!!ns(et)&&!X(e3(et.getElementsByTagName("*")),(et,er)=>et||ry(er),!1),vu=(et,er)=>et.hasChildNodes()&&er<et.childNodes.length?et.childNodes[er]:null,yu=(et,er)=>{if(Wc(et)){if(ts(er.previousSibling)&&!rt(er.previousSibling))return Vi.before(er);if(rt(er))return Vi(er,0)}if(Kc(et)){if(ts(er.nextSibling)&&!rt(er.nextSibling))return Vi.after(er);if(rt(er))return Vi(er,er.data.length)}return Kc(et)?rc(er)?Vi.before(er):Vi.after(er):Vi.before(er)},Cu=(et,er,ea)=>{let ei,es,ed,ec;if(!t4(ea)||!er)return null;if(er.isEqual(Vi.after(ea))&&ea.lastChild){if(ec=Vi.after(ea.lastChild),Kc(et)&&ts(ea.lastChild)&&t4(ea.lastChild))return rc(ea.lastChild)?Vi.before(ea.lastChild):ec}else ec=er;let ev=ec.container(),eC=ec.offset();if(rt(ev)){if(Kc(et)&&eC>0)return Vi(ev,--eC);if(Wc(et)&&eC<ev.length)return Vi(ev,++eC);ei=ev}else{if(Kc(et)&&eC>0&&ts(es=vu(ev,eC-1)))return!hu(es)&&(ed=Gc(es,et,os,es))?rt(ed)?Vi(ed,ed.data.length):Vi.after(ed):rt(es)?Vi(es,es.data.length):Vi.before(es);if(Wc(et)&&eC<ev.childNodes.length&&ts(es=vu(ev,eC)))return rc(es)?((et,er)=>{let ea=er.nextSibling;return ea&&ts(ea)?rt(ea)?Vi(ea,0):Vi.before(ea):Cu(eP.Forwards,Vi.after(er),et)})(ea,es):!hu(es)&&(ed=Gc(es,et,os,es))?rt(ed)?Vi(ed,0):Vi.before(ed):rt(es)?Vi(es,0):Vi.after(es);ei=es||ec.getNode()}if(ei&&(Wc(et)&&ec.isAtEnd()||Kc(et)&&ec.isAtStart())&&os(ei=Gc(ei,et,eZ,ea,!0),ea))return yu(et,ei);es=ei?Gc(ei,et,os,ea):ei;let eI=Pe(Y(((et,er)=>{let ea=[],ei=et;for(;ei&&ei!==er;)ea.push(ei),ei=ei.parentNode;return ea})(ev,ea),rC));return!eI||es&&eI.contains(es)?es?yu(et,es):null:ec=Wc(et)?Vi.after(eI):Vi.before(eI)},wu=et=>({next:er=>Cu(eP.Forwards,er,et),prev:er=>Cu(eP.Backwards,er,et)}),xu=et=>Vi.isTextPosition(et)?0===et.offset():ts(et.getNode()),Eu=et=>{if(Vi.isTextPosition(et)){let er=et.container();return et.offset()===er.data.length}return ts(et.getNode(!0))},_u=(et,er)=>!Vi.isTextPosition(et)&&!Vi.isTextPosition(er)&&et.getNode()===er.getNode(!0),ku=(et,er,ea)=>{let ei=wu(er);return I.from(et?ei.next(ea):ei.prev(ea))},Su=(et,er,ea)=>ku(et,er,ea).bind(ei=>Qc(ea,ei,er)&&(et?!_u(ea,ei)&&!(!Vi.isTextPosition(ea)&&rc(ea.getNode()))&&Eu(ea)&&xu(ei):!_u(ei,ea)&&xu(ea)&&Eu(ei))?ku(et,er,ei):I.some(ei)),Nu=(et,er,ea,ei)=>Su(et,er,ea).bind(ea=>ei(ea)?Nu(et,er,ea,ei):I.some(ea)),Ru=(et,er)=>{let ea=et?er.firstChild:er.lastChild;return rt(ea)?I.some(Vi(ea,et?0:ea.data.length)):ea?ts(ea)?I.some(et?Vi.before(ea):rc(ea)?Vi.before(ea):Vi.after(ea)):((et,er,ea)=>{let ei=et?Vi.before(ea):Vi.after(ea);return ku(et,er,ei)})(et,er,ea):I.none()},lP=T(ku,!0),lL=T(ku,!1),lM=T(Ru,!0),lV=T(Ru,!1),lF="_mce_caret",Du=et=>t4(et)&&et.id===lF,Lu=(et,er)=>{let ea=er;for(;ea&&ea!==et;){if(Du(ea))return ea;ea=ea.parentNode}return null},Mu=et=>Ee(et,"name"),Iu=et=>tQ.isArray(et.start),Fu=et=>!(!Mu(et)&&eK(et.forward))||et.forward,Uu=(et,er)=>(t4(er)&&et.isBlock(er)&&!er.innerHTML&&(er.innerHTML='<br data-mce-bogus="1" />'),er),zu=(et,er)=>lV(et).fold(eQ,et=>(er.setStart(et.container(),et.offset()),er.setEnd(et.container(),et.offset()),!0)),ju=(et,er,ea)=>!er.hasChildNodes()&&!!Lu(et,er)&&(((et,er)=>{var ea;let ei=(null!==(ea=et.ownerDocument)&&void 0!==ea?ea:document).createTextNode("\uFEFF");et.appendChild(ei),er.setStart(ei,0),er.setEnd(ei,0)})(er,ea),!0),Hu=(et,er,ea,ei)=>{let es=ea[er?"start":"end"],ed=et.getRoot();if(es){let et=ed,ea=es[0];for(let er=es.length-1;et&&er>=1;er--){let ea=et.childNodes;if(ju(ed,et,ei))return!0;if(es[er]>ea.length-1)return!!ju(ed,et,ei)||zu(et,ei);et=ea[es[er]]}rt(et)&&(ea=Math.min(es[0],et.data.length)),t4(et)&&(ea=Math.min(es[0],et.childNodes.length)),er?ei.setStart(et,ea):ei.setEnd(et,ea)}return!0},$u=et=>rt(et)&&et.data.length>0,qu=(et,er,ea)=>{let ei=et.get(ea.id+"_"+er),es=null==ei?void 0:ei.parentNode,ed=ea.keep;if(ei&&es){let ec,ev;if("start"===er?ed?ei.hasChildNodes()?(ec=ei.firstChild,ev=1):$u(ei.nextSibling)?(ec=ei.nextSibling,ev=0):$u(ei.previousSibling)?(ec=ei.previousSibling,ev=ei.previousSibling.data.length):(ec=es,ev=et.nodeIndex(ei)+1):(ec=es,ev=et.nodeIndex(ei)):ed?ei.hasChildNodes()?(ec=ei.firstChild,ev=1):$u(ei.previousSibling)?(ec=ei.previousSibling,ev=ei.previousSibling.data.length):(ec=es,ev=et.nodeIndex(ei)):(ec=es,ev=et.nodeIndex(ei)),!ed){let es;let ed=ei.previousSibling,eC=ei.nextSibling;for(tQ.each(tQ.grep(ei.childNodes),et=>{rt(et)&&(et.data=et.data.replace(/\uFEFF/g,""))});es=et.get(ea.id+"_"+er);)et.remove(es,!0);if(rt(eC)&&rt(ed)&&!tJ.browser.isOpera()){let er=ed.data.length;ed.appendData(eC.data),et.remove(eC),ec=ed,ev=er}}return I.some(Vi(ec,ev))}return I.none()},Vu=(et,er,ea)=>((et,er,ea=!1)=>2===er?dl(Dr,ea,et):3===er?(et=>{let er=et.getRng();return{start:tl(et.dom.getRoot(),Vi.fromRangeStart(er)),end:tl(et.dom.getRoot(),Vi.fromRangeEnd(er)),forward:et.isForward()}})(et):er?{rng:et.getRng(),forward:et.isForward()}:ul(et,!1))(et,er,ea),Wu=(et,er)=>{((et,er)=>{let ea=et.dom;if(er){if(Iu(er))return((et,er)=>{let ea=et.createRng();return Hu(et,!0,er,ea)&&Hu(et,!1,er,ea)?I.some({range:ea,forward:Fu(er)}):I.none()})(ea,er);if(e$(er.start))return((et,er)=>{let ea=I.from(nl(et.getRoot(),er.start)),ei=I.from(nl(et.getRoot(),er.end));return Mt(ea,ei,(ea,ei)=>{let es=et.createRng();return es.setStart(ea.container(),ea.offset()),es.setEnd(ei.container(),ei.offset()),{range:es,forward:Fu(er)}})})(ea,er);if(Ee(er,"id"))return((et,er)=>{let ea=qu(et,"start",er),ei=qu(et,"end",er);return Mt(ea,ei.or(ea),(ea,ei)=>{let es=et.createRng();return es.setStart(Uu(et,ea.container()),ea.offset()),es.setEnd(Uu(et,ei.container()),ei.offset()),{range:es,forward:Fu(er)}})})(ea,er);if(Mu(er))return I.from(ea.select(er.name)[er.index]).map(et=>{let er=ea.createRng();return er.selectNode(et),{range:er,forward:!0}});if(Ee(er,"rng"))return I.some({range:er.rng,forward:Fu(er)})}return I.none()})(et,er).each(({range:er,forward:ea})=>{et.setRng(er,ea)})},Ku=et=>t4(et)&&"SPAN"===et.tagName&&"bookmark"===et.getAttribute("data-mce-type"),Yu=et=>"\xa0"===et,Xu=et=>""!==et&&-1!==" \f\n\r	\v".indexOf(et),Qu=et=>!Xu(et)&&!Yu(et)&&!vr(et),Ju=et=>{let er=[];if(et)for(let ea=0;ea<et.rangeCount;ea++)er.push(et.getRangeAt(ea));return er},Zu=(et,er)=>{let ea=Uo(er,"td[data-mce-selected],th[data-mce-selected]");return ea.length>0?ea:Y(te(et,et=>{let er=_i(et);return er?[pn(er)]:[]}),rH)},em=et=>Zu(Ju(et.selection.getSel()),pn(et.getBody())),tm=(et,er)=>eo(et,"table",er),nm=et=>Fn(et).fold(N([et]),er=>[et].concat(nm(er))),om=et=>Un(et).fold(N([et]),er=>"br"===Ht(er)?Bn(er).map(er=>[et].concat(om(er))).getOr([]):[et].concat(om(er))),rm=(et,er)=>Mt((et=>{let er=et.startContainer,ea=et.startOffset;return rt(er)?0===ea?I.some(pn(er)):I.none():I.from(er.childNodes[ea]).map(pn)})(er),(et=>{let er=et.endContainer,ea=et.endOffset;return rt(er)?ea===er.data.length?I.some(pn(er)):I.none():I.from(er.childNodes[ea-1]).map(pn)})(er),(er,ea)=>{let ei=J(nm(et),T(_n,er)),es=J(om(et),T(_n,ea));return ei.isSome()&&es.isSome()}).getOr(!1),sm=(et,er,ea,ei)=>{let es=new jo(ea,ea),ed=ye(et.schema.getMoveCaretBeforeOnEnterElements(),(et,er)=>!H(["td","th","table"],er.toLowerCase())),ec=ea;do{if(rt(ec)&&0!==tQ.trim(ec.data).length)return void(ei?er.setStart(ec,0):er.setEnd(ec,ec.data.length));if(ed[ec.nodeName])return void(ei?er.setStartBefore(ec):"BR"===ec.nodeName?er.setEndBefore(ec):er.setEndAfter(ec))}while(ec=ei?es.next():es.prev());"BODY"===ea.nodeName&&(ei?er.setStart(ea,0):er.setEnd(ea,ea.childNodes.length))},am=et=>{let er=et.selection.getSel();return C(er)&&er.rangeCount>0},im=(et,er)=>{let ea=em(et);ea.length>0?V(ea,ea=>{let ei=ea.dom,es=et.dom.createRng();es.setStartBefore(ei),es.setEndAfter(ei),er(es,!0)}):er(et.selection.getRng(),!1)},lm=(et,er,ea)=>{let ei=ul(et,er);ea(ei),et.moveToBookmark(ei)},dm=et=>eG(null==et?void 0:et.nodeType),cm=et=>t4(et)&&!Ku(et)&&!Du(et)&&!Xo(et),um=(et,er,ea)=>{let{selection:ei,dom:es}=et,ed=ei.getNode(),ec=rC(ed);lm(ei,!0,()=>{er()}),ec&&rC(ed)&&es.isChildOf(ed,et.getBody())?et.selection.select(ed):ea(ei.getStart())&&mm(es,ei)},mm=(et,er)=>{var ea,ei;let es=er.getRng(),{startContainer:ed,startOffset:ec}=es;if(!((et,er)=>{if(cm(er)&&!/^(TD|TH)$/.test(er.nodeName)){let ea=et.getAttrib(er,"data-mce-selected"),ei=parseInt(ea,10);return!isNaN(ei)&&ei>0}return!1})(et,er.getNode())&&t4(ed)){let ev;let eC=ed.childNodes,eI=et.getRoot();if(ec<eC.length){let er=eC[ec];ev=new jo(er,null!==(ea=et.getParent(er,et.isBlock))&&void 0!==ea?ea:eI)}else{let er=eC[eC.length-1];(ev=new jo(er,null!==(ei=et.getParent(er,et.isBlock))&&void 0!==ei?ei:eI)).next(!0)}for(let ea=ev.current();ea;ea=ev.next()){if("false"===et.getContentEditable(ea))return;if(rt(ea)&&!hm(ea))return es.setStart(ea,0),void er.setRng(es)}}},fm=(et,er,ea)=>{if(et){let ei=er?"nextSibling":"previousSibling";for(et=ea?et:et[ei];et;et=et[ei])if(t4(et)||!hm(et))return et}},gm=(et,er)=>!!et.getTextBlockElements()[er.nodeName.toLowerCase()]||Ts(et,er),pm=(et,er,ea)=>et.schema.isValidChild(er,ea),hm=(et,er=!1)=>{if(C(et)&&rt(et)){let ea=er?et.data.replace(/ /g,"\xa0"):et.data;return ss(ea)}return!1},bm=(et,er)=>{let ea=et.dom;return cm(er)&&"false"===ea.getContentEditable(er)&&((et,er)=>{let ea="[data-mce-cef-wrappable]",ei=o4(et),es=Ge(ei)?ea:`${ea},${ei}`;return xn(pn(er),es)})(et,er)&&0===ea.select('[contenteditable="true"]',er).length},vm=(et,er)=>eJ(et)?et(er):(C(er)&&(et=et.replace(/%(\w+)/g,(et,ea)=>er[ea]||et)),et),ym=(et,er)=>(er=er||"",et=""+((et=et||"").nodeName||et),er=""+(er.nodeName||er),et.toLowerCase()===er.toLowerCase()),Cm=(et,er)=>{if(y(et))return null;{let ea=String(et);return"color"!==er&&"backgroundColor"!==er||(ea=Ca(ea)),"fontWeight"===er&&700===et&&(ea="bold"),"fontFamily"===er&&(ea=ea.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),ea}},wm=(et,er,ea)=>{let ei=et.getStyle(er,ea);return Cm(ei,ea)},xm=(et,er)=>{let ea;return et.getParent(er,er=>!!t4(er)&&!!(ea=et.getStyle(er,"text-decoration"))&&"none"!==ea),ea},Em=(et,er,ea)=>et.getParents(er,ea,et.getRoot()),_m=(et,er,ea)=>{let ei=et.formatter.get(er);return C(ei)&&$(ei,ea)},km=et=>_e(et,"block"),Sm=et=>_e(et,"selector"),Nm=et=>_e(et,"inline"),Rm=et=>Sm(et)&&!1!==et.expand&&!Nm(et),Am=et=>(et=>{let er=[],ea=et;for(;ea;){if(rt(ea)&&"\uFEFF"!==ea.data||ea.childNodes.length>1)return[];t4(ea)&&er.push(ea),ea=ea.firstChild}return er})(et).length>0,Tm=et=>Du(et.dom)&&Am(et.dom),Lm=(et,er)=>{let ea=er;for(;ea;){if(t4(ea)&&et.getContentEditable(ea))return"false"===et.getContentEditable(ea)?ea:er;ea=ea.parentNode}return er},Mm=(et,er,ea,ei)=>{let es=er.data;if(et){for(let et=ea;et>0;et--)if(ei(es.charAt(et-1)))return et}else for(let et=ea;et<es.length;et++)if(ei(es.charAt(et)))return et;return -1},Im=(et,er,ea)=>Mm(et,er,ea,et=>Yu(et)||Xu(et)),Fm=(et,er,ea)=>Mm(et,er,ea,Qu),Um=(et,er,ea,ei,es,ed)=>{let ec;let ev=et.getParent(ea,et.isBlock)||er,l=(er,ea,ei)=>{let ed=hi(et),eC=es?ed.backwards:ed.forwards;return I.from(eC(er,ea,(et,er)=>Ku(et.parentNode)?-1:(ec=et,ei(es,et,er)),ev))};return l(ea,ei,Im).bind(et=>ed?l(et.container,et.offset+(es?-1:0),Fm):I.some(et)).orThunk(()=>ec?I.some({container:ec,offset:es?0:ec.length}):I.none())},zm=(et,er,ea,ei,es)=>{let ed=ei[es];rt(ei)&&Ge(ei.data)&&ed&&(ei=ed);let ec=Em(et,ei);for(let ei=0;ei<ec.length;ei++)for(let es=0;es<er.length;es++){let ed=er[es];if((!C(ed.collapsed)||ed.collapsed===ea.collapsed)&&Sm(ed)&&et.is(ec[ei],ed.selector))return ec[ei]}return ei},jm=(et,er,ea,ei)=>{var es;let ed=ea,ec=et.getRoot(),ev=er[0];if(km(ev)&&(ed=ev.wrapper?null:et.getParent(ea,ev.block,ec)),!ed){let er=null!==(es=et.getParent(ea,"LI,TD,TH,SUMMARY"))&&void 0!==es?es:ec;ed=et.getParent(rt(ea)?ea.parentNode:ea,er=>er!==ec&&gm(et.schema,er),er)}if(ed&&km(ev)&&ev.wrapper&&(ed=Em(et,ed,"ul,ol").reverse()[0]||ed),!ed)for(ed=ea;ed&&ed[ei]&&!et.isBlock(ed[ei])&&!ym(ed=ed[ei],"br"););return ed||ea},Hm=(et,er,ea,ei)=>{let es=ea.parentNode;return!C(ea[ei])&&(!(es!==er&&!y(es)&&!et.isBlock(es))||Hm(et,er,es,ei))},$m=(et,er,ea,ei,es)=>{var ed;let ec=ea,ev=es?"previousSibling":"nextSibling",eC=et.getRoot();if(rt(ea)&&!hm(ea)&&(es?ei>0:ei<ea.data.length))return ea;for(;ec;){if(!er[0].block_expand&&et.isBlock(ec))return ec;for(let er=ec[ev];er;er=er[ev]){let ea=rt(er)&&!Hm(et,eC,er,ev);if(!Ku(er)&&(!rc(ed=er)||!ed.getAttribute("data-mce-bogus")||ed.nextSibling)&&!hm(er,ea))return ec}if(ec===eC||ec.parentNode===eC){ea=ec;break}ec=ec.parentNode}return ea},qm=et=>Ku(et.parentNode)||Ku(et),Vm=(et,er,ea,ei=!1)=>{let{startContainer:es,startOffset:ed,endContainer:ec,endOffset:ev}=er,eC=ea[0];return t4(es)&&es.hasChildNodes()&&rt(es=ki(es,ed))&&(ed=0),t4(ec)&&ec.hasChildNodes()&&rt(ec=ki(ec,er.collapsed?ev:ev-1))&&(ev=ec.data.length),es=Lm(et,es),ec=Lm(et,ec),qm(es)&&(es=Ku(es)?es:es.parentNode,rt(es=er.collapsed?es.previousSibling||es:es.nextSibling||es)&&(ed=er.collapsed?es.length:0)),qm(ec)&&(ec=Ku(ec)?ec:ec.parentNode,rt(ec=er.collapsed?ec.nextSibling||ec:ec.previousSibling||ec)&&(ev=er.collapsed?0:ec.length)),er.collapsed&&(Um(et,et.getRoot(),es,ed,!0,ei).each(({container:et,offset:er})=>{es=et,ed=er}),Um(et,et.getRoot(),ec,ev,!1,ei).each(({container:et,offset:er})=>{ec=et,ev=er})),(Nm(eC)||eC.block_expand)&&(Nm(eC)&&rt(es)&&0!==ed||(es=$m(et,ea,es,ed,!0)),Nm(eC)&&rt(ec)&&ev!==ec.data.length||(ec=$m(et,ea,ec,ev,!1))),Rm(eC)&&(es=zm(et,ea,er,es,"previousSibling"),ec=zm(et,ea,er,ec,"nextSibling")),(km(eC)||Sm(eC))&&(es=jm(et,ea,es,"previousSibling"),ec=jm(et,ea,ec,"nextSibling"),km(eC)&&(et.isBlock(es)||(es=$m(et,ea,es,ed,!0)),et.isBlock(ec)||(ec=$m(et,ea,ec,ev,!1)))),t4(es)&&es.parentNode&&(ed=et.nodeIndex(es),es=es.parentNode),t4(ec)&&ec.parentNode&&(ev=et.nodeIndex(ec)+1,ec=ec.parentNode),{startContainer:es,startOffset:ed,endContainer:ec,endOffset:ev}},Wm=(et,er,ea)=>{var ei;let es=er.startOffset,ed=ki(er.startContainer,es),ec=er.endOffset,ev=ki(er.endContainer,ec-1),l=et=>{let er=et[0];rt(er)&&er===ed&&es>=er.data.length&&et.splice(0,1);let ea=et[et.length-1];return 0===ec&&et.length>0&&ea===ev&&rt(ea)&&et.splice(et.length-1,1),et},d=(et,er,ea)=>{let ei=[];for(;et&&et!==ea;et=et[er])ei.push(et);return ei},c=(er,ea)=>et.getParent(er,et=>et.parentNode===ea,ea),u=(et,er,ei)=>{let es=ei?"nextSibling":"previousSibling";for(let ed=et,ec=ed.parentNode;ed&&ed!==er;ed=ec){ec=ed.parentNode;let er=d(ed===et?ed:ed[es],es);er.length&&(ei||er.reverse(),ea(l(er)))}};if(ed===ev)return ea(l([ed]));let eC=null!==(ei=et.findCommonAncestor(ed,ev))&&void 0!==ei?ei:et.getRoot();if(et.isChildOf(ed,ev))return u(ed,eC,!0);if(et.isChildOf(ev,ed))return u(ev,eC);let eI=c(ed,eC)||ed,eD=c(ev,eC)||ev;u(ed,eI,!0);let eP=d(eI===ed?eI:eI.nextSibling,"nextSibling",eD===ev?eD.nextSibling:eD);eP.length&&ea(l(eP)),u(ev,eD)},lU=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Ym=(et,er,ea,ei,es,ed)=>{let{uid:ec=er,...ev}=ea;un(et,nF()),Jt(et,`${nH()}`,ec),Jt(et,`${nU()}`,ei);let{attributes:eC={},classes:eI=[]}=es(ec,ev);if(Zt(et,eC),V(eI,er=>{un(et,er)}),ed){eI.length>0&&Jt(et,`${nj()}`,eI.join(","));let er=e8(eC);er.length>0&&Jt(et,`${n$()}`,er.join(","))}},Gm=(et,er,ea,ei,es)=>{let ed=bn("span",et);return Ym(ed,er,ea,ei,es,!1),ed},Xm=(et,er,ea,ei,es,ed)=>{let ec=[],ev=Gm(et.getDoc(),ea,ed,ei,es),eC=Xa(),d=()=>{eC.clear()},c=et=>{V(et,u)},u=er=>{var eI,eD;switch(eI="span",eD=Ht(er),An(er).fold(()=>"skipping",ea=>"br"===eD||t2(er)&&"\uFEFF"===Cr(er)?"valid":t1(er)&&gn(er,nF())?"existing":Du(er.dom)?"caret":$(lU,et=>xn(er,et))?"valid-block":pm(et,eI,eD)&&pm(et,Ht(ea),eI)?"valid":"invalid-child")){case"invalid-child":{d();let et=Mn(er);c(et),d();break}case"valid-block":d(),Ym(er,ea,ed,ei,es,!0);break;case"valid":{let et=eC.get().getOrThunk(()=>{let et=fi(ev);return ec.push(et),eC.set(et),et});yo(er,et)}}};return Wm(et.dom,er,et=>{d(),(et=>{let er=q(et,pn);c(er)})(et)}),ec},Qm=et=>{let er=(()=>{let et={};return{register:(er,ea)=>{et[er]={name:er,settings:ea}},lookup:er=>xe(et,er).map(et=>et.settings),getNames:()=>e8(et)}})();((et,er)=>{let ea=nU(),o=et=>I.from(et.attr(ea)).bind(er.lookup),r=et=>{var er,ea;et.attr(nH(),null),et.attr(nU(),null),et.attr(nz(),null);let ei=I.from(et.attr(n$())).map(et=>et.split(",")).getOr([]),es=I.from(et.attr(nj())).map(et=>et.split(",")).getOr([]);V(ei,er=>et.attr(er,null));let ed=null!==(ea=null===(er=et.attr("class"))||void 0===er?void 0:er.split(" "))&&void 0!==ea?ea:[],ec=re(ed,[nF()].concat(es));et.attr("class",ec.length>0?ec.join(" "):null),et.attr(nj(),null),et.attr(n$(),null)};et.serializer.addTempAttr(nz()),et.serializer.addAttributeFilter(ea,et=>{for(let er of et)o(er).each(et=>{!1===et.persistent&&("span"===er.name?er.unwrap():r(er))})})})(et,er);let ea=((et,er)=>{let ea=$a({}),o=()=>({listeners:[],previous:Xa()}),r=(et,er)=>{s(et,et=>(er(et),et))},s=(et,er)=>{let ei=ea.get(),es=er(xe(ei,et).getOrThunk(o));ei[et]=es,ea.set(ei)},a=(er,ea)=>{V(li(et,er),et=>{ea?Jt(et,nz(),"true"):on(et,nz())})},ei=Ja(()=>{let ea=ae(er.getNames());V(ea,er=>{s(er,ea=>{let ei=ea.previous.get();return ai(et,I.some(er)).fold(()=>{ei.each(et=>{r(er,et=>{V(et.listeners,et=>et(!1,er))}),ea.previous.clear(),a(et,!1)})},({uid:et,name:er,elements:es})=>{Dt(ei,et)||(ei.each(et=>a(et,!1)),r(er,ea=>{V(ea.listeners,ea=>ea(!0,er,{uid:et,nodes:q(es,et=>et.dom)}))}),ea.previous.set(et),a(et,!0))}),{previous:ea.previous,listeners:ea.listeners}})})},30);return et.on("remove",()=>{ei.cancel()}),et.on("NodeChange",()=>{ei.throttle()}),{addListener:(et,er)=>{s(et,et=>({previous:et.previous,listeners:et.listeners.concat([er])}))}}})(et,er),ei=Xt("span"),r=et=>{V(et,et=>{ei(et)?Eo(et):(et=>{fn(et,nF()),on(et,`${nH()}`),on(et,`${nU()}`),on(et,`${nz()}`);let er=tn(et,`${n$()}`).map(et=>et.split(",")).getOr([]),ea=tn(et,`${nj()}`).map(et=>et.split(",")).getOr([]);V(er,er=>on(et,er)),V(ea,er=>{fn(et,er)}),on(et,`${nj()}`),on(et,`${n$()}`)})(et)})};return{register:(et,ea)=>{er.register(et,ea)},annotate:(ea,ei)=>{er.lookup(ea).each(er=>{((et,er,ea,ei)=>{et.undoManager.transact(()=>{let es=et.selection,ed=es.getRng(),ec=em(et).length>0,ev=ui("mce-annotation");if(ed.collapsed&&!ec&&((et,er)=>{let ea=Vm(et.dom,er,[{inline:"span"}]);er.setStart(ea.startContainer,ea.startOffset),er.setEnd(ea.endContainer,ea.endOffset),et.selection.setRng(er)})(et,ed),es.getRng().collapsed&&!ec){let ed=Gm(et.getDoc(),ev,ei,er,ea.decorate);So(ed,"\xa0"),es.getRng().insertNode(ed.dom),es.select(ed.dom)}else lm(es,!1,()=>{im(et,es=>{Xm(et,es,ev,er,ea.decorate,ei)})})})})(et,ea,er,ei)})},annotationChanged:(et,er)=>{ea.addListener(et,er)},remove:er=>{ai(et,I.some(er)).each(({elements:er})=>{let ea=et.selection.getBookmark();r(er),et.selection.moveToBookmark(ea)})},removeAll:er=>{let ea=et.selection.getBookmark();ge(di(et,er),(et,er)=>{r(et)}),et.selection.moveToBookmark(ea)},getAll:er=>{let ea=di(et,er);return pe(ea,et=>q(et,et=>et.dom))}}},Jm=et=>({getBookmark:T(Vu,et),moveToBookmark:T(Wu,et)});Jm.isBookmarkNode=Ku;let Zm=(et,er,ea)=>!ea.collapsed&&$(ea.getClientRects(),ea=>et>=ea.left&&et<=ea.right&&er>=ea.top&&er<=ea.bottom),ef=(et,er,ea)=>{et.dispatch(er,ea)},tf=(et,er,ea,ei)=>{et.dispatch("FormatApply",{format:er,node:ea,vars:ei})},nf=(et,er,ea,ei)=>{et.dispatch("FormatRemove",{format:er,node:ea,vars:ei})},of=(et,er)=>et.dispatch("SetContent",er),rf=(et,er)=>et.dispatch("GetContent",er),sf=(et,er)=>et.dispatch("PastePlainTextToggle",{state:er}),lH={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:et=>et.shiftKey||et.ctrlKey||et.altKey||lH.metaKeyPressed(et),metaKeyPressed:et=>tJ.os.isMacOS()||tJ.os.isiOS()?et.metaKey:et.ctrlKey&&!et.altKey},lz="data-mce-selected",lj=Math.abs,l$=Math.round,lq={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},mf=(et,er)=>{let ea,ei,es,ed,ec,ev,eC,eI,eD,eP,eL,eM,eV,eF,eU;let eH=er.dom,ez=er.getDoc(),ej=document,e$=er.getBody(),x=et=>C(et)&&(rp(et)||eH.is(et,"figure.image")),E=et=>rI(et)||eH.hasClass(et,"mce-preview-object"),_=et=>{let ea=et.target;((et,er)=>{if("longpress"===et.type||0===et.type.indexOf("touch")){let ea=et.touches[0];return x(et.target)&&!Zm(ea.clientX,ea.clientY,er)}return x(et.target)&&!Zm(et.clientX,et.clientY,er)})(et,er.selection.getRng())&&!et.isDefaultPrevented()&&er.selection.select(ea)},k=et=>eH.hasClass(et,"mce-preview-object")&&C(et.firstElementChild)?[et,et.firstElementChild]:eH.is(et,"figure.image")?[et.querySelector("img")]:[et],S=et=>{let ea=oX(er);return!!ea&&"false"!==et.getAttribute("data-mce-resize")&&et!==er.getBody()&&(eH.hasClass(et,"mce-preview-object")&&C(et.firstElementChild)?xn(pn(et.firstElementChild),ea):xn(pn(et),ea))},N=(et,ea,ei)=>{if(C(ei)){let es=k(et);V(es,et=>{et.style[ea]||!er.schema.isValid(et.nodeName.toLowerCase(),ea)?eH.setStyle(et,ea,ei):eH.setAttrib(et,ea,""+ei)})}},R=(et,er,ea)=>{N(et,"width",er),N(et,"height",ea)},A=et=>{let ec,ez,ej,eq;ec=et.screenX-ev,ez=et.screenY-eC,eM=ec*ed[2]+eI,eV=ez*ed[3]+eD,eM=eM<5?5:eM,eV=eV<5?5:eV,((x(ea)||E(ea))&&!1!==oJ(er)?!lH.modifierPressed(et):lH.modifierPressed(et))&&(lj(ec)>lj(ez)?(eV=l$(eM*eP),eM=l$(eV/eP)):(eM=l$(eV/eP),eV=l$(eM*eP))),R(ei,eM,eV),ej=ed.startPos.x+ec,eq=ed.startPos.y+ez,ej=ej>0?ej:0,eq=eq>0?eq:0,eH.setStyles(es,{left:ej,top:eq,display:"block"}),es.innerHTML=eM+" &times; "+eV,ed[2]<0&&ei.clientWidth<=eM&&eH.setStyle(ei,"left",(void 0)+(eI-eM)),ed[3]<0&&ei.clientHeight<=eV&&eH.setStyle(ei,"top",(void 0)+(eD-eV)),(ec=e$.scrollWidth-eF)+(ez=e$.scrollHeight-eU)!=0&&eH.setStyles(es,{left:ej-ec,top:eq-ez}),eL||(((et,er,ea,ei,es)=>{et.dispatch("ObjectResizeStart",{target:er,width:ea,height:ei,origin:es})})(er,ea,eI,eD,"corner-"+ed.name),eL=!0)},T=()=>{let et=eL;eL=!1,et&&(N(ea,"width",eM),N(ea,"height",eV)),eH.unbind(ez,"mousemove",A),eH.unbind(ez,"mouseup",T),ej!==ez&&(eH.unbind(ej,"mousemove",A),eH.unbind(ej,"mouseup",T)),eH.remove(ei),eH.remove(es),eH.remove(ec),O(ea),et&&(((et,er,ea,ei,es)=>{et.dispatch("ObjectResized",{target:er,width:ea,height:ei,origin:es})})(er,ea,eM,eV,"corner-"+ed.name),eH.setAttrib(ea,"style",eH.getAttrib(ea,"style"))),er.nodeChanged()},O=et=>{M();let eL=eH.getPos(et,e$),eq=eL.x,eW=eL.y,eY=et.getBoundingClientRect(),eK=eY.width||eY.right-eY.left,eX=eY.height||eY.bottom-eY.top;ea!==et&&(P(),ea=et,eM=eV=0);let eJ=er.dispatch("ObjectSelected",{target:et});S(et)&&!eJ.isDefaultPrevented()?ge(lq,(et,er)=>{let eL=eH.get("mceResizeHandle"+er);eL&&eH.remove(eL),eL=eH.add(e$,"div",{id:"mceResizeHandle"+er,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+er+"-resize; margin:0; padding:0"}),eH.bind(eL,"mousedown",eL=>{eL.stopImmediatePropagation(),eL.preventDefault(),(eL=>{var eM;let eV=k(ea)[0];ev=eL.screenX,eC=eL.screenY,eI=eV.clientWidth,eP=(eD=eV.clientHeight)/eI,(ed=et).name=er,ed.startPos={x:eK*et[0]+eq,y:eX*et[1]+eW},eF=e$.scrollWidth,eU=e$.scrollHeight,ec=eH.add(e$,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),eH.setStyles(ec,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),ei=E(eM=ea)?eH.create("img",{src:tJ.transparentSrc}):eM.cloneNode(!0),eH.addClass(ei,"mce-clonedresizable"),eH.setAttrib(ei,"data-mce-bogus","all"),ei.contentEditable="false",eH.setStyles(ei,{left:eq,top:eW,margin:0}),R(ei,eK,eX),ei.removeAttribute(lz),e$.appendChild(ei),eH.bind(ez,"mousemove",A),eH.bind(ez,"mouseup",T),ej!==ez&&(eH.bind(ej,"mousemove",A),eH.bind(ej,"mouseup",T)),es=eH.add(e$,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},eI+" &times; "+eD)})(eL)}),et.elm=eL,eH.setStyles(eL,{left:eK*et[0]+eq-eL.offsetWidth/2,top:eX*et[1]+eW-eL.offsetHeight/2})}):P(!1)},eq=Qa(O,0),P=(et=!0)=>{eq.cancel(),M(),ea&&et&&ea.removeAttribute(lz),ge(lq,(et,er)=>{let ea=eH.get("mceResizeHandle"+er);ea&&(eH.unbind(ea),eH.remove(ea))})},D=(et,er)=>eH.isChildOf(et,er),L=ea=>{if(eL||er.removed||er.composing)return;let ei="mousedown"===ea.type?ea.target:et.getNode(),es=no(pn(ei),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(et=>et.dom).filter(et=>eH.isEditable(et.parentElement)||"IMG"===et.nodeName&&eH.isEditable(et)).getOrUndefined(),ed=C(es)?eH.getAttrib(es,lz,"1"):"1";if(V(eH.select(`img[${lz}],hr[${lz}]`),et=>{et.removeAttribute(lz)}),C(es)&&D(es,e$)&&er.hasFocus()){I();let er=et.getStart(!0);if(D(er,es)&&D(et.getEnd(!0),es))return eH.setAttrib(es,lz,ed),void eq.throttle(es)}P()},M=()=>{ge(lq,et=>{et.elm&&(eH.unbind(et.elm),delete et.elm)})},I=()=>{try{er.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(et){}};return er.on("init",()=>{I(),er.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),er.on("keyup compositionend",et=>{ea&&"TABLE"===ea.nodeName&&L(et)}),er.on("hide blur",P),er.on("contextmenu longpress",_,!0)}),er.on("remove",M),{isResizable:S,showResizeRect:O,hideResizeRect:P,updateResizeRect:L,destroy:()=>{eq.cancel(),ea=ei=ec=null}}},ff=(et,er,ea)=>{let ei=et.document.createRange();return er.fold(et=>{ei.setStartBefore(et.dom)},(et,er)=>{ei.setStart(et.dom,er)},et=>{ei.setStartAfter(et.dom)}),((et,er)=>{er.fold(er=>{et.setEndBefore(er.dom)},(er,ea)=>{et.setEnd(er.dom,ea)},er=>{et.setEndAfter(er.dom)})})(ei,ea),ei},gf=(et,er,ea,ei,es)=>{let ed=et.document.createRange();return ed.setStart(er.dom,ea),ed.setEnd(ei.dom,es),ed},lW=hl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),hf=(et,er,ea)=>er(pn(ea.startContainer),ea.startOffset,pn(ea.endContainer),ea.endOffset);lW.ltr,lW.rtl;let bf=(et,er,ea,ei)=>({start:et,soffset:er,finish:ea,foffset:ei}),lY=document.caretPositionFromPoint?(et,er,ea)=>{var ei,es;return I.from(null===(es=(ei=et.dom).caretPositionFromPoint)||void 0===es?void 0:es.call(ei,er,ea)).bind(er=>{if(null===er.offsetNode)return I.none();let ea=et.dom.createRange();return ea.setStart(er.offsetNode,er.offset),ea.collapse(),I.some(ea)})}:document.caretRangeFromPoint?(et,er,ea)=>{var ei,es;return I.from(null===(es=(ei=et.dom).caretRangeFromPoint)||void 0===es?void 0:es.call(ei,er,ea))}:I.none,lK=hl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),lX={before:lK.before,on:lK.on,after:lK.after,cata:(et,er,ea,ei)=>et.fold(er,ea,ei),getStart:et=>et.fold(R,R,R)},lJ=hl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lG={domRange:lJ.domRange,relative:lJ.relative,exact:lJ.exact,exactFromRange:et=>lJ.exact(et.start,et.soffset,et.finish,et.foffset),getWin:et=>{let er=et.match({domRange:et=>pn(et.startContainer),relative:(et,er)=>lX.getStart(et),exact:(et,er,ea,ei)=>et});return Rn(er)},range:bf},Ef=(et,er)=>{let ea=Ht(et);return"input"===ea?lX.after(et):H(["br","img"],ea)?0===er?lX.before(et):lX.after(et):lX.on(et,er)},_f=(et,er)=>{let ea=et.fold(lX.before,Ef,lX.after),ei=er.fold(lX.before,Ef,lX.after);return lG.relative(ea,ei)},kf=(et,er,ea,ei)=>{let es=Ef(et,er),ed=Ef(ea,ei);return lG.relative(es,ed)},Sf=(et,er)=>{let ea=(er||document).createDocumentFragment();return V(et,et=>{ea.appendChild(et.dom)}),pn(ea)},Nf=et=>{let er=lG.getWin(et).dom,n=(et,ea,ei,es)=>gf(er,et,ea,ei,es),ea=et.match({domRange:et=>{let er=pn(et.startContainer),ea=pn(et.endContainer);return kf(er,et.startOffset,ea,et.endOffset)},relative:_f,exact:kf});return((et,er)=>{let ea=er.match({domRange:et=>({ltr:N(et),rtl:I.none}),relative:(er,ea)=>({ltr:De(()=>ff(et,er,ea)),rtl:De(()=>I.some(ff(et,ea,er)))}),exact:(er,ea,ei,es)=>({ltr:De(()=>gf(et,er,ea,ei,es)),rtl:De(()=>I.some(gf(et,ei,es,er,ea)))})});return((et,er)=>{let ea=er.ltr();return ea.collapsed?er.rtl().filter(et=>!1===et.collapsed).map(et=>lW.rtl(pn(et.endContainer),et.endOffset,pn(et.startContainer),et.startOffset)).getOrThunk(()=>hf(0,lW.ltr,ea)):hf(0,lW.ltr,ea)})(0,ea)})(er,ea).match({ltr:n,rtl:n})},Rf=(et,er,ea)=>((et,er,ea)=>{let ei=pn(et.document);return lY(ei,er,ea).map(et=>bf(pn(et.startContainer),et.startOffset,pn(et.endContainer),et.endOffset))})(Rn(pn(ea)).dom,et,er).map(et=>{let er=ea.createRange();return er.setStart(et.start.dom,et.soffset),er.setEnd(et.finish.dom,et.foffset),er}).getOrUndefined(),Af=(et,er)=>C(et)&&C(er)&&et.startContainer===er.startContainer&&et.startOffset===er.startOffset&&et.endContainer===er.endContainer&&et.endOffset===er.endOffset,Tf=(et,er,ea)=>null!==((et,er,ea)=>{let ei=et;for(;ei&&ei!==er;){if(ea(ei))return ei;ei=ei.parentNode}return null})(et,er,ea),Of=(et,er,ea)=>Tf(et,er,et=>et.nodeName===ea),Bf=(et,er)=>Ur(et)&&!Tf(et,er,Du),Pf=(et,er,ea)=>{let ei=er.parentNode;if(ei){let es;let ed=new jo(er,et.getParent(ei,et.isBlock)||et.getRoot());for(;es=ed[ea?"prev":"next"]();)if(rc(es))return!0}return!1},Df=(et,er,ea,ei,es)=>{let ed,ec;let ev=et.getRoot(),eC=et.schema.getNonEmptyElements(),eI=es.parentNode;if(!eI)return I.none();let eD=et.getParent(eI,et.isBlock)||ev;if(ei&&rc(es)&&er&&et.isEmpty(eD))return I.some(Vi(eI,et.nodeIndex(es)));let eP=new jo(es,eD);for(;ec=eP[ei?"prev":"next"]();){if("false"===et.getContentEditableParent(ec)||Bf(ec,ev))return I.none();if(rt(ec)&&ec.data.length>0)return Of(ec,ev,"A")?I.none():I.some(Vi(ec,ei?ec.data.length:0));if(et.isBlock(ec)||eC[ec.nodeName.toLowerCase()])return I.none();ed=ec}return ri(ed)?I.none():ea&&ed?I.some(Vi(ed,0)):I.none()},Lf=(et,er,ea,ei)=>{var es;let ed=et.getRoot(),ec,ev=!1,eC=ea?ei.startContainer:ei.endContainer,eI=ea?ei.startOffset:ei.endOffset,eD=t4(eC)&&eI===eC.childNodes.length,eP=et.schema.getNonEmptyElements(),eL=ea;if(Ur(eC))return I.none();if(t4(eC)&&eI>eC.childNodes.length-1&&(eL=!1),rs(eC)&&(eC=ed,eI=0),eC===ed){if(eL&&(ec=eC.childNodes[eI>0?eI-1:0])&&(Ur(ec)||eP[ec.nodeName]||Qo(ec)))return I.none();if(eC.hasChildNodes()){if(eI=Math.min(!eL&&eI>0?eI-1:eI,eC.childNodes.length-1),eI=rt(eC=eC.childNodes[eI])&&eD?eC.data.length:0,!er&&eC===ed.lastChild&&Qo(eC)||((et,er)=>{let ea=er;for(;ea&&ea!==et;){if(rC(ea))return!0;ea=ea.parentNode}return!1})(ed,eC)||Ur(eC)||rD(eC))return I.none();if(eC.hasChildNodes()&&!Qo(eC)){ec=eC;let er=new jo(eC,ed);do{if(rC(ec)||Ur(ec)){ev=!1;break}if(rt(ec)&&ec.data.length>0){eI=eL?0:ec.data.length,eC=ec,ev=!0;break}if(eP[ec.nodeName.toLowerCase()]&&!rR(ec)){eI=et.nodeIndex(ec),eC=ec.parentNode,eL||eI++,ev=!0;break}}while(ec=eL?er.next():er.prev())}}}return er&&(rt(eC)&&0===eI&&Df(et,eD,er,!0,eC).each(et=>{eC=et.container(),eI=et.offset(),ev=!0}),t4(eC)&&((ec=eC.childNodes[eI])||(ec=eC.childNodes[eI-1]),!ec||!rc(ec)||"A"===(null===(es=ec.previousSibling)||void 0===es?void 0:es.nodeName)||Pf(et,ec,!1)||Pf(et,ec,!0)||Df(et,eD,er,!0,ec).each(et=>{eC=et.container(),eI=et.offset(),ev=!0}))),eL&&!er&&rt(eC)&&eI===eC.data.length&&Df(et,eD,er,!1,eC).each(et=>{eC=et.container(),eI=et.offset(),ev=!0}),ev&&eC?I.some(Vi(eC,eI)):I.none()},Mf=(et,er)=>{let ea=er.collapsed,ei=er.cloneRange(),es=Vi.fromRangeStart(er);return Lf(et,ea,!0,ei).each(et=>{ea&&Vi.isAbove(es,et)||ei.setStart(et.container(),et.offset())}),ea||Lf(et,ea,!1,ei).each(et=>{ei.setEnd(et.container(),et.offset())}),ea&&ei.collapse(!0),Af(er,ei)?I.none():I.some(ei)},If=(et,er)=>et.splitText(er),Ff=et=>{let er=et.startContainer,ea=et.startOffset,ei=et.endContainer,es=et.endOffset;if(er===ei&&rt(er)){if(ea>0&&ea<er.data.length){if(er=(ei=If(er,ea)).previousSibling,es>ea){es-=ea;let et=If(ei,es).previousSibling;er=ei=et,es=et.data.length,ea=0}else es=0}}else if(rt(er)&&ea>0&&ea<er.data.length&&(er=If(er,ea),ea=0),rt(ei)&&es>0&&es<ei.data.length){let et=If(ei,es).previousSibling;ei=et,es=et.data.length}return{startContainer:er,startOffset:ea,endContainer:ei,endOffset:es}},Uf=et=>({walk:(er,ea)=>Wm(et,er,ea),split:Ff,expand:(er,ea={type:"word"})=>{if("word"===ea.type){let ea=Vm(et,er,[{inline:"span"}]),ei=et.createRng();return ei.setStart(ea.startContainer,ea.startOffset),ei.setEnd(ea.endContainer,ea.endOffset),ei}return er},normalize:er=>Mf(et,er).fold(eQ,et=>(er.setStart(et.startContainer,et.startOffset),er.setEnd(et.endContainer,et.endOffset),!0))});Uf.compareRanges=Af,Uf.getCaretRangeFromPoint=Rf,Uf.getSelectedNode=_i,Uf.getNode=ki;let lQ=((et,er)=>{let n=er=>{let ea=(et=>{let er=et.dom;return Gn(et)?er.getBoundingClientRect().height:er.offsetHeight})(er);if(ea<=0||null===ea){let ea=co(er,et);return parseFloat(ea)||0}return ea},o=(et,er)=>X(er,(er,ea)=>{let ei=co(et,ea),es=void 0===ei?0:parseInt(ei,10);return isNaN(es)?er:er+es},0);return{set:(er,ea)=>{if(!eG(ea)&&!ea.match(/^[0-9]+$/))throw Error(et+".set accepts only positive integer values. Value was "+ea);let ei=er.dom;so(ei)&&(ei.style[et]=ea+"px")},get:n,getOuter:n,aggregate:o,max:(et,er,ea)=>{let ei=o(et,ea);return er>ei?er-ei:0}}})("height"),jf=()=>pn(document),Hf=(et,er)=>et.view(er).fold(N([]),er=>{let ea=et.owner(er),ei=Hf(et,ea);return[er].concat(ei)});var lZ=Object.freeze({__proto__:null,view:et=>{var er;return(et.dom===document?I.none():I.from(null===(er=et.dom.defaultView)||void 0===er?void 0:er.frameElement)).map(pn)},owner:et=>Nn(et)});let qf=et=>"textarea"===Ht(et),Vf=(et,er)=>{let ea=(et=>{let er=et.dom.ownerDocument,ea=er.body,ei=er.defaultView,es=er.documentElement;if(ea===et.dom)return Ao(ea.offsetLeft,ea.offsetTop);let ed=Oo(null==ei?void 0:ei.pageYOffset,es.scrollTop),ec=Oo(null==ei?void 0:ei.pageXOffset,es.scrollLeft),ev=Oo(es.clientTop,ea.clientTop),eC=Oo(es.clientLeft,ea.clientLeft);return Bo(et).translate(ec-eC,ed-ev)})(et),ei=lQ.get(et);return{element:et,bottom:ea.top+ei,height:ei,pos:ea,cleanup:er}},Wf=(et,er,ea,ei)=>{Xf(et,(es,ed)=>Yf(et,er,ea,ei),ea)},Kf=(et,er,ea,ei,es)=>{let ed={elm:ei.element.dom,alignToTop:es};et.dispatch("ScrollIntoView",ed).isDefaultPrevented()||(ea(et,er,Po(er).top,ei,es),((et,er)=>{et.dispatch("AfterScrollIntoView",er)})(et,ed))},Yf=(et,er,ea,ei)=>{let es=pn(et.getBody()),ed=pn(et.getDoc());es.dom.offsetWidth;let ec=((et,er)=>{let ea=((et,er)=>{let ea=Mn(et);if(0===ea.length||qf(et))return{element:et,offset:er};if(er<ea.length&&!qf(ea[er]))return{element:ea[er],offset:0};{let ei=ea[ea.length-1];return qf(ei)?{element:et,offset:er}:"img"===Ht(ei)?{element:ei,offset:1}:t2(ei)?{element:ei,offset:Cr(ei).length}:{element:ei,offset:Mn(ei).length}}})(et,er),ei=hn('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return po(ea.element,ei),Vf(ei,()=>xo(ei))})(pn(ea.startContainer),ea.startOffset);Kf(et,ed,er,ec,ei),ec.cleanup()},Gf=(et,er,ea,ei)=>{let es=pn(et.getDoc());Kf(et,es,ea,Vf(pn(er),_),ei)},Xf=(et,er,ea)=>{let ei=ea.startContainer,es=ea.startOffset,ed=ea.endContainer,ec=ea.endOffset;er(pn(ei),pn(ed));let ev=et.dom.createRng();ev.setStart(ei,es),ev.setEnd(ed,ec),et.selection.setRng(ea)},Qf=(et,er,ea,ei,es)=>{let ed=er.pos;if(ei)Do(ed.left,ed.top,es);else{let ei=ed.top-ea+er.height;Do(-et.getBody().getBoundingClientRect().left,ei,es)}},Jf=(et,er,ea,ei,es,ed)=>{let ec=ei+ea,ev=es.pos.top,eC=es.bottom,eI=eC-ev>=ei;ev<ea?Qf(et,es,ei,!1!==ed,er):ev>ec?Qf(et,es,ei,eI?!1!==ed:!0===ed,er):eC>ec&&!eI&&Qf(et,es,ei,!0===ed,er)},Zf=(et,er,ea,ei,es)=>{let ed=Rn(er).dom.innerHeight;Jf(et,er,ea,ed,ei,es)},eg=(et,er,ea,ei,es)=>{let ed=Rn(er).dom.innerHeight;Jf(et,er,ea,ed,ei,es);let ec=(et=>{let er=jf(),ea=Po(er),ei=((et,er)=>{let ea=er.owner(et);return Hf(er,ea)})(et,lZ),es=Bo(et),ed=G(ei,(et,er)=>{let ea=Bo(er);return{left:et.left+ea.left,top:et.top+ea.top}},{left:0,top:0});return Ao(ed.left+es.left+ea.left,ed.top+es.top+ea.top)})(ei.element),ev=Io(window);ec.top<ev.y?Lo(ei.element,!1!==es):ec.top>ev.bottom&&Lo(ei.element,!0===es)},tg=(et,er,ea)=>Wf(et,Zf,er,ea),ng=(et,er,ea)=>Gf(et,er,Zf,ea),og=(et,er,ea)=>Wf(et,eg,er,ea),rg=(et,er,ea)=>Gf(et,er,eg,ea),sg=(et,er,ea)=>{(et.inline?tg:og)(et,er,ea)},ag=(et,er=!1)=>et.dom.focus({preventScroll:er}),ig=et=>{let er=t9(et).dom;return et.dom===er.activeElement},lg=(et=jf())=>I.from(et.dom.activeElement).map(pn),dg=(et,er)=>{let ea=t2(er)?Cr(er).length:Mn(er).length+1;return et>ea?ea:et<0?0:et},cg=et=>lG.range(et.start,dg(et.soffset,et.start),et.finish,dg(et.foffset,et.finish)),ug=(et,er)=>!$o(er.dom)&&(kn(et,er)||_n(et,er)),mg=et=>er=>ug(et,er.start)&&ug(et,er.finish),fg=et=>lG.range(pn(et.startContainer),et.startOffset,pn(et.endContainer),et.endOffset),gg=et=>{let er=document.createRange();try{return er.setStart(et.start.dom,et.soffset),er.setEnd(et.finish.dom,et.foffset),I.some(er)}catch(et){return I.none()}},pg=et=>{var er;let ea=et.inline||tJ.browser.isFirefox()?(et=>{let er=et.getSelection();return(er&&0!==er.rangeCount?I.from(er.getRangeAt(0)):I.none()).map(fg)})(Rn(er=pn(et.getBody())).dom).filter(mg(er)):I.none();et.bookmark=ea.isSome()?ea:et.bookmark},hg=et=>(et.bookmark?et.bookmark:I.none()).bind(er=>{var ea;return ea=pn(et.getBody()),I.from(er).filter(mg(ea)).map(cg)}).bind(gg),l0={isEditorUIElement:et=>{let er=et.className.toString();return -1!==er.indexOf("tox-")||-1!==er.indexOf("mce-")}},l1={setEditorTimeout:(et,er,ea)=>{var ei;return eG(ei=ea)||(ei=0),setTimeout(()=>{et.removed||er()},ei)},setEditorInterval:(et,er,ea)=>{var ei;let es=(eG(ei=ea)||(ei=0),setInterval(()=>{et.removed?clearInterval(es):er()},ei));return es}},l2=za.DOM,wg=et=>{let er=et.classList;return void 0!==er&&(er.contains("tox-edit-area")||er.contains("tox-edit-area__iframe")||er.contains("mce-content-body"))},xg=(et,er)=>{let ea=o7(et),ei=l2.getParent(er,er=>t4(er)&&l0.isEditorUIElement(er)||!!ea&&et.dom.is(er,ea));return null!==ei},Eg=et=>{try{let er=t9(pn(et.getElement()));return lg(er).fold(()=>document.body,et=>et.dom)}catch(et){return document.body}},_g=(er,ea)=>{let ei=ea.editor;(et=>{let er=Qa(()=>{pg(et)},0);et.on("init",()=>{et.inline&&((et,er)=>{let n=()=>{er.throttle()};za.DOM.bind(document,"mouseup",n),et.on("remove",()=>{za.DOM.unbind(document,"mouseup",n)})})(et,er),((et,er)=>{et.on("mouseup touchend",et=>{er.throttle()})})(et,er),et.on("keyup NodeChange AfterSetSelectionRange",er=>{"nodechange"===er.type&&er.selectionChange||pg(et)})}),et.on("remove",()=>{er.cancel()})})(ei);let o=(et,er)=>{lr(et)&&!0!==et.inline&&er(pn(et.getContainer()),"tox-edit-focus")};ei.on("focusin",()=>{let et=er.focusedEditor;wg(Eg(ei))&&o(ei,un),et!==ei&&(et&&et.dispatch("blur",{focusedEditor:ei}),er.setActive(ei),er.focusedEditor=ei,ei.dispatch("focus",{blurredEditor:et}),ei.focus(!0))}),ei.on("focusout",()=>{l1.setEditorTimeout(ei,()=>{let et=er.focusedEditor;wg(Eg(ei))&&et===ei||o(ei,fn),xg(ei,Eg(ei))||et!==ei||(ei.dispatch("blur",{focusedEditor:null}),er.focusedEditor=null)})}),et||(et=et=>{let ea=er.activeEditor;ea&&Kn(et).each(et=>{et.ownerDocument===document&&(et===document.body||xg(ea,et)||er.focusedEditor!==ea||(ea.dispatch("blur",{focusedEditor:null}),er.focusedEditor=null))})},l2.bind(document,"focusin",et))},kg=(er,ea)=>{er.focusedEditor===ea.editor&&(er.focusedEditor=null),!er.activeEditor&&et&&(l2.unbind(document,"focusin",et),et=null)},Sg=(et,er)=>{var ea;(ea=pn(et.getBody()),(er.collapsed?I.from(ki(er.startContainer,er.startOffset)).map(pn):I.none()).bind(et=>rU(et)?I.some(et):kn(ea,et)?I.none():I.some(ea))).bind(et=>lM(et.dom)).fold(()=>{et.selection.normalize()},er=>et.selection.setRng(er.toRange()))},Ng=et=>{if(et.setActive)try{et.setActive()}catch(er){et.focus()}else et.focus()},Rg=et=>et.inline?(et=>{var er;let ea=et.getBody();return ea&&(ig(er=pn(ea))||lg(t9(er)).filter(et=>er.dom.contains(et.dom)).isSome())})(et):C(et.iframeElement)&&ig(pn(et.iframeElement)),Ag=et=>Rg(et)||(et=>{let er=t9(pn(et.getElement()));return lg(er).filter(er=>!wg(er.dom)&&xg(et,er.dom)).isSome()})(et),Tg=et=>et.editorManager.setActive(et),Og=(et,er)=>er.collapsed?et.isEditable(er.startContainer):et.isEditable(er.startContainer)&&et.isEditable(er.endContainer),Bg=(et,er,ea,ei,es)=>{let ed=ea?er.startContainer:er.endContainer,ec=ea?er.startOffset:er.endOffset;return I.from(ed).map(pn).map(et=>ei&&er.collapsed?et:In(et,es(et,ec)).getOr(et)).bind(et=>t1(et)?I.some(et):An(et).filter(t1)).map(et=>et.dom).getOr(et)},Pg=(et,er,ea=!1)=>Bg(et,er,!0,ea,(et,er)=>Math.min(zn(et),er)),Dg=(et,er,ea=!1)=>Bg(et,er,!1,ea,(et,er)=>er>0?er-1:er),Lg=(et,er)=>{let ea=et;for(;et&&rt(et)&&0===et.length;)et=er?et.nextSibling:et.previousSibling;return et||ea},Mg=(et,er)=>q(er,er=>{let ea=et.dispatch("GetSelectionRange",{range:er});return ea.range!==er?ea.range:er}),l3=["img","br"],Fg=et=>{let er=wr(et).filter(et=>0!==et.trim().length||et.indexOf("\xa0")>-1).isSome();return er||H(l3,Ht(et))||Vt(et)&&"false"===en(et,"contenteditable")},l8="[data-mce-autocompleter]",zg=(et,er)=>{if(jg(pn(et.getBody())).isNone()){let ea=hn('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',et.getDoc());vo(ea,pn(er.extractContents())),er.insertNode(ea.dom),An(ea).each(et=>et.dom.normalize()),((et,er)=>{let n=et=>{let ea=Mn(et);for(let et=ea.length-1;et>=0;et--){let ei=ea[et];if(er(ei))return I.some(ei);let es=n(ei);if(es.isSome())return es}return I.none()};return n(et)})(ea,Fg).map(er=>{et.selection.setCursorLocation(er.dom,"img"===Ht(er)?1:wr(er).fold(()=>Mn(er).length,et=>et.length))})}},jg=et=>to(et,l8),l5={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},$g=(et,er,ea)=>{let ei=ea?"lastChild":"firstChild",es=ea?"prev":"next";if(et[ei])return et[ei];if(et!==er){let ea=et[es];if(ea)return ea;for(let ei=et.parent;ei&&ei!==er;ei=ei.parent)if(ea=ei[es])return ea}},qg=et=>{var er;let ea=null!==(er=et.value)&&void 0!==er?er:"";if(!ss(ea))return!1;let ei=et.parent;return!ei||"span"===ei.name&&!ei.attr("style")||!/^[ ]+$/.test(ea)},Vg=et=>{let er="a"===et.name&&!et.attr("href")&&et.attr("id");return et.attr("name")||et.attr("id")&&!et.firstChild||et.attr("data-mce-bookmark")||er};let Wg=class Wg{static create(et,er){let ea=new Wg(et,l5[et]||1);return er&&ge(er,(et,er)=>{ea.attr(er,et)}),ea}constructor(et,er){this.name=et,this.type=er,1===er&&(this.attributes=[],this.attributes.map={})}replace(et){return et.parent&&et.remove(),this.insert(et,this),this.remove(),this}attr(et,er){let ea=this;if(!e$(et))return C(et)&&ge(et,(et,er)=>{ea.attr(er,et)}),ea;let ei=ea.attributes;if(ei){if(void 0!==er){if(null===er){if(et in ei.map){delete ei.map[et];let er=ei.length;for(;er--;)if(ei[er].name===et)return ei.splice(er,1),ea}return ea}if(et in ei.map){let ea=ei.length;for(;ea--;)if(ei[ea].name===et){ei[ea].value=er;break}}else ei.push({name:et,value:er});return ei.map[et]=er,ea}return ei.map[et]}}clone(){let et=new Wg(this.name,this.type),er=this.attributes;if(er){let ea=[];ea.map={};for(let et=0,ei=er.length;et<ei;et++){let ei=er[et];"id"!==ei.name&&(ea[ea.length]={name:ei.name,value:ei.value},ea.map[ei.name]=ei.value)}et.attributes=ea}return et.value=this.value,et}wrap(et){return this.parent&&(this.parent.insert(et,this),et.append(this)),this}unwrap(){for(let et=this.firstChild;et;){let er=et.next;this.insert(et,this,!0),et=er}this.remove()}remove(){let et=this.parent,er=this.next,ea=this.prev;return et&&(et.firstChild===this?(et.firstChild=er,er&&(er.prev=null)):ea&&(ea.next=er),et.lastChild===this?(et.lastChild=ea,ea&&(ea.next=null)):er&&(er.prev=ea),this.parent=this.next=this.prev=null),this}append(et){et.parent&&et.remove();let er=this.lastChild;return er?(er.next=et,et.prev=er,this.lastChild=et):this.lastChild=this.firstChild=et,et.parent=this,et}insert(et,er,ea){et.parent&&et.remove();let ei=er.parent||this;return ea?(er===ei.firstChild?ei.firstChild=et:er.prev&&(er.prev.next=et),et.prev=er.prev,et.next=er,er.prev=et):(er===ei.lastChild?ei.lastChild=et:er.next&&(er.next.prev=et),et.next=er.next,et.prev=er,er.next=et),et.parent=ei,et}getAll(et){let er=[];for(let ea=this.firstChild;ea;ea=$g(ea,this))ea.name===et&&er.push(ea);return er}children(){let et=[];for(let er=this.firstChild;er;er=er.next)et.push(er);return et}empty(){if(this.firstChild){let et=[];for(let er=this.firstChild;er;er=$g(er,this))et.push(er);let er=et.length;for(;er--;){let ea=et[er];ea.parent=ea.firstChild=ea.lastChild=ea.next=ea.prev=null}}return this.firstChild=this.lastChild=null,this}isEmpty(et,er={},ea){var ei;let es=this.firstChild;if(Vg(this))return!1;if(es)do{if(1===es.type){if(es.attr("data-mce-bogus"))continue;if(et[es.name]||Vg(es))return!1}if(8===es.type||3===es.type&&!qg(es)||3===es.type&&es.parent&&er[es.parent.name]&&ss(null!==(ei=es.value)&&void 0!==ei?ei:"")||ea&&ea(es))return!1}while(es=$g(es,this));return!0}walk(et){return $g(this,null,et)}};let l6=tQ.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Yg=et=>e$(et.nodeValue)&&et.nodeValue.includes("\uFEFF"),Gg=et=>(0===et.length?"":`${q(et,et=>`[${et}]`).join(",")},`)+'[data-mce-bogus="all"]',Xg=et=>document.createTreeWalker(et,NodeFilter.SHOW_COMMENT,et=>Yg(et)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP),Qg=et=>document.createTreeWalker(et,NodeFilter.SHOW_TEXT,et=>{if(Yg(et)){let er=et.parentNode;return er&&Ee(l6,er.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}),Jg=et=>null!==Xg(et).nextNode(),Zg=et=>null!==Qg(et).nextNode(),ep=(et,er)=>null!==er.querySelector(Gg(et)),tp=(et,er)=>{V(er.querySelectorAll(Gg(et)),er=>{let ea=pn(er);"all"===en(ea,"data-mce-bogus")?xo(ea):V(et,et=>{nn(ea,et)&&on(ea,et)})})},np=et=>{let er=et.nextNode();for(;null!==er;)er.nodeValue=null,er=et.nextNode()},l9=k(np,Xg),l4=k(np,Qg),sp=(et,er)=>{let ea=[{condition:T(ep,er),action:T(tp,er)},{condition:Jg,action:l9},{condition:Zg,action:l4}],ei=et,es=!1;return V(ea,({condition:er,action:ea})=>{er(ei)&&(es||(ei=et.cloneNode(!0),es=!0),ea(ei))}),ei},ap=et=>{let er=Uo(et,"[data-mce-bogus]");V(er,et=>{"all"===en(et,"data-mce-bogus")?xo(et):Er(et)?(po(et,vn("\uFEFF")),xo(et)):Eo(et)})},ip=et=>{let er=Uo(et,"input");V(er,et=>{on(et,"name")})},lp=(et,er,ea)=>{let ei;return ei="raw"===er.format?tQ.trim(Dr(sp(ea,et.serializer.getTempAttrs()).innerHTML)):"text"===er.format?((et,er)=>{let ea=et.getDoc(),ei=t9(pn(et.getBody())),es=bn("div",ea);Jt(es,"data-mce-bogus","all"),lo(es,{position:"fixed",left:"-9999999px",top:"0"}),So(es,er.innerHTML),ap(es),ip(es);let ed=jn(ei)?ei:pn(Nn(ei).dom.body);vo(ed,es);let ec=Dr(es.dom.innerText);return xo(es),ec})(et,ea):"tree"===er.format?et.serializer.serialize(ea,er):((et,er)=>{let ea=oa(et),ei=RegExp(`^(<${ea}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${ea}>[\r
]*|<br \\/>[\r
]*)$`);return er.replace(ei,"")})(et,et.serializer.serialize(ea,er)),"text"!==er.format&&!rz(pn(ea))&&e$(ei)?tQ.trim(ei):ei},l7=tQ.makeMap,cp=et=>{let er=[],ea=(et=et||{}).indent,ei=l7(et.indent_before||""),es=l7(et.indent_after||""),ed=r4.getEncodeFunc(et.entity_encoding||"raw",et.entities),ec="xhtml"!==et.element_format;return{start:(et,ev,eC)=>{if(ea&&ei[et]&&er.length>0){let et=er[er.length-1];et.length>0&&"\n"!==et&&er.push("\n")}if(er.push("<",et),ev)for(let et=0,ea=ev.length;et<ea;et++){let ea=ev[et];er.push(" ",ea.name,'="',ed(ea.value,!0),'"')}if(er[er.length]=!eC||ec?">":" />",eC&&ea&&es[et]&&er.length>0){let et=er[er.length-1];et.length>0&&"\n"!==et&&er.push("\n")}},end:et=>{let ei;er.push("</",et,">"),ea&&es[et]&&er.length>0&&(ei=er[er.length-1]).length>0&&"\n"!==ei&&er.push("\n")},text:(et,ea)=>{et.length>0&&(er[er.length]=ea?et:ed(et))},cdata:et=>{er.push("<![CDATA[",et,"]]>")},comment:et=>{er.push("<!--",et,"-->")},pi:(et,ei)=>{ei?er.push("<?",et," ",ed(ei),"?>"):er.push("<?",et,"?>"),ea&&er.push("\n")},doctype:et=>{er.push("<!DOCTYPE",et,">",ea?"\n":"")},reset:()=>{er.length=0},getContent:()=>er.join("").replace(/\n$/,"")}},up=(et={},er=ua())=>{let ea=cp(et);return et.validate=!("validate"in et)||et.validate,{serialize:ei=>{let es=et.validate,ed={3:et=>{var er;ea.text(null!==(er=et.value)&&void 0!==er?er:"",et.raw)},8:et=>{var er;ea.comment(null!==(er=et.value)&&void 0!==er?er:"")},7:et=>{ea.pi(et.name,et.value)},10:et=>{var er;ea.doctype(null!==(er=et.value)&&void 0!==er?er:"")},4:et=>{var er;ea.cdata(null!==(er=et.value)&&void 0!==er?er:"")},11:et=>{let er=et;if(er=er.firstChild)do a(er);while(er=er.next)}};ea.reset();let a=et=>{var ei;let ec=ed[et.type];if(ec)ec(et);else{let ed=et.name,ec=ed in er.getVoidElements(),ev=et.attributes;if(es&&ev&&ev.length>1){let ea=[];ea.map={};let ei=er.getElementRule(et.name);if(ei){for(let et=0,er=ei.attributesOrder.length;et<er;et++){let er=ei.attributesOrder[et];if(er in ev.map){let et=ev.map[er];ea.map[er]=et,ea.push({name:er,value:et})}}for(let et=0,er=ev.length;et<er;et++){let er=ev[et].name;if(!(er in ea.map)){let et=ev.map[er];ea.map[er]=et,ea.push({name:er,value:et})}}ev=ea}}if(ea.start(ed,ev,ec),ps(ed))e$(et.value)&&ea.text(et.value,!0),ea.end(ed);else if(!ec){let er=et.firstChild;if(er){"pre"!==ed&&"textarea"!==ed||3!==er.type||"\n"!==(null===(ei=er.value)||void 0===ei?void 0:ei[0])||ea.text("\n",!0);do a(er);while(er=er.next)}ea.end(ed)}}};return 1!==ei.type||et.inner?3===ei.type?ed[3](ei):ed[11](ei):a(ei),ea.getContent()}}},ir=new Set;V(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],et=>{ir.add(et)});let ia=["font","text-decoration","text-emphasis"],gp=(et,er)=>e8(et.parseStyle(et.getAttrib(er,"style"))),pp=(et,er,ea)=>{let ei=gp(et,er),es=gp(et,ea),s=ei=>{var es,ed;let ec=null!==(es=et.getStyle(er,ei))&&void 0!==es?es:"",ev=null!==(ed=et.getStyle(ea,ei))&&void 0!==ed?ed:"";return Ye(ec)&&Ye(ev)&&ec!==ev};return $(ei,et=>{let t=er=>$(er,er=>er===et);if(!t(es)&&t(ia)){let et=Y(es,et=>$(ia,er=>He(et,er)));return $(et,s)}return s(et)})},hp=(et,er,ea)=>I.from(ea.container()).filter(rt).exists(ei=>er(ei.data.charAt(ea.offset()+(et?0:-1)))),id=T(hp,!0,Xu),ic=T(hp,!1,Xu),yp=et=>{let er=et.container();return rt(er)&&(0===er.data.length||vr(er.data)&&Jm.isBookmarkNode(er.parentNode))},Cp=(et,er)=>ea=>Jc(et?0:-1,ea).filter(er).isSome(),wp=et=>rp(et)&&"block"===co(pn(et),"display"),xp=et=>rC(et)&&(!t4(et)||"all"!==et.getAttribute("data-mce-bogus")),iy=Cp(!0,wp),ix=Cp(!1,wp),ik=Cp(!0,rI),iI=Cp(!1,rI),iB=Cp(!0,Qo),iD=Cp(!1,Qo),iP=Cp(!0,xp),iL=Cp(!1,xp),Op=(et,er)=>kn(er,et)?On(et,et=>eQ(et)||_n(et,er)).slice(0,-1):[],Bp=(et,er)=>[et].concat(Op(et,er)),Pp=(et,er,ea)=>Nu(et,er,ea,yp),Dp=(et,er,ea)=>J(Bp(pn(er.container()),et),et=>ea.isBlock(Ht(et))),Lp=(et,er,ea,ei)=>Pp(et,er.dom,ea).forall(et=>Dp(er,ea,ei).fold(()=>!Qc(et,ea,er.dom),ei=>!Qc(et,ea,er.dom)&&kn(ei,pn(et.container())))),Mp=(et,er,ea,ei)=>Dp(er,ea,ei).fold(()=>Pp(et,er.dom,ea).forall(et=>!Qc(et,ea,er.dom)),er=>Pp(et,er.dom,ea).isNone()),iM=T(Mp,!1),iV=T(Mp,!0),iF=T(Lp,!1),iU=T(Lp,!0),jp=et=>iu(et).exists(Er),Hp=(et,er,ea,ei)=>{let es=Y(Bp(pn(ea.container()),er),et=>ei.isBlock(Ht(et))),ed=le(es).getOr(er);return ku(et,ed.dom,ea).filter(jp)},$p=(et,er,ea)=>iu(er).exists(Er)||Hp(!0,et,er,ea).isSome(),qp=(et,er,ea)=>I.from(er.getNode(!0)).map(pn).exists(Er)||Hp(!1,et,er,ea).isSome(),iH=T(Hp,!1),iz=T(Hp,!0),Kp=et=>Vi.isTextPosition(et)&&!et.isAtStart()&&!et.isAtEnd(),Yp=(et,er,ea)=>{let ei=Y(Bp(pn(er.container()),et),et=>ea.isBlock(Ht(et)));return le(ei).getOr(et)},Gp=(et,er,ea)=>Kp(er)?ic(er):ic(er)||lL(Yp(et,er,ea).dom,er).exists(ic),Xp=(et,er,ea)=>Kp(er)?id(er):id(er)||lP(Yp(et,er,ea).dom,er).exists(id),Qp=et=>iu(et).bind(et=>Jn(et,t1)).exists(et=>H(["pre","pre-wrap"],co(et,"white-space"))),Jp=(et,er)=>ea=>{var ei;return C(ei=new jo(ea,et)[er]())&&rC(ei)&&lI(ei)},Zp=(et,er,ea)=>!Qp(er)&&(lL(et.dom,er).isNone()||lP(et.dom,er).isNone()||iM(et,er,ea)||iV(et,er,ea)||qp(et,er,ea)||$p(et,er,ea)||Gp(et,er,ea)||Xp(et,er,ea)),eh=(et,er,ea)=>!Qp(er)&&(iM(et,er,ea)||iF(et,er,ea)||qp(et,er,ea)||Gp(et,er,ea)||((et,er)=>{let ea=lL(et.dom,er).getOr(er),ei=Jp(et.dom,"prev");return er.isAtStart()&&(ei(er.container())||ei(ea.container()))})(et,er)),th=(et,er,ea)=>!Qp(er)&&(iV(et,er,ea)||iU(et,er,ea)||$p(et,er,ea)||Xp(et,er,ea)||((et,er)=>{let ea=lP(et.dom,er).getOr(er),ei=Jp(et.dom,"next");return er.isAtEnd()&&(ei(er.container())||ei(ea.container()))})(et,er)),nh=(et,er,ea)=>eh(et,er,ea)||th(et,(et=>{let er=et.container(),ea=et.offset();return rt(er)&&ea<er.data.length?Vi(er,ea+1):et})(er),ea),oh=(et,er)=>Yu(et.charAt(er)),rh=(et,er)=>Xu(et.charAt(er)),sh=(et,er,ea,ei)=>{let es=er.data,ed=Vi(er,0);return ea||!oh(es,0)||nh(et,ed,ei)?!!(ea&&rh(es,0)&&eh(et,ed,ei))&&(er.data="\xa0"+es.slice(1),!0):(er.data=" "+es.slice(1),!0)},ah=(et,er,ea,ei)=>{let es=er.data,ed=Vi(er,es.length-1);return ea||!oh(es,es.length-1)||nh(et,ed,ei)?!!(ea&&rh(es,es.length-1)&&th(et,ed,ei))&&(er.data=es.slice(0,-1)+"\xa0",!0):(er.data=es.slice(0,-1)+" ",!0)},ih=(et,er,ea)=>{let ei=er.container();if(!rt(ei))return I.none();if((et=>{let er=et.container();return rt(er)&&je(er.data,"\xa0")})(er)){let es=sh(et,ei,!1,ea)||(et=>{let er=et.data,ea=(et=>{let er=et.split("");return q(er,(et,ea)=>Yu(et)&&ea>0&&ea<er.length-1&&Qu(er[ea-1])&&Qu(er[ea+1])?" ":et).join("")})(er);return ea!==er&&(et.data=ea,!0)})(ei)||ah(et,ei,!1,ea);return It(es,er)}if(nh(et,er,ea)){let es=sh(et,ei,!0,ea)||ah(et,ei,!0,ea);return It(es,er)}return I.none()},lh=(et,er,ea,ei)=>{if(0===ea)return;let es=pn(et),ed=Qn(es,et=>ei.isBlock(Ht(et))).getOr(es),ec=et.data.slice(er,er+ea),ev=er+ea>=et.data.length&&th(ed,Vi(et,et.data.length),ei),eC=0===er&&eh(ed,Vi(et,0),ei);et.replaceData(er,ea,ls(ec,4,eC,ev))},dh=(et,er,ea)=>{let ei=et.data.slice(er),es=ei.length-e7(ei).length;lh(et,er,es,ea)},ch=(et,er,ea)=>{let ei=et.data.slice(0,er),es=ei.length-tt(ei).length;lh(et,er-es,es,ea)},uh=(et,er,ea,ei,es=!0)=>{let ed=tt(et.data).length,ec=es?et:er,ev=es?er:et;return es?ec.appendData(ev.data):ec.insertData(0,ev.data),xo(pn(ev)),ei&&dh(ec,ed,ea),ec},mh=(et,er)=>((et,er)=>{let ea=et.container(),ei=et.offset();return!Vi.isTextPosition(et)&&ea===er.parentNode&&ei>Vi.before(er).offset()})(er,et)?Vi(er.container(),er.offset()-1):er,fh=et=>{var er;return ts(et.previousSibling)?I.some(rt(er=et.previousSibling)?Vi(er,er.data.length):Vi.after(er)):et.previousSibling?lV(et.previousSibling):I.none()},gh=et=>{var er;return ts(et.nextSibling)?I.some(rt(er=et.nextSibling)?Vi(er,0):Vi.before(er)):et.nextSibling?lM(et.nextSibling):I.none()},ph=(et,er,ea)=>(et?gh(ea).orThunk(()=>fh(ea)).orThunk(()=>lP(er,Vi.after(ea)).orThunk(()=>lL(er,Vi.before(ea)))):fh(ea).orThunk(()=>gh(ea)).orThunk(()=>I.from(ea.previousSibling?ea.previousSibling:ea.parentNode).bind(et=>lL(er,Vi.before(et))).orThunk(()=>lP(er,Vi.after(ea))))).map(T(mh,ea)),hh=(et,er,ea)=>{ea.fold(()=>{et.focus()},ea=>{et.selection.setRng(ea.toRange(),er)})},bh=(et,er)=>er&&Ee(et.schema.getBlockElements(),Ht(er)),vh=(et,er,ea,ei=!0,es=!1)=>{var ed;let ec=ph(er,et.getBody(),ea.dom),ev=Qn(ea,T(bh,et),(ed=et.getBody(),et=>et.dom===ed)),eC=((et,er,ea,ei)=>{let es=Bn(et).filter(t2),ed=Pn(et).filter(t2);return xo(et),(es.isSome()&&ed.isSome()&&er.isSome()?I.some(((et,er,es)=>{let ed=et.dom,ec=er.dom,ev=ed.data.length;return uh(ed,ec,ea,ei),es.container()===ec?Vi(ed,ev):es})(es.getOrDie(),ed.getOrDie(),er.getOrDie())):I.none()).orThunk(()=>(ei&&(es.each(et=>ch(et.dom,et.dom.length,ea)),ed.each(et=>dh(et.dom,0,ea))),er))})(ea,ec,et.schema,Ee(et.schema.getTextInlineElements(),Ht(ea)));et.dom.isEmpty(et.getBody())?(et.setContent(""),et.selection.setCursorLocation()):ev.bind(et=>((et,er)=>{if(gs(et)){let ea=hn('<br data-mce-bogus="1">');return er?V(Mn(et),et=>{Tm(et)||xo(et)}):wo(et),vo(et,ea),I.some(Vi.before(ea.dom))}return I.none()})(et,es)).fold(()=>{ei&&hh(et,er,eC)},ea=>{ei&&hh(et,er,I.some(ea))})},ij=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Ch=(et,er)=>xn(pn(er),oK(et))&&!Ts(et.schema,er)&&et.dom.isEditable(er),wh=et=>{var er,ea;return"rtl"===za.DOM.getStyle(et,"direction",!0)||(ea=null!==(er=et.textContent)&&void 0!==er?er:"",ij.test(ea))},xh=(et,er,ea)=>{let ei=Y(za.DOM.getParents(ea.container(),"*",er),et);return I.from(ei[ei.length-1])},Eh=(et,er)=>{let ea=er.container(),ei=er.offset();return et?Fr(ea)?rt(ea.nextSibling)?Vi(ea.nextSibling,0):Vi.after(ea):jr(er)?Vi(ea,ei+1):er:Fr(ea)?rt(ea.previousSibling)?Vi(ea.previousSibling,ea.previousSibling.data.length):Vi.before(ea):Hr(er)?Vi(ea,ei-1):er},i$=T(Eh,!0),iq=T(Eh,!1),Sh=(et,er)=>{let n=et=>et.stopImmediatePropagation();et.on("beforeinput input",n,!0),et.getDoc().execCommand(er),et.off("beforeinput input",n)},Nh=et=>Sh(et,"Delete"),Rh=et=>rM(et)||rF(et),Ah=(et,er)=>kn(et,er)?Jn(er,Rh,er=>Dt(An(er),et,_n)):I.none(),Th=(et,er=!0)=>{et.dom.isEmpty(et.getBody())&&et.setContent("",{no_selection:!er})},Oh=(et,er,ea)=>Mt(lM(ea),lV(ea),(ei,es)=>{let ed=Eh(!0,ei),ec=Eh(!1,es),ev=Eh(!1,er);return et?lP(ea,ev).exists(et=>et.isEqual(ec)&&er.isEqual(ed)):lL(ea,ev).exists(et=>et.isEqual(ed)&&er.isEqual(ec))}).getOr(!0),Bh=et=>(8===$t(et)||"#comment"===Ht(et)?Bn(et):Un(et)).bind(Bh).orThunk(()=>I.some(et)),Ph=(et,er,ea,ei=!0)=>{var es;er.deleteContents();let ed=Bh(ea).getOr(ea),ec=pn(null!==(es=et.dom.getParent(ed.dom,et.dom.isBlock))&&void 0!==es?es:ea.dom);if(ec.dom===et.getBody()?Th(et,ei):gs(ec)&&(Or(ec),ei&&et.selection.setCursorLocation(ec.dom,0)),!_n(ea,ec)){let et=Dt(An(ec),ea)?[]:An(ec).map(Mn).map(et=>Y(et,et=>!_n(ec,et))).getOr([]);V(et.concat(Mn(ea)),et=>{_n(et,ec)||kn(et,ec)||!gs(et)||xo(et)})}},Dh=(et,er)=>((et,er)=>{var ea,ei;let es=et.dom;return es.parentNode?(ea=pn(es.parentNode),ei=ea=>!_n(et,ea)&&er(ea),J(ea.dom.childNodes,et=>ei(pn(et))).map(pn)):I.none()})(et,er).isSome(),Lh=(et,er)=>Zn(et,er).isSome(),Mh=et=>Uo(et,"td,th"),Ih=(et,er)=>tm(pn(et),er),Fh=(et,er)=>({start:et,end:er}),iW=hl([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),zh=(et,er)=>no(pn(et),"td,th",er),jh=et=>!_n(et.start,et.end),Hh=(et,er)=>tm(et.start,er).bind(ea=>tm(et.end,er).bind(et=>It(_n(ea,et),ea))),$h=et=>er=>Hh(er,et).map(et=>{var ea;return ea=Mh(et),{rng:er,table:et,cells:ea}}),qh=(et,er,ea,ei)=>{if(ea.collapsed||!et.forall(jh))return I.none();if(er.isSameTable){let er=et.bind($h(ei));return I.some({start:er,end:er})}{let et=zh(ea.startContainer,ei),er=zh(ea.endContainer,ei),es=et.bind(et=>tm(et,ei).bind(er=>de(Mh(er)).map(er=>Fh(et,er)))).bind($h(ei)),ed=er.bind(et=>tm(et,ei).bind(er=>le(Mh(er)).map(er=>Fh(er,et)))).bind($h(ei));return I.some({start:es,end:ed})}},Vh=(et,er)=>Z(et,et=>_n(et,er)),Wh=et=>Mt(Vh(et.cells,et.rng.start),Vh(et.cells,et.rng.end),(er,ea)=>et.cells.slice(er,ea+1)),Kh=(et,er)=>{let{startTable:ea,endTable:ei}=er,es=et.cloneRange();return ea.each(et=>es.setStartAfter(et.dom)),ei.each(et=>es.setEndBefore(et.dom)),es},Yh=(et,er)=>{let n=er=>_n(et,er),ea=((et,er)=>{let ea=zh(et.startContainer,er),ei=zh(et.endContainer,er);return Mt(ea,ei,Fh)})(er,n),ei=((et,er)=>{var ea;let ei=Ih(et.startContainer,er),es=Ih(et.endContainer,er),ed=ei.isSome(),ec=es.isSome(),ev=Mt(ei,es,_n).getOr(!1);return Mt((ea={startTable:ei,endTable:es,isStartInTable:ed,isEndInTable:ec,isSameTable:ev,isMultiTable:!ev&&ed&&ec}).startTable,ea.endTable,(et,er)=>{let ei=Lh(et,et=>_n(et,er)),es=Lh(er,er=>_n(er,et));return ei||es?{...ea,startTable:ei?I.none():ea.startTable,endTable:es?I.none():ea.endTable,isSameTable:!1,isMultiTable:!1}:ea}).getOr(ea)})(er,n);return ea.exists(et=>!jh(et)&&Hh(et,n).exists(et=>{let er=et.dom.rows;return 1===er.length&&1===er[0].cells.length})&&rm(et.start,er))?ea.map(et=>iW.singleCellTable(er,et.start)):ei.isMultiTable?qh(ea,ei,er,n).bind(({start:et,end:ea})=>{let es=et.bind(Wh).getOr([]),ed=ea.bind(Wh).getOr([]);if(es.length>0&&ed.length>0){let et=Kh(er,ei);return I.some(iW.multiTable(es,ed,et))}return I.none()}):qh(ea,ei,er,n).bind(({start:et,end:er})=>et.or(er)).bind(et=>{let{isSameTable:ea}=ei,es=Wh(et).getOr([]);if(ea&&et.cells.length===es.length)return I.some(iW.fullTable(et.table));if(es.length>0){if(ea)return I.some(iW.partialTable(es,I.none()));{let et=Kh(er,ei);return I.some(iW.partialTable(es,I.some({...ei,rng:et})))}}return I.none()})},Gh=et=>V(et,et=>{on(et,"contenteditable"),Or(et)}),Xh=(et,er,ea,ei)=>{let es=ea.cloneRange();ei?(es.setStart(ea.startContainer,ea.startOffset),es.setEndAfter(er.dom.lastChild)):(es.setStartBefore(er.dom.firstChild),es.setEnd(ea.endContainer,ea.endOffset)),eb(et,es,er,!1).each(et=>et())},Qh=et=>{let er=em(et),ea=pn(et.selection.getNode());r_(ea.dom)&&gs(ea)?et.selection.setCursorLocation(ea.dom,0):et.selection.collapse(!0),er.length>1&&$(er,et=>_n(et,ea))&&Jt(ea,"data-mce-selected","1")},Jh=(et,er,ea)=>I.some(()=>{let ei=et.selection.getRng(),es=ea.bind(({rng:ea,isStartInTable:es})=>{var ed;let ec=(ed=es?ea.endContainer:ea.startContainer,I.from(et.dom.getParent(ed,et.dom.isBlock)).map(pn));ea.deleteContents(),((et,er,ea)=>{ea.each(ea=>{er?xo(ea):(Or(ea),et.selection.setCursorLocation(ea.dom,0))})})(et,es,ec.filter(gs));let ev=es?er[0]:er[er.length-1];return Xh(et,ev,ei,es),gs(ev)?I.none():I.some(es?er.slice(1):er.slice(0,-1))}).getOr(er);Gh(es),Qh(et)}),Zh=(et,er,ea,ei)=>I.some(()=>{let es=et.selection.getRng(),ed=er[0],ec=ea[ea.length-1];Xh(et,ed,es,!0),Xh(et,ec,es,!1);let ev=gs(ed)?er:er.slice(1),eC=gs(ec)?ea:ea.slice(0,-1);Gh(ev.concat(eC)),ei.deleteContents(),Qh(et)}),eb=(et,er,ea,ei=!0)=>I.some(()=>{Ph(et,er,ea,ei)}),tb=(et,er)=>I.some(()=>vh(et,!1,er)),nb=(et,er)=>J(Bp(er,et),rH),ob=(et,er)=>J(Bp(er,et),Xt("caption")),rb=(et,er)=>I.some(()=>{Or(er),et.selection.setCursorLocation(er.dom,0)}),sb=(et,er)=>et?iB(er):iD(er),ab=(et,er,ea)=>{let ei=pn(et.getBody());return ob(ei,ea).fold(()=>((et,er,ea,ei)=>{let es=Vi.fromRangeStart(et.selection.getRng());return nb(ea,ei).bind(ei=>gs(ei)?rb(et,ei):Su(er,et.getBody(),es).bind(et=>nb(ea,pn(et.getNode())).bind(et=>_n(et,ei)?I.none():I.some(_))))})(et,er,ei,ea).orThunk(()=>It(((et,er)=>{let ea=Vi.fromRangeStart(et.selection.getRng());return sb(er,ea)||ku(er,et.getBody(),ea).exists(et=>sb(er,et))})(et,er),_)),ea=>((et,er,ea,ei)=>{let es=Vi.fromRangeStart(et.selection.getRng());return gs(ei)?rb(et,ei):Su(er,et.getBody(),es).fold(()=>I.some(_),ed=>lM(ei.dom).bind(et=>lV(ei.dom).map(ea=>er?es.isEqual(et)&&ed.isEqual(ea):es.isEqual(ea)&&ed.isEqual(et))).getOr(!0)?rb(et,ei):ob(ea,pn(ed.getNode())).fold(()=>I.some(_),et=>It(!_n(et,ei),_)))})(et,er,ei,ea))},ib=(et,er)=>{let ea=pn(et.selection.getStart(!0)),ei=em(et);return et.selection.isCollapsed()&&0===ei.length?ab(et,er,ea):((et,er,ea)=>{let ei=pn(et.getBody()),es=et.selection.getRng();return 0!==ea.length?Jh(et,ea,I.none()):ob(ei,er).fold(()=>Yh(ei,es).bind(er=>er.fold(T(eb,et),T(tb,et),T(Jh,et),T(Zh,et))),er=>rb(et,er))})(et,ea,ei)},lb=(et,er)=>{let ea=er;for(;ea&&ea!==et;){if(ry(ea)||rC(ea))return ea;ea=ea.parentNode}return null},iY=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],iK=tQ.each,ub=et=>{let er=et.dom,ea=new Set(et.serializer.getTempAttrs()),o=et=>$(iY,er=>He(et,er))||ea.has(et);return{compare:(et,ea)=>{if(et.nodeName!==ea.nodeName||et.nodeType!==ea.nodeType)return!1;let r=et=>{let ea={};return iK(er.getAttribs(et),ei=>{let es=ei.nodeName.toLowerCase();"style"===es||o(es)||(ea[es]=er.getAttrib(et,es))}),ea},s=(et,er)=>{for(let ea in et)if(Ee(et,ea)){let ei=er[ea];if(eX(ei)||et[ea]!==ei)return!1;delete er[ea]}for(let et in er)if(Ee(er,et))return!1;return!0};return(!(t4(et)&&t4(ea))||!!s(r(et),r(ea))&&!!s(er.parseStyle(er.getAttrib(et,"style")),er.parseStyle(er.getAttrib(ea,"style"))))&&!Ku(et)&&!Ku(ea)},isAttributeInternal:o}},mb=et=>["h1","h2","h3","h4","h5","h6"].includes(et.name),fb=(et,er,ea,ei)=>{let es=ea.name;for(let er=0,ed=et.length;er<ed;er++){let ed=et[er];if(ed.name===es){let et=ei.nodes[es];et?et.nodes.push(ea):ei.nodes[es]={filter:ed,nodes:[ea]}}}if(ea.attributes)for(let et=0,es=er.length;et<es;et++){let es=er[et],ed=es.name;if(ed in ea.attributes.map){let et=ei.attributes[ed];et?et.nodes.push(ea):ei.attributes[ed]={filter:es,nodes:[ea]}}}},gb=(et,er)=>{let n=(et,ea)=>{ge(et,et=>{let ei=e3(et.nodes);V(et.filter.callbacks,es=>{for(let er=ei.length-1;er>=0;er--){let es=ei[er];((ea?void 0===es.attr(et.filter.name):es.name!==et.filter.name)||y(es.parent))&&ei.splice(er,1)}ei.length>0&&es(ei,et.filter.name,er)})})};n(et.nodes,!1),n(et.attributes,!0)},pb=(et,er,ea,ei={})=>{let es=((et,er,ea)=>{let ei={nodes:{},attributes:{}};return ea.firstChild&&((ea,es)=>{let ed=ea;for(;ed=ed.walk();)fb(et,er,ed,ei)})(ea),ei})(et,er,ea);gb(es,ei)},hb=(et,er,ea,ei)=>{if((et.pad_empty_with_br||er.insert)&&ea(ei)){let et=new Wg("br",1);er.insert&&et.attr("data-mce-bogus","1"),ei.empty().append(et)}else ei.empty().append(new Wg("#text",3)).value="\xa0"},bb=(et,er)=>{let ea=null==et?void 0:et.firstChild;return C(ea)&&ea===et.lastChild&&ea.name===er},vb=(et,er,ea,ei)=>ei.isEmpty(er,ea,er=>((et,er)=>{let ea=et.getElementRule(er.name);return!0===(null==ea?void 0:ea.paddEmpty)})(et,er)),yb=et=>{let er;for(let ea=et;ea;ea=ea.parent){let et=ea.attr("contenteditable");if("false"===et)break;"true"===et&&(er=ea)}return I.from(er)},Cb=(et,er,ea=et.parent)=>{if(er.getSpecialElements()[et.name])et.empty().remove();else{let ei=et.children();for(let et of ei)ea&&!er.isValidChild(ea.name,et.name)&&Cb(et,er,ea);et.unwrap()}},wb=(et,er,ea,ei=_)=>{let es=er.getTextBlockElements(),ed=er.getNonEmptyElements(),ec=er.getWhitespaceElements(),ev=tQ.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),eC=new Set,d=et=>et!==ea&&!ev[et.name];for(let ea=0;ea<et.length;ea++){let ev,eI,eD;let eP=et[ea];if(!eP.parent||eC.has(eP))continue;if(es[eP.name]&&"li"===eP.parent.name){let et=eP.next;for(;et&&es[et.name];)et.name="li",eC.add(et),eP.parent.insert(et,eP.parent),et=et.next;eP.unwrap();continue}let eL=[eP];for(ev=eP.parent;ev&&!er.isValidChild(ev.name,eP.name)&&d(ev);ev=ev.parent)eL.push(ev);if(ev&&eL.length>1){if(xb(er,eP,ev))Cb(eP,er);else{eL.reverse(),ei(eI=eL[0].clone());let et=eI;for(let ea=0;ea<eL.length-1;ea++){er.isValidChild(et.name,eL[ea].name)&&ea>0?(ei(eD=eL[ea].clone()),et.append(eD)):eD=et;for(let et=eL[ea].firstChild;et&&et!==eL[ea+1];){let er=et.next;eD.append(et),et=er}et=eD}vb(er,ed,ec,eI)?ev.insert(eP,eL[0],!0):(ev.insert(eI,eL[0],!0),ev.insert(eP,eI)),(vb(er,ed,ec,ev=eL[0])||bb(ev,"br"))&&ev.empty().remove()}}else if(eP.parent){if("li"===eP.name){let et=eP.prev;if(et&&("ul"===et.name||"ol"===et.name)){et.append(eP);continue}if((et=eP.next)&&("ul"===et.name||"ol"===et.name)&&et.firstChild){et.insert(eP,et.firstChild,!0);continue}let er=new Wg("ul",1);ei(er),eP.wrap(er);continue}if(er.isValidChild(eP.parent.name,"div")&&er.isValidChild("div",eP.name)){let et=new Wg("div",1);ei(et),eP.wrap(et)}else Cb(eP,er)}}},xb=(et,er,ea=er.parent)=>!(!ea||(!et.children[er.name]||et.isValidChild(ea.name,er.name))&&("a"!==er.name||!((et,er)=>{let ea=et;for(;ea;){if("a"===ea.name)return!0;ea=ea.parent}return!1})(ea))&&("summary"!==ea.name||!mb(er)||(null==ea?void 0:ea.firstChild)===er&&(null==ea?void 0:ea.lastChild)===er)),Eb=et=>et.collapsed?et:(et=>{let er=Vi.fromRangeStart(et),ea=Vi.fromRangeEnd(et),ei=et.commonAncestorContainer;return ku(!1,ei,ea).map(es=>!Qc(er,ea,ei)&&Qc(er,es,ei)?((et,er,ea,ei)=>{let es=document.createRange();return es.setStart(et,er),es.setEnd(ea,ei),es})(er.container(),er.offset(),es.container(),es.offset()):et).getOr(et)})(et),_b=(et,er)=>{let ea=er.firstChild,ei=er.lastChild;return ea&&"meta"===ea.name&&(ea=ea.next),ei&&"mce_marker"===ei.attr("id")&&(ei=ei.prev),((et,er)=>{var ea;let ei=et.getNonEmptyElements();return C(er)&&(er.isEmpty(ei)||et.getBlockElements()[er.name]&&C(er.firstChild)&&er.firstChild===er.lastChild&&("br"===(ea=er.firstChild).name||"\xa0"===ea.value))})(et,ei)&&(ei=null==ei?void 0:ei.prev),!(!ea||ea!==ei||"ul"!==ea.name&&"ol"!==ea.name)},kb=et=>{var er,ea;return et.length>0&&(!(er=et[et.length-1]).firstChild||C(null==er?void 0:er.firstChild)&&er.firstChild===er.lastChild&&("\xa0"===(ea=er.firstChild).data||rc(ea)))?et.slice(0,-1):et},Sb=(et,er)=>{let ea=et.getParent(er,et.isBlock);return ea&&"LI"===ea.nodeName?ea:null},Nb=(et,er)=>{let ea=Vi.after(et),ei=wu(er).prev(ea);return ei?ei.toRange():null},Rb=(et,er,ea,ei)=>{var es,ed;let ec=((et,er,ea)=>{let ei=er.serialize(ea);return(et=>{var er,ea;let ei=et.firstChild,es=et.lastChild;return ei&&"META"===ei.nodeName&&(null===(er=ei.parentNode)||void 0===er||er.removeChild(ei)),es&&"mce_marker"===es.id&&(null===(ea=es.parentNode)||void 0===ea||ea.removeChild(es)),et})(et.createFragment(ei))})(er,et,ei),ev=Sb(er,ea.startContainer),eC=kb(Y(null!==(ed=null==(es=ec.firstChild)?void 0:es.childNodes)&&void 0!==ed?ed:[],et=>"LI"===et.nodeName)),eI=er.getRoot(),c=et=>{let ei=Vi.fromRangeStart(ea),es=wu(er.getRoot()),ed=1===et?es.prev(ei):es.next(ei),ec=null==ed?void 0:ed.getNode();return!ec||Sb(er,ec)!==ev};return ev?c(1)?((et,er,ea)=>{let ei=et.parentNode;return ei&&tQ.each(er,er=>{ei.insertBefore(er,et)}),((et,er)=>{let ea=Vi.before(et),ei=wu(er).next(ea);return ei?ei.toRange():null})(et,ea)})(ev,eC,eI):c(2)?(er.insertAfter(eC.reverse(),ev),Nb(eC[0],eI)):((et,er,ea,ei)=>{let es=((et,er)=>{let ea=er.cloneRange(),ei=er.cloneRange();return ea.setStartBefore(et),ei.setEndAfter(et),[ea.cloneContents(),ei.cloneContents()]})(et,ei),ed=et.parentNode;return ed&&(ed.insertBefore(es[0],et),tQ.each(er,er=>{ed.insertBefore(er,et)}),ed.insertBefore(es[1],et),ed.removeChild(et)),Nb(er[er.length-1],ea)})(ev,eC,eI,ea):null},iX=["pre"],Ob=(et,er,ea)=>{var ei,es,ed,ec,ev;let eC=et.selection,eI=et.dom,eD=et.parser,eP=ea.merge,eL=up({validate:!0},et.schema),eM='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';ea.preserve_zwsp||(er=Dr(er)),-1===er.indexOf("{$caret}")&&(er+="{$caret}"),er=er.replace(/\{\$caret\}/,eM);let eV=eC.getRng(),eF=eV.startContainer,eU=et.getBody();eF===eU&&eC.isCollapsed()&&eI.isBlock(eU.firstChild)&&C(ec=eU.firstChild)&&!et.schema.getVoidElements()[ec.nodeName]&&eI.isEmpty(eU.firstChild)&&((eV=eI.createRng()).setStart(eU.firstChild,0),eV.setEnd(eU.firstChild,0),eC.setRng(eV)),eC.isCollapsed()||(et=>{let er=et.dom,ea=Eb(et.selection.getRng());et.selection.setRng(ea);let ei=er.getParent(ea.startContainer,r_);C(ei)&&ei===er.getParent(ea.endContainer,r_)&&rm(pn(ei),ea)?eb(et,ea,pn(ei)):ea.startContainer===ea.endContainer&&ea.endOffset-ea.startOffset==1&&rt(ea.startContainer.childNodes[ea.startOffset])?ea.deleteContents():et.getDoc().execCommand("Delete",!1)})(et);let eH=eC.getNode(),ez={context:eH.nodeName.toLowerCase(),data:ea.data,insert:!0},ej=eD.parse(er,ez);if(!0===ea.paste&&_b(et.schema,ej)&&Sb(eI,eH))return(eV=Rb(eL,eI,eC.getRng(),ej))&&eC.setRng(eV),er;!0===ea.paste&&((et,er,ea,ei)=>{var es;let ed=er.firstChild,ec=er.lastChild,ev=ed===("bookmark"===ec.attr("data-mce-type")?ec.prev:ec),eC=H(iX,ed.name);if(ev&&eC){let er="false"!==ed.attr("contenteditable"),ec=(null===(es=et.getParent(ea,et.isBlock))||void 0===es?void 0:es.nodeName.toLowerCase())===ed.name,ev=I.from(lb(ei,ea)).forall(ry);return er&&ec&&ev}return!1})(eI,ej,eH,et.getBody())&&(null===(ei=ej.firstChild)||void 0===ei||ei.unwrap()),(et=>{let er=et;for(;er=er.walk();)1===er.type&&er.attr("data-mce-fragment","1")})(ej);let e$=ej.lastChild;if(e$&&"mce_marker"===e$.attr("id")){let er=e$;for(e$=e$.prev;e$;e$=e$.walk(!0))if(3===e$.type||!eI.isBlock(e$.name)){e$.parent&&et.schema.isValidChild(e$.parent.name,"span")&&e$.parent.insert(er,e$,"br"===e$.name);break}}if(et._selectionOverrides.showBlockCaretContainer(eH),ez.invalid||$(ej.children(),mb)&&"SUMMARY"===(null===(ev=eI.getParent(eH,eI.isBlock))||void 0===ev?void 0:ev.nodeName)){et.selection.setContent(eM);let ea,ei=eC.getNode(),ed=et.getBody();for(rs(ei)?ei=ea=ed:ea=ei;ea&&ea!==ed;)ei=ea,ea=ea.parentNode;er=ei===ed?ed.innerHTML:eI.getOuterHTML(ei);let ec=eD.parse(er),ev=(et=>{for(let er=et;er;er=er.walk())if("mce_marker"===er.attr("id"))return I.some(er);return I.none()})(ec),eP=ev.bind(yb).getOr(ec);ev.each(et=>et.replace(ej));let eV=ej.children(),eF=null!==(es=ej.parent)&&void 0!==es?es:ec;ej.unwrap();let eU=Y(eV,er=>xb(et.schema,er,eF));wb(eU,et.schema,eP),pb(eD.getNodeFilters(),eD.getAttributeFilters(),ec),er=eL.serialize(ec),ei===ed?eI.setHTML(ed,er):eI.setOuterHTML(ei,er)}else((et,er,ea)=>{var ei;if("all"===ea.getAttribute("data-mce-bogus"))null===(ei=ea.parentNode)||void 0===ei||ei.insertBefore(et.dom.createFragment(er),ea);else{let ei=ea.firstChild,es=ea.lastChild;ei&&(ei!==es||"BR"!==ei.nodeName)?et.selection.setContent(er,{no_events:!0}):et.dom.setHTML(ea,er)}})(et,er=eL.serialize(ej),eH);return((et,er)=>{let ea=et.schema.getTextInlineElements(),ei=et.dom;if(er){let er=et.getBody(),es=ub(et);tQ.each(ei.select("*[data-mce-fragment]"),et=>{if(C(ea[et.nodeName.toLowerCase()])&&ne(gp(ei,et),et=>!ir.has(et))){for(let ea=et.parentElement;C(ea)&&ea!==er&&!pp(ei,et,ea);ea=ea.parentElement)if(es.compare(ea,et)){ei.remove(et,!0);break}}})}})(et,eP),((et,er)=>{var ea,ei,es,ed;let ec;let ev=et.dom,eC=et.selection;if(!er)return;eC.scrollIntoView(er);let eI=lb(et.getBody(),er);if(eI&&"false"===ev.getContentEditable(eI))return ev.remove(er),void eC.select(eI);let eD=ev.createRng(),eP=er.previousSibling;if(rt(eP)){eD.setStart(eP,null!==(ei=null===(ea=eP.nodeValue)||void 0===ea?void 0:ea.length)&&void 0!==ei?ei:0);let et=er.nextSibling;rt(et)&&(eP.appendData(et.data),null===(es=et.parentNode)||void 0===es||es.removeChild(et))}else eD.setStartBefore(er),eD.setEndBefore(er);let eL=ev.getParent(er,ev.isBlock);if(ev.remove(er),eL&&ev.isEmpty(eL)){let er;let ea=r_(eL);wo(pn(eL)),eD.setStart(eL,0),eD.setEnd(eL,0),ea||eL.getAttribute("data-mce-fragment")||(ed=eD,er=Vi.fromRangeStart(ed),!(ec=null==(er=wu(et.getBody()).next(er))?void 0:er.toRange()))?ev.add(eL,ev.create("br",ea?{}:{"data-mce-bogus":"1"})):(eD=ec,ev.remove(eL))}eC.setRng(eD)})(et,eI.get("mce_marker")),ed=et.getBody(),tQ.each(ed.getElementsByTagName("*"),et=>{et.removeAttribute("data-mce-fragment")}),((et,er,ea)=>{I.from(et.getParent(er,"td,th")).map(pn).each(et=>((et,er)=>{Un(et).each(ea=>{Bn(ea).each(ei=>{er.isBlock(Ht(et))&&Er(ea)&&er.isBlock(Ht(ei))&&xo(ea)})})})(et,ea))})(eI,eC.getStart(),et.schema),((et,er,ea)=>{let ei=On(pn(ea),et=>_n(et,pn(er)));ie(ei,ei.length-2).filter(t1).fold(()=>ks(et,er),er=>ks(et,er.dom))})(et.schema,et.getBody(),eC.getStart()),er},Bb=et=>et instanceof Wg,Pb=(et,er,ea)=>{et.dom.setHTML(et.getBody(),er),!0!==ea&&Rg(et)&&lM(et.getBody()).each(er=>{let ea=er.getNode(),ei=Qo(ea)?lM(ea).getOr(er):er;et.selection.setRng(ei.toRange())})},Db=et=>eJ(et)?et:eQ,Lb=(et,er,ea)=>{let ei=er(et),es=Db(ea);return ei.orThunk(()=>es(et)?I.none():((et,er,ea)=>{let ei=et.dom,es=Db(ea);for(;ei.parentNode;){ei=ei.parentNode;let et=pn(ei),ea=er(et);if(ea.isSome())return ea;if(es(et))break}return I.none()})(et,er,es))},Ib=(et,er,ea)=>{let ei=et.formatter.get(ea);if(ei)for(let ea=0;ea<ei.length;ea++){let es=ei[ea];if(Sm(es)&&!1===es.inherit&&et.dom.is(er,es.selector))return!0}return!1},Fb=(et,er,ea,ei,es)=>{let ed=et.dom.getRoot();if(er===ed)return!1;let ec=et.dom.getParent(er,er=>!!Ib(et,er,ea)||er.parentNode===ed||!!jb(et,er,ea,ei,!0));return!!jb(et,ec,ea,ei,es)},Ub=(et,er,ea)=>!(!Nm(ea)||!ym(er,ea.inline))||!(!km(ea)||!ym(er,ea.block))||!!Sm(ea)&&t4(er)&&et.is(er,ea.selector),zb=(et,er,ea,ei,es,ed)=>{let ec=ea[ei],ev="attributes"===ei;if(eJ(ea.onmatch))return ea.onmatch(er,ea,ei);if(ec){if(Se(ec))for(let ea=0;ea<ec.length&&(ev?!et.getAttrib(er,ec[ea]):!wm(et,er,ec[ea]));ea++);else for(let ei in ec)if(Ee(ec,ei)){let eC=ev?et.getAttrib(er,ei):wm(et,er,ei),eI=vm(ec[ei],ed),eD=y(eC)||Ge(eC);if(eD&&y(eI))continue;if(es&&eD&&!ea.exact||(!es||ea.exact)&&!ym(eC,Cm(eI,ei)))return!1}}return!0},jb=(et,er,ea,ei,es)=>{let ed=et.formatter.get(ea),ec=et.dom;if(ed&&t4(er))for(let ea=0;ea<ed.length;ea++){let ev=ed[ea];if(Ub(et.dom,er,ev)&&zb(ec,er,ev,"attributes",es,ei)&&zb(ec,er,ev,"styles",es,ei)){let ea=ev.classes;if(ea){for(let es=0;es<ea.length;es++)if(!et.dom.hasClass(er,vm(ea[es],ei)))return}return ev}}},Hb=(et,er,ea,ei,es)=>{if(ei)return Fb(et,ei,er,ea,es);if(ei=et.selection.getNode(),Fb(et,ei,er,ea,es))return!0;let ed=et.selection.getStart();return!(ed===ei||!Fb(et,ed,er,ea,es))},qb=et=>{if(et){let er=new jo(et,et);for(let et=er.current();et;et=er.next())if(rt(et))return et}return null},Vb=et=>{let er=bn("span");return Zt(er,{id:lF,"data-mce-bogus":"1","data-mce-type":"format-caret"}),et&&vo(er,vn("\uFEFF")),er},Wb=(et,er,ea)=>{let ei=et.dom,es=et.selection;if(Am(er))vh(et,!1,pn(er),ea,!0);else{let et=es.getRng(),ea=ei.getParent(er,ei.isBlock),ed=et.startContainer,ec=et.startOffset,ev=et.endContainer,eC=et.endOffset,eI=(et=>{let er=qb(et);return er&&"\uFEFF"===er.data.charAt(0)&&er.deleteData(0,1),er})(er);ei.remove(er,!0),ed===eI&&ec>0&&et.setStart(eI,ec-1),ev===eI&&eC>0&&et.setEnd(eI,eC-1),ea&&ei.isEmpty(ea)&&Or(pn(ea)),es.setRng(et)}},Kb=(et,er,ea)=>{let ei=et.dom,es=et.selection;if(er)Wb(et,er,ea);else if(!(er=Lu(et.getBody(),es.getStart())))for(;er=ei.get(lF);)Wb(et,er,ea)},Yb=(et,er)=>(et.appendChild(er),er),Gb=(et,er)=>{var ea;let ei=G(et,(et,er)=>Yb(et,er.cloneNode(!1)),er),es=null!==(ea=ei.ownerDocument)&&void 0!==ea?ea:document;return Yb(ei,es.createTextNode("\uFEFF"))},Xb=(et,er,ea,ei)=>{let es;let ed=et.dom,ec=et.selection,ev=!1,eC=et.formatter.get(er);if(!eC)return;let eI=ec.getRng(),eD=eI.startContainer,eP=eI.startOffset,eL=eD;rt(eD)&&(eP!==eD.data.length&&(ev=!0),eL=eL.parentNode);let eM=[];for(;eL;){if(jb(et,eL,er,ea,ei)){es=eL;break}eL.nextSibling&&(ev=!0),eM.push(eL),eL=eL.parentNode}if(es){if(ev){let es=ec.getBookmark();eI.collapse(!0);let ev=Vm(ed,eI,eC,!0);ev=Ff(ev),et.formatter.remove(er,ea,ev,ei),ec.moveToBookmark(es)}else{let ev=Lu(et.getBody(),es),eC=C(ev)?ed.getParents(es.parentNode,eZ,ev):[],eI=Vb(!1).dom;((et,er,ea)=>{var ei,es;let ed=et.dom,ec=ed.getParent(ea,T(gm,et.schema));ec&&ed.isEmpty(ec)?null===(ei=ea.parentNode)||void 0===ei||ei.replaceChild(er,ea):((et=>{let er=Uo(et,"br"),ea=Y((et=>{let er=[],ea=et.dom;for(;ea;)er.push(pn(ea)),ea=ea.lastChild;return er})(et).slice(-1),Er);er.length===ea.length&&V(ea,xo)})(pn(ea)),ed.isEmpty(ea)?null===(es=ea.parentNode)||void 0===es||es.replaceChild(er,ea):ed.insertAfter(er,ea))})(et,eI,null!=ev?ev:es);let eD=((et,er,ea,ei,es,ed)=>{let ec=et.formatter,ev=et.dom,eC=Y(e8(ec.get()),et=>et!==ei&&!je(et,"removeformat")),eI=X(eC,(er,ei)=>{let es=_m(et,ei,et=>{let t=et=>eJ(et)||et.length>1&&"%"===et.charAt(0);return $(["styles","attributes"],er=>xe(et,er).exists(et=>{let er=eW(et)?et:we(et);return $(er,t)}))});return et.formatter.matchNode(ea,ei,{},es)?er.concat([ei]):er},[]);if(Y(eI,er=>!((et,er,ea)=>{let ei=["inline","block","selector","attributes","styles","classes"],a=et=>ye(et,(et,er)=>$(ei,et=>et===er));return _m(et,er,er=>{let ei=a(er);return _m(et,ea,et=>{let er=a(et);return((et,er,ea=ez)=>r(ea).eq(et,er))(ei,er)})})})(et,er,ei)).length>0){let et=ea.cloneNode(!1);return ev.add(er,et),ec.remove(ei,es,et,ed),ev.remove(et),I.some(et)}return I.none()})(et,eI,es,er,ea,ei),eP=Gb([...eM,...eD.toArray(),...eC],eI);ev&&Wb(et,ev,C(ev)),ec.setCursorLocation(eP,1),ed.isEmpty(es)&&ed.remove(es)}}},Qb=et=>{let er=Vb(!1),ea=Gb(et,er.dom);return{caretContainer:er,caretPosition:Vi(ea,0)}},Jb=(et,er)=>{let{caretContainer:ea,caretPosition:ei}=Qb(er);return po(pn(et),ea),xo(pn(et)),ei},Zb=(et,er)=>{if(Du(er.dom))return!1;let ea=et.schema.getTextInlineElements();return Ee(ea,Ht(er))&&!Du(er.dom)&&!Xo(er.dom)},iJ={},iG=Ko(["pre"]);iJ.pre||(iJ.pre=[]),iJ.pre.push(et=>{if(!et.selection.getRng().collapsed){let er=et.selection.getSelectedBlocks(),ea=Y(Y(er,iG),et=>{let ea=et.previousSibling;return iG(ea)&&H(er,ea)});V(ea,et=>{((et,er)=>{let ea=pn(er),ei=Nn(ea).dom;xo(ea),Co(pn(et),[bn("br",ei),bn("br",ei),...Mn(ea)])})(et.previousSibling,et)})}});let iQ=["fontWeight","fontStyle","color","fontSize","fontFamily"],ov=(et,er)=>{let ea=et.get(er);return eW(ea)?J(ea,et=>Nm(et)&&"span"===et.inline&&eq(et.styles)&&$(e8(et.styles),et=>H(iQ,et))):I.none()},rv=(et,er)=>lL(er,Vi.fromRangeStart(et)).isNone(),sv=(et,er)=>!1===lP(er,Vi.fromRangeEnd(et)).exists(et=>!rc(et.getNode())||lP(er,et).isSome()),av=et=>er=>rB(er)&&et.isEditable(er),iv=et=>Y(et.getSelectedBlocks(),av(et.dom)),iZ=tQ.each,dv=et=>t4(et)&&!Ku(et)&&!Du(et)&&!Xo(et),cv=(et,er)=>{for(let ea=et;ea&&!(rt(ea)&&Ye(ea.data));ea=ea[er])if(t4(ea)&&!Ku(ea))return ea;return et},uv=(et,er,ea)=>{let ei=ub(et),es=Vo(er)&&et.dom.isEditable(er),ed=Vo(ea)&&et.dom.isEditable(ea);if(es&&ed){let es=cv(er,"previousSibling"),ed=cv(ea,"nextSibling");if(ei.compare(es,ed)){for(let et=es.nextSibling;et&&et!==ed;){let er=et;et=et.nextSibling,es.appendChild(er)}return et.dom.remove(ed),tQ.each(tQ.grep(ed.childNodes),et=>{es.appendChild(et)}),es}}return ea},mv=(et,er,ea,ei)=>{var es;if(ei&&!1!==er.merge_siblings){let er=null!==(es=uv(et,fm(ei),ei))&&void 0!==es?es:ei;uv(et,er,fm(er,!0))}},fv=(et,er,ea)=>{iZ(et.childNodes,et=>{dv(et)&&(er(et)&&ea(et),et.hasChildNodes()&&fv(et,er,ea))})},gv=(et,er)=>ea=>!(!ea||!wm(et,ea,er)),pv=(et,er,ea)=>ei=>{et.setStyle(ei,er,ea),""===ei.getAttribute("style")&&ei.removeAttribute("style"),"SPAN"===ei.nodeName&&0===et.getAttribs(ei).length&&et.remove(ei,!0)},i0=hl([{keep:[]},{rename:["name"]},{removed:[]}]),i1=/^(src|href|style)$/,i2=tQ.each,Cv=(et,er,ea)=>et.isChildOf(er,ea)&&er!==ea&&!et.isBlock(ea),wv=(et,er,ea)=>{let ei=er[ea?"startContainer":"endContainer"],es=er[ea?"startOffset":"endOffset"];if(t4(ei)){let et=ei.childNodes.length-1;!ea&&es&&es--,ei=ei.childNodes[es>et?et:es]}return rt(ei)&&ea&&es>=ei.data.length&&(ei=new jo(ei,et.getBody()).next()||ei),rt(ei)&&!ea&&0===es&&(ei=new jo(ei,et.getBody()).prev()||ei),ei},xv=(et,er)=>{let ea=er?"firstChild":"lastChild",ei=et[ea];return/^(TR|TH|TD)$/.test(et.nodeName)&&ei?"TR"===et.nodeName&&ei[ea]||ei:et},Ev=(et,er,ea,ei)=>{var es;let ed=et.create(ea,ei);return null===(es=er.parentNode)||void 0===es||es.insertBefore(ed,er),ed.appendChild(er),ed},_v=(et,er,ea,ei,es)=>{let ed=pn(er),ec=pn(et.create(ei,es)),ev=ea?Ln(ed):Dn(ed);return Co(ec,ev),ea?(po(ed,ec),bo(ec,ed)):(ho(ed,ec),vo(ec,ed)),ec.dom},kv=(et,er,ea)=>{let ei;let es=er.parentNode,ed=et.dom,ec=oa(et);km(ea)&&es===ed.getRoot()&&(ea.list_block&&ym(er,ea.list_block)||V(e3(er.childNodes),er=>{pm(et,ec,er.nodeName.toLowerCase())?ei?ei.appendChild(er):(ei=Ev(ed,er,ec),ed.setAttribs(ei,ol(et))):ei=null})),Sm(ea)&&Nm(ea)&&Dt(xe(ea,"mixed"),!0)&&!ym(ea.inline,er)||ed.remove(er,!0)},Sv=(et,er,ea)=>eG(et)?{name:er,value:null}:{name:et,value:vm(er,ea)},Nv=(et,er)=>{""===et.getAttrib(er,"style")&&(er.removeAttribute("style"),er.removeAttribute("data-mce-style"))},Rv=(et,er,ea,ei,es)=>{let ed=!1;i2(ea.styles,(ec,ev)=>{let{name:eC,value:eI}=Sv(ev,ec,ei),eD=Cm(eI,eC);(ea.remove_similar||eY(eI)||!t4(es)||ym(wm(et,es,eC),eD))&&et.setStyle(er,eC,""),ed=!0}),ed&&Nv(et,er)},Av=(et,er,ea,ei,es)=>{let ed=et.dom,ec=ub(et),ev=et.schema;if(Nm(er)&&Rs(ev,er.inline)&&Ts(ev,ei)&&ei.parentElement===et.getBody())return kv(et,ei,er),i0.removed();if(!er.ceFalseOverride&&ei&&"false"===ed.getContentEditableParent(ei)||ei&&!Ub(ed,ei,er)&&(!er.links||"A"!==ei.nodeName))return i0.keep();let eC=er.preserve_attributes;if(Nm(er)&&"all"===er.remove&&eW(eC)){let et=Y(ed.getAttribs(ei),et=>H(eC,et.name.toLowerCase()));if(ed.removeAllAttribs(ei),V(et,et=>ed.setAttrib(ei,et.name,et.value)),et.length>0)return i0.rename("span")}if("all"!==er.remove){Rv(ed,ei,er,ea,es),i2(er.attributes,(et,ec)=>{let{name:ev,value:eC}=Sv(ec,et,ea);if(er.remove_similar||eY(eC)||!t4(es)||ym(ed.getAttrib(es,ev),eC)){if("class"===ev){let et=ed.getAttrib(ei,ev);if(et){let er="";if(V(et.split(/\s+/),et=>{/mce\-\w+/.test(et)&&(er+=(er?" ":"")+et)}),er)return void ed.setAttrib(ei,ev,er)}}if(i1.test(ev)&&ei.removeAttribute("data-mce-"+ev),"style"===ev&&Ko(["li"])(ei)&&"none"===ed.getStyle(ei,"list-style-type"))return ei.removeAttribute(ev),void ed.setStyle(ei,"list-style-type","none");"class"===ev&&ei.removeAttribute("className"),ei.removeAttribute(ev)}}),i2(er.classes,et=>{et=vm(et,ea),t4(es)&&!ed.hasClass(es,et)||ed.removeClass(ei,et)});let et=ed.getAttribs(ei);for(let er=0;er<et.length;er++){let ea=et[er].nodeName;if(!ec.isAttributeInternal(ea))return i0.keep()}}return"none"!==er.remove?(kv(et,ei,er),i0.removed()):i0.keep()},Tv=(et,er,ea,ei)=>Av(et,er,ea,ei,ei).fold(N(ei),er=>(et.dom.createFragment().appendChild(ei),et.dom.rename(ei,er)),N(null)),Ov=(et,er,ea,ei,es)=>{(ei||et.selection.isEditable())&&((et,er,ea,ei,es)=>{let ed=et.formatter.get(er),ec=ed[0],ev=et.dom,eC=et.selection,d=ei=>{let ev;let eC=(ei.parentNode&&V(Em(et.dom,ei.parentNode).reverse(),ei=>{if(!ev&&t4(ei)&&"_start"!==ei.id&&"_end"!==ei.id){let ed=jb(et,ei,er,ea,es);ed&&!1!==ed.split&&(ev=ei)}}),ev);return((et,er,ea,ei,es,ed,ec,ev)=>{var eC,eI;let eD,eP;let eL=et.dom;if(ea){let ed=ea.parentNode;for(let ea=ei.parentNode;ea&&ea!==ed;ea=ea.parentNode){let ei=eL.clone(ea,!1);for(let ea=0;ea<er.length&&null!==(ei=Tv(et,er[ea],ev,ei));ea++);ei&&(eD&&ei.appendChild(eD),eP||(eP=ei),eD=ei)}ec.mixed&&eL.isBlock(ea)||(ei=null!==(eC=eL.split(ea,ei))&&void 0!==eC?eC:ei),eD&&eP&&(null===(eI=es.parentNode)||void 0===eI||eI.insertBefore(eD,es),eP.appendChild(es),Nm(ec)&&mv(et,ec,0,eD))}return ei})(et,ed,eC,ei,ei,0,ec,ea)},c=er=>$(ed,ei=>Bv(et,ei,ea,er,er)),u=er=>{let ea=e3(er.childNodes),ei=c(er)||$(ed,et=>Ub(ev,er,et)),es=er.parentNode;if(!ei&&C(es)&&Rm(ec)&&c(es),ec.deep&&ea.length)for(let et=0;et<ea.length;et++)u(ea[et]);V(["underline","line-through","overline"],ea=>{t4(er)&&et.dom.getStyle(er,"text-decoration")===ea&&er.parentNode&&xm(ev,er.parentNode)===ea&&Bv(et,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ea}},void 0,er)})},m=et=>{let er=ev.get(et?"_start":"_end");if(er){var ea;let ei=er[et?"firstChild":"lastChild"];return Ku(ea=ei)&&t4(ea)&&("_start"===ea.id||"_end"===ea.id)&&(ei=ei[et?"firstChild":"lastChild"]),rt(ei)&&0===ei.data.length&&(ei=et?er.previousSibling||er.nextSibling:er.nextSibling||er.previousSibling),ev.remove(er,!0),ei}return null},f=er=>{let ea,ei,es=Vm(ev,er,ed,er.collapsed);if(ec.split){if((ea=wv(et,es=Ff(es),!0))!==(ei=wv(et,es))){if(Cv(ev,ea=xv(ea,!0),ei=xv(ei,!1))){let et=I.from(ea.firstChild).getOr(ea);return d(_v(ev,et,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(Cv(ev,ei,ea)){let et=I.from(ei.lastChild).getOr(ei);return d(_v(ev,et,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}ea=Ev(ev,ea,"span",{id:"_start","data-mce-type":"bookmark"}),ei=Ev(ev,ei,"span",{id:"_end","data-mce-type":"bookmark"});let et=ev.createRng();et.setStartAfter(ea),et.setEndBefore(ei),Wm(ev,et,et=>{V(et,et=>{Ku(et)||Ku(et.parentNode)||d(et)})}),d(ea),d(ei),ea=m(!0),ei=m()}else ea=ei=d(ea);es.startContainer=ea.parentNode?ea.parentNode:ea,es.startOffset=ev.nodeIndex(ea),es.endContainer=ei.parentNode?ei.parentNode:ei,es.endOffset=ev.nodeIndex(ei)+1}Wm(ev,es,et=>{V(et,u)})};if(ei){if(dm(ei)){let et=ev.createRng();et.setStartBefore(ei),et.setEndAfter(ei),f(et)}else f(ei);nf(et,er,ei,ea)}else eC.isCollapsed()&&Nm(ec)&&!em(et).length?Xb(et,er,ea,es):(um(et,()=>im(et,f),ei=>Nm(ec)&&Hb(et,er,ea,ei)),et.nodeChanged()),"removeformat"===er?V(iv(et.selection),er=>{V(iQ,ea=>et.dom.setStyle(er,ea,"")),Nv(et.dom,er)}):ov(et.formatter,er).each(er=>{V(iv(et.selection),ei=>Rv(et.dom,ei,er,ea,null))}),nf(et,er,ei,ea)})(et,er,ea,ei,es)},Bv=(et,er,ea,ei,es)=>Av(et,er,ea,ei,es).fold(eQ,er=>(et.dom.rename(ei,er),!0),eZ),i3=tQ.each,i8=tQ.each,Lv=(et,er,ea,ei)=>{if(i8(ea.styles,(ea,es)=>{et.setStyle(er,es,vm(ea,ei))}),ea.styles){let ea=et.getAttrib(er,"style");ea&&et.setAttrib(er,"data-mce-style",ea)}},Mv=(et,er,ea,ei)=>{let es=et.formatter.get(er),ed=es[0],ec=!ei&&et.selection.isCollapsed(),ev=et.dom,eC=et.selection,d=(et,er=ed)=>{eJ(er.onformat)&&er.onformat(et,er,ea,ei),Lv(ev,et,er,ea),i8(er.attributes,(er,ei)=>{ev.setAttrib(et,ei,vm(er,ea))}),i8(er.classes,er=>{let ei=vm(er,ea);ev.hasClass(et,ei)||ev.addClass(et,ei)})},c=(et,er)=>{let ea=!1;return i8(et,et=>!(!Sm(et)||("false"!==ev.getContentEditable(er)||et.ceFalseOverride)&&(!C(et.collapsed)||et.collapsed===ec)&&ev.is(er,et.selector)&&!Du(er)&&(d(er,et),ea=!0,1))),ea},u=et=>{if(e$(et)){let er=ev.create(et);return d(er),er}return null},f=(ei,ec,ev)=>{let eC=[],eI=!0,eD=ed.inline||ed.block,eP=u(eD);Wm(ei,ec,ec=>{let eL;let p=ec=>{let eM=!1,eV=eI,eF=!1,eU=ec.parentNode,eH=eU.nodeName.toLowerCase(),ez=ei.getContentEditable(ec);C(ez)&&(eV=eI,eI="true"===ez,eM=!0,eF=bm(et,ec));let ej=eI&&!eM;if(rc(ec)&&!((et,er,ea,ei)=>{if(o9(et)&&Nm(er)&&ea.parentNode){let er=da(et.schema),es=Dh(pn(ea),et=>Du(et.dom));return _e(er,ei)&&gs(pn(ea.parentNode),!1)&&!es}return!1})(et,ed,ec,eH))return eL=null,void(km(ed)&&ei.remove(ec));if(km(ed)&&!0===ed.wrapper&&jb(et,ec,er,ea))eL=null;else{if(((er,ea,ei)=>{let es=km(ed)&&!0!==ed.wrapper&&gm(et.schema,er)&&pm(et,ea,eD);return ei&&es})(ec,eH,ej)){let et=ei.rename(ec,eD);return d(et),eC.push(et),void(eL=null)}if(Sm(ed)){let et=c(es,ec);if(!et&&C(eU)&&Rm(ed)&&(et=c(es,eU)),!Nm(ed)||et)return void(eL=null)}C(eP)&&((er,ea,es,ec)=>{let eC=er.nodeName.toLowerCase(),eI=pm(et,eD,eC)&&pm(et,ea,eD),eP=!ev&&rt(er)&&vr(er.data),eL=Du(er),eM=!Nm(ed)||!ei.isBlock(er);return(es||ec)&&eI&&!eP&&!eL&&eM})(ec,eH,ej,eF)?(eL||(eL=ei.clone(eP,!1),eU.insertBefore(eL,ec),eC.push(eL)),eF&&eM&&(eI=eV),eL.appendChild(ec)):(eL=null,V(e3(ec.childNodes),p),eM&&(eI=eV),eL=null)}};V(ec,p)}),!0===ed.links&&V(eC,et=>{let t=et=>{"A"===et.nodeName&&d(et,ed),V(e3(et.childNodes),t)};t(et)}),V(eC,ec=>{var ev;let eI;let eD=(eI=0,V(ec.childNodes,et=>{C(et)&&rt(et)&&0===et.length||Ku(et)||eI++}),eI);!(eC.length>1)&&ei.isBlock(ec)||0!==eD?(Nm(ed)||km(ed)&&ed.wrapper)&&(ed.exact||1!==eD||(ec=(et=>{let er=J(et.childNodes,cm).filter(et=>"false"!==ei.getContentEditable(et)&&Ub(ei,et,ed));return er.map(er=>{let ea=ei.clone(er,!1);return d(ea),ei.replace(ea,et,!0),ei.remove(er,!0),ea}).getOr(et)})(ec)),ev=ec,i3(es,er=>{Nm(er)&&i3(et.dom.select(er.inline,ev),ei=>{dv(ei)&&Bv(et,er,ea,ei,er.exact?ei:null)}),((et,er,ea)=>{if(er.clear_child_styles){let ei=er.links?"*:not(a)":"*";iZ(et.select(ei,ea),ea=>{dv(ea)&&et.isEditable(ea)&&iZ(er.styles,(er,ei)=>{et.setStyle(ea,ei,"")})})}})(et.dom,er,ev)}),((et,er,ea,ei,es)=>{let ed=es.parentNode;jb(et,ed,ea,ei)&&Bv(et,er,ei,es)||er.merge_with_parents&&ed&&et.dom.getParent(ed,ed=>!!jb(et,ed,ea,ei)&&(Bv(et,er,ei,es),!0))})(et,ed,er,ea,ec),((et,er,ea,ei)=>{if(er.styles&&er.styles.backgroundColor){let es=gv(et,"fontSize");fv(ei,er=>es(er)&&et.isEditable(er),pv(et,"backgroundColor",vm(er.styles.backgroundColor,ea)))}})(ei,ed,ea,ec),((et,er,ea,ei)=>{let r=er=>{if(Vo(er)&&t4(er.parentNode)&&et.isEditable(er)){let ea=xm(et,er.parentNode);et.getStyle(er,"color")&&ea?et.setStyle(er,"text-decoration",ea):et.getStyle(er,"text-decoration")===ea&&et.setStyle(er,"text-decoration",null)}};er.styles&&(er.styles.color||er.styles.textDecoration)&&(tQ.walk(ei,r,"childNodes"),r(ei))})(ei,ed,0,ec),((et,er,ea,ei)=>{if(Nm(er)&&("sub"===er.inline||"sup"===er.inline)){let ea=gv(et,"fontSize");fv(ei,er=>ea(er)&&et.isEditable(er),pv(et,"fontSize",""));let es=Y(et.select("sup"===er.inline?"sub":"sup",ei),et.isEditable);et.remove(es,!0)}})(ei,ed,0,ec),mv(et,ed,0,ec)):ei.remove(ec,!0)})},eI=dm(ei)?ei:eC.getNode();if("false"===ev.getContentEditable(eI)&&!bm(et,eI))return c(es,ei=eI),void tf(et,er,ei,ea);if(ed){if(ei){if(dm(ei)){if(!c(es,ei)){let et=ev.createRng();et.setStartBefore(ei),et.setEndAfter(ei),f(ev,Vm(ev,et,es),!0)}}else f(ev,ei,!0)}else ec&&Nm(ed)&&!em(et).length?((et,er,ea)=>{var ei,es;let ed;let ec=et.selection,ev=et.formatter.get(er);if(!ev)return;let eC=ec.getRng(),eI=eC.startOffset,eD=eC.startContainer.nodeValue;ed=Lu(et.getBody(),ec.getStart());let eP=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(eD&&eI>0&&eI<eD.length&&eP.test(eD.charAt(eI))&&eP.test(eD.charAt(eI-1))){let ei=ec.getBookmark();eC.collapse(!0);let es=Vm(et.dom,eC,ev);es=Ff(es),et.formatter.apply(er,ea,es),ec.moveToBookmark(ei)}else{let ev=ed?qb(ed):null;ed&&(null==ev?void 0:ev.data)==="\uFEFF"||(ei=et.getDoc(),es=Vb(!0).dom,ev=(ed=ei.importNode(es,!0)).firstChild,eC.insertNode(ed),eI=1),et.formatter.apply(er,ea,ed),ec.setCursorLocation(ev,eI)}})(et,er,ea):(eC.setRng(Eb(eC.getRng())),um(et,()=>{im(et,(et,er)=>{let ea=er?et:Vm(ev,et,es);f(ev,ea,!1)})},eZ),et.nodeChanged()),ov(et.formatter,er).each(er=>{var ei;V(Y((et=>{let er=et.getSelectedBlocks(),ea=et.getRng();if(et.isCollapsed())return[];if(1===er.length)return rv(ea,er[0])&&sv(ea,er[0])?er:[];{let et=le(er).filter(et=>rv(ea,et)).toArray(),ei=de(er).filter(et=>sv(ea,et)).toArray(),es=er.slice(1,-1);return et.concat(es).concat(ei)}})(ei=et.selection),av(ei.dom)),et=>Lv(ev,et,er,ea))});Ee(iJ,er)&&V(iJ[er],er=>{er(et)})}tf(et,er,ei,ea)},Iv=(et,er,ea,ei)=>{(ei||et.selection.isEditable())&&Mv(et,er,ea,ei)},Fv=et=>Ee(et,"vars"),Uv=et=>et.selection.getStart(),zv=(et,er,ea,ei,es)=>Q(er,er=>{let ed=et.formatter.matchNode(er,ea,null!=es?es:{},ei);return!eX(ed)},er=>!!Ib(et,er,ea)||!ei&&C(et.formatter.matchNode(er,ea,es,!0))),jv=(et,er)=>{let ea=null!=er?er:Uv(et);return Y(Em(et.dom,ea),et=>t4(et)&&!Xo(et))},Hv=(et,er,ea)=>{let ei=jv(et,er);ge(ea,(ea,es)=>{let s=ea=>{let ed=zv(et,ei,es,ea.similar,Fv(ea)?ea.vars:void 0),ec=ed.isSome();if(ea.state.get()!==ec){ea.state.set(ec);let et=ed.getOr(er);Fv(ea)?ea.callback(ec,{node:et,format:es,parents:ei}):V(ea.callbacks,er=>er(ec,{node:et,format:es,parents:ei}))}};V([ea.withSimilar,ea.withoutSimilar],s),V(ea.withVars,s)})},i5=tQ.explode,qv=()=>{let et={};return{addFilter:(er,ea)=>{V(i5(er),er=>{Ee(et,er)||(et[er]={name:er,callbacks:[]}),et[er].callbacks.push(ea)})},getFilters:()=>we(et),removeFilter:(er,ea)=>{V(i5(er),er=>{if(Ee(et,er)){if(C(ea)){let ei=et[er],es=Y(ei.callbacks,et=>et!==ea);es.length>0?ei.callbacks=es:delete et[er]}else delete et[er]}})}}},Vv=(et,er,ea)=>{var ei;let es=wa();er.convert_fonts_to_spans&&((et,er,ea)=>{et.addNodeFilter("font",et=>{V(et,et=>{let ei=er.parse(et.attr("style")),es=et.attr("color"),ed=et.attr("face"),ec=et.attr("size");es&&(ei.color=es),ed&&(ei["font-family"]=ed),ec&&Xe(ec).each(et=>{ei["font-size"]=ea[et-1]}),et.name="span",et.attr("style",er.serialize(ei)),V(["color","face","size"],er=>{et.attr(er,null)})})})})(et,es,tQ.explode(null!==(ei=er.font_size_legacy_values)&&void 0!==ei?ei:"")),((et,er,ea)=>{et.addNodeFilter("strike",et=>{let ei="html4"!==er.type;V(et,et=>{if(ei)et.name="s";else{let er=ea.parse(et.attr("style"));er["text-decoration"]="line-through",et.name="span",et.attr("style",ea.serialize(er))}})})})(et,ea,es)},Wv=(et,er,ea)=>{er.addNodeFilter("br",(er,ei,es)=>{let ed=tQ.extend({},ea.getBlockElements()),ec=ea.getNonEmptyElements(),ev=ea.getWhitespaceElements();ed.body=1;let l=et=>et.name in ed||Bs(ea,et);for(let ei=0,eC=er.length;ei<eC;ei++){let eC=er[ei],eI=eC.parent;if(eI&&l(eI)&&eC===eI.lastChild){let er=eC.prev;for(;er;){let et=er.name;if("span"!==et||"bookmark"!==er.attr("data-mce-type")){"br"===et&&(eC=null);break}er=er.prev}if(eC&&(eC.remove(),vb(ea,ec,ev,eI))){let er=ea.getElementRule(eI.name);er&&(er.removeEmpty?eI.remove():er.paddEmpty&&hb(et,es,l,eI))}}else{let et=eC;for(;eI&&eI.firstChild===et&&eI.lastChild===et&&(et=eI,!ed[eI.name]);)eI=eI.parent;if(et===eI){let et=new Wg("#text",3);et.value="\xa0",eC.replace(et)}}}})},Kv=et=>{let[er,...ea]=et.split(","),ei=ea.join(","),es=/data:([^/]+\/[^;]+)(;.+)?/.exec(er);if(es){let et=";base64"===es[2],er=et?(et=>{let er=/([a-z0-9+\/=\s]+)/i.exec(et);return er?er[1]:""})(ei):decodeURIComponent(ei);return I.some({type:es[1],data:er,base64Encoded:et})}return I.none()},Yv=(et,er,ea=!0)=>{let ei=er;if(ea)try{ei=atob(er)}catch(et){return I.none()}let es=new Uint8Array(ei.length);for(let et=0;et<es.length;et++)es[et]=ei.charCodeAt(et);return I.some(new Blob([es],{type:et}))},Gv=et=>new Promise((er,ea)=>{let ei=new FileReader;ei.onloadend=()=>{er(ei.result)},ei.onerror=()=>{var et;ea(null===(et=ei.error)||void 0===et?void 0:et.message)},ei.readAsDataURL(et)}),i6=0,Qv=(et,er,ea)=>Kv(et).bind(({data:et,type:ei,base64Encoded:es})=>{if(er&&!es)return I.none();{let er=es?et:btoa(et);return ea(er,ei)}}),Jv=(et,er,ea)=>{let ei=et.create("blobid"+i6++,er,ea);return et.add(ei),ei},Zv=(et,er,ea=!1)=>Qv(er,ea,(er,ea)=>I.from(et.getByData(er,ea)).orThunk(()=>Yv(ea,er).map(ea=>Jv(et,ea,er)))),ey=(et,er)=>He(et,`${er}/`),ty=(et,er)=>{let ea=et.schema;er.remove_trailing_brs&&Wv(er,et,ea),et.addAttributeFilter("href",et=>{let ea=et.length,o=et=>{let er=et?tQ.trim(et):"";return/\b(noopener)\b/g.test(er)?er:er.split(" ").filter(et=>et.length>0).concat(["noopener"]).sort().join(" ")};if(!er.allow_unsafe_link_target)for(;ea--;){let er=et[ea];"a"===er.name&&"_blank"===er.attr("target")&&er.attr("rel",o(er.attr("rel")))}}),er.allow_html_in_named_anchor||et.addAttributeFilter("id,name",et=>{let er,ea,ei,es,ed=et.length;for(;ed--;)if("a"===(es=et[ed]).name&&es.firstChild&&!es.attr("href"))for(ei=es.parent,er=es.lastChild;er&&ei;)ea=er.prev,ei.insert(er,es),er=ea}),er.fix_list_elements&&et.addNodeFilter("ul,ol",et=>{let er,ea,ei=et.length;for(;ei--;)if((ea=(er=et[ei]).parent)&&("ul"===ea.name||"ol"===ea.name)){if(er.prev&&"li"===er.prev.name)er.prev.append(er);else{let et=new Wg("li",1);et.attr("style","list-style-type: none"),er.wrap(et)}}});let ei=ea.getValidClasses();er.validate&&ei&&et.addAttributeFilter("class",et=>{var er;let ea=et.length;for(;ea--;){let es=et[ea],ed=null!==(er=es.attr("class"))&&void 0!==er?er:"",ec=tQ.explode(ed," "),ev="";for(let et=0;et<ec.length;et++){let er=ec[et],ea=!1,ed=ei["*"];ed&&ed[er]&&(ea=!0),ed=ei[es.name],!ea&&ed&&ed[er]&&(ea=!0),ea&&(ev&&(ev+=" "),ev+=er)}ev.length||(ev=null),es.attr("class",ev)}}),((et,er)=>{let{blob_cache:ea}=er;if(ea){let t=et=>{let er=et.attr("src");et.attr("src")===tJ.transparentSrc||C(et.attr("data-mce-placeholder"))||C(et.attr("data-mce-bogus"))||y(er)||Zv(ea,er,!0).each(er=>{et.attr("src",er.blobUri())})};et.addAttributeFilter("src",et=>V(et,t))}})(et,er),er.convert_unsafe_embeds&&et.addNodeFilter("object,embed",et=>V(et,et=>{et.replace(((et,er,ea,ei,es)=>{let ed;ed=eX(et)?"iframe":ey(et,"image")?"img":ey(et,"video")?"video":ey(et,"audio")?"audio":"iframe";let ec=new Wg(ed,1);return ec.attr("audio"===ed?{src:er}:{src:er,width:ea,height:ei}),"audio"!==ed&&"video"!==ed||ec.attr("controls",""),"iframe"===ed&&es&&ec.attr("sandbox",""),ec})(et.attr("type"),"object"===et.name?et.attr("data"):et.attr("src"),et.attr("width"),et.attr("height"),er.sandbox_iframes))})),er.sandbox_iframes&&et.addNodeFilter("iframe",et=>V(et,et=>et.attr("sandbox","")))},{entries:i9,setPrototypeOf:i4,isFrozen:i7,getPrototypeOf:st,getOwnPropertyDescriptor:sr}=Object,{freeze:sa,seal:sd,create:sc}=Object,{apply:sy,construct:sC}="undefined"!=typeof Reflect&&Reflect;sy||(sy=function(et,er,ea){return et.apply(er,ea)}),sa||(sa=function(et){return et}),sd||(sd=function(et){return et}),sC||(sC=function(et,er){return new et(...er)});let s_=_y(Array.prototype.forEach),sI=_y(Array.prototype.pop),sO=_y(Array.prototype.push),sB=_y(String.prototype.toLowerCase),sD=_y(String.prototype.toString),sP=_y(String.prototype.match),sL=_y(String.prototype.replace),sM=_y(String.prototype.indexOf),sV=_y(String.prototype.trim),sF=_y(RegExp.prototype.test),sU=(eL=TypeError,function(){for(var et=arguments.length,er=Array(et),ea=0;ea<et;ea++)er[ea]=arguments[ea];return sC(eL,er)});function _y(et){return function(er){for(var ea=arguments.length,ei=Array(ea>1?ea-1:0),es=1;es<ea;es++)ei[es-1]=arguments[es];return sy(et,er,ei)}}function ky(et,er,ea){var ei;ea=null!==(ei=ea)&&void 0!==ei?ei:sB,i4&&i4(et,null);let es=er.length;for(;es--;){let ei=er[es];if("string"==typeof ei){let et=ea(ei);et!==ei&&(i7(er)||(er[es]=et),ei=et)}et[ei]=!0}return et}function Sy(et){let er=sc(null);for(let[ea,ei]of i9(et))er[ea]=ei;return er}function Ny(et,er){for(;null!==et;){let ea=sr(et,er);if(ea){if(ea.get)return _y(ea.get);if("function"==typeof ea.value)return _y(ea.value)}et=st(et)}return function(et){return console.warn("fallback value for",et),null}}let sH=sa(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),sz=sa(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sj=sa(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),s$=sa(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sq=sa(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),sW=sa(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sY=sa(["#text"]),sK=sa(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),sX=sa(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),sJ=sa(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sG=sa(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),sQ=sd(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sZ=sd(/<%[\w\W]*|[\w\W]*%>/gm),s0=sd(/\${[\w\W]*}/gm),s1=sd(/^data-[\-\w.\u00B7-\uFFFF]/),s2=sd(/^aria-[\-\w]+$/),s3=sd(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),s8=sd(/^(?:\w+script|data):/i),s5=sd(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),s6=sd(/^html$/i);var s9=Object.freeze({__proto__:null,MUSTACHE_EXPR:sQ,ERB_EXPR:sZ,TMPLIT_EXPR:s0,DATA_ATTR:s1,ARIA_ATTR:s2,IS_ALLOWED_URI:s3,IS_SCRIPT_OR_DATA:s8,ATTR_WHITESPACE:s5,DOCTYPE_NAME:s6});let Gy=()=>"undefined"==typeof window?null:window;var s4=function e(){let et,er=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Gy(),n=et=>e(et);if(n.version="3.0.5",n.removed=[],!er||!er.document||9!==er.document.nodeType)return n.isSupported=!1,n;let ea=er.document,ei=ea.currentScript,{document:es}=er,{DocumentFragment:ed,HTMLTemplateElement:ec,Node:ev,Element:eC,NodeFilter:eI,NamedNodeMap:eD=er.NamedNodeMap||er.MozNamedAttrMap,HTMLFormElement:eP,DOMParser:eL,trustedTypes:eM}=er,eV=eC.prototype,eF=Ny(eV,"cloneNode"),eU=Ny(eV,"nextSibling"),eH=Ny(eV,"childNodes"),ez=Ny(eV,"parentNode");if("function"==typeof ec){let et=es.createElement("template");et.content&&et.content.ownerDocument&&(es=et.content.ownerDocument)}let ej,e$="",{implementation:eq,createNodeIterator:eW,createDocumentFragment:eY,getElementsByTagName:eK}=es,{importNode:eX}=ea,eJ={};n.isSupported="function"==typeof i9&&"function"==typeof ez&&eq&&void 0!==eq.createHTMLDocument;let{MUSTACHE_EXPR:eG,ERB_EXPR:eQ,TMPLIT_EXPR:eZ,DATA_ATTR:e0,ARIA_ATTR:e1,IS_SCRIPT_OR_DATA:e2,ATTR_WHITESPACE:e3}=s9,{IS_ALLOWED_URI:e8}=s9,e5=null,e6=ky({},[...sH,...sz,...sj,...sq,...sY]),e9=null,e4=ky({},[...sK,...sX,...sJ,...sG]),e7=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),tt=null,tr=null,ti=!0,td=!0,tc=!1,tv=!0,tC=!1,tR=!1,tI=!1,tD=!1,tP=!1,tL=!1,tM=!1,tV=!0,tF=!1,tU=!0,tH=!1,tz={},tj=null,t$=ky({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),tq=null,tW=ky({},["audio","video","img","source","image","track"]),tY=null,tK=ky({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tX="http://www.w3.org/1998/Math/MathML",tJ="http://www.w3.org/2000/svg",tG="http://www.w3.org/1999/xhtml",tQ=tG,tZ=!1,t0=null,t1=ky({},[tX,tJ,tG],sD),t2=["application/xhtml+xml","text/html"],t3,t8=null,t5=es.createElement("form"),Ee=function(et){return et instanceof RegExp||et instanceof Function},_e=function(er){if(!t8||t8!==er){if(er&&"object"==typeof er||(er={}),er=Sy(er),t3="application/xhtml+xml"===(et=et=-1===t2.indexOf(er.PARSER_MEDIA_TYPE)?"text/html":er.PARSER_MEDIA_TYPE)?sD:sB,e5="ALLOWED_TAGS"in er?ky({},er.ALLOWED_TAGS,t3):e6,e9="ALLOWED_ATTR"in er?ky({},er.ALLOWED_ATTR,t3):e4,t0="ALLOWED_NAMESPACES"in er?ky({},er.ALLOWED_NAMESPACES,sD):t1,tY="ADD_URI_SAFE_ATTR"in er?ky(Sy(tK),er.ADD_URI_SAFE_ATTR,t3):tK,tq="ADD_DATA_URI_TAGS"in er?ky(Sy(tW),er.ADD_DATA_URI_TAGS,t3):tW,tj="FORBID_CONTENTS"in er?ky({},er.FORBID_CONTENTS,t3):t$,tt="FORBID_TAGS"in er?ky({},er.FORBID_TAGS,t3):{},tr="FORBID_ATTR"in er?ky({},er.FORBID_ATTR,t3):{},tz="USE_PROFILES"in er&&er.USE_PROFILES,ti=!1!==er.ALLOW_ARIA_ATTR,td=!1!==er.ALLOW_DATA_ATTR,tc=er.ALLOW_UNKNOWN_PROTOCOLS||!1,tv=!1!==er.ALLOW_SELF_CLOSE_IN_ATTR,tC=er.SAFE_FOR_TEMPLATES||!1,tR=er.WHOLE_DOCUMENT||!1,tP=er.RETURN_DOM||!1,tL=er.RETURN_DOM_FRAGMENT||!1,tM=er.RETURN_TRUSTED_TYPE||!1,tD=er.FORCE_BODY||!1,tV=!1!==er.SANITIZE_DOM,tF=er.SANITIZE_NAMED_PROPS||!1,tU=!1!==er.KEEP_CONTENT,tH=er.IN_PLACE||!1,e8=er.ALLOWED_URI_REGEXP||s3,tQ=er.NAMESPACE||tG,e7=er.CUSTOM_ELEMENT_HANDLING||{},er.CUSTOM_ELEMENT_HANDLING&&Ee(er.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(e7.tagNameCheck=er.CUSTOM_ELEMENT_HANDLING.tagNameCheck),er.CUSTOM_ELEMENT_HANDLING&&Ee(er.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(e7.attributeNameCheck=er.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),er.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof er.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(e7.allowCustomizedBuiltInElements=er.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),tC&&(td=!1),tL&&(tP=!0),tz&&(e5=ky({},[...sY]),e9=[],!0===tz.html&&(ky(e5,sH),ky(e9,sK)),!0===tz.svg&&(ky(e5,sz),ky(e9,sX),ky(e9,sG)),!0===tz.svgFilters&&(ky(e5,sj),ky(e9,sX),ky(e9,sG)),!0===tz.mathMl&&(ky(e5,sq),ky(e9,sJ),ky(e9,sG))),er.ADD_TAGS&&(e5===e6&&(e5=Sy(e5)),ky(e5,er.ADD_TAGS,t3)),er.ADD_ATTR&&(e9===e4&&(e9=Sy(e9)),ky(e9,er.ADD_ATTR,t3)),er.ADD_URI_SAFE_ATTR&&ky(tY,er.ADD_URI_SAFE_ATTR,t3),er.FORBID_CONTENTS&&(tj===t$&&(tj=Sy(tj)),ky(tj,er.FORBID_CONTENTS,t3)),tU&&(e5["#text"]=!0),tR&&ky(e5,["html","head","body"]),e5.table&&(ky(e5,["tbody"]),delete tt.tbody),er.TRUSTED_TYPES_POLICY){if("function"!=typeof er.TRUSTED_TYPES_POLICY.createHTML)throw sU('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof er.TRUSTED_TYPES_POLICY.createScriptURL)throw sU('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');e$=(ej=er.TRUSTED_TYPES_POLICY).createHTML("")}else void 0===ej&&(ej=function(et,er){if("object"!=typeof et||"function"!=typeof et.createPolicy)return null;let ea=null,ei="data-tt-policy-suffix";er&&er.hasAttribute(ei)&&(ea=er.getAttribute(ei));let es="dompurify"+(ea?"#"+ea:"");try{return et.createPolicy(es,{createHTML:et=>et,createScriptURL:et=>et})}catch(et){return console.warn("TrustedTypes policy "+es+" could not be created."),null}}(eM,ei)),null!==ej&&"string"==typeof e$&&(e$=ej.createHTML(""));sa&&sa(er),t8=er}},t6=ky({},["mi","mo","mn","ms","mtext"]),t9=ky({},["foreignobject","desc","title","annotation-xml"]),t4=ky({},["title","style","font","a","script"]),t7=ky({},sz);ky(t7,sj),ky(t7,s$);let rt=ky({},sq);ky(rt,sW);let Te=function(et){sO(n.removed,{element:et});try{et.parentNode.removeChild(et)}catch(er){et.remove()}},Oe=function(et,er){try{sO(n.removed,{attribute:er.getAttributeNode(et),from:er})}catch(et){sO(n.removed,{attribute:null,from:er})}if(er.removeAttribute(et),"is"===et&&!e9[et]){if(tP||tL)try{Te(er)}catch(et){}else try{er.setAttribute(et,"")}catch(et){}}},Be=function(er){let ea,ei;if(tD)er="<remove></remove>"+er;else{let et=sP(er,/^[\r\n\t ]+/);ei=et&&et[0]}"application/xhtml+xml"===et&&tQ===tG&&(er='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+er+"</body></html>");let ed=ej?ej.createHTML(er):er;if(tQ===tG)try{ea=(new eL).parseFromString(ed,et)}catch(et){}if(!ea||!ea.documentElement){ea=eq.createDocument(tQ,"template",null);try{ea.documentElement.innerHTML=tZ?e$:ed}catch(et){}}let ec=ea.body||ea.documentElement;return er&&ei&&ec.insertBefore(es.createTextNode(ei),ec.childNodes[0]||null),tQ===tG?eK.call(ea,tR?"html":"body")[0]:tR?ea.documentElement:ec},Pe=function(et){return eW.call(et.ownerDocument||et,et,eI.SHOW_ELEMENT|eI.SHOW_COMMENT|eI.SHOW_TEXT,null,!1)},De=function(et){return"object"==typeof ev?et instanceof ev:et&&"object"==typeof et&&"number"==typeof et.nodeType&&"string"==typeof et.nodeName},Le=function(et,er,ea){eJ[et]&&s_(eJ[et],et=>{et.call(n,er,ea,t8)})},Me=function(er){let ea;if(Le("beforeSanitizeElements",er,null),er instanceof eP&&("string"!=typeof er.nodeName||"string"!=typeof er.textContent||"function"!=typeof er.removeChild||!(er.attributes instanceof eD)||"function"!=typeof er.removeAttribute||"function"!=typeof er.setAttribute||"string"!=typeof er.namespaceURI||"function"!=typeof er.insertBefore||"function"!=typeof er.hasChildNodes))return Te(er),!0;let ei=t3(er.nodeName);if(Le("uponSanitizeElement",er,{tagName:ei,allowedTags:e5}),er.hasChildNodes()&&!De(er.firstElementChild)&&(!De(er.content)||!De(er.content.firstElementChild))&&sF(/<[/\w]/g,er.innerHTML)&&sF(/<[/\w]/g,er.textContent))return Te(er),!0;if(!e5[ei]||tt[ei]){if(!tt[ei]&&Fe(ei)&&(e7.tagNameCheck instanceof RegExp&&sF(e7.tagNameCheck,ei)||e7.tagNameCheck instanceof Function&&e7.tagNameCheck(ei)))return!1;if(tU&&!tj[ei]){let et=ez(er)||er.parentNode,ea=eH(er)||er.childNodes;if(ea&&et)for(let ei=ea.length-1;ei>=0;--ei)et.insertBefore(eF(ea[ei],!0),eU(er))}return Te(er),!0}return er instanceof eC&&!function(er){let ea=ez(er);ea&&ea.tagName||(ea={namespaceURI:tQ,tagName:"template"});let ei=sB(er.tagName),es=sB(ea.tagName);return!!t0[er.namespaceURI]&&(er.namespaceURI===tJ?ea.namespaceURI===tG?"svg"===ei:ea.namespaceURI===tX?"svg"===ei&&("annotation-xml"===es||t6[es]):!!t7[ei]:er.namespaceURI===tX?ea.namespaceURI===tG?"math"===ei:ea.namespaceURI===tJ?"math"===ei&&t9[es]:!!rt[ei]:er.namespaceURI===tG?!(ea.namespaceURI===tJ&&!t9[es])&&!(ea.namespaceURI===tX&&!t6[es])&&!rt[ei]&&(t4[ei]||!t7[ei]):!("application/xhtml+xml"!==et||!t0[er.namespaceURI]))}(er)?(Te(er),!0):("noscript"===ei||"noembed"===ei||"noframes"===ei)&&sF(/<\/no(script|embed|frames)/i,er.innerHTML)?(Te(er),!0):(tC&&3===er.nodeType&&(ea=sL(ea=er.textContent,eG," "),ea=sL(ea,eQ," "),ea=sL(ea,eZ," "),er.textContent!==ea&&(sO(n.removed,{element:er.cloneNode()}),er.textContent=ea)),Le("afterSanitizeElements",er,null),!1)},Ie=function(et,er,ea){if(tV&&("id"===er||"name"===er)&&(ea in es||ea in t5))return!1;if(td&&!tr[er]&&sF(e0,er));else if(ti&&sF(e1,er));else if(!e9[er]||tr[er]){if(!(Fe(et)&&(e7.tagNameCheck instanceof RegExp&&sF(e7.tagNameCheck,et)||e7.tagNameCheck instanceof Function&&e7.tagNameCheck(et))&&(e7.attributeNameCheck instanceof RegExp&&sF(e7.attributeNameCheck,er)||e7.attributeNameCheck instanceof Function&&e7.attributeNameCheck(er))||"is"===er&&e7.allowCustomizedBuiltInElements&&(e7.tagNameCheck instanceof RegExp&&sF(e7.tagNameCheck,ea)||e7.tagNameCheck instanceof Function&&e7.tagNameCheck(ea))))return!1}else if(tY[er]);else if(sF(e8,sL(ea,e3,"")));else if("src"!==er&&"xlink:href"!==er&&"href"!==er||"script"===et||0!==sM(ea,"data:")||!tq[et]){if(tc&&!sF(e2,sL(ea,e3,"")));else if(ea)return!1}return!0},Fe=function(et){return et.indexOf("-")>0},Ue=function(et){let er,ea,ei,es;Le("beforeSanitizeAttributes",et,null);let{attributes:ed}=et;if(!ed)return;let ec={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:e9};for(es=ed.length;es--;){er=ed[es];let{name:ev,namespaceURI:eC}=er;ea="value"===ev?er.value:sV(er.value);let eI=ea;if(ei=t3(ev),ec.attrName=ei,ec.attrValue=ea,ec.keepAttr=!0,ec.forceKeepAttr=void 0,Le("uponSanitizeAttribute",et,ec),ea=ec.attrValue,ec.forceKeepAttr)continue;if(!ec.keepAttr||!tv&&sF(/\/>/i,ea)){Oe(ev,et);continue}tC&&(ea=sL(ea,eG," "),ea=sL(ea,eQ," "),ea=sL(ea,eZ," "));let eD=t3(et.nodeName);if(Ie(eD,ei,ea)){if(tF&&("id"===ei||"name"===ei)&&(Oe(ev,et),ea="user-content-"+ea),ej&&"object"==typeof eM&&"function"==typeof eM.getAttributeType){if(eC);else switch(eM.getAttributeType(eD,ei)){case"TrustedHTML":ea=ej.createHTML(ea);break;case"TrustedScriptURL":ea=ej.createScriptURL(ea)}}if(ea!==eI)try{eC?et.setAttributeNS(eC,ev,ea):et.setAttribute(ev,ea)}catch(er){Oe(ev,et)}}else Oe(ev,et)}Le("afterSanitizeAttributes",et,null)},ze=function e(et){let er;let ea=Pe(et);for(Le("beforeSanitizeShadowDOM",et,null);er=ea.nextNode();)Le("uponSanitizeShadowNode",er,null),Me(er)||(er.content instanceof ed&&e(er.content),Ue(er));Le("afterSanitizeShadowDOM",et,null)};return n.sanitize=function(et){let er,ei,es,ec,eC=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((tZ=!et)&&(et="<!-->"),"string"!=typeof et&&!De(et)){if("function"!=typeof et.toString)throw sU("toString is not a function");if("string"!=typeof(et=et.toString()))throw sU("dirty is not a string, aborting")}if(!n.isSupported)return et;if(tI||_e(eC),n.removed=[],"string"==typeof et&&(tH=!1),tH){if(et.nodeName){let er=t3(et.nodeName);if(!e5[er]||tt[er])throw sU("root node is forbidden and cannot be sanitized in-place")}}else if(et instanceof ev)1===(ei=(er=Be("<!---->")).ownerDocument.importNode(et,!0)).nodeType&&"BODY"===ei.nodeName||"HTML"===ei.nodeName?er=ei:er.appendChild(ei);else{if(!tP&&!tC&&!tR&&-1===et.indexOf("<"))return ej&&tM?ej.createHTML(et):et;if(!(er=Be(et)))return tP?null:tM?e$:""}er&&tD&&Te(er.firstChild);let eI=Pe(tH?et:er);for(;es=eI.nextNode();)Me(es)||(es.content instanceof ed&&ze(es.content),Ue(es));if(tH)return et;if(tP){if(tL)for(ec=eY.call(er.ownerDocument);er.firstChild;)ec.appendChild(er.firstChild);else ec=er;return(e9.shadowroot||e9.shadowrootmode)&&(ec=eX.call(ea,ec,!0)),ec}let eD=tR?er.outerHTML:er.innerHTML;return tR&&e5["!doctype"]&&er.ownerDocument&&er.ownerDocument.doctype&&er.ownerDocument.doctype.name&&sF(s6,er.ownerDocument.doctype.name)&&(eD="<!DOCTYPE "+er.ownerDocument.doctype.name+">\n"+eD),tC&&(eD=sL(eD,eG," "),eD=sL(eD,eQ," "),eD=sL(eD,eZ," ")),ej&&tM?ej.createHTML(eD):eD},n.setConfig=function(et){_e(et),tI=!0},n.clearConfig=function(){t8=null,tI=!1},n.isValidAttribute=function(et,er,ea){t8||_e({});let ei=t3(et),es=t3(er);return Ie(ei,es,ea)},n.addHook=function(et,er){"function"==typeof er&&(eJ[et]=eJ[et]||[],sO(eJ[et],er))},n.removeHook=function(et){if(eJ[et])return sI(eJ[et])},n.removeHooks=function(et){eJ[et]&&(eJ[et]=[])},n.removeAllHooks=function(){eJ={}},n}();let s7=tQ.each,dt=tQ.trim,dr=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],dd={ftp:21,http:80,https:443,mailto:25},dc=["img","video"],nC=(et,er,ea)=>{var ei;let es=(et=>{try{return decodeURIComponent(et)}catch(er){return unescape(et)}})(er).replace(/\s/g,"");return!et.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(es)||!et.allow_html_data_urls&&(/^data:image\//i.test(es)?(C(ei=et.allow_svg_data_urls)?!ei:!C(ea)||!H(dc,ea))&&/^data:image\/svg\+xml/i.test(es):/^data:/i.test(es)))};let oC=class oC{static parseDataUri(et){let er;let ea=decodeURIComponent(et).split(","),ei=/data:([^;]+)/.exec(ea[0]);return ei&&(er=ei[1]),{type:er,data:ea[1]}}static isDomSafe(et,er,ea={}){if(ea.allow_script_urls)return!0;{let ei=r4.decode(et).replace(/[\s\u0000-\u001F]+/g,"");return!nC(ea,ei,er)}}static getDocumentBaseUrl(et){var er;let ea;return ea=0!==et.protocol.indexOf("http")&&"file:"!==et.protocol?null!==(er=et.href)&&void 0!==er?er:"":et.protocol+"//"+et.host+et.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(ea)&&(ea=ea.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(ea)||(ea+="/")),ea}constructor(et,er={}){this.path="",this.directory="",et=dt(et),this.settings=er;let ea=er.base_uri,ei=this;if(/^([\w\-]+):([^\/]{2})/i.test(et)||/^\s*#/.test(et))return void(ei.source=et);let es=0===et.indexOf("//");if(0!==et.indexOf("/")||es||(et=(ea&&ea.protocol||"http")+"://mce_host"+et),!/^[\w\-]*:?\/\//.test(et)){let er=ea?ea.path:new oC(document.location.href).directory;if(""===(null==ea?void 0:ea.protocol))et="//mce_host"+ei.toAbsPath(er,et);else{let es=/([^#?]*)([#?]?.*)/.exec(et);es&&(et=(ea&&ea.protocol||"http")+"://mce_host"+ei.toAbsPath(er,es[1])+es[2])}}et=et.replace(/@@/g,"(mce_at)");let ed=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(et);ed&&s7(dr,(et,er)=>{let ea=ed[er];ea&&(ea=ea.replace(/\(mce_at\)/g,"@@")),ei[et]=ea}),ea&&(ei.protocol||(ei.protocol=ea.protocol),ei.userInfo||(ei.userInfo=ea.userInfo),ei.port||"mce_host"!==ei.host||(ei.port=ea.port),ei.host&&"mce_host"!==ei.host||(ei.host=ea.host),ei.source=""),es&&(ei.protocol="")}setPath(et){let er=/^(.*?)\/?(\w+)?$/.exec(et);er&&(this.path=er[0],this.directory=er[1],this.file=er[2]),this.source="",this.getURI()}toRelative(et){if("./"===et)return et;let er=new oC(et,{base_uri:this});if("mce_host"!==er.host&&this.host!==er.host&&er.host||this.port!==er.port||this.protocol!==er.protocol&&""!==er.protocol)return er.getURI();let ea=this.getURI(),ei=er.getURI();if(ea===ei||"/"===ea.charAt(ea.length-1)&&ea.substr(0,ea.length-1)===ei)return ea;let es=this.toRelPath(this.path,er.path);return er.query&&(es+="?"+er.query),er.anchor&&(es+="#"+er.anchor),es}toAbsolute(et,er){let ea=new oC(et,{base_uri:this});return ea.getURI(er&&this.isSameOrigin(ea))}isSameOrigin(et){if(this.host==et.host&&this.protocol==et.protocol){if(this.port==et.port)return!0;let er=this.protocol?dd[this.protocol]:null;if(er&&(this.port||er)==(et.port||er))return!0}return!1}toRelPath(et,er){let ea,ei,es=0,ed="",ec=et.substring(0,et.lastIndexOf("/")).split("/"),ev=er.split("/");if(ec.length>=ev.length){for(ea=0,ei=ec.length;ea<ei;ea++)if(ea>=ev.length||ec[ea]!==ev[ea]){es=ea+1;break}}if(ec.length<ev.length){for(ea=0,ei=ev.length;ea<ei;ea++)if(ea>=ec.length||ec[ea]!==ev[ea]){es=ea+1;break}}if(1===es)return er;for(ea=0,ei=ec.length-(es-1);ea<ei;ea++)ed+="../";for(ea=es-1,ei=ev.length;ea<ei;ea++)ed+=ea!==es-1?"/"+ev[ea]:ev[ea];return ed}toAbsPath(et,er){let ea,ei=0,es=/\/$/.test(er)?"/":"",ed=et.split("/"),ec=er.split("/"),ev=[];s7(ed,et=>{et&&ev.push(et)});let eC=[];for(let et=ec.length-1;et>=0;et--)0!==ec[et].length&&"."!==ec[et]&&(".."!==ec[et]?ei>0?ei--:eC.push(ec[et]):ei++);let eI=ev.length-ei;return 0!==(ea=eI<=0?oe(eC).join("/"):ev.slice(0,eI).join("/")+"/"+oe(eC).join("/")).indexOf("/")&&(ea="/"+ea),es&&ea.lastIndexOf("/")!==ea.length-1&&(ea+=es),ea}getURI(et=!1){let er;return this.source&&!et||(er="",et||(this.protocol?er+=this.protocol+"://":er+="//",this.userInfo&&(er+=this.userInfo+"@"),this.host&&(er+=this.host),this.port&&(er+=":"+this.port)),this.path&&(er+=this.path),this.query&&(er+="?"+this.query),this.anchor&&(er+="#"+this.anchor),this.source=er),this.source}};let df=tQ.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),dp="data-mce-type",db=0,iC=(et,er,ea,ei,es)=>{var ed,ec,ev,eC;let eI=er.validate,eD=ea.getSpecialElements();8===et.nodeType&&!er.allow_conditional_comments&&/^\[if/i.test(null!==(ed=et.nodeValue)&&void 0!==ed?ed:"")&&(et.nodeValue=" "+et.nodeValue);let eP=null!==(ec=null==es?void 0:es.tagName)&&void 0!==ec?ec:et.nodeName.toLowerCase();if("html"!==ei&&ea.isValid(ei))return void(C(es)&&(es.allowedTags[eP]=!0));if(1!==et.nodeType||"body"===eP)return;let eL=pn(et),eM=nn(eL,dp),eV=en(eL,"data-mce-bogus");if(!eM&&e$(eV))return void("all"===eV?xo(eL):Eo(eL));let eF=ea.getElementRule(eP);if(!eI||eF){if(C(es)&&(es.allowedTags[eP]=!0),eI&&eF&&!eM){if(V(null!==(ev=eF.attributesForced)&&void 0!==ev?ev:[],et=>{Jt(eL,et.name,"{$uid}"===et.value?"mce_"+db++:et.value)}),V(null!==(eC=eF.attributesDefault)&&void 0!==eC?eC:[],et=>{nn(eL,et.name)||Jt(eL,et.name,"{$uid}"===et.value?"mce_"+db++:et.value)}),eF.attributesRequired&&!$(eF.attributesRequired,et=>nn(eL,et))||eF.removeEmptyAttrs&&(et=>{let er=et.dom.attributes;return null==er||0===er.length})(eL))return void Eo(eL);eF.outputName&&eF.outputName!==eP&&((et,er)=>{let ea=((et,er)=>{let ea=bn(er),ei=rn(et);return Zt(ea,ei),ea})(et,er);ho(et,ea);let ei=Mn(et);Co(ea,ei),xo(et)})(eL,eF.outputName)}}else Ee(eD,eP)?xo(eL):Eo(eL)},lC=(et,er,ea,ei,es,ed)=>"html"!==ea&&!ps(ei)||!(es in df&&nC(et,ed,ei))&&(!et.validate||er.isValid(ei,es)||He(es,"data-")||He(es,"aria-")),dC=(et,er)=>et.hasAttribute(dp)&&("id"===er||"class"===er||"style"===er),cC=(et,er)=>et in er.getBoolAttrs(),uC=(et,er,ea,ei)=>{let{attributes:es}=et;for(let ed=es.length-1;ed>=0;ed--){let ec=es[ed],ev=ec.name,eC=ec.value;lC(er,ea,ei,et.tagName.toLowerCase(),ev,eC)||dC(et,ev)?cC(ev,ea)&&et.setAttribute(ev,ev):et.removeAttribute(ev)}},mC=(et,er,ea)=>{let ei=s4();return ei.addHook("uponSanitizeElement",(ei,es)=>{iC(ei,et,er,ea.track(ei),es)}),ei.addHook("uponSanitizeAttribute",(ei,es)=>{((et,er,ea,ei,es)=>{let ed=et.tagName.toLowerCase(),{attrName:ec,attrValue:ev}=es;es.keepAttr=lC(er,ea,ei,ed,ec,ev),es.keepAttr?(es.allowedAttributes[ec]=!0,cC(ec,ea)&&(es.attrValue=ec),er.allow_svg_data_urls&&He(ev,"data:image/svg+xml")&&(es.forceKeepAttr=!0)):dC(et,ec)&&(es.forceKeepAttr=!0)})(ei,et,er,ea.current(),es)}),ei},fC=et=>{let er=["type","href","role","arcrole","title","show","actuate","label","from","to"].map(et=>`xlink:${et}`);return s4().sanitize(et,{IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:er}),et.innerHTML},dy=tQ.makeMap,dN=tQ.extend,hC=(et,er,ea,ei)=>{let es=et.name,ed=es in ea&&"title"!==es&&"textarea"!==es,ec=er.childNodes;for(let er=0,es=ec.length;er<es;er++){let es=ec[er],ev=new Wg(es.nodeName.toLowerCase(),es.nodeType);if(t4(es)){let et=es.attributes;for(let er=0,ea=et.length;er<ea;er++){let ea=et[er];ev.attr(ea.name,ea.value)}ps(ev.name)&&(ei(es),ev.value=es.innerHTML)}else rt(es)?(ev.value=es.data,ed&&(ev.raw=!0)):(ri(es)||rr(es)||ra(es))&&(ev.value=es.data);ps(ev.name)||hC(ev,es,ea,ei),et.append(ev)}},bC=(et={},er=ua())=>{let ea=qv(),ei=qv(),es={validate:!0,root_name:"body",sanitize:!0,...et},ed=new DOMParser,ec=((et,er)=>{let ea=(()=>{let et=[],t=()=>et[et.length-1];return{track:er=>{hs(er)&&et.push(er);let ea=t();return ea&&!ea.contains(er)&&(et.pop(),ea=t()),bs(ea)},current:()=>bs(t()),reset:()=>{et=[]}}})();if(et.sanitize){let ei=mC(et,er,ea);return{sanitizeHtmlElement:(er,es)=>{ei.sanitize(er,((et,er)=>{let ea={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return ea.PARSER_MEDIA_TYPE=er,et.allow_script_urls?ea.ALLOWED_URI_REGEXP=/.*/:et.allow_html_data_urls&&(ea.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),ea})(et,es)),ei.removed=[],ea.reset()},sanitizeNamespaceElement:fC}}return{sanitizeHtmlElement:(ei,es)=>{let ed;let ec=document.createNodeIterator(ei,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);for(;ed=ec.nextNode();){let ei=ea.track(ed);iC(ed,et,er,ei),t4(ed)&&uC(ed,et,er,ei)}ea.reset()},sanitizeNamespaceElement:_}})(es,er),ev=ea.addFilter,eC=ea.getFilters,eI=ea.removeFilter,eD=ei.addFilter,eP=ei.getFilters,eL=ei.removeFilter,g=(et,ea)=>{let ei=e$(ea.attr(dp)),es=1===ea.type&&!Ee(et,ea.name)&&!Bs(er,ea)&&!ps(ea.name);return 3===ea.type||es&&!ei},eM={schema:er,addAttributeFilter:eD,getAttributeFilters:eP,removeAttributeFilter:eL,addNodeFilter:ev,getNodeFilters:eC,removeNodeFilter:eI,parse:(et,ea={})=>{var ei;let ev=es.validate,eI=null!==(ei=ea.context)&&void 0!==ei?ei:es.root_name,eD=((et,ea,ei="html")=>{let es="xhtml"===ei?"application/xhtml+xml":"text/html",ev=Ee(er.getSpecialElements(),ea.toLowerCase()),eC=ev?`<${ea}>${et}</${ea}>`:et,eI="xhtml"===ei?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${eC}</body></html>`:`<body>${eC}</body>`,eD=ed.parseFromString(eI,es).body;return ec.sanitizeHtmlElement(eD,es),ev?eD.firstChild:eD})(et,eI,ea.format);ks(er,eD);let eL=new Wg(eI,11);hC(eL,eD,er.getSpecialElements(),ec.sanitizeNamespaceElement),eD.innerHTML="";let[eM,eV]=((et,er,ea,ei)=>{let es=ea.validate,ed=er.getNonEmptyElements(),ec=er.getWhitespaceElements(),ev=dN(dy("script,style,head,html,body,title,meta,param"),er.getBlockElements()),eC=da(er),eI=/[ \t\r\n]+/g,eD=/^[ \t\r\n]+/,eP=/[ \t\r\n]+$/,m=et=>{let er=et.parent;for(;C(er);){if(er.name in ec)return!0;er=er.parent}return!1},f=ea=>ea.name in ev||Bs(er,ea)||ps(ea.name)&&ea.parent===et,g=(er,ea)=>{let es=ea?er.prev:er.next;return!C(es)&&!y(er.parent)&&f(er.parent)&&(er.parent!==et||!0===ei.isRootContent)};return[et=>{var er,ea;if(3===et.type&&!m(et)){let ei=null!==(er=et.value)&&void 0!==er?er:"";ei=ei.replace(eI," "),(C(ea=et.prev)&&(f(ea)||"br"===ea.name)||g(et,!0))&&(ei=ei.replace(eD,"")),0===ei.length?et.remove():et.value=ei}},et=>{var ev,eI;if(1===et.type){let ev=er.getElementRule(et.name);if(es&&ev){let es=vb(er,ed,ec,et);ev.paddInEmptyBlock&&es&&(et=>{let ea=et;for(;C(ea);){if(ea.name in eC)return vb(er,ed,ec,ea);ea=ea.parent}return!1})(et)?hb(ea,ei,f,et):ev.removeEmpty&&es?f(et)?et.remove():et.unwrap():ev.paddEmpty&&(es||bb(et,"#text")&&(null===(eI=null==et?void 0:et.firstChild)||void 0===eI?void 0:eI.value)==="\xa0")&&hb(ea,ei,f,et)}}else if(3===et.type&&!m(et)){let er=null!==(ev=et.value)&&void 0!==ev?ev:"";(et.next&&f(et.next)||g(et,!1))&&(er=er.replace(eP,"")),0===er.length?et.remove():et.value=er}}]})(eL,er,es,ea),eF=[],eU=ev?et=>{xb(er,et)&&eF.push(et)}:_,eH={nodes:{},attributes:{}},w=et=>fb(eC(),eP(),et,eH);if(((et,er,ea)=>{let ei=[];for(let ea=et,es=ea;ea;es=ea,ea=ea.walk()){let ed=ea;V(er,et=>et(ed)),y(ed.parent)&&ed!==et?ea=es:ei.push(ed)}for(let et=ei.length-1;et>=0;et--){let er=ei[et];V(ea,et=>et(er))}})(eL,[eM,w],[eV,eU]),eF.reverse(),ev&&eF.length>0){if(ea.context){let{pass:et,fail:ei}=K(eF,et=>et.parent===eL);wb(ei,er,eL,w),ea.invalid=et.length>0}else wb(eF,er,eL,w)}let ez=((et,er)=>{var ea;let ei=null!==(ea=er.forced_root_block)&&void 0!==ea?ea:et.forced_root_block;return!1===ei?"":!0===ei?"p":ei})(es,ea);return ez&&("body"===eL.name||ea.isRootContent)&&((et,ea)=>{let ei=dN(dy("script,style,head,html,body,title,meta,param"),er.getBlockElements()),ed=/^[ \t\r\n]+/,ec=/[ \t\r\n]+$/,ev=et.firstChild,eC=null,d=et=>{var er,ea;et&&((ev=et.firstChild)&&3===ev.type&&(ev.value=null===(er=ev.value)||void 0===er?void 0:er.replace(ed,"")),(ev=et.lastChild)&&3===ev.type&&(ev.value=null===(ea=ev.value)||void 0===ea?void 0:ea.replace(ec,"")))};if(er.isValidChild(et.name,ea.toLowerCase())){for(;ev;){let er=ev.next;g(ei,ev)?(eC||((eC=new Wg(ea,1)).attr(es.forced_root_block_attrs),et.insert(eC,ev)),eC.append(ev)):(d(eC),eC=null),ev=er}d(eC)}})(eL,ez),ea.invalid||gb(eH,ea),eL}};return ty(eM,es),es.inline_styles&&Vv(eM,es,er),eM},vC=(et,er,ea)=>{let ei=Bb(et)?up({validate:!1}).serialize(et):et,es=er(ei);if(es.isDefaultPrevented())return es;if(Bb(et)){if(es.content!==ei){let er=bC({validate:!1,forced_root_block:!1,...ea}).parse(es.content,{context:et.name});return{...es,content:er}}return{...es,content:et}}return es},yC=(et,er)=>{if(er.no_events)return n1.value(er);{let ea=et.dispatch("BeforeGetContent",er);return ea.isDefaultPrevented()?n1.error(rf(et,{content:"",...ea}).content):n1.value(ea)}},CC=(et,er,ea)=>{if(ea.no_events)return er;{let ei=vC(er,er=>rf(et,{...ea,content:er}),{sanitize:ld(et),sandbox_iframes:lk(et)});return ei.content}},wC=(et,er)=>{if(er.no_events)return n1.value(er);{let ea=vC(er.content,ea=>{var ei;return ei={...er,content:ea},et.dispatch("BeforeSetContent",ei)},{sanitize:ld(et),sandbox_iframes:lk(et)});return ea.isDefaultPrevented()?(of(et,ea),n1.error(void 0)):n1.value(ea)}},xC=(et,er,ea)=>{ea.no_events||of(et,{...ea,content:er})},EC=(et,er,ea)=>({element:et,width:er,rows:ea}),_C=(et,er)=>({element:et,cells:er}),kC=(et,er)=>({x:et,y:er}),SC=(et,er)=>tn(et,er).bind(Xe).getOr(1),NC=(et,er,ea)=>{let ei=et.rows;return!!(ei[ea]?ei[ea].cells:[])[er]},RC=et=>X(et,(et,er)=>er.cells.length>et?er.cells.length:et,0),AC=(et,er)=>{let ea=et.rows;for(let et=0;et<ea.length;et++){let ei=ea[et].cells;for(let ea=0;ea<ei.length;ea++)if(_n(ei[ea],er))return I.some(kC(ea,et))}return I.none()},TC=(et,er,ea,ei,es)=>{let ed=[],ec=et.rows;for(let et=ea;et<=es;et++){let ea=ec[et].cells,es=er<ei?ea.slice(er,ei+1):ea.slice(ei,er+1);ed.push(_C(ec[et].element,es))}return ed},OC=et=>((et,er)=>{let ea=fi(et.element),ei=bn("tbody");return Co(ei,er),vo(ea,ei),ea})(et,q(et.rows,et=>{let er=q(et.cells,et=>{let er=gi(et);return on(er,"colspan"),on(er,"rowspan"),er}),ea=fi(et.element);return Co(ea,er),ea})),BC=(et,er,ea)=>{let ei=pn(er.commonAncestorContainer),es=Bp(ei,et),ed=Y(es,et=>ea.isWrapper(Ht(et))),ec=J(es,et=>"li"===Ht(et)&&rm(et,er)).fold(N([]),et=>J(es,et=>"ul"===Ht(et)||"ol"===Ht(et)).map(et=>{let er=bn(Ht(et)),ea=ye(fo(et),(et,er)=>He(er,"list-style"));return lo(er,ea),[bn("li"),er]}).getOr([])),ev=ed.concat(ec.length?ec:rF(ei)?An(ei).filter(rV).fold(N([]),et=>[ei,et]):rV(ei)?[ei]:[]);return q(ev,fi)},PC=()=>Sf([]),DC=(et,er)=>eo(er[0],"table",T(_n,et)).bind(et=>{let ea=er[0],ei=er[er.length-1],es=(et=>{let er=EC(fi(et),0,[]);return V(Uo(et,"tr"),(et,ea)=>{V(Uo(et,"td,th"),(ei,es)=>{((et,er,ea,ei,es)=>{let ed=SC(es,"rowspan"),ec=SC(es,"colspan"),ev=et.rows;for(let et=ea;et<ea+ed;et++){ev[et]||(ev[et]=_C(gi(ei),[]));for(let ei=er;ei<er+ec;ei++)ev[et].cells[ei]=et===ea&&ei===er?es:fi(es)}})(er,((et,er,ea)=>{for(;NC(et,er,ea);)er++;return er})(er,es,ea),ea,et,ei)})}),EC(er.element,RC(er.rows),er.rows)})(et);return AC(es,ea).bind(et=>AC(es,ei).map(er=>((et,er,ea)=>{let ei=er.x,es=er.y,ed=ea.x,ec=ea.y,ev=es<ec?TC(et,ei,es,ed,ec):TC(et,ei,ec,ed,es);return EC(et.element,RC(ev),ev)})(es,et,er))).map(et=>Sf([OC(et)]))}).getOrThunk(PC),LC=(et,er,ea)=>{var ei;let es=Zu(er,et);return es.length>0?DC(et,es):er.length>0&&er[0].collapsed?PC():((et,er)=>{let ea=X(er,(et,er)=>(vo(er,et),er),et);return er.length>0?Sf([ea]):ea})(pn((ei=er[0]).cloneContents()),BC(et,ei,ea))},MC=(et,er)=>er>=0&&er<et.length&&Xu(et.charAt(er)),IC=et=>Dr(et.innerText),FC=et=>t4(et)?et.outerHTML:rt(et)?r4.encodeRaw(et.data,!1):ri(et)?"<!--"+et.data+"-->":"",UC=(et,er)=>{var ea;let ei;return ea=((et,er)=>{let ea=et.length+er.length+2,ei=Array(ea),es=Array(ea),s=(ea,ei,es,ed,ec)=>{let ev=i(ea,ei,es,ed);if(null===ev||ev.start===ei&&ev.diag===ei-ed||ev.end===ea&&ev.diag===ea-es){let ev=ea,eC=es;for(;ev<ei||eC<ed;)ev<ei&&eC<ed&&et[ev]===er[eC]?(ec.push([0,et[ev]]),++ev,++eC):ei-ea>ed-es?(ec.push([2,et[ev]]),++ev):(ec.push([1,er[eC]]),++eC)}else{s(ea,ev.start,es,ev.start-ev.diag,ec);for(let er=ev.start;er<ev.end;++er)ec.push([0,et[er]]);s(ev.end,ei,ev.end-ev.diag,ed,ec)}},a=(ea,ei,es,ed)=>{let ec=ea;for(;ec-ei<ed&&ec<es&&et[ec]===er[ec-ei];)++ec;return{start:ea,end:ec,diag:ei}},i=(ea,ed,ec,ev)=>{let eC,eI,eD,eP,eL;let eM=ed-ea,eV=ev-ec;if(0===eM||0===eV)return null;let eF=eM-eV,eU=eV+eM,eH=(eU%2==0?eU:eU+1)/2;for(ei[1+eH]=ea,es[1+eH]=ed+1,eC=0;eC<=eH;++eC){for(eI=-eC;eI<=eC;eI+=2){for(eD=eI+eH,eI===-eC||eI!==eC&&ei[eD-1]<ei[eD+1]?ei[eD]=ei[eD+1]:ei[eD]=ei[eD-1]+1,eL=(eP=ei[eD])-ea+ec-eI;eP<ed&&eL<ev&&et[eP]===er[eL];)ei[eD]=++eP,++eL;if(eF%2!=0&&eF-eC<=eI&&eI<=eF+eC&&es[eD-eF]<=ei[eD])return a(es[eD-eF],eI+ea-ec,ed,ev)}for(eI=eF-eC;eI<=eF+eC;eI+=2){for(eD=eI+eH-eF,eI===eF-eC||eI!==eF+eC&&es[eD+1]<=es[eD-1]?es[eD]=es[eD+1]-1:es[eD]=es[eD-1],eL=(eP=es[eD]-1)-ea+ec-eI;eP>=ea&&eL>=ec&&et[eP]===er[eL];)es[eD]=eP--,eL--;if(eF%2==0&&-eC<=eI&&eI<=eC&&es[eD]<=ei[eD+eF])return a(es[eD],eI+ea-ec,ed,ev)}}return null},ed=[];return s(0,et.length,0,er.length,ed),ed})(q(e3(er.childNodes),FC),et),ei=0,V(ea,et=>{0===et[0]?ei++:1===et[0]?(((et,er,ea)=>{let ei=(et=>{let er;let ea=document.createElement("div"),ei=document.createDocumentFragment();for(et&&(ea.innerHTML=et);er=ea.firstChild;)ei.appendChild(er);return ei})(er);if(et.hasChildNodes()&&ea<et.childNodes.length){let er=et.childNodes[ea];et.insertBefore(ei,er)}else et.appendChild(ei)})(er,et[1],ei),ei++):2===et[0]&&((et,er)=>{if(et.hasChildNodes()&&er<et.childNodes.length){let ea=et.childNodes[er];et.removeChild(ea)}})(er,ei)}),er},dw=De(()=>document.implementation.createHTMLDocument("undo")),jC=et=>{let er=et.serializer.getTempAttrs(),ea=sp(et.getBody(),er);return null!==ea.querySelector("iframe")?{type:"fragmented",fragments:Y(q(e3(ea.childNodes),k(Dr,FC)),et=>et.length>0),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Dr(ea.innerHTML),bookmark:null,beforeBookmark:null}},HC=(et,er,ea)=>{let ei=ea?er.beforeBookmark:er.bookmark;"fragmented"===er.type?UC(er.fragments,et.getBody()):et.setContent(er.content,{format:"raw",no_selection:!C(ei)||!Iu(ei)||!ei.isFakeCaret}),ei&&(et.selection.moveToBookmark(ei),et.selection.scrollIntoView())},$C=et=>"fragmented"===et.type?et.fragments.join(""):et.content,qC=et=>{let er=bn("body",dw());return So(er,$C(et)),V(Uo(er,"*[data-mce-bogus]"),Eo),ko(er)},VC=(et,er)=>!(!et||!er)&&($C(et)===$C(er)||qC(et)===qC(er)),WC=et=>0===et.get(),KC=(et,er,ea)=>{WC(ea)&&(et.typing=er)},YC=(et,er)=>{et.typing&&(KC(et,!1,er),et.add())},GC=et=>({init:{bindEvents:_},undoManager:{beforeChange:(er,ea)=>{WC(er)&&ea.set(n0(et.selection))},add:(er,ea,ei,es,ed,ec)=>((et,er,ea,ei,es,ed,ec)=>{let ev=jC(et),eC=tQ.extend(ed||{},ev);if(!WC(ei)||et.removed)return null;let eI=er.data[ea.get()];if(et.dispatch("BeforeAddUndo",{level:eC,lastLevel:eI,originalEvent:ec}).isDefaultPrevented()||eI&&VC(eI,eC))return null;er.data[ea.get()]&&es.get().each(et=>{er.data[ea.get()].beforeBookmark=et});let eD=af(et);if(eD&&er.data.length>eD){for(let et=0;et<er.data.length-1;et++)er.data[et]=er.data[et+1];er.data.length--,ea.set(er.data.length)}eC.bookmark=n0(et.selection),ea.get()<er.data.length-1&&(er.data.length=ea.get()+1),er.data.push(eC),ea.set(er.data.length-1);let eP={level:eC,lastLevel:eI,originalEvent:ec};return ea.get()>0?(et.setDirty(!0),et.dispatch("AddUndo",eP),et.dispatch("change",eP)):et.dispatch("AddUndo",eP),eC})(et,er,ea,ei,es,ed,ec),undo:(er,ea,ei)=>{let es;return er.typing&&(er.add(),er.typing=!1,KC(er,!1,ea)),ei.get()>0&&(ei.set(ei.get()-1),HC(et,es=er.data[ei.get()],!0),et.setDirty(!0),et.dispatch("Undo",{level:es})),es},redo:(er,ea)=>{let ei;return er.get()<ea.length-1&&(er.set(er.get()+1),HC(et,ei=ea[er.get()],!1),et.setDirty(!0),et.dispatch("Redo",{level:ei})),ei},clear:(er,ea)=>{er.data=[],ea.set(0),er.typing=!1,et.dispatch("ClearUndos")},reset:et=>{et.clear(),et.add()},hasUndo:(er,ea)=>ea.get()>0||er.typing&&er.data[0]&&!VC(jC(et),er.data[0]),hasRedo:(et,er)=>er.get()<et.data.length-1&&!et.typing,transact:(et,er,ea)=>(YC(et,er),et.beforeChange(),et.ignore(ea),et.add()),ignore:(et,er)=>((et,er)=>{try{et.set(et.get()+1),er()}finally{et.set(et.get()-1)}})(et,er),extra:(er,ea,ei,es)=>((et,er,ea,ei,es)=>{if(er.transact(ei)){let ei=er.data[ea.get()].bookmark,ed=er.data[ea.get()-1];HC(et,ed,!0),er.transact(es)&&(er.data[ea.get()-1].beforeBookmark=ei)}})(et,er,ea,ei,es)},formatter:{match:(er,ea,ei,es)=>Hb(et,er,ea,ei,es),matchAll:(er,ea)=>((et,er,ea)=>{let ei=[],es={},ed=et.selection.getStart();return et.dom.getParent(ed,ed=>{for(let ec=0;ec<er.length;ec++){let ev=er[ec];!es[ev]&&jb(et,ed,ev,ea)&&(es[ev]=!0,ei.push(ev))}},et.dom.getRoot()),ei})(et,er,ea),matchNode:(er,ea,ei,es)=>jb(et,er,ea,ei,es),canApply:er=>((et,er)=>{let ea=et.formatter.get(er),ei=et.dom;if(ea&&et.selection.isEditable()){let er=et.selection.getStart(),es=Em(ei,er);for(let et=ea.length-1;et>=0;et--){let er=ea[et];if(!Sm(er))return!0;for(let et=es.length-1;et>=0;et--)if(ei.is(es[et],er.selector))return!0}}return!1})(et,er),closest:er=>((et,er)=>{let n=er=>_n(er,pn(et.getBody()));return I.from(et.selection.getStart(!0)).bind(ea=>Lb(pn(ea),ea=>ue(er,er=>jb(et,ea.dom,er)?I.some(er):I.none()),n)).getOrNull()})(et,er),apply:(er,ea,ei)=>Iv(et,er,ea,ei),remove:(er,ea,ei,es)=>Ov(et,er,ea,ei,es),toggle:(er,ea,ei)=>((et,er,ea,ei)=>{let es=et.formatter.get(er);es&&(!Hb(et,er,ea,ei)||"toggle"in es[0]&&!es[0].toggle?Iv(et,er,ea,ei):Ov(et,er,ea,ei))})(et,er,ea,ei),formatChanged:(er,ea,ei,es,ed)=>(((et,er,ea,ei,es,ed)=>{let ec=er.get();V(ea.split(","),er=>{let ea=xe(ec,er).getOrThunk(()=>{let et={withSimilar:{state:$a(!1),similar:!0,callbacks:[]},withoutSimilar:{state:$a(!1),similar:!1,callbacks:[]},withVars:[]};return ec[er]=et,et}),i=()=>{let ea=jv(et);return zv(et,ea,er,es,ed).isSome()};if(eX(ed)){let et=es?ea.withSimilar:ea.withoutSimilar;et.callbacks.push(ei),1===et.callbacks.length&&et.state.set(i())}else ea.withVars.push({state:$a(i()),similar:es,vars:ed,callback:ei})}),er.set(ec)})(et,er,ea,ei,es,ed),{unbind:()=>((et,er,ea)=>{let ei=et.get();V(er.split(","),et=>xe(ei,et).each(er=>{ei[et]={withSimilar:{...er.withSimilar,callbacks:Y(er.withSimilar.callbacks,et=>et!==ea)},withoutSimilar:{...er.withoutSimilar,callbacks:Y(er.withoutSimilar.callbacks,et=>et!==ea)},withVars:Y(er.withVars,et=>et.callback!==ea)}})),et.set(ei)})(er,ea,ei)})},editor:{getContent:er=>I.from(et.getBody()).fold(N("tree"===er.format?new Wg("body",11):""),ea=>lp(et,er,ea)),setContent:(er,ea)=>I.from(et.getBody()).map(ei=>Bb(er)?((et,er,ea,ei)=>{pb(et.parser.getNodeFilters(),et.parser.getAttributeFilters(),ea);let es=up({validate:!1},et.schema).serialize(ea),ed=Dr(rz(pn(er))?es:tQ.trim(es));return Pb(et,ed,ei.no_selection),{content:ea,html:ed}})(et,ei,er,ea):((et,er,ea,ei)=>{if(0===(ea=Dr(ea)).length||/^\s+$/.test(ea)){let es='<br data-mce-bogus="1">';"TABLE"===er.nodeName?ea="<tr><td>"+es+"</td></tr>":/^(UL|OL)$/.test(er.nodeName)&&(ea="<li>"+es+"</li>");let ed=oa(et);return et.schema.isValidChild(er.nodeName.toLowerCase(),ed.toLowerCase())?(ea=es,ea=et.dom.createHTML(ed,ol(et),ea)):ea||(ea=es),Pb(et,ea,ei.no_selection),{content:ea,html:ea}}{"raw"!==ei.format&&(ea=up({validate:!1},et.schema).serialize(et.parser.parse(ea,{isRootContent:!0,insert:!0})));let es=rz(pn(er))?ea:tQ.trim(ea);return Pb(et,es,ei.no_selection),{content:es,html:es}}})(et,ei,er,ea)).getOr({content:er,html:Bb(ea.content)?"":ea.content}),insertContent:(er,ea)=>Ob(et,er,ea),addVisual:er=>((et,er)=>{let ea=et.dom,ei=C(er)?er:et.getBody();V(ea.select("table,a",ei),er=>{switch(er.nodeName){case"TABLE":let ei=aM(et),es=ea.getAttrib(er,"border");es&&"0"!==es||!et.hasVisual?ea.removeClass(er,ei):ea.addClass(er,ei);break;case"A":if(!ea.getAttrib(er,"href")){let ei=ea.getAttrib(er,"name")||er.id,es=aV(et);ei&&et.hasVisual?ea.addClass(er,es):ea.removeClass(er,es)}}}),et.dispatch("VisualAid",{element:er,hasVisual:et.hasVisual})})(et,er)},selection:{getContent:(er,ea)=>((et,er,ea={})=>{let ei={...ea,format:er,get:!0,selection:!0,getInner:!0};return yC(et,ei).fold(R,er=>{let ea=((et,er)=>{if("text"===er.format)return I.from(et.selection.getRng()).map(er=>{var ea;let ei=I.from(et.dom.getParent(er.commonAncestorContainer,et.dom.isBlock)),es=et.getBody(),ed=ei.map(et=>et.nodeName).getOr("div").toLowerCase(),ec=pn(er.cloneContents());ap(ec),ip(ec);let ev=et.dom.add(es,ed,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},ec.dom),eC=IC(ev),eI=Dr(null!==(ea=ev.textContent)&&void 0!==ea?ea:"");if(et.dom.remove(ev),MC(eI,0)||MC(eI,eI.length-1)){let et=ei.getOr(es),er=IC(et),ea=er.indexOf(eC);return -1===ea?eC:(MC(er,ea-1)?" ":"")+eC+(MC(er,ea+eC.length)?" ":"")}return eC}).getOr("");{let ea=((et,er)=>{let ea=et.selection.getRng(),ei=et.dom.create("body"),es=et.selection.getSel(),ed=Mg(et,Ju(es)),ec=er.contextual?LC(pn(et.getBody()),ed,et.schema).dom:ea.cloneContents();return ec&&ei.appendChild(ec),et.selection.serializer.serialize(ei,er)})(et,er);return"tree"===er.format?ea:et.selection.isCollapsed()?"":ea}})(et,er);return CC(et,ea,er)})})(et,er,ea)},autocompleter:{addDecoration:er=>zg(et,er),removeDecoration:()=>jg(pn(et.getBody())).each(er=>{let ea=et.selection.getBookmark();Eo(er),et.selection.moveToBookmark(ea)})},raw:{getModel:()=>I.none()}}),XC=et=>Ee(et.plugins,"rtc"),QC=et=>et.rtcInstance?et.rtcInstance:GC(et),JC=et=>{let er=et.rtcInstance;if(er)return er;throw Error("Failed to get RTC instance not yet initialized.")},ZC=et=>JC(et).init.bindEvents(),ew=et=>0===et.dom.length?(xo(et),I.none()):I.some(et),tw=(et,er,ea,ei,es)=>{et.bind(et=>((ei?ch:dh)(et.dom,ei?et.dom.length:0,es),er.filter(t2).map(er=>((et,er,ea,ei,es)=>{let ed=et.dom,ec=er.dom,ev=ei?ed.length:ec.length;ei?(uh(ed,ec,es,!1,!ei),ea.setStart(ec,ev)):(uh(ec,ed,es,!1,!ei),ea.setEnd(ec,ev))})(et,er,ea,ei,es)))).orThunk(()=>{let et=er.filter(et=>Jm.isBookmarkNode(et.dom)).bind(ei?Pn:Bn).or(er).filter(t2);return et.map(et=>((et,er,ea)=>{An(et).each(ei=>{let es=et.dom;er&&eh(ei,Vi(es,0),ea)?dh(es,0,ea):!er&&th(ei,Vi(es,es.length),ea)&&ch(es,es.length,ea)})})(et,ei,es))})},nw=(et,er,ea)=>{if(Ee(et,er)){let ei=Y(et[er],et=>et!==ea);0===ei.length?delete et[er]:et[er]=ei}},ow=et=>!(!et||!et.ownerDocument)&&kn(pn(et.ownerDocument),pn(et)),rw=(et,er,ea,ei)=>{let es,ed;let{selectorChangedWithUnbind:ec}=((et,er)=>{let ea,ei;let r=(er,ea)=>J(ea,ea=>et.is(ea,er)),s=er=>et.getParents(er,void 0,et.getRoot());return{selectorChangedWithUnbind:(et,es)=>(ea||(ea={},ei={},er.on("NodeChange",et=>{let er=et.element,es=s(er),ed={};ge(ea,(et,er)=>{r(er,es).each(ea=>{ei[er]||(V(et,et=>{et(!0,{node:ea,selector:er,parents:es})}),ei[er]=et),ed[er]=et})}),ge(ei,(et,ea)=>{ed[ea]||(delete ei[ea],V(et,et=>{et(!1,{node:er,selector:ea,parents:es})}))})})),ea[et]||(ea[et]=[]),ea[et].push(es),r(et,s(er.selection.getStart())).each(()=>{ei[et]=ea[et]}),{unbind:()=>{nw(ea,et,es),nw(ei,et,es)}})}})(et,ei),i=(et,er)=>((et,er,ea={})=>{let ei={format:"html",...ea,set:!0,selection:!0,content:er};wC(et,ei).each(er=>{let ea=((et,er)=>{if("raw"!==er.format){let ea=et.selection.getRng(),ei=et.dom.getParent(ea.commonAncestorContainer,et.dom.isBlock),es=ei?{context:ei.nodeName.toLowerCase()}:{},ed=et.parser.parse(er.content,{forced_root_block:!1,...es,...er});return up({validate:!1},et.schema).serialize(ed)}return er.content})(et,er),ei=et.selection.getRng();((et,er,ea)=>{let ei=I.from(er.firstChild).map(pn),es=I.from(er.lastChild).map(pn);et.deleteContents(),et.insertNode(er);let ed=ei.bind(Bn).filter(t2).bind(ew),ec=es.bind(Pn).filter(t2).bind(ew);tw(ed,ei,et,!0,ea),tw(ec,es,et,!1,ea),et.collapse(!1)})(ei,ei.createContextualFragment(ea),et.schema),et.selection.setRng(ei),sg(et,ei),xC(et,ea,er)})})(ei,et,er),l=et=>{let er=c();er.collapse(!!et),u(er)},d=()=>er.getSelection?er.getSelection():er.document.selection,c=()=>{let ea;let a=(et,er,ea)=>{try{return er.compareBoundaryPoints(et,ea)}catch(et){return -1}},ec=er.document;if(C(ei.bookmark)&&!Rg(ei)){let et=hg(ei);if(et.isSome())return et.map(et=>Mg(ei,[et])[0]).getOr(ec.createRange())}try{let et=d();et&&!$o(et.anchorNode)&&(ea=et.rangeCount>0?et.getRangeAt(0):ec.createRange(),ea=Mg(ei,[ea])[0])}catch(et){}if(ea||(ea=ec.createRange()),rs(ea.startContainer)&&ea.collapsed){let er=et.getRoot();ea.setStart(er,0),ea.setEnd(er,0)}return es&&ed&&(0===a(ea.START_TO_START,ea,es)&&0===a(ea.END_TO_END,ea,es)?ea=ed:(es=null,ed=null)),ea},u=(et,er)=>{var ea;if(!((ea=et)&&ow(ea.startContainer)&&ow(ea.endContainer)))return;let ec=d();if(et=ei.dispatch("SetSelectionRange",{range:et,forward:er}).range,ec){ed=et;try{ec.removeAllRanges(),ec.addRange(et)}catch(et){}!1===er&&ec.extend&&(ec.collapse(et.endContainer,et.endOffset),ec.extend(et.startContainer,et.startOffset)),es=ec.rangeCount>0?ec.getRangeAt(0):null}if(!et.collapsed&&et.startContainer===et.endContainer&&(null==ec?void 0:ec.setBaseAndExtent)&&et.endOffset-et.startOffset<2&&et.startContainer.hasChildNodes()){let er=et.startContainer.childNodes[et.startOffset];er&&"IMG"===er.nodeName&&(ec.setBaseAndExtent(et.startContainer,et.startOffset,et.endContainer,et.endOffset),ec.anchorNode===et.startContainer&&ec.focusNode===et.endContainer||ec.setBaseAndExtent(er,0,er,1))}ei.dispatch("AfterSetSelectionRange",{range:et,forward:er})},m=()=>{let er=d(),ea=null==er?void 0:er.anchorNode,ei=null==er?void 0:er.focusNode;if(!er||!ea||!ei||$o(ea)||$o(ei))return!0;let es=et.createRng(),ed=et.createRng();try{es.setStart(ea,er.anchorOffset),es.collapse(!0),ed.setStart(ei,er.focusOffset),ed.collapse(!0)}catch(et){return!0}return 0>=es.compareBoundaryPoints(es.START_TO_START,ed)},ev={dom:et,win:er,serializer:ea,editor:ei,expand:(er={type:"word"})=>u(Uf(et).expand(c(),er)),collapse:l,setCursorLocation:(er,ea)=>{let es=et.createRng();C(er)&&C(ea)?(es.setStart(er,ea),es.setEnd(er,ea),u(es),l(!1)):(sm(et,es,ei.getBody(),!0),u(es))},getContent:et=>((et,er={})=>{var ea;return ea=er.format?er.format:"html",JC(et).selection.getContent(ea,er)})(ei,et),setContent:i,getBookmark:(et,er)=>eC.getBookmark(et,er),moveToBookmark:et=>eC.moveToBookmark(et),select:(er,ea)=>(I.from(er).bind(er=>I.from(er.parentNode).map(ei=>{let es=et.nodeIndex(er),ed=et.createRng();return ed.setStart(ei,es),ed.setEnd(ei,es+1),ea&&(sm(et,ed,er,!0),sm(et,ed,er,!1)),ed})).each(u),er),isCollapsed:()=>{let et=c(),er=d();return!(!et||et.item)&&(et.compareEndPoints?0===et.compareEndPoints("StartToEnd",et):!er||et.collapsed)},isEditable:()=>{let er=c(),ea=ei.getBody().querySelectorAll('[data-mce-selected="1"]');return ea.length>0?ne(ea,er=>et.isEditable(er.parentElement)):Og(et,er)},isForward:m,setNode:er=>(i(et.getOuterHTML(er)),er),getNode:()=>((et,er)=>{if(!er)return et;let ea=er.startContainer,ei=er.endContainer,es=er.startOffset,ed=er.endOffset,ec=er.commonAncestorContainer;er.collapsed||(ea===ei&&ed-es<2&&ea.hasChildNodes()&&(ec=ea.childNodes[es]),rt(ea)&&rt(ei)&&(ea=ea.length===es?Lg(ea.nextSibling,!0):ea.parentNode,ei=0===ed?Lg(ei.previousSibling,!1):ei.parentNode,ea&&ea===ei&&(ec=ea)));let ev=rt(ec)?ec.parentNode:ec;return Vo(ev)?ev:et})(ei.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:et=>Pg(ei.getBody(),c(),et),getEnd:et=>Dg(ei.getBody(),c(),et),getSelectedBlocks:(er,ea)=>((et,er,ea,ei)=>{let es=[],ed=et.getRoot(),ec=et.getParent(ea||Pg(ed,er,er.collapsed),et.isBlock),ev=et.getParent(ei||Dg(ed,er,er.collapsed),et.isBlock);if(ec&&ec!==ed&&es.push(ec),ec&&ev&&ec!==ev){let er;let ea=new jo(ec,ed);for(;(er=ea.next())&&er!==ev;)et.isBlock(er)&&es.push(er)}return ev&&ec!==ev&&ev!==ed&&es.push(ev),es})(et,c(),er,ea),normalize:()=>{let er=c(),ea=d();if(!(Ju(ea).length>1)&&am(ei)){let ea=Mf(et,er);return ea.each(et=>{u(et,m())}),ea.getOr(er)}return er},selectorChanged:(et,er)=>(ec(et,er),ev),selectorChangedWithUnbind:ec,getScrollContainer:()=>{let er,ea=et.getRoot();for(;ea&&"BODY"!==ea.nodeName;){if(ea.scrollHeight>ea.clientHeight){er=ea;break}ea=ea.parentNode}return er},scrollIntoView:(et,er)=>{C(et)?((et,er,ea)=>{(et.inline?ng:rg)(et,er,ea)})(ei,et,er):sg(ei,c(),er)},placeCaretAt:(et,er)=>u(Rf(et,er,ei.getDoc())),getBoundingClientRect:()=>{let et=c();return et.collapsed?Vi.fromRangeStart(et).getClientRects()[0]:et.getBoundingClientRect()},destroy:()=>{er=es=ed=null,eI.destroy()}},eC=Jm(ev),eI=mf(ev,ei);return ev.bookmarkManager=eC,ev.controlSelection=eI,ev},sw=(et,er,ea)=>{-1===tQ.inArray(er,ea)&&(et.addAttributeFilter(ea,(et,er)=>{let ea=et.length;for(;ea--;)et[ea].attr(er,null)}),er.push(ea))},aw=(et,er)=>{let ea=["data-mce-selected"],ei={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...et},es=er&&er.dom?er.dom:za.DOM,ed=er&&er.schema?er.schema:ua(ei),ec=bC(ei,ed);return ec.addAttributeFilter("data-mce-tabindex",(et,er)=>{let ea=et.length;for(;ea--;){let ei=et[ea];ei.attr("tabindex",ei.attr("data-mce-tabindex")),ei.attr(er,null)}}),ec.addAttributeFilter("src,href,style",(et,er)=>{let ea="data-mce-"+er,ed=ei.url_converter,ec=ei.url_converter_scope,ev=et.length;for(;ev--;){let ei=et[ev],eC=ei.attr(ea);void 0!==eC?(ei.attr(er,eC.length>0?eC:null),ei.attr(ea,null)):(eC=ei.attr(er),"style"===er?eC=es.serializeStyle(es.parseStyle(eC),ei.name):ed&&(eC=ed.call(ec,eC,er,ei.name)),ei.attr(er,eC.length>0?eC:null))}}),ec.addAttributeFilter("class",et=>{let er=et.length;for(;er--;){let ea=et[er],ei=ea.attr("class");ei&&(ei=ei.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),ea.attr("class",ei.length>0?ei:null))}}),ec.addAttributeFilter("data-mce-type",(et,er,ea)=>{let ei=et.length;for(;ei--;){let er=et[ei];if("bookmark"===er.attr("data-mce-type")&&!ea.cleanup){let et=I.from(er.firstChild).exists(et=>{var er;return!vr(null!==(er=et.value)&&void 0!==er?er:"")});et?er.unwrap():er.remove()}}}),ec.addNodeFilter("noscript",et=>{var er;let ea=et.length;for(;ea--;){let ei=et[ea].firstChild;ei&&(ei.value=r4.decode(null!==(er=ei.value)&&void 0!==er?er:""))}}),ec.addNodeFilter("script,style",(et,er)=>{var ea;let r=et=>et.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),es=et.length;for(;es--;){let ed=et[es],ec=ed.firstChild,ev=null!==(ea=null==ec?void 0:ec.value)&&void 0!==ea?ea:"";if("script"===er){let et=ed.attr("type");et&&ed.attr("type","mce-no/type"===et?null:et.replace(/^mce\-/,"")),"xhtml"===ei.element_format&&ec&&ev.length>0&&(ec.value="// <![CDATA[\n"+r(ev)+"\n// ]]>")}else"xhtml"===ei.element_format&&ec&&ev.length>0&&(ec.value="<!--\n"+r(ev)+"\n-->")}}),ec.addNodeFilter("#comment",et=>{let er=et.length;for(;er--;){let ea=et[er],ed=ea.value;ei.preserve_cdata&&0===(null==ed?void 0:ed.indexOf("[CDATA["))?(ea.name="#cdata",ea.type=4,ea.value=es.decode(ed.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==ed?void 0:ed.indexOf("mce:protected "))&&(ea.name="#text",ea.type=3,ea.raw=!0,ea.value=unescape(ed).substr(14))}}),ec.addNodeFilter("xml:namespace,input",(et,er)=>{let ea=et.length;for(;ea--;){let ei=et[ea];7===ei.type?ei.remove():1===ei.type&&("input"!==er||ei.attr("type")||ei.attr("type","text"))}}),ec.addAttributeFilter("data-mce-type",et=>{V(et,et=>{"format-caret"===et.attr("data-mce-type")&&(et.isEmpty(ec.schema.getNonEmptyElements())?et.remove():et.unwrap())})}),ec.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(et,er)=>{let ea=et.length;for(;ea--;)et[ea].attr(er,null)}),ei.remove_trailing_brs&&Wv(ei,ec,ec.schema),{schema:ed,addNodeFilter:ec.addNodeFilter,addAttributeFilter:ec.addAttributeFilter,serialize:(et,ea={})=>{let ev={format:"html",...ea},eC=C(er)&&er.hasEventListeners("PreProcess")&&!ev.no_events?((et,er,ea)=>{let ei;let es=et.dom,ed=er.cloneNode(!0),ec=document.implementation;if(ec.createHTMLDocument){let et=ec.createHTMLDocument("");tQ.each("BODY"===ed.nodeName?ed.childNodes:[ed],er=>{et.body.appendChild(et.importNode(er,!0))}),ed="BODY"!==ed.nodeName?et.body.firstChild:et.body,ei=es.doc,es.doc=et}return((et,er)=>{et.dispatch("PreProcess",er)})(et,{...ea,node:ed}),ei&&(es.doc=ei),ed})(er,et,ev):et,eI=((et,er,ea)=>{let ei=Dr(ea.getInner?er.innerHTML:et.getOuterHTML(er));return ea.selection||rz(pn(er))?ei:tQ.trim(ei)})(es,eC,ev),eD=((et,er,ea)=>{let ei=ea.selection?{forced_root_block:!1,...ea}:ea,es=et.parse(er,ei);return(et=>{let t=et=>"br"===(null==et?void 0:et.name),er=et.lastChild;if(t(er)){let et=er.prev;t(et)&&(er.remove(),et.remove())}})(es),es})(ec,eI,ev);return"tree"===ev.format?eD:((et,er,ea,ei,es)=>{let ed=up(er,ea).serialize(ei);return((et,er,ea)=>{if(!er.no_events&&et){var ei;let es=(ei={...er,content:ea},et.dispatch("PostProcess",ei));return es.content}return ea})(et,es,ed)})(er,ei,ed,eD,ev)},addRules:ed.addValidElements,setRules:ed.setValidElements,addTempAttr:T(sw,ec,ea),getTempAttrs:N(ea),getNodeFilters:ec.getNodeFilters,getAttributeFilters:ec.getAttributeFilters,removeNodeFilter:ec.removeNodeFilter,removeAttributeFilter:ec.removeAttributeFilter}},iw=(et,er)=>{let ea=aw(et,er);return{schema:ea.schema,addNodeFilter:ea.addNodeFilter,addAttributeFilter:ea.addAttributeFilter,serialize:ea.serialize,addRules:ea.addRules,setRules:ea.setRules,addTempAttr:ea.addTempAttr,getTempAttrs:ea.getTempAttrs,getNodeFilters:ea.getNodeFilters,getAttributeFilters:ea.getAttributeFilters,removeNodeFilter:ea.removeNodeFilter,removeAttributeFilter:ea.removeAttributeFilter}},lw=(et,er,ea={})=>{let ei={format:"html",...ea,set:!0,content:er};return wC(et,ei).map(er=>{var ea;let ei=(ea=er.content,QC(et).editor.setContent(ea,er));return xC(et,ei.html,er),ei.content}).getOr(er)},dR="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),dI="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),dD="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),dP=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],fw=(et,er)=>{let ea=Y(er,er=>Ee(et,er));return ae(ea)},gw=et=>{let er=fw(et,dR),ea=et.forced_root_block;return!1!==ea&&""!==ea||er.push("forced_root_block (false only)"),ae(er)},pw=et=>fw(et,dI),hw=(et,er)=>{let ea=tQ.makeMap(et.plugins," "),ei=Y(er,et=>Ee(ea,et));return ae(ei)},bw=et=>hw(et,dD),vw=et=>hw(et,dP.map(et=>et.name)),yw=et=>J(dP,er=>er.name===et).fold(()=>et,er=>er.replacedWith?`${et}, replaced by ${er.replacedWith}`:et),dL=za.DOM,ww=et=>I.from(et).each(et=>et.destroy()),dM=(()=>{let et={};return{add:(er,ea)=>{et[er]=ea},get:er=>et[er]?et[er]:{icons:{}},has:er=>Ee(et,er)}})(),dV=Ya.ModelManager,_w=(et,er)=>er.dom[et],kw=(et,er)=>parseInt(co(er,et),10),dF=T(_w,"clientWidth"),dU=T(_w,"clientHeight"),dH=T(kw,"margin-top"),dz=T(kw,"margin-left"),Tw=et=>{let er=[],n=()=>{let er=et.theme;return er&&er.getNotificationManagerImpl?er.getNotificationManagerImpl():(()=>{let e=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},o=()=>I.from(er[0]),r=()=>{V(er,et=>{et.reposition()})},s=et=>{Z(er,er=>er===et).each(et=>{er.splice(et,1)})},a=(ea,ei=!0)=>{var es;return et.removed||!(es=et.inline?et.getBody():et.getContentAreaContainer(),I.from(es).map(pn)).map(Gn).getOr(!1)?{}:(ei&&et.dispatch("BeforeOpenNotification",{notification:ea}),J(er,et=>{var er;return!((er=n().getArgs(et)).type!==ea.type||er.text!==ea.text||er.progressBar||er.timeout||ea.progressBar||ea.timeout)}).getOrThunk(()=>{et.editorManager.setActive(et);let ei=n().open(ea,()=>{s(ei),r(),Ag(et)&&o().fold(()=>et.focus(),et=>ag(pn(et.getEl())))});return er.push(ei),r(),et.dispatch("OpenNotification",{notification:{...ei}}),ei}))},ea=N(er);return et.on("SkinLoaded",()=>{let er=oZ(et);er&&a({text:er,type:"warning",timeout:0},!1),r()}),et.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),et.on("remove",()=>{V(er.slice(),et=>{n().close(et)})}),{open:a,close:()=>{o().each(et=>{n().close(et),s(et),r()})},getNotifications:ea}},dj=Ya.PluginManager,d$=Ya.ThemeManager,Pw=et=>{let er=[],n=()=>{let er=et.theme;return er&&er.getWindowManagerImpl?er.getWindowManagerImpl():(()=>{let e=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}})()},o=(et,er)=>(...ea)=>er?er.apply(et,ea):void 0,r=ea=>{et.dispatch("CloseWindow",{dialog:ea}),0===(er=Y(er,et=>et!==ea)).length&&et.focus()},s=ea=>{et.editorManager.setActive(et),pg(et),et.ui.show();let ei=ea();return er.push(ei),et.dispatch("OpenWindow",{dialog:ei}),ei};return et.on("remove",()=>{V(er,et=>{n().close(et)})}),{open:(et,er)=>s(()=>n().open(et,er,r)),openUrl:et=>s(()=>n().openUrl(et,r)),alert:(et,er,ea)=>{let ei=n();ei.alert(et,o(ea||ei,er))},confirm:(et,er,ea)=>{let ei=n();ei.confirm(et,o(ea||ei,er))},close:()=>{I.from(er[er.length-1]).each(et=>{n().close(et),r(et)})}}},Dw=(et,er)=>{et.notificationManager.open({type:"error",text:er})},Lw=(et,er)=>{et._skinLoaded?Dw(et,er):et.on("SkinLoaded",()=>{Dw(et,er)})},Mw=(et,er,ea)=>{ef(et,er,{message:ea}),console.error(ea)},Iw=(et,er,ea)=>ea?`Failed to load ${et}: ${ea} from url ${er}`:`Failed to load ${et} url: ${er}`,Fw=(et,...er)=>{let ea=window.console;ea&&(ea.error?ea.error(et,...er):ea.log(et,...er))},Uw=et=>"content/"+et+"/content.css",zw=(et,er)=>{let ea=et.editorManager.baseURL+"/skins/content",ei=`content${et.editorManager.suffix}.css`;return q(er,er=>tinymce.Resource.has(Uw(er))?er:/^[a-z0-9\-]+$/i.test(er)&&!et.inline?`${ea}/${er}/${ei}`:et.documentBaseURI.toAbsolute(er))},jw=(et,er)=>{let ea={};return{findAll:(ei,es=eZ)=>{let ed=Y(ei?e3(ei.getElementsByTagName("img")):[],er=>{let ea=er.src;return!er.hasAttribute("data-mce-bogus")&&!er.hasAttribute("data-mce-placeholder")&&!(!ea||ea===tJ.transparentSrc)&&(He(ea,"blob:")?!et.isUploaded(ea)&&es(er):!!He(ea,"data:")&&es(er))}),ec=q(ed,et=>{let ei=et.src;if(Ee(ea,ei))return ea[ei].then(er=>e$(er)?er:{image:et,blobInfo:er.blobInfo});{let es=((et,er)=>{let n=()=>Promise.reject("Invalid data URI");if(He(er,"blob:")){let ea=et.getByUri(er);return C(ea)?Promise.resolve(ea):(He(er,"blob:")?fetch(er).then(et=>et.ok?et.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${er} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})):He(er,"data:")?new Promise((et,ea)=>{Kv(er).bind(({type:et,data:er,base64Encoded:ea})=>Yv(et,er,ea)).fold(()=>ea("Invalid data URI"),et)}):Promise.reject("Unknown URI format")).then(er=>Gv(er).then(ea=>Qv(ea,!1,ea=>I.some(Jv(et,er,ea))).getOrThunk(n)))}return He(er,"data:")?Zv(et,er).fold(n,et=>Promise.resolve(et)):Promise.reject("Unknown image data format")})(er,ei).then(er=>(delete ea[ei],{image:et,blobInfo:er})).catch(et=>(delete ea[ei],et));return ea[ei]=es,es}});return Promise.all(ec)}}},Hw=()=>{let et={},t=(et,er)=>({status:et,resultUri:er}),n=er=>er in et;return{hasBlobUri:n,getResultUri:er=>{let ea=et[er];return ea?ea.resultUri:null},isPending:er=>!!n(er)&&1===et[er].status,isUploaded:er=>!!n(er)&&2===et[er].status,markPending:er=>{et[er]=t(1,null)},markUploaded:(er,ea)=>{et[er]=t(2,ea)},removeFailed:er=>{delete et[er]},destroy:()=>{et={}}}},dq=0,qw=(et,er)=>{let ea={},o=(et,ea)=>new Promise((ei,es)=>{let ed=new XMLHttpRequest;ed.open("POST",er.url),ed.withCredentials=er.credentials,ed.upload.onprogress=et=>{ea(et.loaded/et.total*100)},ed.onerror=()=>{es("Image upload failed due to a XHR Transport error. Code: "+ed.status)},ed.onload=()=>{var et,ea;if(ed.status<200||ed.status>=300)return void es("HTTP Error: "+ed.status);let ec=JSON.parse(ed.responseText);ec&&e$(ec.location)?ei((et=er.basePath,ea=ec.location,et?et.replace(/\/$/,"")+"/"+ea.replace(/^\//,""):ea)):es("Invalid JSON: "+ed.responseText)};let ec=new FormData;ec.append("file",et.blob(),et.filename()),ed.send(ec)}),ei=eJ(er.handler)?er.handler:o,s=(et,er)=>({url:er,blobInfo:et,status:!0}),a=(et,er)=>({url:"",blobInfo:et,status:!1,error:er}),i=(et,er)=>{tQ.each(ea[et],et=>{et(er)}),delete ea[et]};return{upload:(es,ed)=>{var ec;return er.url||ei!==o?(ec=es,ec=tQ.grep(ec,er=>!et.isUploaded(er.blobUri())),Promise.all(tQ.map(ec,er=>et.isPending(er.blobUri())?(et=>{let er=et.blobUri();return new Promise(et=>{ea[er]=ea[er]||[],ea[er].push(et)})})(er):(et.markPending(er.blobUri()),new Promise(ea=>{let es,ec;try{let c=()=>{es&&(es.close(),ec=_)},f=ei=>{c(),et.removeFailed(er.blobUri()),i(er.blobUri(),a(er,ei)),ea(a(er,ei))};ec=et=>{et<0||et>100||I.from(es).orThunk(()=>I.from(ed).map(P)).each(er=>{es=er,er.progressBar.value(et)})},ei(er,ec).then(ei=>{c(),et.markUploaded(er.blobUri(),ei),i(er.blobUri(),s(er,ei)),ea(s(er,ei))},et=>{f(e$(et)?{message:et}:et)})}catch(et){ea(a(er,et))}}))))):new Promise(et=>{et([])})}}},Vw=et=>()=>et.notificationManager.open({text:et.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Ww=(et,er)=>qw(er,{url:oD(et),basePath:oP(et),credentials:oL(et),handler:oM(et)}),Kw=et=>{let er,ea;let ei=(()=>{let et=[],t=et=>{if(!et.blob||!et.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let er=et.id||"blobid"+dq+++(()=>{let e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),ea=et.name||er,ei=et.blob;return{id:N(er),name:N(ea),filename:N(et.filename||ea+"."+(({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[ei.type.toLowerCase()]||"dat")),blob:N(ei),base64:N(et.base64),blobUri:N(et.blobUri||URL.createObjectURL(ei)),uri:N(et.uri)}},n=er=>J(et,er).getOrUndefined(),o=et=>n(er=>er.id()===et);return{create:(et,er,ea,ei,es)=>{if(e$(et))return t({id:et,name:ei,filename:es,blob:er,base64:ea});if(eq(et))return t(et);throw Error("Unknown input type")},add:er=>{o(er.id())||et.push(er)},get:o,getByUri:et=>n(er=>er.blobUri()===et),getByData:(et,er)=>n(ea=>ea.base64()===et&&ea.blob().type===er),findFirst:n,removeByUri:er=>{et=Y(et,et=>et.blobUri()!==er||(URL.revokeObjectURL(et.blobUri()),!1))},destroy:()=>{V(et,et=>{URL.revokeObjectURL(et.blobUri())}),et=[]}}})(),es=Hw(),ed=[],a=er=>ea=>et.selection?er(ea):[],i=(et,er,ea)=>{let ei=0;do -1!==(ei=et.indexOf(er,ei))&&(et=et.substring(0,ei)+ea+et.substr(ei+er.length),ei+=ea.length-er.length+1);while(-1!==ei);return et},l=(et,er,ea)=>{let ei=`src="${ea}"${ea===tJ.transparentSrc?' data-mce-placeholder="1"':""}`;return et=i(et,`src="${er}"`,ei),i(et,'data-mce-src="'+er+'"','data-mce-src="'+ea+'"')},d=(er,ea)=>{V(et.undoManager.data,et=>{"fragmented"===et.type?et.fragments=q(et.fragments,et=>l(et,er,ea)):et.content=l(et.content,er,ea)})},c=()=>(er||(er=Ww(et,es)),p().then(a(ea=>{let es=q(ea,et=>et.blobInfo);return er.upload(es,Vw(et)).then(a(er=>{let es=[],ed=!1,ec=q(er,(er,ec)=>{var ev;let{blobInfo:eC,image:eI}=ea[ec],eD=!1;return er.status&&oI(et)?(er.url&&!je(eI.src,er.url)&&(ed=!0),ei.removeByUri(eI.src),XC(et)||((er,ea)=>{let ei=et.convertURL(ea,"src");d(er.src,ea),Zt(pn(er),{src:oS(et)?ea+(-1===ea.indexOf("?")?"?":"&")+(new Date).getTime():ea,"data-mce-src":ei})})(eI,er.url)):er.error&&(er.error.remove&&(d(eI.src,tJ.transparentSrc),es.push(eI),eD=!0),ev=er.error.message,Lw(et,nV.translate(["Failed to upload image: {0}",ev]))),{element:eI,status:er.status,uploadUri:er.url,blobInfo:eC,removed:eD}});return es.length>0&&!XC(et)?et.undoManager.transact(()=>{V(_o(es),er=>{let ea=An(er);xo(er),ea.each(er=>{et.dom.isEmpty(er.dom)&&C(et.schema.getTextBlockElements()[Ht(er)])&&vo(er,hn('<br data-mce-bogus="1" />'))}),ei.removeByUri(er.dom.src)})}):ed&&et.undoManager.dispatchChange(),ec}))}))),u=()=>oy(et)?c():Promise.resolve([]),g=et=>ne(ed,er=>er(et)),p=()=>(ea||(ea=jw(es,ei)),ea.findAll(et.getBody(),g).then(a(er=>{let ea=Y(er,er=>e$(er)?(Lw(et,er),!1):"blob"!==er.uriType);return XC(et)||V(ea,et=>{d(et.image.src,et.blobInfo.blobUri()),et.image.src=et.blobInfo.blobUri(),et.image.removeAttribute("data-mce-src")}),ea}))),h=er=>er.replace(/src="(blob:[^"]+)"/g,(er,ea)=>{let ed=es.getResultUri(ea);if(ed)return'src="'+ed+'"';let ec=ei.getByUri(ea);return ec||(ec=X(et.editorManager.get(),(et,er)=>et||er.editorUpload&&er.editorUpload.blobCache.getByUri(ea),void 0)),ec?'src="data:'+ec.blob().type+";base64,"+ec.base64()+'"':er});return et.on("SetContent",()=>{oy(et)?u():p()}),et.on("RawSaveContent",et=>{et.content=h(et.content)}),et.on("GetContent",et=>{et.source_view||"raw"===et.format||"tree"===et.format||(et.content=h(et.content))}),et.on("PostRender",()=>{et.parser.addNodeFilter("img",et=>{V(et,et=>{let er=et.attr("src");if(!er||ei.getByUri(er))return;let ea=es.getResultUri(er);ea&&et.attr("src",ea)})})}),{blobCache:ei,addFilter:et=>{ed.push(et)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{ei.destroy(),es.destroy(),ea=er=null}}},dW={remove_similar:!0,inherit:!1},dY={selector:"td,th",...dW},dK={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...dY},tablecellverticalalign:{styles:{"vertical-align":"%value"},...dY},tablecellbordercolor:{styles:{borderColor:"%value"},...dY},tablecellclass:{classes:["%value"],...dY},tableclass:{selector:"table",classes:["%value"],...dW},tablecellborderstyle:{styles:{borderStyle:"%value"},...dY},tablecellborderwidth:{styles:{borderWidth:"%value"},...dY}},dX=N(dK),dJ=tQ.each,dG=za.DOM,ex=et=>C(et)&&eq(et),tx=(et,er)=>{let ea=er&&er.schema||ua({}),o=et=>{let er=e$(et)?{name:et,classes:[],attrs:{}}:et,ea=dG.create(er.name);return er.classes.length>0&&dG.addClass(ea,er.classes.join(" ")),dG.setAttribs(ea,er.attrs),ea},r=(et,er,ei)=>{let es;let ed=er[0],ec=ex(ed)?ed.name:void 0,ev=((et,er)=>{let ei=ea.getElementRule(et.nodeName.toLowerCase()),es=null==ei?void 0:ei.parentsRequired;return!(!es||!es.length)&&(er&&H(es,er)?er:es[0])})(et,ec);if(ev)ec===ev?(es=ed,er=er.slice(1)):es=ev;else if(ed)es=ed,er=er.slice(1);else if(!ei)return et;let eC=es?o(es):dG.create("div");eC.appendChild(et),ei&&tQ.each(ei,er=>{let ea=o(er);eC.insertBefore(ea,et)});let eI=ex(es)?es.siblings:void 0;return r(eC,er,eI)},ei=dG.create("div");if(et.length>0){let er=et[0],ea=o(er),es=ex(er)?er.siblings:void 0;ei.appendChild(r(ea,et.slice(1),es))}return ei},nx=et=>{let er="div",ea={name:er,classes:[],attrs:{},selector:et=tQ.trim(et)};return"*"!==et&&(er=et.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(et,er,ei,es,ed)=>{switch(er){case"#":ea.attrs.id=ei;break;case".":ea.classes.push(ei);break;case":":-1!==tQ.inArray("checked disabled enabled read-only required".split(" "),ei)&&(ea.attrs[ei]=ei)}if("["===es){let et=ed.match(/([\w\-]+)(?:\=\"([^\"]+))?/);et&&(ea.attrs[et[1]]=et[2])}return""})),ea.name=er||"div",ea},ox=(et,er)=>{var ea;let ei="",es=o6(et);if(""===es)return"";let r=et=>e$(et)?et.replace(/%(\w+)/g,""):"",s=(er,ea)=>dG.getStyle(null!=ea?ea:et.getBody(),er,!0);if(e$(er)){let ea=et.formatter.get(er);if(!ea)return"";er=ea[0]}if("preview"in er){let et=er.preview;if(!1===et)return"";es=et||es}let ed,ec=er.block||er.inline||"span",ev=e$(ea=er.selector)?(ea=(ea=ea.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),tQ.map(ea.split(/(?:>|\s+(?![^\[\]]+\]))/),et=>{let er=tQ.map(et.split(/(?:~\+|~|\+)/),nx),ea=er.pop();return er.length&&(ea.siblings=er),ea}).reverse()):[];ev.length>0?(ev[0].name||(ev[0].name=ec),ec=er.selector,ed=tx(ev,et)):ed=tx([ec],et);let eC=dG.select(ec,ed)[0]||ed.firstChild;dJ(er.styles,(et,er)=>{let ea=r(et);ea&&dG.setStyle(eC,er,ea)}),dJ(er.attributes,(et,er)=>{let ea=r(et);ea&&dG.setAttrib(eC,er,ea)}),dJ(er.classes,et=>{let er=r(et);dG.hasClass(eC,er)||dG.addClass(eC,er)}),et.dispatch("PreviewFormats"),dG.setStyles(ed,{position:"absolute",left:-65535}),et.getBody().appendChild(ed);let eI=s("fontSize"),eD=/px$/.test(eI)?parseInt(eI,10):0;return dJ(es.split(" "),et=>{let er=s(et,eC);if(!("background-color"===et&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(er)&&"#ffffff"===Ca(er=s(et)).toLowerCase()||"color"===et&&"#000000"===Ca(er).toLowerCase())){if("font-size"===et&&/em|%$/.test(er)){if(0===eD)return;er=parseFloat(er)/(/%$/.test(er)?100:1)*eD+"px"}"border"===et&&er&&(ei+="padding:0 2px;"),ei+=et+":"+er+";"}}),et.dispatch("AfterPreviewFormats"),dG.remove(ed),ei},rx=et=>{let er=(et=>{let er={},n=(et,ea)=>{et&&(e$(et)?(eW(ea)||(ea=[ea]),V(ea,et=>{eX(et.deep)&&(et.deep=!Sm(et)),eX(et.split)&&(et.split=!Sm(et)||Nm(et)),eX(et.remove)&&Sm(et)&&!Nm(et)&&(et.remove="none"),Sm(et)&&Nm(et)&&(et.mixed=!0,et.block_expand=!0),e$(et.classes)&&(et.classes=et.classes.split(/\s+/))}),er[et]=ea):ge(et,(et,er)=>{n(er,et)}))};return n((et=>{let er=et.dom,ea=et.schema.type,ei={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:et=>{er.setStyle(et,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:et=>{er.setStyle(et,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let et={inline:"span",styles:{textDecoration:"line-through"},exact:!0},er={inline:"strike",remove:"all",preserve_attributes:["class","style"]},ei={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==ea?[ei,et,er]:[et,ei,er]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(et,er,ea)=>t4(et)&&et.hasAttribute("href"),onformat:(et,ea,ei)=>{tQ.each(ei,(ea,ei)=>{er.setAttrib(et,ei,ea)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":et=>{var er;return null!==(er=null==et?void 0:et.customValue)&&void 0!==er?er:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return tQ.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),et=>{ei[et]={block:et,remove:"all"}}),ei})(et)),n(dX()),n(o5(et)),{get:et=>C(et)?er[et]:er,has:et=>Ee(er,et),register:n,unregister:et=>(et&&er[et]&&delete er[et],er)}})(et),ea=$a({});return(et=>{et.addShortcut("meta+b","","Bold"),et.addShortcut("meta+i","","Italic"),et.addShortcut("meta+u","","Underline");for(let er=1;er<=6;er++)et.addShortcut("access+"+er,"",["FormatBlock",!1,"h"+er]);et.addShortcut("access+7","",["FormatBlock",!1,"p"]),et.addShortcut("access+8","",["FormatBlock",!1,"div"]),et.addShortcut("access+9","",["FormatBlock",!1,"address"])})(et),(et=>{et.on("mouseup keydown",er=>{var ea;((et,er,ea)=>{let ei=et.selection,es=et.getBody();Kb(et,null,ea),(8===er||46===er)&&ei.isCollapsed()&&"\uFEFF"===ei.getStart().innerHTML&&Kb(et,Lu(es,ei.getStart()),!0),37!==er&&39!==er||Kb(et,Lu(es,ei.getStart()),!0)})(et,er.keyCode,rt(ea=et.selection.getRng().endContainer)&&$e(ea.data,"\xa0"))})})(et),XC(et)||(ea.set({}),et.on("NodeChange",er=>{Hv(et,er.element,ea.get())}),et.on("FormatApply FormatRemove",er=>{let ei=I.from(er.node).map(et=>dm(et)?et:et.startContainer).bind(et=>t4(et)?I.some(et):I.from(et.parentElement)).getOrThunk(()=>Uv(et));Hv(et,ei,ea.get())})),{get:er.get,has:er.has,register:er.register,unregister:er.unregister,apply:(er,ea,ei)=>{((et,er,ea,ei)=>{JC(et).formatter.apply(er,ea,ei)})(et,er,ea,ei)},remove:(er,ea,ei,es)=>{((et,er,ea,ei,es)=>{JC(et).formatter.remove(er,ea,ei,es)})(et,er,ea,ei,es)},toggle:(er,ea,ei)=>{((et,er,ea,ei)=>{JC(et).formatter.toggle(er,ea,ei)})(et,er,ea,ei)},match:(er,ea,ei,es)=>JC(et).formatter.match(er,ea,ei,es),closest:er=>JC(et).formatter.closest(er),matchAll:(er,ea)=>JC(et).formatter.matchAll(er,ea),matchNode:(er,ea,ei,es)=>JC(et).formatter.matchNode(er,ea,ei,es),canApply:er=>JC(et).formatter.canApply(er),formatChanged:(er,ei,es,ed)=>JC(et).formatter.formatChanged(ea,er,ei,es,ed),getCssText:T(ox,et)}},sx=et=>{switch(et.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},ax=et=>{let er=Xa(),ea=$a(0),ei=$a(0),es={data:[],typing:!1,beforeChange:()=>{((et,er,ea)=>{JC(et).undoManager.beforeChange(er,ea)})(et,ea,er)},add:(ed,ec)=>JC(et).undoManager.add(es,ei,ea,er,ed,ec),dispatchChange:()=>{et.setDirty(!0);let er=jC(et);er.bookmark=n0(et.selection),et.dispatch("change",{level:er,lastLevel:ie(es.data,ei.get()).getOrUndefined()})},undo:()=>JC(et).undoManager.undo(es,ea,ei),redo:()=>{var er;return er=es.data,JC(et).undoManager.redo(ei,er)},clear:()=>{((et,er,ea)=>{JC(et).undoManager.clear(er,ea)})(et,es,ei)},reset:()=>{((et,er)=>{JC(et).undoManager.reset(er)})(et,es)},hasUndo:()=>JC(et).undoManager.hasUndo(es,ei),hasRedo:()=>JC(et).undoManager.hasRedo(es,ei),transact:er=>JC(et).undoManager.transact(es,ea,er),ignore:er=>{((et,er,ea)=>{JC(et).undoManager.ignore(er,ea)})(et,ea,er)},extra:(er,ea)=>{((et,er,ea,ei,es)=>{JC(et).undoManager.extra(er,ea,ei,es)})(et,es,ei,er,ea)}};return XC(et)||((et,er,ea)=>{let ei=$a(!1),r=et=>{KC(er,!1,ea),er.add({},et)};et.on("init",()=>{er.add()}),et.on("BeforeExecCommand",et=>{let ei=et.command;sx(ei)||(YC(er,ea),er.beforeChange())}),et.on("ExecCommand",et=>{let er=et.command;sx(er)||r(et)}),et.on("ObjectResizeStart cut",()=>{er.beforeChange()}),et.on("SaveContent ObjectResized blur",r),et.on("dragend",r),et.on("keyup",ea=>{let es=ea.keyCode;if(ea.isDefaultPrevented())return;let ed=tJ.os.isMacOS()&&"Meta"===ea.key;(es>=33&&es<=36||es>=37&&es<=40||45===es||ea.ctrlKey||ed)&&(r(),et.nodeChanged()),46!==es&&8!==es||et.nodeChanged(),ei.get()&&er.typing&&!VC(jC(et),er.data[0])&&(et.isDirty()||et.setDirty(!0),et.dispatch("TypingUndo"),ei.set(!1),et.nodeChanged())}),et.on("keydown",et=>{let es=et.keyCode;if(et.isDefaultPrevented())return;if(es>=33&&es<=36||es>=37&&es<=40||45===es)return void(er.typing&&r(et));let ed=et.ctrlKey&&!et.altKey||et.metaKey;if((es<16||es>20)&&224!==es&&91!==es&&!er.typing&&!ed)return er.beforeChange(),KC(er,!0,ea),er.add({},et),void ei.set(!0);(tJ.os.isMacOS()?et.metaKey:et.ctrlKey&&!et.altKey)&&er.beforeChange()}),et.on("mousedown",et=>{er.typing&&r(et)}),et.on("input",et=>{et.inputType&&("insertReplacementText"===et.inputType||"insertText"===et.inputType&&null===et.data||"insertFromPaste"===et.inputType||"insertFromDrop"===et.inputType)&&r(et)}),et.on("AddUndo Undo Redo ClearUndos",er=>{er.isDefaultPrevented()||et.nodeChanged()})})(et,es,ea),et.addShortcut("meta+z","","Undo"),et.addShortcut("meta+y,meta+shift+z","","Redo"),es},dQ=[9,27,lH.HOME,lH.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,lH.DOWN,lH.UP,lH.LEFT,lH.RIGHT].concat(tJ.browser.isFirefox()?[224]:[]),dZ="data-mce-placeholder",dx=et=>"keydown"===et.type||"keyup"===et.type,cx=et=>{let er=et.keyCode;return er===lH.BACKSPACE||er===lH.DELETE},ux=(et,er)=>({from:et,to:er}),mx=(et,er)=>{let ea=pn(et),ei=pn(er.container());return Ah(ea,ei).map(et=>({block:et,position:er}))},fx=(et,er)=>Jn(er,et=>rH(et)||ry(et.dom),er=>_n(er,et)).filter(t1).getOr(et),gx=(et,er)=>{let ea=((et,er)=>{let ea=Mn(et);return Z(ea,et=>er.isBlock(Ht(et))).fold(N(ea),et=>ea.slice(0,et))})(et,er);return V(ea,xo),ea},px=(et,er)=>{let ea=Bp(er,et);return J(ea.reverse(),et=>gs(et)).each(xo)},hx=(et,er,ea,ei,es)=>{if(gs(ea))return Or(ea),lM(ea.dom);0===Y(Dn(es),et=>!gs(et)).length&&gs(er)&&po(es,bn("br"));let ed=lL(ea.dom,Vi.before(es.dom));return V(gx(er,ei),et=>{po(es,et)}),px(et,er),ed},bx=(et,er,ea,ei)=>{if(gs(ea)){if(gs(er)){let et=G((et=>{let t=(et,er)=>Fn(et).fold(()=>er,et=>ei.isInline(Ht(et))?t(et,er.concat(fi(et))):er);return t(et,[])})(ea),(et,er)=>(yo(et,er),er),Tr());wo(er),vo(er,et)}return xo(ea),lM(er.dom)}let es=lV(ea.dom);return V(gx(er,ei),et=>{vo(ea,et)}),px(et,er),es},vx=(et,er)=>{Ru(et,er.dom).bind(et=>I.from(et.getNode())).map(pn).filter(Er).each(xo)},yx=(et,er,ea,ei)=>(vx(!0,er),vx(!1,ea),(kn(ea,er)?((et,er)=>{let ea=Bp(er,et);return I.from(ea[ea.length-1])})(ea,er):I.none()).fold(T(bx,et,er,ea,ei),T(hx,et,er,ea,ei))),Cx=(et,er,ea,ei,es)=>er?yx(et,ei,ea,es):yx(et,ea,ei,es),wx=(et,er)=>{var ea,ei;let es=pn(et.getBody()),ed=(ea=es.dom,(ei=et.selection.getRng()).collapsed?((et,er,ea)=>{let ei=mx(et,Vi.fromRangeStart(ea)),es=ei.bind(ea=>ku(er,et,ea.position).bind(ea=>mx(et,ea).map(ea=>rc(ea.position.getNode())&&!gs(ea.block)?Ru(!1,ea.block.dom).bind(ei=>ei.isEqual(ea.position)?ku(er,et,ei).bind(er=>mx(et,er)):I.some(ea)).getOr(ea):ea)));return Mt(ei,es,ux).filter(er=>!_n(er.from.block,er.to.block)&&((et,er)=>{let ea=pn(et);return _n(fx(ea,er.from.block),fx(ea,er.to.block))})(et,er)&&!1===rC(er.from.block.dom)&&!1===rC(er.to.block.dom)&&(et=>{let t=et=>rM(et)||Ns(et.dom);return t(et.from.block)&&t(et.to.block)})(er))})(ea,er,ei):I.none()).map(ea=>()=>{Cx(es,er,ea.from.block,ea.to.block,et.schema).each(er=>{et.selection.setRng(er.toRange())})});return ed},xx=(et,er)=>{let ea=pn(er),ei=T(_n,et);return Qn(ea,rH,ei).isSome()},Ex=et=>{let er=pn(et.getBody());return((et,er)=>{let ea=lL(et.dom,Vi.fromRangeStart(er)).isNone(),ei=lP(et.dom,Vi.fromRangeEnd(er)).isNone();return!(xx(et,er.startContainer)||xx(et,er.endContainer))&&ea&&ei})(er,et.selection.getRng())?I.some(()=>{et.setContent(""),et.selection.setCursorLocation()}):((et,er,ea)=>{let ei=er.getRng();return Mt(Ah(et,pn(ei.startContainer)),Ah(et,pn(ei.endContainer)),(es,ed)=>_n(es,ed)?I.none():I.some(()=>{ei.deleteContents(),Cx(et,!0,es,ed,ea).each(et=>{er.setRng(et.toRange())})})).getOr(I.none())})(er,et.selection,et.schema)},_x=(et,er)=>et.selection.isCollapsed()?I.none():Ex(et),kx=(et,er,ea,ei,es)=>I.from(er._selectionOverrides.showCaret(et,ea,ei,es)),Sx=(et,er)=>et.dispatch("BeforeObjectSelected",{target:er}).isDefaultPrevented()?I.none():I.some((et=>{let er=et.ownerDocument.createRange();return er.selectNode(et),er})(er)),Nx=(et,er,ea)=>er.collapsed?((et,er,ea)=>{let ei=ru(1,et.getBody(),er),es=Vi.fromRangeStart(ei),ed=es.getNode();if(Lc(ed))return kx(1,et,ed,!es.isAtEnd(),!1);let ec=es.getNode(!0);if(Lc(ec))return kx(1,et,ec,!1,!1);let ev=lb(et.dom.getRoot(),es.getNode());return Lc(ev)?kx(1,et,ev,!1,ea):I.none()})(et,er,ea).getOr(er):er,Rx=et=>iP(et)||ik(et),Ax=et=>iL(et)||iI(et),Tx=(et,er,ea,ei,es,ed)=>{var ec;kx(ei,et,ed.getNode(!es),es,!0).each(ea=>{if(er.collapsed){let et=er.cloneRange();es?et.setEnd(ea.startContainer,ea.startOffset):et.setStart(ea.endContainer,ea.endOffset),et.deleteContents()}else er.deleteContents();et.selection.setRng(ea)}),ec=et.dom,rt(ea)&&0===ea.data.length&&ec.remove(ea)},Ox=(et,er)=>((et,er)=>{let ea=et.selection.getRng();if(!rt(ea.commonAncestorContainer))return I.none();let ei=er?eP.Forwards:eP.Backwards,es=wu(et.getBody()),ed=T(lu,er?es.next:es.prev),ec=er?Rx:Ax,ev=au(ei,et.getBody(),ea),eC=ed(ev),eI=eC?Eh(er,eC):eC;if(!eI||!du(ev,eI))return I.none();if(ec(eI))return I.some(()=>Tx(et,ea,ev.getNode(),ei,er,eI));let eD=ed(eI);return eD&&ec(eD)&&du(eI,eD)?I.some(()=>Tx(et,ea,ev.getNode(),ei,er,eD)):I.none()})(et,er),Bx=(et,er)=>{let ea=et.getBody();return er?lM(ea).filter(iP):lV(ea).filter(iL)},Px=et=>{let er=et.selection.getRng();return!er.collapsed&&(Bx(et,!0).exists(et=>et.isEqual(Vi.fromRangeStart(er)))||Bx(et,!1).exists(et=>et.isEqual(Vi.fromRangeEnd(er))))},d0=hl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Lx=(et,er,ea,ei)=>ku(er,et,ea).bind(es=>{var ed;return C(ed=es.getNode())&&(rH(pn(ed))||rF(pn(ed)))||((et,er,ea,ei,es)=>{let s=er=>es.isInline(er.nodeName.toLowerCase())&&!Qc(ea,ei,et);return su(!er,ea).fold(()=>su(er,ei).fold(eQ,s),s)})(et,er,ea,es,ei)?I.none():er&&rC(es.getNode())||!er&&rC(es.getNode(!0))?((et,er,ea,ei)=>{let es=ei.getNode(!er);return Ah(pn(et),pn(ea.getNode())).map(et=>gs(et)?d0.remove(et.dom):d0.moveToElement(es)).orThunk(()=>I.some(d0.moveToElement(es)))})(et,er,ea,es):er&&iL(ea)||!er&&iP(ea)?I.some(d0.moveToPosition(es)):I.none()}),Mx=(et,er)=>I.from(lb(et.getBody(),er)),Ix=(et,er)=>{let ea=et.selection.getNode();return Mx(et,ea).filter(rC).fold(()=>((et,er,ea,ei)=>{var es;let ed=ru(er?1:-1,et,ea),ec=Vi.fromRangeStart(ed),ev=pn(et);return!er&&iL(ec)?I.some(d0.remove(ec.getNode(!0))):er&&iP(ec)?I.some(d0.remove(ec.getNode())):!er&&iP(ec)&&qp(ev,ec,ei)?iH(ev,ec,ei).map(et=>d0.remove(et.getNode())):er&&iL(ec)&&$p(ev,ec,ei)?iz(ev,ec,ei).map(et=>d0.remove(et.getNode())):((et,er)=>{let ea=er.getNode(!et),ei=et?"after":"before";return t4(ea)&&ea.getAttribute("data-mce-caret")===ei})(er,ec)?(y(es=ec.getNode(!er))?I.none():er&&rC(es.nextSibling)?I.some(d0.moveToElement(es.nextSibling)):!er&&rC(es.previousSibling)?I.some(d0.moveToElement(es.previousSibling)):I.none()).orThunk(()=>Lx(et,er,ec,ei)):Lx(et,er,ec,ei).bind(er=>er.fold(et=>I.some(d0.remove(et)),et=>I.some(d0.moveToElement(et)),er=>Qc(ec,er,et)?I.none():I.some(d0.moveToPosition(er))))})(et.getBody(),er,et.selection.getRng(),et.schema).map(ea=>()=>ea.fold(ea=>(et._selectionOverrides.hideFakeCaret(),vh(et,er,pn(ea)),!0),ea=>{let ei=er?Vi.before(ea):Vi.after(ea);return et.selection.setRng(ei.toRange()),!0},er=>(et.selection.setRng(er.toRange()),!0))),()=>I.some(_))},Fx=et=>{let er=et.dom,ea=et.selection,ei=lb(et.getBody(),ea.getNode());if(ry(ei)&&er.isBlock(ei)&&er.isEmpty(ei)){let et=er.create("br",{"data-mce-bogus":"1"});er.setHTML(ei,""),ei.appendChild(et),ea.setRng(Vi.before(et).toRange())}return!0},Ux=(et,er)=>et.selection.isCollapsed()?Ix(et,er):((et,er)=>{let ea=et.selection.getNode();return rC(ea)&&!r_(ea)?Mx(et,ea.parentNode).filter(rC).fold(()=>I.some(()=>{V(Uo(pn(et.getBody()),".mce-offscreen-selection"),xo),vh(et,er,pn(et.selection.getNode())),Th(et)}),()=>I.some(_)):Px(et)?I.some(()=>{Ph(et,et.selection.getRng(),pn(et.getBody()))}):I.none()})(et,er),zx=(et,er)=>et.selection.isCollapsed()?((et,er)=>{let ea=Vi.fromRangeStart(et.selection.getRng());return ku(er,et.getBody(),ea).filter(et=>er?iy(et):ix(et)).bind(et=>Jc(er?0:-1,et)).map(er=>()=>et.selection.select(er))})(et,er):I.none(),Hx=et=>rt(et)&&"\uFEFF"===et.data[0],$x=et=>rt(et)&&"\uFEFF"===et.data[et.data.length-1],qx=et=>{var er;return(null!==(er=et.ownerDocument)&&void 0!==er?er:document).createTextNode("\uFEFF")},Vx=(et,er)=>et?(et=>{var er;if(rt(et.previousSibling))return $x(et.previousSibling)||et.previousSibling.appendData("\uFEFF"),et.previousSibling;if(rt(et))return Hx(et)||et.insertData(0,"\uFEFF"),et;{let ea=qx(et);return null===(er=et.parentNode)||void 0===er||er.insertBefore(ea,et),ea}})(er):(et=>{var er,ea;if(rt(et.nextSibling))return Hx(et.nextSibling)||et.nextSibling.insertData(0,"\uFEFF"),et.nextSibling;if(rt(et))return $x(et)||et.appendData("\uFEFF"),et;{let ei=qx(et);return et.nextSibling?null===(er=et.parentNode)||void 0===er||er.insertBefore(ei,et.nextSibling):null===(ea=et.parentNode)||void 0===ea||ea.appendChild(ei),ei}})(er),d1=T(Vx,!0),d2=T(Vx,!1),Yx=(et,er)=>rt(et.container())?Vx(er,et.container()):Vx(er,et.getNode()),Gx=(et,er)=>{let ea=er.get();return ea&&et.container()===ea&&Fr(ea)},Xx=(et,er)=>er.fold(er=>{Rc(et.get());let ea=d1(er);return et.set(ea),I.some(Vi(ea,ea.length-1))},er=>lM(er).map(er=>{if(Gx(er,et)){let er=et.get();return Vi(er,1)}{Rc(et.get());let ea=Yx(er,!0);return et.set(ea),Vi(ea,1)}}),er=>lV(er).map(er=>{if(Gx(er,et)){let er=et.get();return Vi(er,er.length-1)}{Rc(et.get());let ea=Yx(er,!1);return et.set(ea),Vi(ea,ea.length-1)}}),er=>{Rc(et.get());let ea=d2(er);return et.set(ea),I.some(Vi(ea,1))}),Qx=(et,er)=>{for(let ea=0;ea<et.length;ea++){let ei=et[ea].apply(null,er);if(ei.isSome())return ei}return I.none()},d3=hl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Zx=(et,er)=>Xc(er,et)||et,eE=(et,er,ea)=>{let ei=i$(ea),es=Zx(er,ei.container());return xh(et,es,ei).fold(()=>lP(es,ei).bind(T(xh,et,es)).map(et=>d3.before(et)),I.none)},tE=(et,er)=>null===Lu(et,er),nE=(et,er,ea)=>xh(et,er,ea).filter(T(tE,er)),oE=(et,er,ea)=>{let ei=iq(ea);return nE(et,er,ei).bind(et=>lL(et,ei).isNone()?I.some(d3.start(et)):I.none())},rE=(et,er,ea)=>{let ei=i$(ea);return nE(et,er,ei).bind(et=>lP(et,ei).isNone()?I.some(d3.end(et)):I.none())},sE=(et,er,ea)=>{let ei=iq(ea),es=Zx(er,ei.container());return xh(et,es,ei).fold(()=>lL(es,ei).bind(T(xh,et,es)).map(et=>d3.after(et)),I.none)},aE=et=>!wh(lE(et)),iE=(et,er,ea)=>Qx([eE,oE,rE,sE],[et,er,ea]).filter(aE),lE=et=>et.fold(R,R,R,R),dE=et=>et.fold(N("before"),N("start"),N("end"),N("after")),cE=et=>et.fold(d3.before,d3.before,d3.after,d3.after),uE=et=>et.fold(d3.start,d3.start,d3.end,d3.end),mE=(et,er,ea,ei,es,ed)=>Mt(xh(er,ea,ei),xh(er,ea,es),(er,ei)=>er!==ei&&((et,er,ea)=>{let ei=Xc(er,et),es=Xc(ea,et);return C(ei)&&ei===es})(ea,er,ei)?d3.after(et?er:ei):ed).getOr(ed),fE=(et,er)=>et.fold(eZ,et=>!(dE(et)===dE(er)&&lE(et)===lE(er))),gE=(et,er)=>et?er.fold(k(I.some,d3.start),I.none,k(I.some,d3.after),I.none):er.fold(I.none,k(I.some,d3.before),I.none,k(I.some,d3.end)),pE=(et,er,ea)=>{let ei=et?1:-1;return er.setRng(Vi(ea.container(),ea.offset()+ei).toRange()),er.getSel().modify("move",et?"forward":"backward","word"),!0};(ed=eM||(eM={}))[ed.Br=0]="Br",ed[ed.Block=1]="Block",ed[ed.Wrap=2]="Wrap",ed[ed.Eol=3]="Eol";let bE=(et,er)=>et===eP.Backwards?oe(er):er,vE=(et,er,ea)=>et===eP.Forwards?er.next(ea):er.prev(ea),yE=(et,er,ea,ei)=>rc(ei.getNode(er===eP.Forwards))?eM.Br:!1===Qc(ea,ei)?eM.Block:eM.Wrap,CE=(et,er,ea,ei)=>{let es=wu(ea),ed=ei,ec=[];for(;ed;){let ea=vE(er,es,ed);if(!ea)break;if(rc(ea.getNode(!1)))return er===eP.Forwards?{positions:bE(er,ec).concat([ea]),breakType:eM.Br,breakAt:I.some(ea)}:{positions:bE(er,ec),breakType:eM.Br,breakAt:I.some(ea)};if(ea.isVisible()){if(et(ed,ea)){let et=yE(0,er,ed,ea);return{positions:bE(er,ec),breakType:et,breakAt:I.some(ea)}}ec.push(ea),ed=ea}else ed=ea}return{positions:bE(er,ec),breakType:eM.Eol,breakAt:I.none()}},wE=(et,er,ea,ei)=>er(ea,ei).breakAt.map(ei=>{let es=er(ea,ei).positions;return et===eP.Backwards?es.concat(ei):[ei].concat(es)}).getOr([]),xE=(et,er)=>X(et,(et,ea)=>et.fold(()=>I.some(ea),ei=>Mt(le(ei.getClientRects()),le(ea.getClientRects()),(et,es)=>{let ed=Math.abs(er-et.left);return Math.abs(er-es.left)<=ed?ea:ei}).or(et)),I.none()),EE=(et,er)=>le(er.getClientRects()).bind(er=>xE(et,er.left)),d8=T(CE,Vi.isAbove,-1),d5=T(CE,Vi.isBelow,1),d6=T(wE,-1,d8),d9=T(wE,1,d5),RE=(et,er)=>d8(et,er).breakAt.isNone(),AE=(et,er)=>d5(et,er).breakAt.isNone(),TE=(et,er)=>EE(d6(et,er),er),OE=(et,er)=>EE(d9(et,er),er),PE=(et,er)=>Math.abs(et.left-er),DE=(et,er)=>Math.abs(et.right-er),LE=(et,er)=>Oe(et,(et,ea)=>{let ei=Math.min(PE(et,er),DE(et,er)),es=Math.min(PE(ea,er),DE(ea,er));return es===ei&&_e(ea,"node")&&rC(ea.node)||es<ei?ea:et}),ME=et=>{let t=er=>q(er,er=>{let ea=vi(er);return ea.node=et,ea});if(t4(et))return t(et.getClientRects());if(rt(et)){let er=et.ownerDocument.createRange();return er.setStart(et,0),er.setEnd(et,et.data.length),t(er.getClientRects())}return[]},IE=et=>te(et,ME);(ec=eV||(eV={}))[ec.Up=-1]="Up",ec[ec.Down=1]="Down";let UE=(et,er,ea,ei,es,ed)=>{let ec=0,ev=[],l=ei=>{let ed=IE([ei]);-1===et&&(ed=ed.reverse());for(let et=0;et<ed.length;et++){let ei=ed[et];if(!ea(ei,eC)){if(ev.length>0&&er(ei,Pe(ev))&&ec++,ei.line=ec,es(ei))return!0;ev.push(ei)}}return!1},eC=Pe(ed.getClientRects());if(!eC)return ev;let eI=ed.getNode();return eI&&(l(eI),((et,er,ea,ei)=>{let es=ei;for(;es=Gc(es,et,os,er);)if(ea(es))return})(et,ei,l,eI)),ev},d4=T(UE,eV.Up,wi,xi),d7=T(UE,eV.Down,xi,wi),HE=et=>Pe(et.getClientRects()),$E=et=>er=>er.line>et,qE=et=>er=>er.line===et,VE=(et,er)=>{et.selection.setRng(er),sg(et,et.selection.getRng())},WE=(et,er,ea)=>I.some(Nx(et,er,ea)),KE=(et,er,ea,ei,es,ed)=>{let ec=er===eP.Forwards,ev=wu(et.getBody()),eC=T(lu,ec?ev.next:ev.prev),eI=ec?ei:es;if(!ea.collapsed){let ei=_i(ea);if(ed(ei))return kx(er,et,ei,er===eP.Backwards,!1);if(Px(et)){let et=ea.cloneRange();return et.collapse(er===eP.Backwards),I.from(et)}}let eD=au(er,et.getBody(),ea);if(eI(eD))return Sx(et,eD.getNode(!ec));let eL=eC(eD),eM=Wr(ea);if(!eL)return eM?I.some(ea):I.none();if(eI(eL=Eh(ec,eL)))return kx(er,et,eL.getNode(!ec),ec,!1);let eV=eC(eL);return eV&&eI(eV)&&du(eL,eV)?kx(er,et,eV.getNode(!ec),ec,!1):eM?WE(et,eL.toRange(),!1):I.none()},YE=(et,er,ea,ei,es,ed)=>{let ec;let ev=au(er,et.getBody(),ea),eC=Pe(ev.getClientRects()),eI=er===eV.Down,eD=et.getBody();if(!eC)return I.none();if(Px(et)){let et=eI?Vi.fromRangeEnd(ea):Vi.fromRangeStart(ea);return(eI?OE:TE)(eD,et).orThunk(()=>I.from(et)).map(et=>et.toRange())}let eP=(eI?d7:d4)(eD,$E(1),ev),eL=Y(eP,qE(1)),eM=eC.left,eF=LE(eL,eM);if(eF&&ed(eF.node)){let ea=Math.abs(eM-eF.left),ei=Math.abs(eM-eF.right);return kx(er,et,eF.node,ea<ei,!1)}if(ec=ei(ev)?ev.getNode():es(ev)?ev.getNode(!0):_i(ea)){let ea=((et,er,ea,ei)=>{let es,ed,ec,ev;let eC=wu(er),eI=[],eD=0;1===et?(es=eC.next,ed=xi,ec=wi,ev=Vi.after(ei)):(es=eC.prev,ed=wi,ec=xi,ev=Vi.before(ei));let eP=HE(ev);do{if(!ev.isVisible())continue;let et=HE(ev);if(ec(et,eP))continue;eI.length>0&&ed(et,Pe(eI))&&eD++;let er=vi(et);if(er.position=ev,er.line=eD,ea(er))break;eI.push(er)}while(ev=es(ev));return eI})(er,eD,$E(1),ec),ei=LE(Y(ea,qE(1)),eM);if(ei||(ei=Pe(Y(ea,qE(0)))))return WE(et,ei.position.toRange(),!1)}return 0===eL.length?GE(et,eI).filter(eI?es:ei).map(er=>Nx(et,er.toRange(),!1)):I.none()},GE=(et,er)=>{var ea,ei;let es=et.selection.getRng(),ed=er?Vi.fromRangeEnd(es):Vi.fromRangeStart(es),ec=(ea=ed.container(),ei=et.getBody(),Qn(pn(ea),et=>ry(et.dom),et=>et.dom===ei).map(et=>et.dom).getOr(ei));if(er){let et=d5(ec,ed);return de(et.positions)}{let et=d8(ec,ed);return le(et.positions)}},XE=(et,er,ea)=>GE(et,er).filter(ea).exists(er=>(et.selection.setRng(er.toRange()),!0)),QE=(et,er)=>{let ea=et.dom.createRng();ea.setStart(er.container(),er.offset()),ea.setEnd(er.container(),er.offset()),et.selection.setRng(ea)},JE=(et,er)=>{et?er.setAttribute("data-mce-selected","inline-boundary"):er.removeAttribute("data-mce-selected")},ZE=(et,er,ea)=>Xx(er,ea).map(er=>(QE(et,er),ea)),e_=(et,er,ea)=>{let ei=et.getBody(),es=((et,er,ea)=>{let ei=Vi.fromRangeStart(et);if(et.collapsed)return ei;{let es=Vi.fromRangeEnd(et);return ea?lL(er,es).getOr(es):lP(er,ei).getOr(ei)}})(et.selection.getRng(),ei,ea);return((et,er,ea,ei)=>{let es=Eh(et,ei),ed=iE(er,ea,es);return iE(er,ea,es).bind(T(gE,et)).orThunk(()=>((et,er,ea,ei,es)=>{let ed=Eh(et,es);return ku(et,ea,ed).map(T(Eh,et)).fold(()=>ei.map(cE),es=>iE(er,ea,es).map(T(mE,et,er,ea,ed,es)).filter(T(fE,ei))).filter(aE)})(et,er,ea,ed,ei))})(ea,T(Ch,et),ei,es).bind(ea=>ZE(et,er,ea))},t_=(et,er,ea)=>!!o8(et)&&e_(et,er,ea).isSome(),n_=(et,er,ea)=>!!o8(er)&&((et,er)=>{let ea=er.selection.getRng(),ei=et?Vi.fromRangeEnd(ea):Vi.fromRangeStart(ea);return!!eJ(er.selection.getSel().modify)&&(et&&jr(ei)?pE(!0,er.selection,ei):!(et||!Hr(ei))&&pE(!1,er.selection,ei))})(et,er),o_=et=>{let er=$a(null),ea=T(Ch,et);return et.on("NodeChange",ei=>{o8(et)&&(((et,er,ea)=>{let ei=q(Uo(pn(er.getRoot()),'*[data-mce-selected="inline-boundary"]'),et=>et.dom),es=Y(ei,et),ed=Y(ea,et);V(re(es,ed),T(JE,!1)),V(re(ed,es),T(JE,!0))})(ea,et.dom,ei.parents),((et,er)=>{let ea=er.get();if(et.selection.isCollapsed()&&!et.composing&&ea){let ei=Vi.fromRangeStart(et.selection.getRng());!Vi.isTextPosition(ei)||jr(ei)||Hr(ei)||(QE(et,Nc(ea,ei)),er.set(null))}})(et,er),((et,er,ea,ei)=>{if(er.selection.isCollapsed()){let es=Y(ei,et);V(es,ei=>{let es=Vi.fromRangeStart(er.selection.getRng());iE(et,er.getBody(),es).bind(et=>ZE(er,ea,et))})}})(ea,et,er,ei.parents))}),er},ce=T(n_,!0),ct=T(n_,!1),a_=(et,er,ea)=>{if(o8(et)){let ei=GE(et,er).getOrThunk(()=>{let ea=et.selection.getRng();return er?Vi.fromRangeEnd(ea):Vi.fromRangeStart(ea)});return iE(T(Ch,et),et.getBody(),ei).exists(er=>{let ei=cE(er);return Xx(ea,ei).exists(er=>(QE(et,er),!0))})}return!1},i_=(et,er)=>ea=>Xx(er,ea).map(er=>()=>QE(et,er)),l_=(et,er,ea,ei)=>{let es=et.getBody(),ed=T(Ch,et);et.undoManager.ignore(()=>{et.selection.setRng(((et,er)=>{let ea=document.createRange();return ea.setStart(et.container(),et.offset()),ea.setEnd(er.container(),er.offset()),ea})(ea,ei)),Nh(et),iE(ed,es,Vi.fromRangeStart(et.selection.getRng())).map(uE).bind(i_(et,er)).each(D)}),et.nodeChanged()},d_=(et,er,ea)=>{if(et.selection.isCollapsed()&&o8(et)){let ei=Vi.fromRangeStart(et.selection.getRng());return((et,er,ea,ei)=>{var es;let ed=(es=et.getBody(),Xc(ei.container(),es)||es),ec=T(Ch,et),ev=iE(ec,ed,ei);return ev.bind(et=>ea?et.fold(N(I.some(uE(et))),I.none,N(I.some(cE(et))),I.none):et.fold(I.none,N(I.some(cE(et))),I.none,N(I.some(uE(et))))).map(i_(et,er)).getOrThunk(()=>{let es=Su(ea,ed,ei),eC=es.bind(et=>iE(ec,ed,et));return Mt(ev,eC,()=>xh(ec,ed,ei).bind(er=>Mt(lM(er),lV(er),(et,ea)=>{let ei=Eh(!0,et),es=Eh(!1,ea);return lP(er,ei).forall(et=>et.isEqual(es))}).getOr(!0)?I.some(()=>{vh(et,ea,pn(er))}):I.none())).getOrThunk(()=>eC.bind(()=>es.map(es=>()=>{ea?l_(et,er,ei,es):l_(et,er,es,ei)})))})})(et,er,ea,ei)}return I.none()},c_=(et,er)=>{let ea=pn(et.getBody()),ei=pn(et.selection.getStart()),es=Bp(ei,ea);return Z(es,er).fold(N(es),et=>es.slice(0,et))},u_=et=>1===zn(et),m_=(et,er)=>{let ea=T(Zb,et);return te(er,et=>ea(et)?[et.dom]:[])},f_=et=>{let er=c_(et,er=>et.schema.isBlock(Ht(er)));return m_(et,er)},g_=(et,er)=>{let ea=Y(c_(et,er=>et.schema.isBlock(Ht(er))||zn(er)>1),u_);return de(ea).bind(ei=>{let es=Vi.fromRangeStart(et.selection.getRng());return Oh(er,es,ei.dom)&&!Tm(ei)?I.some(()=>((et,er,ea,ei)=>{let es=m_(er,ei);if(0===es.length)vh(er,et,ea);else{let et=Jb(ea.dom,es);er.selection.setRng(et.toRange())}})(er,et,ei,ea)):I.none()})},p_=(et,er)=>{let ea=et.selection.getStart(),ei=((et,er)=>{let ea=er.parentElement;return rc(er)&&!eY(ea)&&et.dom.isEmpty(ea)})(et,ea)||Tm(pn(ea))?Jb(ea,er):((et,er)=>{let{caretContainer:ea,caretPosition:ei}=Qb(er);return et.insertNode(ea.dom),ei})(et.selection.getRng(),er);et.selection.setRng(ei.toRange())},h_=et=>rt(et.startContainer),b_=et=>{let er=et.selection.getRng();return 0===er.startOffset&&h_(er)&&((et,er)=>{let ea=er.startContainer.parentElement;return!eY(ea)&&Zb(et,pn(ea))})(et,er)&&((et=>{let er=et.startContainer.parentNode,ea=et.endContainer.parentNode;return!eY(er)&&!eY(ea)&&er.isEqualNode(ea)})(er)&&(et=>{let er=et.endContainer;return et.endOffset===(rt(er)?er.length:er.childNodes.length)})(er)||!er.endContainer.isEqualNode(er.commonAncestorContainer))},v_=(et,er)=>et.selection.isCollapsed()?g_(et,er):(et=>{if(b_(et)){let er=f_(et);return I.some(()=>{Nh(et),((et,er)=>{let ea=re(er,f_(et));ea.length>0&&p_(et,ea)})(et,er)})}return I.none()})(et),y_=(et,er)=>Qn(et,et=>Du(et.dom),et=>er.isBlock(Ht(et))).isSome(),C_=et=>((et=>{let er=et.selection.getRng();return er.collapsed&&(h_(er)||et.dom.isEmpty(er.startContainer))&&!y_(pn(et.selection.getStart()),et.schema)})(et)&&p_(et,[]),!0),w_=(et,er,ea)=>C(ea)?I.some(()=>{et._selectionOverrides.hideFakeCaret(),vh(et,er,pn(ea))}):I.none(),x_=(et,er)=>et.selection.isCollapsed()?((et,er)=>{let ea=er?ik:iI,ei=er?eP.Forwards:eP.Backwards,es=au(ei,et.getBody(),et.selection.getRng());return ea(es)?w_(et,er,es.getNode(!er)):I.from(Eh(er,es)).filter(et=>ea(et)&&du(es,et)).bind(ea=>w_(et,er,ea.getNode(!er)))})(et,er):((et,er)=>{let ea=et.selection.getNode();return rI(ea)?w_(et,er,ea):I.none()})(et,er),E_=et=>Xe(null!=et?et:"").getOr(0),__=(et,er)=>(et||"table"===Ht(er)?"margin":"padding")+("rtl"===co(er,"direction")?"-right":"-left"),k_=et=>{let er=N_(et);return!et.mode.isReadOnly()&&(er.length>1||ne(er,er=>{let ea=__(oz(et),er),ei=mo(er,ea).map(E_).getOr(0);return"false"!==et.dom.getContentEditable(er.dom)&&ei>0}))},S_=et=>rV(et)||rF(et),N_=et=>Y(_o(et.selection.getSelectedBlocks()),et=>!S_(et)&&!An(et).exists(S_)&&Jn(et,et=>ry(et.dom)||rC(et.dom)).exists(et=>ry(et.dom))),R_=(et,er)=>{var ea,ei;let{dom:es}=et,ed=oj(et),ec=null!==(ei=null===(ea=/[a-z%]+$/i.exec(ed))||void 0===ea?void 0:ea[0])&&void 0!==ei?ei:"px",ev=E_(ed),eC=oz(et);V(N_(et),et=>{((et,er,ea,ei,es,ed)=>{let ec=__(ea,pn(ed)),ev=E_(et.getStyle(ed,ec));if("outdent"===er){let er=Math.max(0,ev-ei);et.setStyle(ed,ec,er?er+es:"")}else{let er=ev+ei+es;et.setStyle(ed,ec,er)}})(es,er,eC,ev,ec,et.dom)})},A_=et=>R_(et,"outdent"),T_=et=>{if(et.selection.isCollapsed()&&k_(et)){let er=et.dom,ea=et.selection.getRng(),ei=Vi.fromRangeStart(ea),es=er.getParent(ea.startContainer,er.isBlock);if(null!==es&&iM(pn(es),ei,et.schema))return I.some(()=>A_(et))}return I.none()},O_=(et,er,ea)=>ue([T_,Ux,Ox,(et,ea)=>d_(et,er,ea),wx,ib,zx,x_,_x,v_],er=>er(et,ea)).filter(er=>et.selection.isEditable()),B_=(et,er)=>{et.addCommand("delete",()=>{((et,er)=>{O_(et,er,!1).fold(()=>{et.selection.isEditable()&&(Nh(et),Th(et))},D)})(et,er)}),et.addCommand("forwardDelete",()=>{((et,er)=>{O_(et,er,!0).fold(()=>{et.selection.isEditable()&&Sh(et,"ForwardDelete")},D)})(et,er)})},P_=et=>void 0===et.touches||1!==et.touches.length?I.none():I.some(et.touches[0]),D_=(et,er)=>Ee(et,er.nodeName),L_=(et,er)=>!!rt(er)||!!t4(er)&&!(D_(et.getBlockElements(),er)||Ku(er)||Ts(et,er)||hs(er)),M_=(et,er)=>{if(rt(er)){if(0===er.data.length)return!0;if(/^\s+$/.test(er.data))return!er.nextSibling||D_(et,er.nextSibling)||hs(er.nextSibling)}return!1},I_=et=>et.dom.create(oa(et),ol(et)),F_=et=>{let er=et.dom,ea=et.selection,ei=et.schema,es=ei.getBlockElements(),ed=ea.getStart(),ec=et.getBody(),ev,eC,eI=!1,eD=oa(et);if(!ed||!t4(ed))return;let eP=ec.nodeName.toLowerCase();if(!ei.isValidChild(eP,eD.toLowerCase())||$(Op(pn(ed),pn(ec)),et=>D_(es,et.dom)))return;let eL=ea.getRng(),{startContainer:eM,startOffset:eV,endContainer:eF,endOffset:eU}=eL,eH=Rg(et),ez=ec.firstChild;for(;ez;)if(t4(ez)&&Ss(ei,ez),L_(ei,ez)){if(M_(es,ez)){eC=ez,ez=ez.nextSibling,er.remove(eC);continue}ev||(ev=I_(et),ec.insertBefore(ev,ez),eI=!0),eC=ez,ez=ez.nextSibling,ev.appendChild(eC)}else ev=null,ez=ez.nextSibling;eI&&eH&&(eL.setStart(eM,eV),eL.setEnd(eF,eU),ea.setRng(eL),et.nodeChanged())},U_=(et,er,ea)=>{let ei=pn(I_(et)),es=Tr();vo(ei,es),ea(er,ei);let ed=document.createRange();return ed.setStartBefore(es.dom),ed.setEndBefore(es.dom),ed},z_=et=>er=>-1!==(" "+er.attr("class")+" ").indexOf(et),j_=(et,er,ea)=>function(ei){let es=arguments,ed=es[es.length-2],ec=ed>0?er.charAt(ed-1):"";if('"'===ec)return ei;if(">"===ec){let et=er.lastIndexOf("<",ed);if(-1!==et&&-1!==er.substring(et,ed).indexOf('contenteditable="false"'))return ei}return'<span class="'+ea+'" data-mce-content="'+et.dom.encode(es[0])+'">'+et.dom.encode("string"==typeof es[1]?es[1]:es[0])+"</span>"},H_=(et,er)=>{er.hasAttribute("data-mce-caret")&&(Vr(er),et.selection.setRng(et.selection.getRng()),et.selection.scrollIntoView(er))},$_=(et,er)=>{let ea=to(pn(et.getBody()),"*[data-mce-caret]").map(et=>et.dom).getOrNull();if(ea)return"compositionstart"===er.type?(er.preventDefault(),er.stopPropagation(),void H_(et,ea)):void(zr(ea)&&(H_(et,ea),et.undoManager.add()))},V_=(et,er,ea)=>{let ei=wu(et.getBody()),es=T(lu,1===er?ei.next:ei.prev);if(ea.collapsed){let ei=et.dom.getParent(ea.startContainer,"PRE");if(!ei)return;if(!es(Vi.fromRangeStart(ea))){let ea=pn((et=>{let er=et.dom.create(oa(et));return er.innerHTML='<br data-mce-bogus="1">',er})(et));1===er?ho(pn(ei),ea):po(pn(ei),ea),et.selection.select(ea.dom,!0),et.selection.collapse()}}},W_=(et,er)=>((et,er)=>{let ea=er?eP.Forwards:eP.Backwards,ei=et.selection.getRng();return KE(et,ea,ei,iP,iL,rC).orThunk(()=>(V_(et,ea,ei),I.none()))})(et,((et,er)=>{let ea=er?et.getEnd(!0):et.getStart(!0);return wh(ea)?!er:er})(et.selection,er)).exists(er=>(VE(et,er),!0)),K_=(et,er)=>((et,er)=>{let ea=er?1:-1,ei=et.selection.getRng();return YE(et,ea,ei,et=>iP(et)||iB(et),et=>iL(et)||iD(et),rC).orThunk(()=>(V_(et,ea,ei),I.none()))})(et,er).exists(er=>(VE(et,er),!0)),Y_=(et,er)=>XE(et,er,er?iL:iP),G_=(et,er)=>Bx(et,!er).map(ea=>{let ei=ea.toRange(),es=et.selection.getRng();return er?ei.setStart(es.startContainer,es.startOffset):ei.setEnd(es.endContainer,es.endOffset),ei}).exists(er=>(VE(et,er),!0)),X_=et=>H(["figcaption"],Ht(et)),Q_=(et,er)=>!!et.selection.isCollapsed()&&((et,er)=>{let ea=pn(et.getBody()),ei=Vi.fromRangeStart(et.selection.getRng());return((et,er,ea)=>{let ei=T(_n,er);return Jn(pn(et.container()),et=>ea.isBlock(Ht(et)),ei).filter(X_)})(ei,ea,et.schema).exists(()=>{if(er?AE(ea.dom,ei):RE(ea.dom,ei)){let ei=U_(et,ea,er?vo:bo);return et.selection.setRng(ei),!0}return!1})})(et,er),J_=(et,er)=>er?I.from(et.dom.getParent(et.selection.getNode(),"details")).map(er=>((et,er)=>{let ea=et.selection.getRng(),ei=Vi.fromRangeStart(ea);return!(et.getBody().lastChild!==er||!AE(er,ei)||(et.execCommand("InsertNewBlockAfter"),0))})(et,er)).getOr(!1):I.from(et.dom.getParent(et.selection.getNode(),"summary")).bind(er=>I.from(et.dom.getParent(er,"details")).map(ea=>((et,er,ea)=>{let ei=et.selection.getRng(),es=Vi.fromRangeStart(ei);return!(et.getBody().firstChild!==er||!RE(ea,es)||(et.execCommand("InsertNewBlockBefore"),0))})(et,ea,er))).getOr(!1),cr={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},ek=(et,er)=>er.keyCode===et.keyCode&&er.shiftKey===et.shiftKey&&er.altKey===et.altKey&&er.ctrlKey===et.ctrlKey&&er.metaKey===et.metaKey,tk=(et,...er)=>()=>et.apply(null,er),nk=(et,er)=>J(te(q(et,et=>({...cr,...et})),et=>ek(et,er)?[et]:[]),et=>et.action()),ok=(et,er)=>ue(te(q(et,et=>({...cr,...et})),et=>ek(et,er)?[et]:[]),et=>et.action()),rk=(et,er)=>{let ea=er?eP.Forwards:eP.Backwards,ei=et.selection.getRng();return KE(et,ea,ei,ik,iI,rI).exists(er=>(VE(et,er),!0))},sk=(et,er)=>{let ea=et.selection.getRng();return YE(et,er?1:-1,ea,ik,iI,rI).exists(er=>(VE(et,er),!0))},ak=(et,er)=>XE(et,er,er?iI:ik),ci=hl([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),cs={...ci,none:et=>ci.none(et)},dk=(et,er,ea)=>te(Mn(et),et=>xn(et,er)?ea(et)?[et]:[]:dk(et,er,ea)),ck=(et,er)=>no(et,"table",er),uk=(et,er,ea,ei,es=eZ)=>{let ed=1===ei;if(!ed&&ea<=0)return cs.first(et[0]);if(ed&&ea>=et.length-1)return cs.last(et[et.length-1]);{let ed=ea+ei,ec=et[ed];return es(ec)?cs.middle(er,ec):uk(et,er,ed,ei,es)}},mk=(et,er)=>ck(et,er).bind(er=>{let ea=dk(er,"th,td",eZ);return Z(ea,er=>_n(et,er)).map(et=>({index:et,all:ea}))}),fk=(et,er,ea,ei,es)=>{let ed=Uo(pn(ea),"td,th,caption").map(et=>et.dom),ec=Y(te(ed,er=>{var ea;let ei={left:(ea=vi(er.getBoundingClientRect())).left- -1,top:ea.top- -1,right:ea.right+-2,bottom:ea.bottom+-2,width:ea.width+-1,height:ea.height+-1};return[{x:ei.left,y:et(ei),cell:er},{x:ei.right,y:et(ei),cell:er}]}),et=>er(et,es));return X(ec,(et,er)=>et.fold(()=>I.some(er),et=>{let ea=Math.sqrt(Math.abs(et.x-ei)+Math.abs(et.y-es)),ed=Math.sqrt(Math.abs(er.x-ei)+Math.abs(er.y-es));return I.some(ed<ea?er:et)}),I.none()).map(et=>et.cell)},cd=T(fk,et=>et.bottom,(et,er)=>et.y<er),cc=T(fk,et=>et.top,(et,er)=>et.y>er),hk=(et,er,ea)=>{let ei=et(er,ea);return(ei.breakType!==eM.Wrap||0!==ei.positions.length)&&(rc(ea.getNode())||ei.breakType!==eM.Br||1!==ei.positions.length)?ei.breakAt.isNone():!ei.breakAt.exists(ea=>et(er,ea).breakAt.isSome())},cu=T(hk,d8),cf=T(hk,d5),yk=(et,er,ea,ei)=>{let es=et.selection.getRng(),ed=er?1:-1;return!(!Dc()||!((et,er,ea)=>{let ei=Vi.fromRangeStart(er);return Ru(!et,ea).exists(et=>et.isEqual(ei))})(er,es,ea)||(kx(ed,et,ea,!er,!1).each(er=>{VE(et,er)}),0))},Ck=(et,er,ea)=>{let ei=((et,er)=>{let ea=er.getNode(et);return Qo(ea)?I.some(ea):I.none()})(!!er,ea),es=!1===er;ei.fold(()=>VE(et,ea.toRange()),ei=>Ru(es,et.getBody()).filter(et=>et.isEqual(ea)).fold(()=>VE(et,ea.toRange()),ea=>((et,er,ea)=>{er.undoManager.transact(()=>{let ei=U_(er,pn(ea),et?ho:po);VE(er,ei)})})(er,et,ei)))},wk=(et,er,ea,ei)=>{let es=et.selection.getRng(),ed=Vi.fromRangeStart(es),ec=et.getBody();if(!er&&cu(ei,ed)){let ei=le(ed.getClientRects()).bind(et=>cd(ea,et.left,et.top)).bind(et=>EE(lV(et).map(er=>d8(et,er).positions.concat(er)).getOr([]),ed)).orThunk(()=>le(ed.getClientRects()).bind(et=>xE(d6(ec,Vi.before(ea)),et.left))).getOr(Vi.before(ea));return Ck(et,er,ei),!0}if(er&&cf(ei,ed)){let ei=de(ed.getClientRects()).bind(et=>cc(ea,et.left,et.top)).bind(et=>EE(lM(et).map(er=>[er].concat(d5(et,er).positions)).getOr([]),ed)).orThunk(()=>le(ed.getClientRects()).bind(et=>xE(d9(ec,Vi.after(ea)),et.left))).getOr(Vi.after(ea));return Ck(et,er,ei),!0}return!1},xk=(et,er,ea)=>I.from(et.dom.getParent(et.selection.getNode(),"td,th")).bind(ei=>I.from(et.dom.getParent(ei,"table")).map(es=>ea(et,er,es,ei))).getOr(!1),Ek=(et,er)=>xk(et,er,yk),_k=(et,er)=>xk(et,er,wk),kk=(et,er,ea)=>ea.fold(I.none,I.none,(et,er)=>Zn(er,Fg).map(et=>(et=>{let er=lG.exact(et,0,et,0);return Nf(er)})(et)),ea=>(et.execCommand("mceTableInsertRowAfter"),Sk(et,er,ea))),Sk=(et,er,ea)=>kk(et,er,mk(ea,void 0).fold(()=>cs.none(ea),et=>uk(et.all,ea,et.index,1,oo))),Nk=(et,er,ea)=>kk(et,er,mk(ea,void 0).fold(()=>cs.none(),et=>uk(et.all,ea,et.index,-1,oo))),Rk=(et,er)=>{let ea=["table","li","dl"],ei=pn(et.getBody()),r=et=>{let er=Ht(et);return _n(et,ei)||H(ea,er)},es=et.selection.getRng();return((et,er,ea=eQ)=>ea(er)?I.none():H(et,Ht(er))?I.some(er):eo(er,et.join(","),et=>xn(et,"table")||ea(et)))(["td","th"],pn(er?es.endContainer:es.startContainer),r).map(ea=>(ck(ea,r).each(er=>{et.model.table.clearSelectedCells(er.dom)}),et.selection.collapse(!er),(er?Sk:Nk)(et,r,ea).each(er=>{et.selection.setRng(er)}),!0)).getOr(!1)},Ak=(et,er)=>({container:et,offset:er}),cb=za.DOM,Ok=et=>er=>et===er?-1:0,Bk=(et,er,ea)=>{if(rt(et)&&er>=0)return I.some(Ak(et,er));{let ei=hi(cb);return I.from(ei.backwards(et,er,Ok(et),ea)).map(et=>Ak(et.container,et.container.data.length))}},Pk=(et,er,ea)=>{if(!rt(et))return I.none();let ei=et.data;if(er>=0&&er<=ei.length)return I.some(Ak(et,er));{let ei=hi(cb);return I.from(ei.backwards(et,er,Ok(et),ea)).bind(et=>{let ei=et.container.data;return Pk(et.container,er+ei.length,ea)})}},Dk=(et,er,ea)=>{if(!rt(et))return I.none();let ei=et.data;if(er<=ei.length)return I.some(Ak(et,er));{let es=hi(cb);return I.from(es.forwards(et,er,Ok(et),ea)).bind(et=>Dk(et.container,er-ei.length,ea))}},Lk=(et,er,ea,ei,es)=>{let ed=hi(et,er=>et.isBlock(er)||H(["BR","IMG","HR","INPUT"],er.nodeName)||"false"===et.getContentEditable(er));return I.from(ed.backwards(er,ea,ei,es))},Mk=et=>Dr(et.toString().replace(/\u00A0/g," ")),Ik=et=>""!==et&&-1!==" \xa0\f\n\r	\v".indexOf(et),Fk=(et,er)=>et.substring(er.length),Uk=(et,er,ea,ei=0)=>no(pn(er.startContainer),l8).fold(()=>((et,er,ea,ei=0)=>{if(!er.collapsed||!rt(er.startContainer))return I.none();let es={text:"",offset:0},ed=et.getParent(er.startContainer,et.isBlock)||et.getRoot();return Lk(et,er.startContainer,er.startOffset,(et,er,ei)=>(es.text=ei+es.text,es.offset+=er,((et,er,ea)=>{let ei;let es=ea.charAt(0);for(ei=er-1;ei>=0;ei--){let ed=et.charAt(ei);if(Ik(ed))return I.none();if(es===ed&&je(et,ea,ei,er))break}return I.some(ei)})(es.text,es.offset,ea).getOr(er)),ed).bind(et=>{let es=er.cloneRange();if(es.setStart(et.container,et.offset),es.setEnd(er.endContainer,er.endOffset),es.collapsed)return I.none();let ed=Mk(es);return 0!==ed.lastIndexOf(ea)||Fk(ed,ea).length<ei?I.none():I.some({text:Fk(ed,ea),range:es,trigger:ea})})})(et,er,ea,ei),er=>{let ei=et.createRng();ei.selectNode(er.dom);let es=Mk(ei);return I.some({range:ei,text:Fk(es,ea),trigger:ea})}),zk=et=>{if(3===et.nodeType)return Ak(et,et.data.length);{let er=et.childNodes;return er.length>0?zk(er[er.length-1]):Ak(et,er.length)}},jk=(et,er)=>{let ea=et.childNodes;return ea.length>0&&er<ea.length?jk(ea[er],0):ea.length>0&&1===et.nodeType&&ea.length===er?zk(ea[ea.length-1]):Ak(et,er)},Hk=(et,er,ea,ei={})=>{var es;let ed=er(),ec=null!==(es=et.selection.getRng().startContainer.nodeValue)&&void 0!==es?es:"",ev=Y(ed.lookupByTrigger(ea.trigger),er=>ea.text.length>=er.minChars&&er.matches.getOrThunk(()=>{var er;return er=et.dom,et=>{let ea=jk(et.startContainer,et.startOffset);return!((et,er)=>{var ea;let ei=null!==(ea=et.getParent(er.container,et.isBlock))&&void 0!==ea?ea:et.getRoot();return Lk(et,er.container,er.offset,(et,er)=>0===er?-1:er,ei).filter(et=>{let er=et.container.data.charAt(et.offset-1);return!Ik(er)}).isSome()})(er,ea)}})(ea.range,ec,ea.text));if(0===ev.length)return I.none();let eC=Promise.all(q(ev,et=>et.fetch(ea.text,et.maxResults,ei).then(er=>({matchText:ea.text,items:er,columns:et.columns,onAction:et.onAction,highlightOn:et.highlightOn}))));return I.some({lookupData:eC,context:ea})};(ev=eF||(eF={}))[ev.Error=0]="Error",ev[ev.Value=1]="Value";let qk=(et,er,ea)=>et.stype===eF.Error?er(et.serror):ea(et.svalue),Vk=et=>({stype:eF.Value,svalue:et}),Wk=et=>({stype:eF.Error,serror:et}),Yk=et=>eq(et)&&e8(et).length>100?" removed due to size":JSON.stringify(et,null,2),Gk=(et,er)=>Wk([{path:et,getErrorInfo:er}]),Xk=(et,er)=>({extract:(ea,ei)=>xe(ei,et).fold(()=>Gk(ea,()=>'Choice schema did not contain choice key: "'+et+'"'),et=>xe(er,et).fold(()=>Gk(ea,()=>'The chosen schema: "'+et+'" did not exist in branches: '+Yk(er)),er=>er.extract(ea.concat(["branch: "+et]),ei))),toString:()=>"chooseOn("+et+"). Possible values: "+e8(er)}),Qk=et=>(...er)=>{if(0===er.length)throw Error("Can't merge zero objects");let ea={};for(let ei=0;ei<er.length;ei++){let es=er[ei];for(let er in es)Ee(es,er)&&(ea[er]=et(ea[er],es[er]))}return ea},cy=Qk((et,er)=>g(et)&&g(er)?cy(et,er):er),cN=(Qk((et,er)=>er),et=>({tag:"defaultedThunk",process:N(et)})),eS=et=>{var er;let ea=(et=>{let er=[],ea=[];return V(et,et=>{qk(et,et=>ea.push(et),et=>er.push(et))}),{values:er,errors:ea}})(et);return ea.errors.length>0?(er=ea.errors,k(Wk,ee)(er)):Vk(ea.values)},tS=(et,er,ea)=>{switch(et.tag){case"field":return er(et.key,et.newKey,et.presence,et.prop);case"custom":return ea(et.newKey,et.instantiator)}},nS=et=>({extract:(er,ea)=>{var ei,es;return(ei=et(ea)).stype===eF.Error?Gk(er,N(ei.serror)):ei},toString:N("val")}),cw=nS(Vk),rS=(et,er,ea,ei)=>ei(xe(et,er).getOrThunk(()=>ea(et))),sS=(et,er,ea,ei,es)=>{var ed;let s=et=>es.extract(er.concat([ei]),et),a=et=>et.fold(()=>Vk(I.none()),et=>{var ea;let ed=es.extract(er.concat([ei]),et);return ea=I.some,ed.stype===eF.Value?{stype:eF.Value,svalue:ea(ed.svalue)}:ed});switch(et.tag){case"required":return xe(ea,ei).fold(()=>Gk(er,()=>'Could not find valid *required* value for "'+ei+'" in '+Yk(ea)),s);case"defaultedThunk":return rS(ea,ei,et.process,s);case"option":return a(xe(ea,ei));case"defaultedOptionThunk":return ed=et.process,a(xe(ea,ei).map(et=>!0===et?ed(ea):et));case"mergeWithThunk":return rS(ea,ei,N({}),er=>{let ei=cy(et.process(ea),er);return s(ei)})}},aS=et=>({extract:(er,ea)=>((et,er,ea)=>{let ei={},es=[];for(let ed of ea)tS(ed,(ea,ed,ec,ev)=>{let eC=sS(ec,et,er,ea,ev);qk(eC,et=>{es.push(...et)},et=>{ei[ed]=et})},(et,ea)=>{ei[et]=ea(er)});return es.length>0?Wk(es):Vk(ei)})(er,ea,et),toString:()=>{let er=q(et,et=>tS(et,(et,er,ea,ei)=>et+" -> "+ei.toString(),(et,er)=>"state("+et+")"));return"obj{\n"+er.join("\n")+"}"}}),iS=et=>({extract:(er,ea)=>{let ei=q(ea,(ea,ei)=>et.extract(er.concat(["["+ei+"]"]),ea));return eS(ei)},toString:()=>"array("+et.toString()+")"}),lS=(et,er,ea)=>{var ei;return qk((ei=er.extract([et],ea)).stype===eF.Error?{stype:eF.Error,serror:{input:ea,errors:ei.serror}}:ei,n1.error,n1.value)},dS=(et,er)=>Xk(et,pe(er,aS)),cS=N(cw),uS=(et,er)=>nS(ea=>{let ei=typeof ea;return et(ea)?Vk(ea):Wk(`Expected type: ${er} but got: ${ei}`)}),cR=uS(eG,"number"),cI=uS(e$,"string"),cD=uS(eK,"boolean"),cP=uS(eJ,"function"),hS=(et,er,ea,ei)=>({tag:"field",key:et,newKey:er,presence:ea,prop:ei}),bS=(et,er)=>({tag:"custom",newKey:et,instantiator:er}),vS=(et,er)=>hS(et,et,{tag:"required",process:{}},er),yS=et=>vS(et,cI),CS=et=>vS(et,cP),wS=(et,er)=>hS(et,et,{tag:"option",process:{}},er),xS=et=>wS(et,cI),ES=(et,er,ea)=>hS(et,et,cN(er),ea),_S=(et,er)=>ES(et,er,cR),kS=(et,er,ea)=>{var ei;return ES(et,er,(ei=et=>H(ea,et)?n1.value(et):n1.error(`Unsupported value: "${et}", choose one of "${ea.join(", ")}".`),nS(et=>ei(et).fold(Wk,Vk))))},SS=(et,er)=>ES(et,er,cD),NS=(et,er)=>ES(et,er,cP),cL=yS("type"),cM=CS("fetch"),cV=CS("onAction"),cF=NS("onSetup",()=>_),cU=xS("text"),cH=xS("icon"),cz=xS("tooltip"),cj=xS("label"),c$=SS("active",!1),cq=SS("enabled",!0),cW=SS("primary",!1),US=et=>ES("type",et,cI),cY=aS([cL,yS("trigger"),_S("minChars",1),hS(eC="columns",eC,cN(1),cS()),_S("maxResults",10),wS("matches",cP),cM,cV,ES("highlightOn",[],iS(cI))]),cK=[cq,cz,cH,cU,cF],cX=[c$].concat(cK),cJ=[NS("predicate",eQ),kS("scope","node",["node","editor"]),kS("position","selection",["node","selection","line"])],cG=cK.concat([US("contextformbutton"),cW,cV,bS("original",R)]),cQ=cX.concat([US("contextformbutton"),cW,cV,bS("original",R)]),cZ=cK.concat([US("contextformbutton")]),c0=cX.concat([US("contextformtogglebutton")]),c1=dS("type",{contextformbutton:cG,contextformtogglebutton:cQ});aS([US("contextform"),NS("initValue",N("")),cj,hS(eI="commands",eI,{tag:"required",process:{}},iS(c1)),wS("launch",dS("type",{contextformbutton:cZ,contextformtogglebutton:c0}))].concat(cJ));let XS=et=>{let er=et.ui.registry.getAll().popups,ea=pe(er,et=>lS("Autocompleter",cY,{trigger:et.ch,...et}).fold(et=>{throw Error("Errors: \n"+(et=>{let er=et.length>10?et.slice(0,10).concat([{path:[],getErrorInfo:N("... (only showing first ten failures)")}]):et;return q(er,et=>"Failed path: ("+et.path.join(" > ")+")\n"+et.getErrorInfo())})(et.errors).join("\n")+"\n\nInput object: "+Yk(et.input))},R)),ei=ke(Ce(ea,et=>et.trigger)),es=we(ea);return{dataset:ea,triggers:ei,lookupByTrigger:et=>Y(es,er=>er.trigger===et)}},QS=et=>{let er=Xa(),ea=$a(!1),ei=er.isSet,r=()=>{ei()&&((et=>{JC(et).autocompleter.removeDecoration()})(et),(et=>{et.dispatch("AutocompleterEnd")})(et),ea.set(!1),er.clear())},es=De(()=>XS(et)),a=ed=>{er.get().map(er=>Uk(et.dom,et.selection.getRng(),er.trigger).bind(er=>Hk(et,es,er,ed))).getOrThunk(()=>((et,er)=>{var ea;let ei=er(),es=et.selection.getRng();return(ea=et.dom,ue(ei.triggers,et=>Uk(ea,es,et))).bind(ea=>Hk(et,er,ea))})(et,es)).fold(r,es=>{var ed;ed=es.context,ei()||(((et,er)=>{JC(et).autocompleter.addDecoration(er)})(et,ed.range),er.set({trigger:ed.trigger,matchLength:ed.text.length})),es.lookupData.then(ei=>{er.get().map(ed=>{let ec=es.context;ed.trigger===ec.trigger&&(ec.text.length-ed.matchLength>=10?r():(er.set({...ed,matchLength:ec.text.length}),ea.get()?((et,er)=>{et.dispatch("AutocompleterUpdate",er)})(et,{lookupData:ei}):(ea.set(!0),((et,er)=>{et.dispatch("AutocompleterStart",er)})(et,{lookupData:ei}))))})})})};et.addCommand("mceAutocompleterReload",(et,er)=>{let ea=eq(er)?er.fetchOptions:{};a(ea)}),et.addCommand("mceAutocompleterClose",r),((et,er)=>{let ea=Ja(er.load,50);et.on("keypress compositionend",et=>{27!==et.which&&ea.throttle()}),et.on("keydown",et=>{let ei=et.which;8===ei?ea.throttle():27===ei&&er.cancelIfNecessary()}),et.on("remove",ea.cancel)})(et,{cancelIfNecessary:r,load:a})},c2=xt().browser.isSafari(),ZS=et=>Or(pn(et)),eN=(et,er)=>{var ea;return 0===et.startOffset&&et.endOffset===(null===(ea=er.textContent)||void 0===ea?void 0:ea.length)},tN=(et,er)=>I.from(et.getParent(er.container(),"details")),nN=(et,er)=>tN(et,er).isSome(),oN=(et,er)=>{let ea=er.getNode();eX(ea)||et.selection.setCursorLocation(ea,er.offset())},rN=(et,er,ea)=>{let ei=et.dom.getParent(er.container(),"details");if(ei&&!ei.open){let er=et.dom.select("summary",ei)[0];er&&(ea?lM(er):lV(er)).each(er=>oN(et,er))}else oN(et,er)},sN=(et,er,ea)=>{let{dom:ei,selection:es}=et,ed=et.getBody();if("character"===ea){let ea=Vi.fromRangeStart(es.getRng()),ec=ei.getParent(ea.container(),ei.isBlock),ev=tN(ei,ea),eC=ec&&ei.isEmpty(ec),eI=eY(null==ec?void 0:ec.previousSibling),eD=eY(null==ec?void 0:ec.nextSibling);return!!(eC&&(er?eD:eI)&&Su(!er,ed,ea).exists(et=>nN(ei,et)&&!Lt(ev,tN(ei,et))))||Su(er,ed,ea).fold(eQ,ea=>{let es=tN(ei,ea);if(nN(ei,ea)&&!Lt(ev,es)){if(er||rN(et,ea,!1),ec&&eC){if(er&&eI||!er&&eD)return!0;rN(et,ea,er),et.dom.remove(ec)}return!0}return!1})}return!1},aN=(et,er,ea,ei)=>{let es=et.selection.getRng(),ed=Vi.fromRangeStart(es),ec=et.getBody();return"selection"===ei?((et,er)=>{let ea=er.startSummary.exists(er=>er.contains(et.startContainer)),ei=er.startSummary.exists(er=>er.contains(et.endContainer)),es=er.startDetails.forall(et=>er.endDetails.forall(er=>et!==er));return(ea||ei)&&!(ea&&ei)||es})(es,er):ea?er.startSummary.exists(et=>lV(et).exists(er=>rc(er.getNode())&&lL(et,er).exists(et=>et.isEqual(ed))||er.isEqual(ed)))||er.startDetails.exists(et=>lP(ec,ed).forall(er=>!et.contains(er.container()))):er.startSummary.exists(et=>lM(et).exists(et=>et.isEqual(ed)))||er.startDetails.exists(et=>lL(et,ed).forall(et=>er.startSummary.exists(er=>!er.contains(ed.container())&&er.contains(et.container()))))},iN=(et,er,ea)=>((et,er)=>{let ea=I.from(et.getParent(er.startContainer,"details")),ei=I.from(et.getParent(er.endContainer,"details"));if(ea.isSome()||ei.isSome()){let er=ea.bind(er=>I.from(et.select("summary",er)[0]));return I.some({startSummary:er,startDetails:ea,endDetails:ei})}return I.none()})(et.dom,et.selection.getRng()).fold(()=>sN(et,er,ea),ei=>aN(et,ei,er,ea)||sN(et,er,ea))||c2&&((et,er,ea)=>{let ei=et.selection,es=ei.getNode(),ed=ei.getRng(),ec=Vi.fromRangeStart(ed);return!!rP(es)&&("selection"===ea&&eN(ed,es)||Oh(er,ec,es)?ZS(es):et.undoManager.transact(()=>{let ed=ei.getSel(),{anchorNode:ec,anchorOffset:ev,focusNode:eC,focusOffset:eI}=null!=ed?ed:{},c=()=>{C(ec)&&C(ev)&&C(eC)&&C(eI)&&(null==ed||ed.setBaseAndExtent(ec,ev,eC,eI))},u=(et,er)=>{V(et.childNodes,et=>{dm(et)&&er.appendChild(et)})},eD=et.dom.create("span",{"data-mce-bogus":"1"});u(es,eD),es.appendChild(eD),c(),"word"!==ea&&"line"!==ea||null==ed||ed.modify("extend",er?"right":"left",ea),!ei.isCollapsed()&&eN(ei.getRng(),eD)?ZS(es):(et.execCommand(er?"ForwardDelete":"Delete"),ec=null==ed?void 0:ed.anchorNode,ev=null==ed?void 0:ed.anchorOffset,eC=null==ed?void 0:ed.focusNode,eI=null==ed?void 0:ed.focusOffset,u(eD,es),c()),et.dom.remove(eD)}),!0)})(et,er,ea)?I.some(_):I.none(),lN=et=>(er,ea,ei={})=>{let es=er.getBody(),ed={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:es,currentTarget:es,eventPhase:Event.AT_TARGET,originalTarget:es,explicitOriginalTarget:es,isTrusted:!1,srcElement:es,cancelable:!1,preventDefault:_,inputType:ea},ec=Ea(new InputEvent(et));return er.dispatch(et,{...ec,...ed,...ei})},c3=lN("input"),c8=lN("beforeinput"),c5=xt(),c6=c5.os,c9=c6.isMacOS()||c6.isiOS(),c4=c5.browser.isFirefox(),pN=(et,er)=>{let ea=et.dom,ei=et.schema.getMoveCaretBeforeOnEnterElements();if(!er)return;if(/^(LI|DT|DD)$/.test(er.nodeName)){let et=(et=>{for(;et;){if(t4(et)||rt(et)&&et.data&&/[\r\n\s]/.test(et.data))return et;et=et.nextSibling}return null})(er.firstChild);et&&/^(UL|OL|DL)$/.test(et.nodeName)&&er.insertBefore(ea.doc.createTextNode("\xa0"),er.firstChild)}let es=ea.createRng();if(er.normalize(),er.hasChildNodes()){let et=new jo(er,er),ea,ed=er;for(;ea=et.current();){if(rt(ea)){es.setStart(ea,0),es.setEnd(ea,0);break}if(ei[ea.nodeName.toLowerCase()]){es.setStartBefore(ea),es.setEndBefore(ea);break}ed=ea,ea=et.next()}ea||(es.setStart(ed,0),es.setEnd(ed,0))}else rc(er)?er.nextSibling&&ea.isBlock(er.nextSibling)?(es.setStartBefore(er),es.setEndBefore(er)):(es.setStartAfter(er),es.setEndAfter(er)):(es.setStart(er,0),es.setEnd(er,0));et.selection.setRng(es),sg(et,es)},hN=(et,er)=>{let ea=et.getRoot(),ei,es=er;for(;es!==ea&&es&&"false"!==et.getContentEditable(es);){if("true"===et.getContentEditable(es)){ei=es;break}es=es.parentNode}return es!==ea?ei:ea},bN=et=>I.from(et.dom.getParent(et.selection.getStart(!0),et.dom.isBlock)),vN=et=>{et.innerHTML='<br data-mce-bogus="1">'},yN=(et,er)=>{oa(et).toLowerCase()===er.tagName.toLowerCase()&&((et,er,ea)=>{let ei=et.dom;I.from(ea.style).map(ei.parseStyle).each(et=>{let ea={...fo(pn(er)),...et};ei.setStyles(er,ea)});let es=I.from(ea.class).map(et=>et.split(/\s+/)),ed=I.from(er.className).map(et=>Y(et.split(/\s+/),et=>""!==et));Mt(es,ed,(et,ea)=>{let es=Y(ea,er=>!H(et,er)),ed=[...et,...es];ei.setAttrib(er,"class",ed.join(" "))});let ec=["style","class"],ev=ye(ea,(et,er)=>!H(ec,er));ei.setAttribs(er,ev)})(et,er,ol(et))},CN=(et,er,ea,ei,es=!0,ed,ec)=>{let ev;let eC=et.dom,eI=et.schema,eD=oa(et),eP=ea?ea.nodeName.toUpperCase():"",eL=er,eM=eI.getTextInlineElements(),eV=ev=ed||"TABLE"===eP||"HR"===eP?eC.create(ed||eD,ec||{}):ea.cloneNode(!1);if(es)do if(eM[eL.nodeName]){if(Du(eL)||Ku(eL))continue;let et=eL.cloneNode(!1);eC.setAttrib(et,"id",""),ev.hasChildNodes()?et.appendChild(ev.firstChild):eV=et,ev.appendChild(et)}while((eL=eL.parentNode)&&eL!==ei);else eC.setAttrib(ev,"style",null),eC.setAttrib(ev,"class",null);return yN(et,ev),vN(eV),ev},wN=(et,er)=>{let ea=null==et?void 0:et.parentNode;return C(ea)&&ea.nodeName===er},xN=et=>C(et)&&/^(OL|UL|LI)$/.test(et.nodeName),EN=et=>C(et)&&/^(LI|DT|DD)$/.test(et.nodeName),_N=et=>{let er=et.parentNode;return EN(er)?er:et},kN=(et,er,ea)=>{let ei=et[ea?"firstChild":"lastChild"];for(;ei&&!t4(ei);)ei=ei[ea?"nextSibling":"previousSibling"];return ei===er},SN=et=>X(Ce(fo(pn(et)),(et,er)=>`${er}: ${et};`),(et,er)=>et+er,""),NN=(et,er)=>er&&"A"===er.nodeName&&et.isEmpty(er),RN=(et,er)=>et.nodeName===er||et.previousSibling&&et.previousSibling.nodeName===er,AN=(et,er)=>C(er)&&et.isBlock(er)&&!/^(TD|TH|CAPTION|FORM)$/.test(er.nodeName)&&!/^(fixed|absolute)/i.test(er.style.position)&&et.isEditable(er.parentNode)&&"false"!==et.getContentEditable(er),TN=(et,er,ea)=>rt(er)?et?1===ea&&"\uFEFF"===er.data.charAt(ea-1)?0:ea:ea===er.data.length-1&&"\uFEFF"===er.data.charAt(ea)?er.data.length:ea:ea,c7={insert:(et,er)=>{var ea;let ei,es,ed,ec,ev,eC=!1,eI=et.dom,eD=et.schema.getNonEmptyElements(),eP=et.selection.getRng(),eL=oa(et),eM=pn(eP.startContainer),eV=In(eM,eP.startOffset),eF=eV.exists(et=>Vt(et)&&!oo(et)),eU=eP.collapsed&&eF,b=(er,ea)=>CN(et,es,eq,ej,ou(et),er,ea),v=et=>{let er;let ea=TN(et,es,ed);if(rt(es)&&(et?ea>0:ea<es.data.length))return!1;if(es.parentNode===eq&&eC&&!et||et&&t4(es)&&es===eq.firstChild)return!0;if(RN(es,"TABLE")||RN(es,"HR"))return eC&&!et||!eC&&et;let ei=new jo(es,eq);for(rt(es)&&(et&&0===ea?ei.prev():et||ea!==es.data.length||ei.next());er=ei.current();){if(t4(er)){if(!er.getAttribute("data-mce-bogus")){let et=er.nodeName.toLowerCase();if(eD[et]&&"br"!==et)return!1}}else if(rt(er)&&!ss(er.data))return!1;et?ei.prev():ei.next()}return!0},w=()=>{let er;return er=/^(H[1-6]|PRE|FIGURE)$/.test(ec)&&"HGROUP"!==eW?b(eL):b(),((et,er)=>{let ea=op(et);return!y(er)&&(e$(ea)?H(tQ.explode(ea),er.nodeName.toLowerCase()):ea)})(et,ev)&&AN(eI,ev)&&eI.isEmpty(eq,void 0,{includeZwsp:!0})?er=eI.split(ev,eq):eI.insertAfter(er,eq),pN(et,er),er};Mf(eI,eP).each(et=>{eP.setStart(et.startContainer,et.startOffset),eP.setEnd(et.endContainer,et.endOffset)}),es=eP.startContainer,ed=eP.startOffset;let eH=!(!er||!er.shiftKey),ez=!(!er||!er.ctrlKey);t4(es)&&es.hasChildNodes()&&!eU&&(eC=ed>es.childNodes.length-1,es=es.childNodes[Math.min(ed,es.childNodes.length-1)]||es,ed=eC&&rt(es)?es.data.length:0);let ej=hN(eI,es);if(!ej||((et,er)=>{let ea=et.dom.getParent(er,"ol,ul,dl");return null!==ea&&"false"===et.dom.getContentEditableParent(ea)})(et,es))return;eH||(es=((et,er,ea,ei,es)=>{var ed,ec;let ev=et.dom,eC=null!==(ed=hN(ev,ei))&&void 0!==ed?ed:ev.getRoot(),eI=ev.getParent(ei,ev.isBlock);if(!eI||!AN(ev,eI)){if(!(eI=eI||eC).hasChildNodes()){let ei=ev.create(er);return yN(et,ei),eI.appendChild(ei),ea.setStart(ei,0),ea.setEnd(ei,0),ei}let ed,eD=ei;for(;eD&&eD.parentNode!==eI;)eD=eD.parentNode;for(;eD&&!ev.isBlock(eD);)ed=eD,eD=eD.previousSibling;let eP=null===(ec=null==ed?void 0:ed.parentElement)||void 0===ec?void 0:ec.nodeName;if(ed&&eP&&et.schema.isValidChild(eP,er.toLowerCase())){let ec=ed.parentNode,eC=ev.create(er);for(yN(et,eC),ec.insertBefore(eC,ed),eD=ed;eD&&!ev.isBlock(eD);){let et=eD.nextSibling;eC.appendChild(eD),eD=et}ea.setStart(ei,es),ea.setEnd(ei,es)}}return ei})(et,eL,eP,es,ed));let eq=eI.getParent(es,eI.isBlock)||eI.getRoot();ev=C(null==eq?void 0:eq.parentNode)?eI.getParent(eq.parentNode,eI.isBlock):null,ec=eq?eq.nodeName.toUpperCase():"";let eW=ev?ev.nodeName.toUpperCase():"";if("LI"!==eW||ez||(eq=ev,ev=ev.parentNode,ec=eW),t4(ev)&&(ea=eq,!eH&&ea.nodeName.toLowerCase()===oa(et)&&et.dom.isEmpty(ea)&&((er,ea,ei)=>{let es=ea;for(;es&&es!==er&&eY(es.nextSibling);){let er=es.parentElement;if(!er||!Ee(et.schema.getTextBlockElements(),er.nodeName.toLowerCase()))return rD(er);es=er}return!1})(et.getBody(),ea)))return((et,er,ea)=>{var ei,es,ed;let ec=er(oa(et)),ev=et.dom.getParent(ea,rD);ev&&(et.dom.insertAfter(ec,ev),pN(et,ec),(null!==(ed=null===(es=null===(ei=ea.parentElement)||void 0===ei?void 0:ei.childNodes)||void 0===es?void 0:es.length)&&void 0!==ed?ed:0)>1&&et.dom.remove(ea))})(et,b,eq);if(/^(LI|DT|DD)$/.test(ec)&&t4(ev)&&eI.isEmpty(eq))return void((et,er,ea,ei,es)=>{var ed,ec,ev;let eC=et.dom,eI=et.selection.getRng(),eD=ea.parentNode;if(ea===et.getBody()||!eD)return;xN(ed=ea)&&xN(ed.parentNode)&&(es="LI");let eP=EN(ei)?SN(ei):void 0,eL=EN(ei)&&eP?er(es,{style:SN(ei)}):er(es);if(kN(ea,ei,!0)&&kN(ea,ei,!1)){if(wN(ea,"LI")){let et=_N(ea);eC.insertAfter(eL,et),(null===(ev=(ec=ea).parentNode)||void 0===ev?void 0:ev.firstChild)===ec?eC.remove(et):eC.remove(ea)}else eC.replace(eL,ea)}else if(kN(ea,ei,!0))wN(ea,"LI")?(eC.insertAfter(eL,_N(ea)),eL.appendChild(eC.doc.createTextNode(" ")),eL.appendChild(ea)):eD.insertBefore(eL,ea),eC.remove(ei);else if(kN(ea,ei,!1))eC.insertAfter(eL,_N(ea)),eC.remove(ei);else{ea=_N(ea);let et=eI.cloneRange();et.setStartAfter(ei),et.setEndAfter(ea);let er=et.extractContents();if("LI"===es&&er.firstChild&&"LI"===er.firstChild.nodeName){let et=Y(q(eL.children,pn),O(Xt("br")));eL=er.firstChild,eC.insertAfter(er,ea),V(et,et=>bo(pn(eL),et)),eP&&eL.setAttribute("style",eP)}else eC.insertAfter(er,ea),eC.insertAfter(eL,ea);eC.remove(ei)}pN(et,eL)})(et,b,ev,eq,eL);if(!(eU||eq!==et.getBody()&&AN(eI,eq)))return;let eK=eq.parentNode;if(eU)ei=b(eL),eV.fold(()=>{vo(eM,pn(ei))},et=>{po(et,pn(ei))}),et.selection.setCursorLocation(ei,0);else if(Ir(eq))ei=Vr(eq),eI.isEmpty(eq)&&vN(eq),yN(et,ei),pN(et,ei);else if(v(!1))ei=w();else if(v(!0)&&eK){ei=eK.insertBefore(b(),eq);let er=pn(eP.startContainer).dom.hasChildNodes()&&eP.collapsed;pN(et,RN(eq,"HR")||er?ei:eq)}else{let er=(et=>{let er=et.cloneRange();return er.setStart(et.startContainer,TN(!0,et.startContainer,et.startOffset)),er.setEnd(et.endContainer,TN(!1,et.endContainer,et.endOffset)),er})(eP).cloneRange();er.setEndAfter(eq);let ea=er.extractContents();V(Fo(pn(ea),t2),et=>{let er=et.dom;er.nodeValue=Dr(er.data)}),(et=>{let er=et;do rt(er)&&(er.data=er.data.replace(/^[\r\n]+/,"")),er=er.firstChild;while(er)})(ea),ei=ea.firstChild,eI.insertAfter(ea,eq),((et,er,ea)=>{var ei;let es=[];if(!ea)return;let ed=ea;for(;ed=ed.firstChild;){if(et.isBlock(ed))return;t4(ed)&&!er[ed.nodeName.toLowerCase()]&&es.push(ed)}let ec=es.length;for(;ec--;)(!(ed=es[ec]).hasChildNodes()||ed.firstChild===ed.lastChild&&""===(null===(ei=ed.firstChild)||void 0===ei?void 0:ei.nodeValue)||NN(et,ed))&&et.remove(ed)})(eI,eD,ei),((et,er)=>{er.normalize();let ea=er.lastChild;(!ea||t4(ea)&&/^(left|right)$/gi.test(et.getStyle(ea,"float",!0)))&&et.add(er,"br")})(eI,eq),eI.isEmpty(eq)&&vN(eq),ei.normalize(),eI.isEmpty(ei)?(eI.remove(ei),w()):(yN(et,ei),pN(et,ei))}eI.setAttrib(ei,"id",""),et.dispatch("NewBlock",{newBlock:ei})},fakeEventName:"insertParagraph"},BN=(et,er,ea)=>{let ei=et.dom.createRng();ea?(ei.setStartBefore(er),ei.setEndBefore(er)):(ei.setStartAfter(er),ei.setEndAfter(er)),et.selection.setRng(ei),sg(et,ei)},PN=(et,er)=>{let ea=bn("br");po(pn(er),ea),et.undoManager.add()},DN=(et,er)=>{LN(et.getBody(),er)||ho(pn(er),bn("br"));let ea=bn("br");ho(pn(er),ea),BN(et,ea.dom,!1),et.undoManager.add()},LN=(et,er)=>!!rc(Vi.after(er).getNode())||lP(et,Vi.after(er)).map(et=>rc(et.getNode())).getOr(!1),MN=et=>et&&"A"===et.nodeName&&"href"in et,IN=et=>et.fold(eQ,MN,MN,eQ),FN=(et,er)=>{er.fold(_,T(PN,et),T(DN,et),_)},ut={insert:(et,er)=>{let ea=(et=>{let er=T(Ch,et),ea=Vi.fromRangeStart(et.selection.getRng());return iE(er,et.getBody(),ea).filter(IN)})(et);ea.isSome()?ea.each(T(FN,et)):((et,er)=>{let ea=et.selection,ei=et.dom,es=ea.getRng(),ed,ec=!1;Mf(ei,es).each(et=>{es.setStart(et.startContainer,et.startOffset),es.setEnd(et.endContainer,et.endOffset)});let ev=es.startOffset,eC=es.startContainer;if(t4(eC)&&eC.hasChildNodes()){let et=ev>eC.childNodes.length-1;eC=eC.childNodes[Math.min(ev,eC.childNodes.length-1)]||eC,ev=et&&rt(eC)?eC.data.length:0}let eI=ei.getParent(eC,ei.isBlock),eD=eI&&eI.parentNode?ei.getParent(eI.parentNode,ei.isBlock):null,eP=eD?eD.nodeName.toUpperCase():"",eL=!(!er||!er.ctrlKey);"LI"!==eP||eL||(eI=eD),rt(eC)&&ev>=eC.data.length&&(((et,er,ea)=>{let ei;let es=new jo(er,ea),ed=et.getNonEmptyElements();for(;ei=es.next();)if(ed[ei.nodeName.toLowerCase()]||rt(ei)&&ei.length>0)return!0;return!1})(et.schema,eC,eI||ei.getRoot())||(ed=ei.create("br"),es.insertNode(ed),es.setStartAfter(ed),es.setEndAfter(ed),ec=!0)),ed=ei.create("br"),Ki(ei,es,ed),BN(et,ed,ec),et.undoManager.add()})(et,er)},fakeEventName:"insertLineBreak"},zN=(et,er)=>bN(et).filter(et=>er.length>0&&xn(pn(et),er)).isSome(),ur=hl([{br:[]},{block:[]},{none:[]}]),HN=(et,er)=>zN(et,oc(et)),$N=et=>(er,ea)=>bN(er).filter(et=>rF(pn(et))).isSome()===et,qN=(et,er)=>(ea,ei)=>{let es=bN(ea).fold(N(""),et=>et.nodeName.toUpperCase())===et.toUpperCase();return es===er},VN=et=>{let er=hN(et.dom,et.selection.getStart());return y(er)},WN=et=>qN("pre",et),KN=et=>(er,ea)=>or(er)===et,YN=(et,er)=>zN(et,od(et)),GN=(et,er)=>er,XN=et=>{let er=oa(et),ea=hN(et.dom,et.selection.getStart());return C(ea)&&et.schema.isValidChild(ea.nodeName,er)},QN=et=>{let er=et.selection.getRng(),ea=pn(er.startContainer),ei=In(ea,er.startOffset).map(et=>Vt(et)&&!oo(et));return er.collapsed&&ei.getOr(!0)},JN=(et,er)=>(ea,ei)=>X(et,(et,er)=>et&&er(ea,ei),!0)?I.some(er):I.none(),ZN=(et,er,ea)=>{er.selection.isCollapsed()||(et=>{et.execCommand("delete")})(er),C(ea)&&c8(er,et.fakeEventName).isDefaultPrevented()||(et.insert(er,ea),C(ea)&&c3(er,et.fakeEventName))},eR=(et,er)=>{let n=()=>ZN(ut,et,er),o=()=>ZN(c7,et,er),ea=Qx([JN([HN],ur.none()),JN([WN(!0),VN],ur.none()),JN([qN("summary",!0)],ur.br()),JN([WN(!0),KN(!1),GN],ur.br()),JN([WN(!0),KN(!1)],ur.block()),JN([WN(!0),KN(!0),GN],ur.block()),JN([WN(!0),KN(!0)],ur.br()),JN([$N(!0),GN],ur.br()),JN([$N(!0)],ur.block()),JN([YN],ur.br()),JN([GN],ur.br()),JN([XN],ur.block()),JN([QN],ur.block())],[et,!(!er||!er.shiftKey)]).getOr(ur.none());switch(oi(et)){case"linebreak":ea.fold(n,n,_);break;case"block":ea.fold(o,o,_);break;case"invert":ea.fold(o,n,_);break;default:ea.fold(n,o,_)}},us=xt(),ud=us.os.isiOS()&&us.browser.isSafari(),oR=(et,er)=>{var ea;er.isDefaultPrevented()||(er.preventDefault(),(ea=et.undoManager).typing&&(ea.typing=!1,ea.add()),et.undoManager.transact(()=>{eR(et,er)}))},uc=xt(),sR=et=>et.stopImmediatePropagation(),aR=et=>et.keyCode===lH.PAGE_UP||et.keyCode===lH.PAGE_DOWN,iR=(et,er,ea)=>{ea&&!et.get()?er.on("NodeChange",sR,!0):!ea&&et.get()&&er.off("NodeChange",sR),et.set(ea)},lR=(et,er)=>{let ea=er.container(),ei=er.offset();return rt(ea)?(ea.insertData(ei,et),I.some(Vi(ea,ei+et.length))):iu(er).map(ea=>{let ei=vn(et);return er.isAtEnd()?ho(ea,ei):po(ea,ei),Vi(ei.dom,et.length)})},uu=T(lR,"\xa0"),uf=T(lR," "),uR=et=>er=>{et.selection.setRng(er.toRange()),et.nodeChanged()},mR=et=>{let er=Vi.fromRangeStart(et.selection.getRng()),ea=pn(et.getBody());if(et.selection.isCollapsed()){let ei=T(Ch,et),es=Vi.fromRangeStart(et.selection.getRng());return iE(ei,et.getBody(),es).bind(et=>et.fold(et=>lL(ea.dom,Vi.before(et)),et=>lM(et),et=>lV(et),et=>lP(ea.dom,Vi.after(et)))).map(ei=>()=>{var es;return(es=et.schema,et=>Zp(ea,et,es)?uu(er):uf(er))(ei).each(uR(et))})}return I.none()},fR=et=>{var er,ea;return It(tJ.browser.isFirefox()&&et.selection.isEditable()&&(er=et.dom,ea=et.selection.getRng().startContainer,er.isEditable(er.getParent(ea,"summary"))),()=>{var er;let ea=pn(et.getBody());et.selection.isCollapsed()||et.getDoc().execCommand("Delete"),(Zp(ea,er=Vi.fromRangeStart(et.selection.getRng()),et.schema)?uu(er):uf(er)).each(uR(et))})},gR=et=>lf(et)?[{keyCode:lH.TAB,action:tk(Rk,et,!0)},{keyCode:lH.TAB,shiftKey:!0,action:tk(Rk,et,!1)}]:[],pR=et=>{if(et.addShortcut("Meta+P","","mcePrint"),QS(et),XC(et))return $a(null);{let er,ea;let ei=o_(et);return(et=>{et.on("beforeinput",er=>{et.selection.isEditable()&&!$(er.getTargetRanges(),er=>!Og(et.dom,er))||er.preventDefault()})})(et),(et=>{et.on("keyup compositionstart",T($_,et))})(et),((et,er)=>{et.on("keydown",ea=>{ea.isDefaultPrevented()||((et,er,ea)=>{let ei=tJ.os.isMacOS()||tJ.os.isiOS();nk([{keyCode:lH.RIGHT,action:tk(W_,et,!0)},{keyCode:lH.LEFT,action:tk(W_,et,!1)},{keyCode:lH.UP,action:tk(K_,et,!1)},{keyCode:lH.DOWN,action:tk(K_,et,!0)},...ei?[{keyCode:lH.UP,action:tk(G_,et,!1),metaKey:!0,shiftKey:!0},{keyCode:lH.DOWN,action:tk(G_,et,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:lH.RIGHT,action:tk(Ek,et,!0)},{keyCode:lH.LEFT,action:tk(Ek,et,!1)},{keyCode:lH.UP,action:tk(_k,et,!1)},{keyCode:lH.DOWN,action:tk(_k,et,!0)},{keyCode:lH.UP,action:tk(_k,et,!1)},{keyCode:lH.UP,action:tk(J_,et,!1)},{keyCode:lH.DOWN,action:tk(J_,et,!0)},{keyCode:lH.RIGHT,action:tk(rk,et,!0)},{keyCode:lH.LEFT,action:tk(rk,et,!1)},{keyCode:lH.UP,action:tk(sk,et,!1)},{keyCode:lH.DOWN,action:tk(sk,et,!0)},{keyCode:lH.RIGHT,action:tk(t_,et,er,!0)},{keyCode:lH.LEFT,action:tk(t_,et,er,!1)},{keyCode:lH.RIGHT,ctrlKey:!ei,altKey:ei,action:tk(ce,et,er)},{keyCode:lH.LEFT,ctrlKey:!ei,altKey:ei,action:tk(ct,et,er)},{keyCode:lH.UP,action:tk(Q_,et,!1)},{keyCode:lH.DOWN,action:tk(Q_,et,!0)}],ea).each(et=>{ea.preventDefault()})})(et,er,ea)})})(et,ei),er=!1,et.on("keydown",ea=>{er=ea.keyCode===lH.BACKSPACE,ea.isDefaultPrevented()||((et,er,ea)=>{let ei=ea.keyCode===lH.BACKSPACE?"deleteContentBackward":"deleteContentForward",es=et.selection.isCollapsed(),ed=es?"character":"selection",a=et=>es?et?"word":"line":"selection";ok([{keyCode:lH.BACKSPACE,action:tk(T_,et)},{keyCode:lH.BACKSPACE,action:tk(Ux,et,!1)},{keyCode:lH.DELETE,action:tk(Ux,et,!0)},{keyCode:lH.BACKSPACE,action:tk(Ox,et,!1)},{keyCode:lH.DELETE,action:tk(Ox,et,!0)},{keyCode:lH.BACKSPACE,action:tk(d_,et,er,!1)},{keyCode:lH.DELETE,action:tk(d_,et,er,!0)},{keyCode:lH.BACKSPACE,action:tk(ib,et,!1)},{keyCode:lH.DELETE,action:tk(ib,et,!0)},{keyCode:lH.BACKSPACE,action:tk(iN,et,!1,ed)},{keyCode:lH.DELETE,action:tk(iN,et,!0,ed)},...c9?[{keyCode:lH.BACKSPACE,altKey:!0,action:tk(iN,et,!1,a(!0))},{keyCode:lH.DELETE,altKey:!0,action:tk(iN,et,!0,a(!0))},{keyCode:lH.BACKSPACE,metaKey:!0,action:tk(iN,et,!1,a(!1))}]:[{keyCode:lH.BACKSPACE,ctrlKey:!0,action:tk(iN,et,!1,a(!0))},{keyCode:lH.DELETE,ctrlKey:!0,action:tk(iN,et,!0,a(!0))}],{keyCode:lH.BACKSPACE,action:tk(zx,et,!1)},{keyCode:lH.DELETE,action:tk(zx,et,!0)},{keyCode:lH.BACKSPACE,action:tk(x_,et,!1)},{keyCode:lH.DELETE,action:tk(x_,et,!0)},{keyCode:lH.BACKSPACE,action:tk(_x,et,!1)},{keyCode:lH.DELETE,action:tk(_x,et,!0)},{keyCode:lH.BACKSPACE,action:tk(wx,et,!1)},{keyCode:lH.DELETE,action:tk(wx,et,!0)},{keyCode:lH.BACKSPACE,action:tk(v_,et,!1)},{keyCode:lH.DELETE,action:tk(v_,et,!0)}],ea).filter(er=>et.selection.isEditable()).each(er=>{ea.preventDefault(),c8(et,ei).isDefaultPrevented()||(er(),c3(et,ei))})})(et,ei,ea)}),et.on("keyup",ea=>{var ei;ea.isDefaultPrevented()||(ei=er,nk([{keyCode:lH.BACKSPACE,action:tk(Fx,et)},{keyCode:lH.DELETE,action:tk(Fx,et)},...c9?[{keyCode:lH.BACKSPACE,altKey:!0,action:tk(C_,et)},{keyCode:lH.DELETE,altKey:!0,action:tk(C_,et)},...ei?[{keyCode:c4?224:91,action:tk(C_,et)}]:[]]:[{keyCode:lH.BACKSPACE,ctrlKey:!0,action:tk(C_,et)},{keyCode:lH.DELETE,ctrlKey:!0,action:tk(C_,et)}]],ea)),er=!1}),ea=I.none(),et.on("keydown",er=>{er.keyCode===lH.ENTER&&(ud&&(et=>{if(!et.collapsed)return!1;let er=et.startContainer;if(rt(er)){let ea=er.data.charAt(et.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(ea)}return!1})(et.selection.getRng())?(ea=I.some(et.selection.getBookmark()),et.undoManager.add()):oR(et,er))}),et.on("keyup",er=>{er.keyCode===lH.ENTER&&ea.each(()=>{et.undoManager.undo(),ea.fold(_,er=>et.selection.moveToBookmark(er)),oR(et,er),ea=I.none()})}),(et=>{et.on("keydown",er=>{er.isDefaultPrevented()||((et,er)=>{ok([{keyCode:lH.SPACEBAR,action:tk(mR,et)},{keyCode:lH.SPACEBAR,action:tk(fR,et)}],er).each(ea=>{er.preventDefault(),c8(et,"insertText",{data:" "}).isDefaultPrevented()||(ea(),c3(et,"insertText",{data:" "}))})})(et,er)})})(et),(et=>{et.on("input",er=>{er.isComposing||(et=>{let er=pn(et.getBody());et.selection.isCollapsed()&&ih(er,Vi.fromRangeStart(et.selection.getRng()),et.schema).each(er=>{et.selection.setRng(er.toRange())})})(et)})})(et),(et=>{et.on("keydown",er=>{er.isDefaultPrevented()||((et,er)=>{nk([...gR(et)],er).each(et=>{er.preventDefault()})})(et,er)})})(et),((et,er)=>{et.on("keydown",ea=>{ea.isDefaultPrevented()||((et,er,ea)=>{let ei=tJ.os.isMacOS()||tJ.os.isiOS();nk([{keyCode:lH.END,action:tk(Y_,et,!0)},{keyCode:lH.HOME,action:tk(Y_,et,!1)},...ei?[]:[{keyCode:lH.HOME,action:tk(G_,et,!1),ctrlKey:!0,shiftKey:!0},{keyCode:lH.END,action:tk(G_,et,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:lH.END,action:tk(ak,et,!0)},{keyCode:lH.HOME,action:tk(ak,et,!1)},{keyCode:lH.END,action:tk(a_,et,!0,er)},{keyCode:lH.HOME,action:tk(a_,et,!1,er)}],ea).each(et=>{ea.preventDefault()})})(et,er,ea)})})(et,ei),((et,er)=>{if(uc.os.isMacOS())return;let ea=$a(!1);et.on("keydown",er=>{aR(er)&&iR(ea,et,!0)}),et.on("keyup",ei=>{ei.isDefaultPrevented()||nk([{keyCode:lH.PAGE_UP,action:tk(a_,et,!1,er)},{keyCode:lH.PAGE_DOWN,action:tk(a_,et,!0,er)}],ei),aR(ei)&&ea.get()&&(iR(ea,et,!1),et.nodeChanged())})})(et,ei),ei}};let hR=class hR{constructor(et){let er;this.lastPath=[],this.editor=et;let ea=this;"onselectionchange"in et.getDoc()||et.on("NodeChange click mouseup keyup focus",ea=>{let ei=et.selection.getRng(),es={startContainer:ei.startContainer,startOffset:ei.startOffset,endContainer:ei.endContainer,endOffset:ei.endOffset};"nodechange"!==ea.type&&Af(es,er)||et.dispatch("SelectionChange"),er=es}),et.on("contextmenu",()=>{et.dispatch("SelectionChange")}),et.on("SelectionChange",()=>{let er=et.selection.getStart(!0);er&&am(et)&&!ea.isSameElementPath(er)&&et.dom.isChildOf(er,et.getBody())&&et.nodeChanged({selectionChange:!0})}),et.on("mouseup",er=>{!er.isDefaultPrevented()&&am(et)&&("IMG"===et.selection.getNode().nodeName?l1.setEditorTimeout(et,()=>{et.nodeChanged()}):et.nodeChanged())})}nodeChanged(et={}){let er;let ea=this.editor.selection;if(this.editor.initialized&&ea&&!ay(this.editor)&&!this.editor.mode.isReadOnly()){let ei=this.editor.getBody();(er=ea.getStart(!0)||ei).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(er,ei)||(er=ei);let es=[];this.editor.dom.getParent(er,et=>et===ei||(es.push(et),!1)),this.editor.dispatch("NodeChange",{...et,element:er,parents:es})}}isSameElementPath(et){let er;let ea=this.editor,ei=oe(ea.dom.getParents(et,eZ,ea.getBody()));if(ei.length===this.lastPath.length){for(er=ei.length;er>=0&&ei[er]===this.lastPath[er];er--);if(-1===er)return this.lastPath=ei,!0}return this.lastPath=ei,!1}};let uy=ui("image"),uN=ui("event"),yR=et=>er=>{er[uN]=et},uw=yR(0),uI=yR(2),uB=yR(1),ER=et=>I.from(et[uN]).exists(et=>0===et),uD=ui("mode"),kR=et=>er=>{er[uD]=et},SR=(et,er)=>kR(er)(et),uP=kR(0),uL=kR(2),uM=kR(1),TR=et=>er=>I.from(er[uD]).exists(er=>er===et),uV=TR(0),uF=TR(1),uU=["none","copy","link","move"],uH=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],LR=()=>{let et=new window.DataTransfer,er="move",ea="all",ei={get dropEffect(){return er},set dropEffect(e){H(uU,e)&&(er=e)},get effectAllowed(){return ea},set effectAllowed(e){ER(ei)&&H(uH,e)&&(ea=e)},get items(){var es;return{...es=et.items,get length(){return es.length},add:(et,er)=>{if(uV(ei)){if(!e$(et))return es.add(et);if(!eX(er))return es.add(et,er)}return null},remove:et=>{uV(ei)&&es.remove(et)},clear:()=>{uV(ei)&&es.clear()}}},get files(){return uF(ei)?Object.freeze({length:0,item:et=>null}):et.files},get types(){return et.types},setDragImage:(er,ea,es)=>{uV(ei)&&(ei[uy]={image:er,x:ea,y:es},et.setDragImage(er,ea,es))},getData:er=>uF(ei)?"":et.getData(er),setData:(er,ea)=>{uV(ei)&&et.setData(er,ea)},clearData:er=>{uV(ei)&&et.clearData(er)}};return uP(ei),ei},MR=(et,er)=>et.setData("text/html",er),uz="x-tinymce/html",uj=N(uz),u$="<!-- "+uz+" -->",zR=et=>u$+et,jR=et=>-1!==et.indexOf(u$),uq="%MCEPASTEBIN%",$R=et=>et.dom.get("mcepastebin"),qR=et=>C(et)&&"mcepastebin"===et.id,VR=et=>et===uq,WR=(et,er)=>(tQ.each(er,er=>{et=u(er,RegExp)?et.replace(er,""):et.replace(er[0],er[1])}),et),KR=et=>WR(et,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(et,er,ea)=>er||ea?"\xa0":" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),YR=(et,er)=>({content:et,cancelled:er}),GR=(et,er)=>(et.insertContent(er,{merge:aZ(et),paste:!0}),!0),XR=et=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(et),QR=(et,er,ea)=>!(et.selection.isCollapsed()||!XR(er))&&(et.undoManager.extra(()=>{ea(et,er)},()=>{et.execCommand("mceInsertLink",!1,er)}),!0),JR=(et,er,ea)=>!!(XR(er)&&$(pc(et),et=>$e(er.toLowerCase(),`.${et.toLowerCase()}`)))&&(et.undoManager.extra(()=>{ea(et,er)},()=>{et.insertContent('<img src="'+er+'">')}),!0),uW=(ei=0,()=>"mceclip"+ei++),eA=et=>{let er=LR();return MR(er,et),uL(er),er},tA=(et,er,ea,ei,es)=>{let ed=((et,er,ea)=>{let ei=et.dispatch("PastePreProcess",{content:er,internal:ea}),es=((et,er)=>{let ea=bC({sanitize:ld(et),sandbox_iframes:lk(et)},et.schema);ea.addNodeFilter("meta",et=>{tQ.each(et,et=>{et.remove()})});let ei=ea.parse(er,{forced_root_block:!1,isRootContent:!0});return up({validate:!0},et.schema).serialize(ei)})(et,ei.content);return et.hasEventListeners("PastePostProcess")&&!ei.isDefaultPrevented()?((et,er,ea)=>{let ei=et.dom.create("div",{style:"display:none"},er),es=et.dispatch("PastePostProcess",{node:ei,internal:ea});return YR(es.node.innerHTML,es.isDefaultPrevented())})(et,es,ea):YR(es,ei.isDefaultPrevented())})(et,er,ea);if(!ed.cancelled){let er=ed.content,n=()=>{ei||!a0(et)?GR(et,er):tQ.each([QR,JR,GR],ea=>!ea(et,er,GR))};es?c8(et,"insertFromPaste",{dataTransfer:eA(er)}).isDefaultPrevented()||(n(),c3(et,"insertFromPaste")):n()}},nA=(et,er,ea,ei)=>{let es=ea||jR(er);tA(et,er.replace(u$,""),es,!1,ei)},oA=(et,er,ea)=>{let ei=et.dom.encode(er).replace(/\r\n/g,"\n"),es=((et,er,ea)=>{let ei=et.split(/\n\n/),es=((et,er)=>{let ea="<"+et,ei=Ce(er,(et,er)=>er+'="'+r4.encodeAllRaw(et)+'"');return ei.length&&(ea+=" "+ei.join(" ")),ea+">"})(er,ea),ed="</"+er+">",ec=q(ei,et=>et.split(/\n/).join("<br />"));return 1===ec.length?ec[0]:q(ec,et=>es+et+ed).join("")})(ls(ei,a2(et)),oa(et),ol(et));tA(et,es,!1,!0,ea)},rA=et=>{let er={};if(et&&et.types)for(let ea=0;ea<et.types.length;ea++){let ei=et.types[ea];try{er[ei]=et.getData(ei)}catch(et){er[ei]=""}}return er},sA=(et,er)=>er in et&&et[er].length>0,aA=et=>sA(et,"text/html")||sA(et,"text/plain"),iA=(et,er,ea)=>{let ei="paste"===er.type?er.clipboardData:er.dataTransfer;if(aY(et)&&ei){let es=((et,er)=>{let ea=er.items?te(e3(er.items),et=>"file"===et.kind?[et.getAsFile()]:[]):[],ei=er.files?e3(er.files):[];return Y(ea.length>0?ea:ei,(et=>{let er=pc(et);return et=>He(et.type,"image/")&&$(er,er=>(et=>{let er=et.toLowerCase(),ea={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return tQ.hasOwn(ea,er)?"image/"+ea[er]:"image/"+er})(er)===et.type)})(et))})(et,ei);if(es.length>0)return er.preventDefault(),Promise.all(q(es,et=>Gv(et).then(er=>({file:et,uri:er})))).then(er=>{ea&&et.selection.setRng(ea),V(er,er=>{((et,er)=>{Kv(er.uri).each(({data:ea,type:ei,base64Encoded:es})=>{let ed=es?ea:btoa(ea),ec=er.file,ev=et.editorUpload.blobCache,eC=ev.getByData(ed,ei),eI=null!=eC?eC:((et,er,ea,ei)=>{let es=uW(),ed=oS(et)&&C(ea.name),ec=ed?((et,er)=>{let ea=er.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return C(ea)?et.dom.encode(ea[1]):void 0})(et,ea.name):es,ev=ed?ea.name:void 0,eC=er.create(es,ea,ei,ec,ev);return er.add(eC),eC})(et,ev,ec,ed);nA(et,`<img src="${eI.blobUri()}">`,!1,!0)})})(et,er)})}),!0}return!1},lA=(et,er,ea,ei,es)=>{var ed;let ec=KR(ea),ev=sA(er,uj())||jR(ea),eC=!ev&&(ed=ec,!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(ed)),eI=XR(ec);(VR(ec)||!ec.length||eC&&!eI)&&(ei=!0),(ei||eI)&&(ec=sA(er,"text/plain")&&eC?er["text/plain"]:(et=>{let er=ua(),ea=bC({},er),ei="",es=er.getVoidElements(),ed=tQ.makeMap("script noscript style textarea video audio iframe object"," "),ec=er.getBlockElements(),i=et=>{let ea=et.name;if("br"!==ea){if("wbr"!==ea){if(es[ea]&&(ei+=" "),ed[ea])ei+=" ";else{if(3===et.type&&(ei+=et.value),!(et.name in er.getVoidElements())){let er=et.firstChild;if(er)do i(er);while(er=er.next)}ec[ea]&&et.next&&(ei+="\n","p"===ea&&(ei+="\n"))}}}else ei+="\n"};return et=WR(et,[/<!\[[^\]]+\]>/g]),i(ea.parse(et)),ei})(ec)),VR(ec)||(ei?oA(et,ec,es):nA(et,ec,ev,es))},dA=(et,er,ea)=>{let ei;et.on("keydown",et=>{(lH.metaKeyPressed(et)&&86===et.keyCode||et.shiftKey&&45===et.keyCode)&&!et.isDefaultPrevented()&&(ei=et.shiftKey&&86===et.keyCode)}),et.on("paste",es=>{var ed,ec;if(es.isDefaultPrevented()||tJ.os.isAndroid()&&0===(null===(ec=null===(ed=es.clipboardData)||void 0===ed?void 0:ed.items)||void 0===ec?void 0:ec.length))return;let ev="text"===ea.get()||ei;ei=!1;let eC=rA(es.clipboardData);!aA(eC)&&iA(et,es,er.getLastRng()||et.selection.getRng())||(sA(eC,"text/html")?(es.preventDefault(),lA(et,eC,eC["text/html"],ev,!0)):sA(eC,"text/plain")&&sA(eC,"text/uri-list")?(es.preventDefault(),lA(et,eC,eC["text/plain"],ev,!0)):(er.create(),l1.setEditorTimeout(et,()=>{let ea=er.getHtml();er.remove(),lA(et,eC,ea,ev,!1)},0)))}),(et=>{let t=et=>He(et,"webkit-fake-url"),n=et=>He(et,"data:");et.parser.addNodeFilter("img",(er,ea,ei)=>{var es;if(!aY(et)&&!0===(null===(es=ei.data)||void 0===es?void 0:es.paste))for(let ea of er){let er=ea.attr("src");e$(er)&&!ea.attr("data-mce-object")&&er!==tJ.transparentSrc&&(t(er)||!a3(et)&&n(er))&&ea.remove()}})})(et)},cA=(et,er,ea,ei)=>{((et,er,ea)=>{if(!et)return!1;try{return et.clearData(),et.setData("text/html",er),et.setData("text/plain",ea),et.setData(uj(),er),!0}catch(et){return!1}})(et.clipboardData,er.html,er.text)?(et.preventDefault(),ei()):ea(er.html,ei)},uA=et=>(er,ea)=>{let{dom:ei,selection:es}=et,ed=ei.create("div",{contenteditable:"false","data-mce-bogus":"all"}),ec=ei.create("div",{contenteditable:"true"},er);ei.setStyles(ed,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),ed.appendChild(ec),ei.add(et.getBody(),ed);let ev=es.getRng();ec.focus();let eC=ei.createRng();eC.selectNodeContents(ec),es.setRng(eC),l1.setEditorTimeout(et,()=>{es.setRng(ev),ei.remove(ed),ea()},0)},mA=et=>({html:zR(et.selection.getContent({contextual:!0})),text:et.selection.getContent({format:"text"})}),fA=et=>!et.selection.isCollapsed()||!!et.dom.getParent(et.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",et.getBody()),gA=(et,er)=>{var ea,ei;return Uf.getCaretRangeFromPoint(null!==(ea=er.clientX)&&void 0!==ea?ea:0,null!==(ei=er.clientY)&&void 0!==ei?ei:0,et.getDoc())},pA=(et,er)=>{et.focus(),er&&et.selection.setRng(er)},uY=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,bA=et=>tQ.trim(et).replace(uY,Ca).toLowerCase(),vA=(et,er,ea)=>{let ei=aG(et);if(ea||"all"===ei||!aQ(et))return er;let es=ei?ei.split(/[, ]/):[];if(es&&"none"!==ei){let ea=et.dom,ei=et.selection.getNode();er=er.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(et,er,ed,ec)=>{let ev=ea.parseStyle(ea.decode(ed)),eC={};for(let et=0;et<es.length;et++){let er=ev[es[et]],ed=er,ec=ea.getStyle(ei,es[et],!0);/color/.test(es[et])&&(ed=bA(ed),ec=bA(ec)),ec!==ed&&(eC[es[et]]=er)}let eI=ea.serializeStyle(eC,"span");return eI?er+' style="'+eI+'"'+ec:er+ec})}else er=er.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return er=er.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(et,er,ea,ei)=>er+' style="'+ea+'"'+ei)},yA=et=>{let er=$a(!1),ea=$a(a1(et)?"text":"html"),ei=(et=>{let er=$a(null);return{create:()=>((et,er)=>{let{dom:ea,selection:ei}=et,es=et.getBody();er.set(ei.getRng());let ed=ea.add(et.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},uq);tJ.browser.isFirefox()&&ea.setStyle(ed,"left","rtl"===ea.getStyle(es,"direction",!0)?65535:-65535),ea.bind(ed,"beforedeactivate focusin focusout",et=>{et.stopPropagation()}),ed.focus(),ei.select(ed,!0)})(et,er),remove:()=>((et,er)=>{let ea=et.dom;if($R(et)){let ei;let es=er.get();for(;ei=$R(et);)ea.remove(ei),ea.unbind(ei);es&&et.selection.setRng(es)}er.set(null)})(et,er),getEl:()=>$R(et),getHtml:()=>(et=>{let er=et.dom,n=(et,ea)=>{et.appendChild(ea),er.remove(ea,!0)},[ea,...ei]=Y(et.getBody().childNodes,qR);V(ei,et=>{n(ea,et)});let es=er.select("div[id=mcepastebin]",ea);for(let et=es.length-1;et>=0;et--){let ei=er.create("div");ea.insertBefore(ei,es[et]),n(ei,es[et])}return ea?ea.innerHTML:""})(et),getLastRng:er.get}})(et);(tJ.browser.isChromium()||tJ.browser.isSafari())&&((et,er)=>{et.on("PastePreProcess",ea=>{ea.content=er(et,ea.content,ea.internal)})})(et,vA),et.addCommand("mceTogglePlainTextPaste",()=>{"text"===ea.get()?(ea.set("html"),sf(et,!1)):(ea.set("text"),sf(et,!0)),et.focus()}),et.addCommand("mceInsertClipboardContent",(er,ea)=>{ea.html&&nA(et,ea.html,ea.internal,!1),ea.text&&oA(et,ea.text,!1)}),(et=>{let t=er=>ea=>{er(et,ea)},er=aK(et);eJ(er)&&et.on("PastePreProcess",t(er));let ea=aX(et);eJ(ea)&&et.on("PastePostProcess",t(ea))})(et),et.on("PreInit",()=>{et.on("cut",er=>{!er.isDefaultPrevented()&&fA(et)&&et.selection.isEditable()&&cA(er,mA(et),uA(et),()=>{if(tJ.browser.isChromium()||tJ.browser.isFirefox()){let er=et.selection.getRng();l1.setEditorTimeout(et,()=>{et.selection.setRng(er),et.execCommand("Delete")},0)}else et.execCommand("Delete")})}),et.on("copy",er=>{!er.isDefaultPrevented()&&fA(et)&&cA(er,mA(et),uA(et),_)}),aW(et)&&et.on("dragend dragover draggesture dragdrop drop drag",et=>{et.preventDefault(),et.stopPropagation()}),aY(et)||et.on("drop",et=>{let er=et.dataTransfer;er&&$(er.files,et=>/^image\//.test(et.type))&&et.preventDefault()}),et.on("drop",ea=>{if(ea.isDefaultPrevented())return;let ei=gA(et,ea);if(y(ei))return;let es=rA(ea.dataTransfer),ed=sA(es,uj());if((!aA(es)||(et=>{let er=et["text/plain"];return!!er&&0===er.indexOf("file://")})(es))&&iA(et,ea,ei))return;let ec=es[uj()],ev=ec||es["text/html"]||es["text/plain"],eC=((et,er,ea,ei)=>{let es=et.getParent(ea,et=>Ts(er,et));if(!eY(et.getParent(ea,"summary")))return!0;if(es&&Ee(ei,"text/html")){let et=(new DOMParser).parseFromString(ei["text/html"],"text/html").body;return!eY(et.querySelector(es.nodeName.toLowerCase()))}return!1})(et.dom,et.schema,ei.startContainer,es),eI=er.get();eI&&!eC||ev&&(ea.preventDefault(),l1.setEditorTimeout(et,()=>{et.undoManager.transact(()=>{(ec||eI&&eC)&&et.execCommand("Delete"),pA(et,ei);let er=KR(ev);es["text/html"]?nA(et,er,ed,!0):oA(et,er,!0)})}))}),et.on("dragstart",et=>{er.set(!0)}),et.on("dragover dragend",ea=>{aY(et)&&!er.get()&&(ea.preventDefault(),pA(et,gA(et,ea))),"dragend"===ea.type&&er.set(!1)}),(et=>{et.on("input",er=>{if("deleteByDrag"===er.inputType){let er=Y(et.dom.select("details"),et=>eY(et.querySelector("summary")));V(er,er=>{rc(er.firstChild)&&er.firstChild.remove();let ea=et.dom.create("summary");ea.appendChild(Tr().dom),er.prepend(ea)})}})})(et),dA(et,ei,ea)})},xA=et=>rC(et.dom),EA=et=>er=>_n(pn(et),er),_A=(et,er)=>Jn(pn(et),xA,EA(er)),kA=(et,er,ea)=>{let ei=new jo(et,er),es=ea?ei.next.bind(ei):ei.prev.bind(ei),ed=et;for(let er=ea?et:es();er&&!rc(er);er=es())ts(er)&&(ed=er);return ed},SA=et=>{let er=((et,er,ea)=>{let ei=Vi.fromRangeStart(et).getNode(),es=Jn(pn(ei),et=>ry(et.dom)||ea.isBlock(Ht(et)),EA(er)).getOr(pn(er)).dom,ed=kA(ei,es,!1),ec=kA(ei,es,!0),ev=document.createRange();return _A(ed,es).fold(()=>{rt(ed)?ev.setStart(ed,0):ev.setStartBefore(ed)},et=>ev.setStartBefore(et.dom)),_A(ec,es).fold(()=>{rt(ec)?ev.setEnd(ec,ec.data.length):ev.setEndAfter(ec)},et=>ev.setEndAfter(et.dom)),ev})(et.selection.getRng(),et.getBody(),et.schema);et.selection.setRng(Eb(er))};(eD=eU||(eU={})).Before="before",eD.After="after";let RA=(et,er)=>Math.abs(et.left-er),AA=(et,er)=>Math.abs(et.right-er),TA=(et,er)=>X(Y(et,et=>er>=et.top&&er<=et.bottom),(et,er)=>et.fold(()=>I.some(er),et=>{let ea=Math.min(er.left,et.left),ei=Math.min(er.top,et.top),es=Math.max(er.right,et.right),ed=Math.max(er.bottom,et.bottom);return I.some({top:ei,right:es,bottom:ed,left:ea,width:es-ea,height:ed-ei})}),I.none()).fold(()=>[[],et],er=>{let{pass:ea,fail:ei}=K(et,et=>((et,er)=>{let ea=Math.max(0,Math.min(et.bottom,er.bottom)-Math.max(et.top,er.top))/Math.min(et.height,er.height);return et.top<er.bottom&&et.bottom>er.top&&ea>.5})(et,er));return[ea,ei]}),OA=(et,er,ea)=>er>et.left&&er<et.right?0:Math.min(Math.abs(et.left-er),Math.abs(et.right-er)),BA=(et,er,ea,ei)=>{let r=et=>ts(et.node)?I.some(et):t4(et.node)?BA(e3(et.node.childNodes),er,ea,!1):I.none(),s=(et,es)=>{let ed=ae(et,(et,ei)=>es(et,er,ea)-es(ei,er,ea));return ue(ed,r).map(et=>ei&&!rt(et.node)&&ed.length>1?r(ed[1]).filter(ei=>2>Math.abs(es(et,er,ea)-es(ei,er,ea))&&rt(ei.node)).getOr(et):et)},[es,ed]=TA(IE(et),ea),{pass:ec,fail:ev}=K(ed,et=>et.top<ea);return s(es,OA).orThunk(()=>s(ev,Ei)).orThunk(()=>s(ec,Ei))},PA=(et,er,ea)=>((et,er,ea)=>{let ei=pn(et),es=Nn(ei),ed=Cn(es,er,ea).filter(et=>kn(ei,et)).getOr(ei);return((et,er,ea,ei)=>{let r=(er,es)=>{let ed=Y(er.dom.childNodes,O(et=>t4(et)&&et.classList.contains("mce-drag-container")));return es.fold(()=>BA(ed,ea,ei,!0),et=>{let er=Y(ed,er=>er!==et.dom);return BA(er,ea,ei,!0)}).orThunk(()=>(_n(er,et)?I.none():Tn(er)).bind(et=>r(et,I.some(er))))};return r(er,I.none())})(ei,ed,er,ea)})(et,er,ea).filter(et=>Mc(et.node)).map(et=>({node:et.node,position:RA(et,er)<AA(et,er)?eU.Before:eU.After})),DA=et=>{var er,ea;let ei=et.getBoundingClientRect(),es=et.ownerDocument,ed=es.documentElement,ec=es.defaultView;return{top:ei.top+(null!==(er=null==ec?void 0:ec.scrollY)&&void 0!==er?er:0)-ed.clientTop,left:ei.left+(null!==(ea=null==ec?void 0:ec.scrollX)&&void 0!==ea?ea:0)-ed.clientLeft}},LA=et=>({target:et,srcElement:et}),MA=(et,er,ea,ei)=>{let es=((et,er)=>{let ea=(et=>{let er=LR(),ea=I.from(et[uD]);return uL(et),uw(er),er.dropEffect=et.dropEffect,er.effectAllowed=et.effectAllowed,I.from(et[uy]).each(et=>er.setDragImage(et.image,et.x,et.y)),V(et.types,ea=>{"Files"!==ea&&er.setData(ea,et.getData(ea))}),V(et.files,et=>er.items.add(et)),I.from(et[uN]).each(et=>{((et,er)=>{yR(er)(et)})(er,et)}),ea.each(ea=>{SR(et,ea),SR(er,ea)}),er})(et);return"dragstart"===er?(uw(ea),uP(ea)):"drop"===er?(uI(ea),uL(ea)):(uB(ea),uM(ea)),ea})(ea,et);return eX(ei)?((et,er,ea)=>{let ei=B("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:et,composedPath:ei,initEvent:ei,preventDefault:_,stopImmediatePropagation:_,stopPropagation:_,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:ei,initMouseEvent:ei,getModifierState:ei,dataTransfer:ea,...LA(er)}})(et,er,es):{...ei,dataTransfer:es,type:et,...LA(er)}},uK=((...et)=>er=>{for(let ea=0;ea<et.length;ea++)if(et[ea](er))return!0;return!1})(rC,ry),UA=(et,er,ea,ei)=>{let es=et.dom,ed=er.cloneNode(!0);es.setStyles(ed,{width:ea,height:ei}),es.setAttrib(ed,"data-mce-selected",null);let ec=es.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return es.setStyles(ec,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:ea,height:ei}),es.setStyles(ed,{margin:0,boxSizing:"border-box"}),ec.appendChild(ed),ec},zA=(et,er)=>ea=>()=>{let ei="left"===et?ea.scrollX:ea.scrollY;ea.scroll({[et]:ei+er,behavior:"smooth"})},uX=zA("left",-32),uJ=zA("left",32),uG=zA("top",-32),uQ=zA("top",32),VA=et=>{et&&et.parentNode&&et.parentNode.removeChild(et)},WA=(et,er,ea,ei,es)=>{"dragstart"===er&&MR(ei,et.dom.getOuterHTML(ea));let ed=MA(er,ea,ei,es);return et.dispatch(er,ed)},KA=(et,er)=>{let ea=Qa((et,ea)=>{er._selectionOverrides.hideFakeCaret(),PA(er.getBody(),et,ea).fold(()=>er.selection.placeCaretAt(et,ea),ei=>{let es=er._selectionOverrides.showCaret(1,ei.node,ei.position===eU.Before,!1);es?er.selection.setRng(es):er.selection.placeCaretAt(et,ea)})},0);return er.on("remove",ea.cancel),ei=>et.on(es=>{var ed,ec,ev,eC,eI,eD;let eP=Math.max(Math.abs(ei.screenX-es.screenX),Math.abs(ei.screenY-es.screenY));if(!es.dragging&&eP>10){let et=WA(er,"dragstart",es.element,es.dataTransfer,ei);if(C(et.dataTransfer)&&(es.dataTransfer=et.dataTransfer),et.isDefaultPrevented())return;es.dragging=!0,er.focus()}if(es.dragging){let eP=ei.currentTarget===er.getDoc().documentElement,eL=(ev=er.inline?DA(er.getBody()):{left:0,top:0},eC=(et=>{let er=et.getBody();return et.inline?{left:er.scrollLeft,top:er.scrollTop}:{left:0,top:0}})(er),{pageX:(eD={pageX:(eI=((et,er)=>{if(er.target.ownerDocument!==et.getDoc()){let ea=DA(et.getContentAreaContainer()),ei=(et=>{let er=et.getBody(),ea=et.getDoc().documentElement,ei={left:er.scrollLeft,top:er.scrollTop},es={left:er.scrollLeft||ea.scrollLeft,top:er.scrollTop||ea.scrollTop};return et.inline?ei:es})(et);return{left:er.pageX-ea.left+ei.left,top:er.pageY-ea.top+ei.top}}return{left:er.pageX,top:er.pageY}})(er,ei)).left-ev.left+eC.left,pageY:eI.top-ev.top+eC.top}).pageX-es.relX,pageY:eD.pageY+5});ed=es.ghost,ec=er.getBody(),ed.parentNode!==ec&&ec.appendChild(ed),((et,er,ea,ei,es,ed,ec,ev,eC,eI,eD,eP)=>{let eL=0,eM=0;et.style.left=er.pageX+"px",et.style.top=er.pageY+"px",er.pageX+ea>es&&(eL=er.pageX+ea-es),er.pageY+ei>ed&&(eM=er.pageY+ei-ed),et.style.width=ea-eL+"px",et.style.height=ei-eM+"px";let eV=eC.clientHeight,eF=eC.clientWidth,eU=ec+eC.getBoundingClientRect().top,eH=ev+eC.getBoundingClientRect().left;eD.on(et=>{et.intervalId.clear(),et.dragging&&eP&&(ec+8>=eV?et.intervalId.set(uQ(eI)):ec-8<=0?et.intervalId.set(uG(eI)):ev+8>=eF?et.intervalId.set(uJ(eI)):ev-8<=0?et.intervalId.set(uX(eI)):eU+16>=window.innerHeight?et.intervalId.set(uQ(window)):eU-16<=0?et.intervalId.set(uG(window)):eH+16>=window.innerWidth?et.intervalId.set(uJ(window)):eH-16<=0&&et.intervalId.set(uX(window)))})})(es.ghost,eL,es.width,es.height,es.maxX,es.maxY,ei.clientY,ei.clientX,er.getContentAreaContainer(),er.getWin(),et,eP),ea.throttle(ei.clientX,ei.clientY)}})},YA=(et,er,ea)=>{et.on(et=>{et.intervalId.clear(),et.dragging&&ea.fold(()=>WA(er,"dragend",et.element,et.dataTransfer),ea=>WA(er,"dragend",et.element,et.dataTransfer,ea))}),GA(et)},GA=et=>{et.on(et=>{et.intervalId.clear(),VA(et.ghost)}),et.clear()},XA=et=>{let er=Xa(),ea=za.DOM,ei=document,es=KA(er,et),i=ea=>YA(er,et,I.some(ea));et.on("mousedown",ea=>{var ei,es;if(0===ea.button){let ed=J(et.dom.getParents(ea.target),uK).getOr(null);if(C(ed)&&(ei=et.dom,es=et.getBody(),rC(ed)&&ed!==es&&ei.isEditable(ed.parentElement))){let ei=et.dom.getPos(ed),es=et.getBody(),ec=et.getDoc().documentElement;er.set({element:ed,dataTransfer:LR(),dragging:!1,screenX:ea.screenX,screenY:ea.screenY,maxX:(et.inline?es.scrollWidth:ec.offsetWidth)-2,maxY:(et.inline?es.scrollHeight:ec.offsetHeight)-2,relX:ea.pageX-ei.x,relY:ea.pageY-ei.y,width:ed.offsetWidth,height:ed.offsetHeight,ghost:UA(et,ed,ed.offsetWidth,ed.offsetHeight),intervalId:Ga(100)})}}}),et.on("mousemove",es),et.on("mouseup",ea=>{er.on(er=>{var ei,es,ed;if(er.intervalId.clear(),er.dragging){if(es=(et=>{let er=et.getSel();if(C(er)){let et=er.getRangeAt(0).startContainer;return rt(et)?et.parentNode:et}return null})(et.selection),ed=er.element,!y(es)&&es!==ed&&!et.dom.isChildOf(es,ed)&&et.dom.isEditable(es)){let es=null!==(ei=et.getDoc().elementFromPoint(ea.clientX,ea.clientY))&&void 0!==ei?ei:et.getBody();WA(et,"drop",es,er.dataTransfer,ea).isDefaultPrevented()||et.undoManager.transact(()=>{((et,er)=>{let ea=et.getParent(er.parentNode,et.isBlock);VA(er),ea&&ea!==et.getRoot()&&et.isEmpty(ea)&&Or(pn(ea))})(et.dom,er.element),(et=>{let er=et.getData("text/html");return""===er?I.none():I.some(er)})(er.dataTransfer).each(er=>et.insertContent(er)),et._selectionOverrides.hideFakeCaret()})}WA(et,"dragend",et.getBody(),er.dataTransfer,ea)}}),GA(er)}),ea.bind(ei,"mousemove",es),ea.bind(ei,"mouseup",i),et.on("remove",()=>{ea.unbind(ei,"mousemove",es),ea.unbind(ei,"mouseup",i)}),et.on("keydown",ea=>{ea.keyCode===lH.ESC&&YA(er,et,I.none())})},JA=(et,er)=>lb(et.getBody(),er),ZA=et=>{let er;let ea=et.selection,ei=et.dom,es=et.getBody(),ed=Pc(et,es,ei.isBlock,()=>Rg(et)),ec="sel-"+ei.uniqueId(),ev="data-mce-selected",l=et=>et!==es&&(rC(et)||rI(et))&&ei.isChildOf(et,es)&&ei.isEditable(et.parentNode),d=(er,ei,es,ec=!0)=>et.dispatch("ShowCaret",{target:ei,direction:er,before:es}).isDefaultPrevented()?null:(ec&&ea.scrollIntoView(ei,-1===er),ed.show(es,ei)),c=et=>Ur(et)||$r(et)||qr(et),u=et=>c(et.startContainer)||c(et.endContainer),m=er=>{let ea=et.schema.getVoidElements(),es=ei.createRng(),ed=er.startContainer,ec=er.startOffset,ev=er.endContainer,eC=er.endOffset;return Ee(ea,ed.nodeName.toLowerCase())?0===ec?es.setStartBefore(ed):es.setStartAfter(ed):es.setStart(ed,ec),Ee(ea,ev.nodeName.toLowerCase())?0===eC?es.setEndBefore(ev):es.setEndAfter(ev):es.setEnd(ev,eC),es},f=(ed,eC)=>{if(!ed)return null;if(ed.collapsed){if(!u(ed)){let et=eC?1:-1,er=au(et,es,ed),ea=er.getNode(!eC);if(C(ea)){if(Mc(ea))return d(et,ea,!!eC&&!er.isAtEnd(),!1);if(Fr(ea)&&rC(ea.nextSibling)){let et=ei.createRng();return et.setStart(ea,0),et.setEnd(ea,0),et}}let ec=er.getNode(eC);if(C(ec)){if(Mc(ec))return d(et,ec,!eC&&!er.isAtEnd(),!1);if(Fr(ec)&&rC(ec.previousSibling)){let et=ei.createRng();return et.setStart(ec,1),et.setEnd(ec,1),et}}}return null}let eI=ed.startContainer,eD=ed.startOffset,eP=ed.endOffset;if(rt(eI)&&0===eD&&rC(eI.parentNode)&&(eI=eI.parentNode,eD=ei.nodeIndex(eI),eI=eI.parentNode),!t4(eI))return null;if(eP===eD+1&&eI===ed.endContainer){let es=eI.childNodes[eD];if(l(es))return(es=>{let ed=es.cloneNode(!0),eC=et.dispatch("ObjectSelected",{target:es,targetClone:ed});if(eC.isDefaultPrevented())return null;let eI=((er,es)=>{let ed=pn(et.getBody()),ev=et.getDoc(),eC=to(ed,"#"+ec).getOrThunk(()=>{let et=hn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ev);return Jt(et,"id",ec),vo(ed,et),et}),eI=ei.createRng();wo(eC),Co(eC,[vn("\xa0",ev),pn(es),vn("\xa0",ev)]),eI.setStart(eC.dom.firstChild,1),eI.setEnd(eC.dom.lastChild,0),lo(eC,{top:ei.getPos(er,et.getBody()).y+"px"}),ag(eC);let eD=ea.getSel();return eD&&(eD.removeAllRanges(),eD.addRange(eI)),eI})(es,eC.targetClone),eD=pn(es);return V(Uo(pn(et.getBody()),`*[${ev}]`),et=>{_n(eD,et)||on(et,ev)}),ei.getAttrib(es,ev)||es.setAttribute(ev,"1"),er=es,p(),eI})(es)}return null},g=()=>{er&&er.removeAttribute(ev),to(pn(et.getBody()),"#"+ec).each(xo),er=null},p=()=>{ed.hide()};return XC(et)||(et.on("click",er=>{ei.isEditable(er.target)||(er.preventDefault(),et.focus())}),et.on("blur NewBlock",g),et.on("ResizeWindow FullscreenStateChanged",ed.reposition),et.on("tap",er=>{let ea=er.target,ei=JA(et,ea);rC(ei)?(er.preventDefault(),Sx(et,ei).each(f)):l(ea)&&Sx(et,ea).each(f)},!0),et.on("mousedown",er=>{let ed=er.target;if(ed!==es&&"HTML"!==ed.nodeName&&!ei.isChildOf(ed,es)||!((et,er,ea)=>{let ei=pn(et.getBody()),es=et.inline?ei:pn(Nn(ei).dom.documentElement),ed=((et,er,ea,ei)=>{let es=er.dom.getBoundingClientRect();return{x:ea-(et?es.left+er.dom.clientLeft+dz(er):0),y:ei-(et?es.top+er.dom.clientTop+dH(er):0)}})(et.inline,es,er,ea);return((et,er,ea)=>{let ei=dF(et),es=dU(et);return er>=0&&ea>=0&&er<=ei&&ea<=es})(es,ed.x,ed.y)})(et,er.clientX,er.clientY))return;g(),p();let ec=JA(et,ed);rC(ec)?(er.preventDefault(),Sx(et,ec).each(f)):PA(es,er.clientX,er.clientY).each(ei=>{var es;er.preventDefault(),(es=d(1,ei.node,ei.position===eU.Before,!1))&&ea.setRng(es),Vo(ec)?ec.focus():et.getBody().focus()})}),et.on("keypress",et=>{lH.modifierPressed(et)||rC(ea.getNode())&&et.preventDefault()}),et.on("GetSelectionRange",et=>{let ea=et.range;if(er){if(!er.parentNode)return void(er=null);(ea=ea.cloneRange()).selectNode(er),et.range=ea}}),et.on("SetSelectionRange",et=>{et.range=m(et.range);let er=f(et.range,et.forward);er&&(et.range=er)}),et.on("AfterSetSelectionRange",et=>{let er=et.range,ea=er.startContainer.parentElement;u(er)||t4(ea)&&"mcepastebin"===ea.id||p(),C(ea)&&ei.hasClass(ea,"mce-offscreen-selection")||g()}),XA(et),aP(et)&&(et=>{let t=er=>{if(!er.isDefaultPrevented()){let ea=er.dataTransfer;ea&&(H(ea.types,"Files")||ea.files.length>0)&&(er.preventDefault(),"drop"===er.type&&Lw(et,"Dropped file type is not supported"))}},n=er=>{xg(et,er.target)&&t(er)},o=()=>{let er=za.DOM,ea=et.dom,ei=document,es=et.inline?et.getBody():et.getDoc(),ed=["drop","dragover"];V(ed,et=>{er.bind(ei,et,n),ea.bind(es,et,t)}),et.on("remove",()=>{V(ed,et=>{er.unbind(ei,et,n),ea.unbind(es,et,t)})})};et.on("init",()=>{l1.setEditorTimeout(et,o,0)})})(et),(et=>{let er=Qa(()=>{if(!et.removed&&et.getBody().contains(document.activeElement)){let er=et.selection.getRng();if(er.collapsed){let ea=Nx(et,er,!1);et.selection.setRng(ea)}}},0);et.on("focus",()=>{er.throttle()}),et.on("blur",()=>{er.cancel()})})(et),(et=>{et.on("init",()=>{et.on("focusin",er=>{let ea=er.target;if(rI(ea)){let er=lb(et.getBody(),ea),ei=rC(er)?er:ea;et.selection.getNode()!==ei&&Sx(et,ei).each(er=>et.selection.setRng(er))}})})})(et)),{showCaret:d,showBlockCaretContainer:et=>{et.hasAttribute("data-mce-caret")&&(Vr(et),ea.scrollIntoView(et))},hideFakeCaret:p,destroy:()=>{ed.destroy(),er=null}}},eT=(et,er)=>{let ea=er;for(let er=et.previousSibling;rt(er);er=er.previousSibling)ea+=er.data.length;return ea},tT=(et,er,ea,ei,es)=>{if(rt(ea)&&(ei<0||ei>ea.data.length))return[];let ed=es&&rt(ea)?[eT(ea,ei)]:[ei],ec=ea;for(;ec!==er&&ec.parentNode;)ed.push(et.nodeIndex(ec,es)),ec=ec.parentNode;return ec===er?ed.reverse():[]},nT=(et,er,ea,ei,es,ed,ec=!1)=>({start:tT(et,er,ea,ei,ec),end:tT(et,er,es,ed,ec)}),oT=(et,er)=>{let ea=er.slice(),ei=ea.pop();return eG(ei)?X(ea,(et,er)=>et.bind(et=>I.from(et.childNodes[er])),I.some(et)).bind(et=>rt(et)&&(ei<0||ei>et.data.length)?I.none():I.some({node:et,offset:ei})):I.none()},rT=(et,er)=>oT(et,er.start).bind(({node:ea,offset:ei})=>oT(et,er.end).map(({node:et,offset:er})=>{let es=document.createRange();return es.setStart(ea,ei),es.setEnd(et,er),es})),sT=(et,er,ea)=>{if(er&&et.isEmpty(er)&&!ea(er)){let ei=er.parentNode;et.remove(er,rt(er.firstChild)&&ss(er.firstChild.data)),sT(et,ei,ea)}},aT=(et,er,ea,ei=!0)=>{let es=er.startContainer.parentNode,ed=er.endContainer.parentNode;er.deleteContents(),ei&&!ea(er.startContainer)&&(rt(er.startContainer)&&0===er.startContainer.data.length&&et.remove(er.startContainer),rt(er.endContainer)&&0===er.endContainer.data.length&&et.remove(er.endContainer),sT(et,es,ea),es!==ed&&sT(et,ed,ea))},iT=(et,er)=>I.from(et.dom.getParent(er.startContainer,et.dom.isBlock)),lT=(et,er,ea)=>{let ei=et.dynamicPatternsLookup({text:ea,block:er});return{...et,blockPatterns:Cl(ei).concat(et.blockPatterns),inlinePatterns:wl(ei).concat(et.inlinePatterns)}},dT=(et,er,ea,ei)=>{let es=et.createRng();return es.setStart(er,0),es.setEnd(ea,ei),es.toString()},cT=(et,er,ea)=>{((et,er,ea)=>{if(rt(et)&&0>=et.length)return I.some(Ak(et,0));{let er=hi(cb);return I.from(er.forwards(et,0,Ok(et),ea)).map(et=>Ak(et.container,0))}})(er,0,er).each(ei=>{var es;let ed=ei.container;Dk(ed,ea.start.length,er).each(ea=>{let ei=et.createRng();ei.setStart(ed,0),ei.setEnd(ea.container,ea.offset),aT(et,ei,et=>et===er)});let ec=pn(ed),ev=Cr(ec);/^\s[^\s]/.test(ev)&&(es=ev.slice(1),rL.set(ec,es))})},uT=(et,er)=>et.create("span",{"data-mce-type":"bookmark",id:er}),mT=(et,er)=>{let ea=et.createRng();return ea.setStartAfter(er.start),ea.setEndBefore(er.end),ea},fT=(et,er,ea)=>{let ei=rT(et.getRoot(),ea).getOrDie("Unable to resolve path range"),es=ei.startContainer,ed=ei.endContainer,ec=0===ei.endOffset?ed:ed.splitText(ei.endOffset),ev=0===ei.startOffset?es:es.splitText(ei.startOffset),eC=ev.parentNode;return{prefix:er,end:ec.parentNode.insertBefore(uT(et,er+"-end"),ec),start:eC.insertBefore(uT(et,er+"-start"),ev)}},gT=(et,er,ea)=>{sT(et,et.get(er.prefix+"-end"),ea),sT(et,et.get(er.prefix+"-start"),ea)},pT=et=>0===et.start.length,hT=(et,er,ea,ei)=>{let es=er.start;return Lk(et,ei.container,ei.offset,(et,er)=>{let ea=et.data.substring(0,er),ei=ea.lastIndexOf(es.charAt(es.length-1)),ed=ea.lastIndexOf(es);return -1!==ed?ed+es.length:-1!==ei?ei+1:-1},ea).bind(ei=>{var ed,ec;let ev=null!==(ec=null===(ed=ea.textContent)||void 0===ed?void 0:ed.indexOf(es))&&void 0!==ec?ec:-1;if(-1!==ev&&ei.offset>=ev+es.length){let er=et.createRng();return er.setStart(ei.container,ei.offset-es.length),er.setEnd(ei.container,ei.offset),I.some(er)}{let ed=ei.offset-es.length;return Pk(ei.container,ed,ea).map(er=>{let ea=et.createRng();return ea.setStart(er.container,er.offset),ea.setEnd(ei.container,ei.offset),ea}).filter(et=>et.toString()===es).orThunk(()=>hT(et,er,ea,Ak(ei.container,0)))}})},bT=(et,er,ea,ei)=>{let es=et.dom,ed=es.getRoot(),ec=ea.pattern,ev=ea.position.container,eC=ea.position.offset;return Pk(ev,eC-ea.pattern.end.length,er).bind(eI=>{let eD=nT(es,ed,eI.container,eI.offset,ev,eC,ei);if(pT(ec))return I.some({matches:[{pattern:ec,startRng:eD,endRng:eD}],position:eI});{let ev=vT(et,ea.remainingPatterns,eI.container,eI.offset,er,ei),eC=ev.getOr({matches:[],position:eI}),eP=eC.position,eL=((et,er,ea,ei,es,ed=!1)=>{if(0===er.start.length&&!ed){let er=et.createRng();return er.setStart(ea,ei),er.setEnd(ea,ei),I.some(er)}return Bk(ea,ei,es).bind(ea=>hT(et,er,es,ea).bind(et=>{var er;return ed&&(et.endContainer===ea.container&&et.endOffset===ea.offset||0===ea.offset&&(null===(er=et.endContainer.textContent)||void 0===er?void 0:er.length)===et.endOffset)?I.none():I.some(et)}))})(es,ec,eP.container,eP.offset,er,ev.isNone());return eL.map(et=>{let er=((et,er,ea,ei=!1)=>nT(et,er,ea.startContainer,ea.startOffset,ea.endContainer,ea.endOffset,ei))(es,ed,et,ei);return{matches:eC.matches.concat([{pattern:ec,startRng:er,endRng:eD}]),position:Ak(et.startContainer,et.startOffset)}})}})},vT=(et,er,ea,ei,es,ed)=>{let ec=et.dom;return Bk(ea,ei,ec.getRoot()).bind(ev=>{let eC=dT(ec,es,ea,ei);for(let ec=0;ec<er.length;ec++){let eI=er[ec];if(!$e(eC,eI.end))continue;let eD=er.slice();eD.splice(ec,1);let eP=bT(et,es,{pattern:eI,remainingPatterns:eD,position:ev},ed);if(eP.isNone()&&ei>0)return vT(et,er,ea,ei-1,es,ed);if(eP.isSome())return eP}return I.none()})},yT=(et,er,ea)=>{et.selection.setRng(ea),"inline-format"===er.type?V(er.format,er=>{et.formatter.apply(er)}):et.execCommand(er.cmd,!1,er.value)},CT=(et,er,ea,ei,es,ed)=>((et,er)=>{let ea=ne(et,et=>$(er,er=>et.pattern.start===er.pattern.start&&et.pattern.end===er.pattern.end));return et.length===er.length?ea?et:er:et.length>er.length?et:er})(vT(et,es.inlinePatterns,ea,ei,er,ed).fold(()=>[],et=>et.matches),vT(et,ae(es.inlinePatterns,(et,er)=>er.end.length-et.end.length),ea,ei,er,ed).fold(()=>[],et=>et.matches)),wT=(et,er)=>{if(0===er.length)return;let ea=et.dom,ei=et.selection.getBookmark(),es=((et,er)=>{let ea=ui("mce_textpattern"),ei=G(er,(er,ei)=>{let es=fT(et,ea+`_end${er.length}`,ei.endRng);return er.concat([{...ei,endMarker:es}])},[]);return G(ei,(er,es)=>{let ed=ei.length-er.length-1,ec=pT(es.pattern)?es.endMarker:fT(et,ea+`_start${ed}`,es.startRng);return er.concat([{...es,startMarker:ec}])},[])})(ea,er);V(es,er=>{let ei=ea.getParent(er.startMarker.start,ea.isBlock),r=et=>et===ei;pT(er.pattern)?((et,er,ea,ei)=>{let es=mT(et.dom,ea);aT(et.dom,es,ei),yT(et,er,es)})(et,er.pattern,er.endMarker,r):((et,er,ea,ei,es)=>{let ed=et.dom,ec=mT(ed,ei),ev=mT(ed,ea);aT(ed,ev,es),aT(ed,ec,es);let eC={prefix:ea.prefix,start:ea.end,end:ei.start},eI=mT(ed,eC);yT(et,er,eI)})(et,er.pattern,er.startMarker,er.endMarker,r),gT(ea,er.endMarker,r),gT(ea,er.startMarker,r)}),et.selection.moveToBookmark(ei)},xT=(et,er)=>{let ea=et.selection.getRng();return iT(et,ea).map(ei=>{var es;let ed=Math.max(0,ea.startOffset),ec=lT(er,ei,null!==(es=ei.textContent)&&void 0!==es?es:""),ev=CT(et,ei,ea.startContainer,ed,ec,!0),eC=((et,er,ea,ei)=>{var es;let ed=et.dom,ec=oa(et);if(!ed.is(er,ec))return[];let ev=null!==(es=er.textContent)&&void 0!==es?es:"";return((et,er)=>{let ea=ae(et,(et,er)=>er.start.length-et.start.length),ei=er.replace("\xa0"," ");return J(ea,et=>0===er.indexOf(et.start)||0===ei.indexOf(et.start))})(ea.blockPatterns,ev).map(et=>tQ.trim(ev).length===et.start.length?[]:[{pattern:et,range:nT(ed,ed.getRoot(),er,0,er,0,!0)}]).getOr([])})(et,ei,ec);return(eC.length>0||ev.length>0)&&(et.undoManager.add(),et.undoManager.extra(()=>{et.execCommand("mceInsertNewLine")},()=>{(et=>{et.insertContent("\uFEFF",{preserve_zwsp:!0})})(et),wT(et,ev),((et,er)=>{if(0===er.length)return;let ea=et.selection.getBookmark();V(er,er=>((et,er)=>{let ea=et.dom,ei=er.pattern,es=rT(ea.getRoot(),er.range).getOrDie("Unable to resolve path range");return iT(et,es).each(er=>{"block-format"===ei.type?((et,er)=>{let ea=er.get(et);return eW(ea)&&le(ea).exists(et=>Ee(et,"block"))})(ei.format,et.formatter)&&et.undoManager.transact(()=>{cT(et.dom,er,ei),et.formatter.apply(ei.format)}):"block-command"===ei.type&&et.undoManager.transact(()=>{cT(et.dom,er,ei),et.execCommand(ei.cmd,!1,ei.value)})}),!0})(et,er)),et.selection.moveToBookmark(ea)})(et,eC);let er=et.selection.getRng(),ea=Bk(er.startContainer,er.startOffset,et.dom.getRoot());et.execCommand("mceInsertNewLine"),ea.each(er=>{let ea=er.container;"\uFEFF"===ea.data.charAt(er.offset-1)&&(ea.deleteData(er.offset-1,1),sT(et.dom,ea.parentNode,er=>er===et.dom.getRoot()))})}),!0)}).getOr(!1)},ET=(et,er,ea)=>{for(let ei=0;ei<et.length;ei++)if(ea(et[ei],er))return!0;return!1},_T=et=>{let er=tQ.each,ea=lH.BACKSPACE,ei=lH.DELETE,es=et.dom,ed=et.selection,ec=et.parser,ev=tJ.browser,eC=ev.isFirefox(),eI=ev.isChromium()||ev.isSafari(),eD=tJ.deviceType.isiPhone()||tJ.deviceType.isiPad(),eP=tJ.os.isMacOS()||tJ.os.isiOS(),f=(er,ea)=>{try{et.getDoc().execCommand(er,!1,String(ea))}catch(et){}},g=et=>et.isDefaultPrevented(),p=()=>{et.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{et.inline||es.bind(et.getDoc(),"mousedown mouseup",er=>{let ea;if(er.target===et.getDoc().documentElement){if(ea=ed.getRng(),et.getBody().focus(),"mousedown"===er.type){if(Ur(ea.startContainer))return;ed.placeCaretAt(er.clientX,er.clientY)}else ed.setRng(ea)}})},b=()=>{Range.prototype.getClientRects||et.on("mousedown",er=>{if(!g(er)&&"HTML"===er.target.nodeName){let er=et.getBody();er.blur(),l1.setEditorTimeout(et,()=>{er.focus()})}})},v=()=>{let er=aV(et);et.on("click",ea=>{let ei=ea.target;/^(IMG|HR)$/.test(ei.nodeName)&&es.isEditable(ei)&&(ea.preventDefault(),et.selection.select(ei),et.nodeChanged()),"A"===ei.nodeName&&es.hasClass(ei,er)&&0===ei.childNodes.length&&es.isEditable(ei.parentNode)&&(ea.preventDefault(),ed.select(ei))})},y=()=>{et.on("keydown",et=>{if(!g(et)&&et.keyCode===ea&&ed.isCollapsed()&&0===ed.getRng().startOffset){let er=ed.getNode().previousSibling;if(er&&er.nodeName&&"table"===er.nodeName.toLowerCase())return et.preventDefault(),!1}return!0})},C=()=>{aC(et)||et.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),oX(et)||f("enableObjectResizing",!1)})},w=()=>{et.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=()=>{et.inline||et.on("keydown",()=>{document.activeElement===document.body&&et.getWin().focus()})},E=()=>{et.inline||(et.contentStyles.push("body {min-height: 150px}"),et.on("click",er=>{let ea;"HTML"===er.target.nodeName&&(ea=et.selection.getRng(),et.getBody().focus(),et.selection.setRng(ea),et.selection.normalize(),et.nodeChanged())}))},k=()=>{eP&&et.on("keydown",er=>{!lH.metaKeyPressed(er)||er.shiftKey||37!==er.keyCode&&39!==er.keyCode||(er.preventDefault(),et.selection.getSel().modify("move",37===er.keyCode?"backward":"forward","lineboundary"))})},S=()=>{et.on("click",et=>{let er=et.target;do if("A"===er.tagName)return void et.preventDefault();while(er=er.parentNode)}),et.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},N=()=>{et.on("init",()=>{et.dom.bind(et.getBody(),"submit",et=>{et.preventDefault()})})};return XC(et)?(eI&&(h(),v(),N(),p(),eD&&(x(),E(),S())),eC&&(b(),C(),w(),k())):(et.on("keydown",er=>{if(g(er)||er.keyCode!==lH.BACKSPACE)return;let ea=ed.getRng(),ei=ea.startContainer,ec=ea.startOffset,ev=es.getRoot(),eC=ei;if(ea.collapsed&&0===ec){for(;eC.parentNode&&eC.parentNode.firstChild===eC&&eC.parentNode!==ev;)eC=eC.parentNode;"BLOCKQUOTE"===eC.nodeName&&(et.formatter.toggle("blockquote",void 0,eC),(ea=es.createRng()).setStart(ei,0),ea.setEnd(ei,0),ed.setRng(ea))}}),(()=>{let t=et=>{let er=es.create("body"),ea=et.cloneContents();return er.appendChild(ea),ed.serializer.serialize(er,{format:"html"})};et.on("keydown",er=>{let ed=er.keyCode;if(!g(er)&&(ed===ei||ed===ea)&&et.selection.isEditable()){let ea=et.selection.isCollapsed(),ei=et.getBody();if(ea&&!gs(pn(ei))||!ea&&!(er=>{let ea=t(er),ei=es.createRng();return ei.selectNode(et.getBody()),ea===t(ei)})(et.selection.getRng()))return;er.preventDefault(),et.setContent(""),ei.firstChild&&es.isBlock(ei.firstChild)?et.selection.setCursorLocation(ei.firstChild,0):et.selection.setCursorLocation(ei,0),et.nodeChanged()}})})(),tJ.windowsPhone||et.on("keyup focusin mouseup",er=>{lH.modifierPressed(er)||(et=>{let er=et.getBody(),ea=et.selection.getRng();return ea.startContainer===ea.endContainer&&ea.startContainer===er&&0===ea.startOffset&&ea.endOffset===er.childNodes.length})(et)||ed.normalize()},!0),eI&&(h(),v(),et.on("init",()=>{f("DefaultParagraphSeparator",oa(et))}),N(),y(),ec.addNodeFilter("br",et=>{let er=et.length;for(;er--;)"Apple-interchange-newline"===et[er].attr("class")&&et[er].remove()}),eD?(x(),E(),S()):p()),eC&&(et.on("keydown",er=>{if(!g(er)&&er.keyCode===ea&&et.getBody().getElementsByTagName("hr").length&&ed.isCollapsed()&&0===ed.getRng().startOffset){let et=ed.getNode(),ea=et.previousSibling;if("HR"===et.nodeName)return es.remove(et),void er.preventDefault();ea&&ea.nodeName&&"hr"===ea.nodeName.toLowerCase()&&(es.remove(ea),er.preventDefault())}}),b(),(()=>{let n=()=>{let ea=es.getAttribs(ed.getStart().cloneNode(!1));return()=>{let ei=ed.getStart();ei!==et.getBody()&&(es.setAttrib(ei,"style",null),er(ea,et=>{ei.setAttributeNode(et.cloneNode(!0))}))}},o=()=>!ed.isCollapsed()&&es.getParent(ed.getStart(),es.isBlock)!==es.getParent(ed.getEnd(),es.isBlock);et.on("keypress",er=>{let ea;return!(!(g(er)||8!==er.keyCode&&46!==er.keyCode)&&o()&&(ea=n(),et.getDoc().execCommand("delete",!1),ea(),er.preventDefault(),1))}),es.bind(et.getDoc(),"cut",er=>{if(!g(er)&&o()){let er=n();l1.setEditorTimeout(et,()=>{er()})}})})(),C(),et.on("SetContent ExecCommand",et=>{"setcontent"!==et.type&&"mceInsertLink"!==et.command||er(es.select("a:not([data-mce-block])"),et=>{var er;let ea=et.parentNode,ei=es.getRoot();if((null==ea?void 0:ea.lastChild)===et){for(;ea&&!es.isBlock(ea);){if((null===(er=ea.parentNode)||void 0===er?void 0:er.lastChild)!==ea||ea===ei)return;ea=ea.parentNode}es.add(ea,"br",{"data-mce-bogus":1})}})}),w(),k(),y(),et.on("drop",er=>{var ea;let ei=null===(ea=er.dataTransfer)||void 0===ea?void 0:ea.getData("text/html");e$(ei)&&/^<img[^>]*>$/.test(ei)&&et.dispatch("dragend",new window.DragEvent("dragend",er))}))),{refreshContentEditable:_,isHidden:()=>{if(!eC||et.removed)return!1;let er=et.selection.getSel();return!er||!er.rangeCount||0===er.rangeCount}}},uZ=za.DOM,ST=et=>et.inline?et.getElement().nodeName.toLowerCase():void 0,NT=et=>ye(et,et=>!1===eX(et)),RT=et=>{let er=et.options.get,ea=et.editorUpload.blobCache;return NT({allow_conditional_comments:er("allow_conditional_comments"),allow_html_data_urls:er("allow_html_data_urls"),allow_svg_data_urls:er("allow_svg_data_urls"),allow_html_in_named_anchor:er("allow_html_in_named_anchor"),allow_script_urls:er("allow_script_urls"),allow_unsafe_link_target:er("allow_unsafe_link_target"),convert_unsafe_embeds:er("convert_unsafe_embeds"),convert_fonts_to_spans:er("convert_fonts_to_spans"),fix_list_elements:er("fix_list_elements"),font_size_legacy_values:er("font_size_legacy_values"),forced_root_block:er("forced_root_block"),forced_root_block_attrs:er("forced_root_block_attrs"),preserve_cdata:er("preserve_cdata"),inline_styles:er("inline_styles"),root_name:ST(et),sandbox_iframes:er("sandbox_iframes"),sanitize:er("xss_sanitization"),validate:!0,blob_cache:ea,document:et.getDoc()})},AT=et=>{let er=et.options.get;return NT({custom_elements:er("custom_elements"),extended_valid_elements:er("extended_valid_elements"),invalid_elements:er("invalid_elements"),invalid_styles:er("invalid_styles"),schema:er("schema"),valid_children:er("valid_children"),valid_classes:er("valid_classes"),valid_elements:er("valid_elements"),valid_styles:er("valid_styles"),verify_html:er("verify_html"),padd_empty_block_inline_children:er("format_empty_lines")})},TT=et=>et.inline?et.ui.styleSheetLoader:et.dom.styleSheetLoader,OT=et=>{let er=TT(et),ea=oW(et),ei=et.contentCSS,r=()=>{er.unloadAll(ei),et.inline||et.ui.styleSheetLoader.unloadAll(ea)},s=()=>{et.removed?r():et.on("remove",r)};if(et.contentStyles.length>0){let er="";tQ.each(et.contentStyles,et=>{er+=et+"\r\n"}),et.dom.addStyle(er)}let es=Promise.all(((et,er,ea)=>{let{pass:ei,fail:es}=K(er,et=>tinymce.Resource.has(Uw(et))),ed=ei.map(er=>{let ea=tinymce.Resource.get(Uw(er));return e$(ea)?Promise.resolve(TT(et).loadRawCss(er,ea)):Promise.resolve()}),ec=[...ed,TT(et).loadAll(es)];return et.inline?ec:ec.concat([et.ui.styleSheetLoader.loadAll(ea)])})(et,ei,ea)).then(s).catch(s),ed=oq(et);return ed&&((et,er)=>{let ea=pn(et.getBody()),ei=Vn(t9(ea)),es=bn("style");Jt(es,"type","text/css"),vo(es,vn(er)),vo(ei,es),et.on("remove",()=>{xo(es)})})(et,ed),es},BT=et=>{!0!==et.removed&&(XC(et)||et.load({initial:!0,format:"html"}),et.startContent=et.getContent({format:"raw"}),(et=>{et.bindPendingEventDelegates(),et.initialized=!0,(et=>{et.dispatch("Init")})(et),et.focus(!0),(et=>{let er=et.dom.getRoot();et.inline||am(et)&&et.selection.getStart(!0)!==er||lM(er).each(er=>{let ea=er.getNode(),ei=Qo(ea)?lM(ea).getOr(er):er;et.selection.setRng(ei.toRange())})})(et),et.nodeChanged({initial:!0});let er=aH(et);eJ(er)&&er.call(et,et),(et=>{let er=aj(et);er&&l1.setEditorTimeout(et,()=>{let ea;(ea=!0===er?et:et.editorManager.get(er))&&!ea.destroyed&&(ea.focus(),ea.selection.scrollIntoView())},100)})(et)})(et))},PT=et=>{let er=et.getElement(),ea=et.getDoc();et.inline&&(uZ.addClass(er,"mce-content-body"),et.contentDocument=ea=document,et.contentWindow=window,et.bodyElement=er,et.contentAreaContainer=er);let ei=et.getBody();ei.disabled=!0,et.readonly=aC(et),et._editableRoot=aI(et),!et.readonly&&et.hasEditableRoot()&&(et.inline&&"static"===uZ.getStyle(ei,"position",!0)&&(ei.style.position="relative"),ei.contentEditable="true"),ei.disabled=!1,et.editorUpload=Kw(et),et.schema=ua(AT(et)),et.dom=za(ea,{keep_values:!0,url_converter:et.convertURL,url_converter_scope:et,update_styles:!0,root_element:et.inline?et.getBody():null,collect:et.inline,schema:et.schema,contentCssCors:oV(et),referrerPolicy:oF(et),onSetAttrib:er=>{et.dispatch("SetAttrib",er)},force_hex_color:lx(et)}),et.parser=(et=>{let er=bC(RT(et),et.schema);return er.addAttributeFilter("src,href,style,tabindex",(er,ea)=>{let ei=et.dom,es="data-mce-"+ea,ed=er.length;for(;ed--;){let ec=er[ed],ev=ec.attr(ea);if(ev&&!ec.attr(es)){if(0===ev.indexOf("data:")||0===ev.indexOf("blob:"))continue;"style"===ea?((ev=ei.serializeStyle(ei.parseStyle(ev),ec.name)).length||(ev=null),ec.attr(es,ev),ec.attr(ea,ev)):"tabindex"===ea?(ec.attr(es,ev),ec.attr(ea,null)):ec.attr(es,et.convertURL(ev,ea,ec.name))}}}),er.addNodeFilter("script",et=>{let er=et.length;for(;er--;){let ea=et[er],ei=ea.attr("type")||"no/type";0!==ei.indexOf("mce-")&&ea.attr("type","mce-"+ei)}}),a7(et)&&er.addNodeFilter("#cdata",er=>{var ea;let ei=er.length;for(;ei--;){let es=er[ei];es.type=8,es.name="#comment",es.value="[CDATA["+et.dom.encode(null!==(ea=es.value)&&void 0!==ea?ea:"")+"]]"}}),er.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",er=>{let ea=er.length,ei=et.schema.getNonEmptyElements();for(;ea--;){let et=er[ea];et.isEmpty(ei)&&0===et.getAll("br").length&&et.append(new Wg("br",1))}}),er})(et),et.serializer=iw((et=>{let er=et.options.get;return{...RT(et),...AT(et),...NT({remove_trailing_brs:er("remove_trailing_brs"),pad_empty_with_br:er("pad_empty_with_br"),url_converter:er("url_converter"),url_converter_scope:er("url_converter_scope"),element_format:er("element_format"),entities:er("entities"),entity_encoding:er("entity_encoding"),indent:er("indent"),indent_after:er("indent_after"),indent_before:er("indent_before")})}})(et),et),et.selection=rw(et.dom,et.getWin(),et.serializer,et),et.annotator=Qm(et),et.formatter=rx(et),et.undoManager=ax(et),et._nodeChangeDispatcher=new hR(et),et._selectionOverrides=ZA(et),(et=>{let er=Xa(),ea=$a(!1),ei=Ja(er=>{et.dispatch("longpress",{...er,type:"longpress"}),ea.set(!0)},400);et.on("touchstart",et=>{P_(et).each(es=>{ei.cancel();let ed={x:es.clientX,y:es.clientY,target:et.target};ei.throttle(et),ea.set(!1),er.set(ed)})},!0),et.on("touchmove",es=>{ei.cancel(),P_(es).each(ei=>{er.on(es=>{((et,er)=>{let ea=Math.abs(et.clientX-er.x),ei=Math.abs(et.clientY-er.y);return ea>5||ei>5})(ei,es)&&(er.clear(),ea.set(!1),et.dispatch("longpresscancel"))})})},!0),et.on("touchend touchcancel",es=>{ei.cancel(),"touchcancel"!==es.type&&er.get().filter(et=>et.target.isEqualNode(es.target)).each(()=>{ea.get()?es.preventDefault():et.dispatch("tap",{...es,type:"tap"})})},!0)})(et),(et=>{et.on("click",er=>{et.dom.getParent(er.target,"details")&&er.preventDefault()})})(et),et.parser.addNodeFilter("details",er=>{let ea=lv(et);V(er,et=>{"expanded"===ea?et.attr("open","open"):"collapsed"===ea&&et.attr("open",null)})}),et.serializer.addNodeFilter("details",er=>{let ea=ly(et);V(er,et=>{"expanded"===ea?et.attr("open","open"):"collapsed"===ea&&et.attr("open",null)})}),(et=>{let er="contenteditable",ea=" "+tQ.trim(a9(et))+" ",ei=" "+tQ.trim(a6(et))+" ",es=z_(ea),ed=z_(ei),ec=a4(et);ec.length>0&&et.on("BeforeSetContent",er=>{((et,er,ea)=>{let ei=er.length,es=ea.content;if("raw"!==ea.format){for(;ei--;)es=es.replace(er[ei],j_(et,es,a6(et)));ea.content=es}})(et,ec,er)}),et.parser.addAttributeFilter("class",et=>{let ea=et.length;for(;ea--;){let ei=et[ea];es(ei)?ei.attr(er,"true"):ed(ei)&&ei.attr(er,"false")}}),et.serializer.addAttributeFilter(er,et=>{let ea=et.length;for(;ea--;){let ei=et[ea];(es(ei)||ed(ei))&&(ec.length>0&&ei.attr("data-mce-content")?(ei.name="#text",ei.type=3,ei.raw=!0,ei.value=ei.attr("data-mce-content")):ei.attr(er,null))}})})(et),XC(et)||((et=>{et.on("mousedown",er=>{er.detail>=3&&(er.preventDefault(),SA(et))})})(et),(et=>{let er=[",",".",";",":","!","?"],ea=[32],o=()=>{var er,ea;return er=a8(et),ea=a5(et),{inlinePatterns:wl(er),blockPatterns:Cl(er),dynamicPatternsLookup:ea}},r=()=>et.options.isSet("text_patterns_lookup");et.on("keydown",er=>{if(13===er.keyCode&&!lH.modifierPressed(er)&&et.selection.isCollapsed()){let ea=o();(ea.inlinePatterns.length>0||ea.blockPatterns.length>0||r())&&xT(et,ea)&&er.preventDefault()}},!0);let s=()=>{if(et.selection.isCollapsed()){let er=o();(er.inlinePatterns.length>0||r())&&((et,er)=>{let ea=et.selection.getRng();iT(et,ea).map(ei=>{let es=Math.max(0,ea.startOffset-1),ed=dT(et.dom,ei,ea.startContainer,es),ec=lT(er,ei,ed),ev=CT(et,ei,ea.startContainer,es,ec,!1);ev.length>0&&et.undoManager.transact(()=>{wT(et,ev)})})})(et,er)}};et.on("keyup",et=>{ET(ea,et,(et,er)=>et===er.keyCode&&!lH.modifierPressed(er))&&s()}),et.on("keypress",ea=>{ET(er,ea,(et,er)=>et.charCodeAt(0)===er.charCode)&&l1.setEditorTimeout(et,s)})})(et));let es=pR(et);B_(et,es),(et=>{et.on("NodeChange",T(F_,et))})(et),(et=>{var er;let ea=et.dom,ei=oa(et),es=null!==(er=oG(et))&&void 0!==er?er:"",s=(er,ed)=>{if((et=>{if(dx(et)){let er=et.keyCode;return!cx(et)&&(lH.metaKeyPressed(et)||et.altKey||er>=112&&er<=123||H(dQ,er))}return!1})(er))return;let ec=et.getBody(),ev=(!dx(er)||!!(cx(er)||"keyup"===er.type&&229===er.keyCode))&&((et,er,ea)=>{if(gs(pn(er),!1)){let ei=er.firstElementChild;return!ei||!et.getStyle(er.firstElementChild,"padding-left")&&!et.getStyle(er.firstElementChild,"padding-right")&&ea===ei.nodeName.toLowerCase()}return!1})(ea,ec,ei);(""!==ea.getAttrib(ec,dZ)!==ev||ed)&&(ea.setAttrib(ec,dZ,ev?es:null),ea.setAttrib(ec,"aria-placeholder",ev?es:null),((et,er)=>{et.dispatch("PlaceholderToggle",{state:er})})(et,ev),et.on(ev?"keydown":"keyup",s),et.off(ev?"keyup":"keydown",s))};Ye(es)&&et.on("init",er=>{s(er,!0),et.on("change SetContent ExecCommand",s),et.on("paste",er=>l1.setEditorTimeout(et,()=>s(er)))})})(et),yA(et);let ed=xe(et.plugins,"rtc").bind(et=>I.from(et.setup)).fold(()=>(et.rtcInstance=GC(et),I.none()),er=>(et.rtcInstance=(()=>{let et=N(null),er=N("");return{init:{bindEvents:_},undoManager:{beforeChange:_,add:et,undo:et,redo:et,clear:_,reset:_,hasUndo:eQ,hasRedo:eQ,transact:et,ignore:_,extra:_},formatter:{match:eQ,matchAll:N([]),matchNode:N(void 0),canApply:eQ,closest:er,apply:_,remove:_,toggle:_,formatChanged:N({unbind:_})},editor:{getContent:er,setContent:N({content:"",html:""}),insertContent:N(""),addVisual:_},selection:{getContent:er},autocompleter:{addDecoration:_,removeDecoration:_},raw:{getModel:N(I.none())}}})(),I.some(()=>er().then(er=>(et.rtcInstance=(et=>{let t=et=>eq(et)?et:{},{init:er,undoManager:ea,formatter:ei,editor:es,selection:ed,autocompleter:ec,raw:ev}=et;return{init:{bindEvents:er.bindEvents},undoManager:{beforeChange:ea.beforeChange,add:ea.add,undo:ea.undo,redo:ea.redo,clear:ea.clear,reset:ea.reset,hasUndo:ea.hasUndo,hasRedo:ea.hasRedo,transact:(et,er,ei)=>ea.transact(ei),ignore:(et,er)=>ea.ignore(er),extra:(et,er,ei,es)=>ea.extra(ei,es)},formatter:{match:(et,er,ea,es)=>ei.match(et,t(er),es),matchAll:ei.matchAll,matchNode:ei.matchNode,canApply:et=>ei.canApply(et),closest:et=>ei.closest(et),apply:(et,er,ea)=>ei.apply(et,t(er)),remove:(et,er,ea,es)=>ei.remove(et,t(er)),toggle:(et,er,ea)=>ei.toggle(et,t(er)),formatChanged:(et,er,ea,es,ed)=>ei.formatChanged(er,ea,es,ed)},editor:{getContent:et=>es.getContent(et),setContent:(et,er)=>({content:es.setContent(et,er),html:""}),insertContent:(et,er)=>(es.insertContent(et),""),addVisual:es.addVisual},selection:{getContent:(et,er)=>ed.getContent(er)},autocompleter:{addDecoration:ec.addDecoration,removeDecoration:ec.removeDecoration},raw:{getModel:()=>I.some(ev.getRawModel())}}})(er),er.rtc.isRemote)))));(et=>{let er=et.getDoc(),ea=et.getBody();(et=>{et.dispatch("PreInit")})(et),a$(et)||(er.body.spellcheck=!1,uZ.setAttrib(ea,"spellcheck","false")),et.quirks=_T(et),(et=>{et.dispatch("PostRender")})(et);let ei=oY(et);void 0!==ei&&(ea.dir=ei);let es=aq(et);es&&et.on("BeforeSetContent",et=>{tQ.each(es,er=>{et.content=et.content.replace(er,et=>"<!--mce:protected "+escape(et)+"-->")})}),et.on("SetContent",()=>{et.addVisual(et.getBody())}),et.on("compositionstart compositionend",er=>{et.composing="compositionstart"===er.type})})(et),ed.fold(()=>{let er=(et=>{let er=!1,ea=setTimeout(()=>{er||et.setProgressState(!0)},500);return()=>{clearTimeout(ea),er=!0,et.setProgressState(!1)}})(et);OT(et).then(()=>{BT(et),er()})},er=>{et.setProgressState(!0),OT(et).then(()=>{er().then(er=>{et.setProgressState(!1),BT(et),ZC(et)},er=>{et.notificationManager.open({type:"error",text:String(er)}),BT(et),ZC(et)})})})},u0=za.DOM,u1=za.DOM,IT=(et,er)=>({editorContainer:et,iframeContainer:er,api:{}}),FT=et=>{let er=et.getElement();return et.inline?IT(null):(et=>{let er=u1.create("div");return u1.insertAfter(er,et),IT(er,er)})(er)},UT=async et=>{var er;et.dispatch("ScriptsLoaded"),(et=>{let er=tQ.trim(oO(et)),ea=et.ui.registry.getAll().icons,ei={...dM.get("default").icons,...dM.get(er).icons};ge(ei,(er,ei)=>{Ee(ea,ei)||et.ui.registry.addIcon(ei,er)})})(et),(et=>{let er=o0(et);if(e$(er)){let ea=d$.get(er);et.theme=ea(et,d$.urls[er])||{},eJ(et.theme.init)&&et.theme.init(et,d$.urls[er]||et.documentBaseUrl.replace(/\/$/,""))}else et.theme={}})(et),(et=>{let er=o2(et),ea=dV.get(er);et.model=ea(et,dV.urls[er])})(et),(et=>{let er=[];V(aB(et),ea=>{((et,er,ea)=>{let ei=dj.get(ea),es=dj.urls[ea]||et.documentBaseUrl.replace(/\/$/,"");if(ea=tQ.trim(ea),ei&&-1===tQ.inArray(er,ea)){if(et.plugins[ea])return;try{let ed=ei(et,es)||{};et.plugins[ea]=ed,eJ(ed.init)&&(ed.init(et,es),er.push(ea))}catch(er){((et,er,ea)=>{let ei=nV.translate(["Failed to initialize plugin: {0}",er]);ef(et,"PluginLoadError",{message:ei}),Fw(ei,ea),Lw(et,ei)})(et,ea,er)}}})(et,er,ea.replace(/^\-/,""))})})(et);let ea=await (et=>{let er=et.getElement();return et.orgDisplay=er.style.display,e$(o0(et))?(et=>{let er=et.theme.renderUI;return er?er():FT(et)})(et):eJ(o0(et))?(et=>{let er=et.getElement(),ea=o0(et)(et,er);return ea.editorContainer.nodeType&&(ea.editorContainer.id=ea.editorContainer.id||et.id+"_parent"),ea.iframeContainer&&ea.iframeContainer.nodeType&&(ea.iframeContainer.id=ea.iframeContainer.id||et.id+"_iframecontainer"),ea.height=ea.iframeHeight?ea.iframeHeight:er.offsetHeight,ea})(et):FT(et)})(et);((et,er)=>{let ea={show:I.from(er.show).getOr(_),hide:I.from(er.hide).getOr(_),isEnabled:I.from(er.isEnabled).getOr(eZ),setEnabled:ea=>{et.mode.isReadOnly()||I.from(er.setEnabled).each(et=>et(ea))}};et.ui={...et.ui,...ea}})(et,I.from(ea.api).getOr({})),et.editorContainer=ea.editorContainer,et.contentCSS=et.contentCSS.concat(zw(et,o$(et)),zw(et,oW(et))),et.inline?PT(et):(((et,er)=>{let ea=et.translate("Rich Text Area"),ei=tn(pn(et.getElement()),"tabindex").bind(Xe),es=((et,er,ea,ei)=>{let es=bn("iframe");return ei.each(et=>Jt(es,"tabindex",et)),Zt(es,ea),Zt(es,{id:et+"_ifr",frameBorder:"0",allowTransparency:"true",title:er}),un(es,"tox-edit-area__iframe"),es})(et.id,ea,n5(et),ei).dom;es.onload=()=>{es.onload=null,et.dispatch("load")},et.contentAreaContainer=er.iframeContainer,et.iframeElement=es,et.iframeHTML=(et=>{let er=n6(et)+"<html><head>";n9(et)!==et.documentBaseUrl&&(er+='<base href="'+et.documentBaseURI.getURI()+'" />'),er+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let ea=n4(et),ei=n7(et),es=et.translate(aF(et));return ot(et)&&(er+='<meta http-equiv="Content-Security-Policy" content="'+ot(et)+'" />'),er+=`</head><body id="${ea}" class="mce-content-body ${ei}" data-id="${et.id}" aria-label="${es}"><br></body></html>`})(et),u0.add(er.iframeContainer,es)})(et,er={editorContainer:ea.editorContainer,iframeContainer:ea.iframeContainer}),er.editorContainer&&(er.editorContainer.style.display=et.orgDisplay,et.hidden=u0.isHidden(er.editorContainer)),et.getElement().style.display="none",u0.setAttrib(et.id,"aria-hidden","true"),et.getElement().style.visibility=et.orgVisibility,(et=>{let er=et.iframeElement,n=()=>{et.contentDocument=er.contentDocument,PT(et)};if(lc(et)||tJ.browser.isFirefox()){let er=et.getDoc();er.open(),er.write(et.iframeHTML),er.close(),n()}else{let ea=No(pn(er),"load",eZ,()=>{ea.unbind(),n()});er.srcdoc=et.iframeHTML}})(et))},u2=za.DOM,jT=et=>"-"===et.charAt(0),HT=(et,er,ea)=>I.from(er).filter(et=>Ye(et)&&!dM.has(et)).map(er=>({url:`${et.editorManager.baseURL}/icons/${er}/icons${ea}.js`,name:I.some(er)})),$T=(et,er)=>{let ea=Ha.ScriptLoader,o=()=>{!et.removed&&(et=>{let er=o0(et);return!e$(er)||C(d$.get(er))})(et)&&(et=>{let er=o2(et);return C(dV.get(er))})(et)&&UT(et)};((et,er)=>{let ea=o0(et);if(e$(ea)&&!jT(ea)&&!Ee(d$.urls,ea)){let ei=o1(et),es=ei?et.documentBaseURI.toAbsolute(ei):`themes/${ea}/theme${er}.js`;d$.load(ea,es).catch(()=>{Mw(et,"ThemeLoadError",Iw("theme",es,ea))})}})(et,er),((et,er)=>{let ea=o2(et);if("plugin"!==ea&&!Ee(dV.urls,ea)){let ei=o3(et),es=e$(ei)?et.documentBaseURI.toAbsolute(ei):`models/${ea}/model${er}.js`;dV.load(ea,es).catch(()=>{Mw(et,"ModelLoadError",Iw("model",es,ea))})}})(et,er),((et,er)=>{let ea=oU(er),ei=oH(er);if(!nV.hasCode(ea)&&"en"!==ea){let es=Ye(ei)?ei:`${er.editorManager.baseURL}/langs/${ea}.js`;et.add(es).catch(()=>{Mw(er,"LanguageLoadError",Iw("language",es,ea))})}})(ea,et),((et,er,ea)=>{let ei=HT(er,"default",ea),es=I.from(oB(er)).filter(Ye).map(et=>({url:et,name:I.none()})).orThunk(()=>HT(er,oO(er),""));V((et=>{let er=[],n=et=>{er.push(et)};for(let er=0;er<et.length;er++)et[er].each(n);return er})([ei,es]),ea=>{et.add(ea.url).catch(()=>{Mw(er,"IconsLoadError",Iw("icons",ea.url,ea.name.getOrUndefined()))})})})(ea,et,er),((et,er)=>{let n=(er,ea)=>{dj.load(er,ea).catch(()=>{Mw(et,"PluginLoadError",Iw("plugin",ea,er))})};ge(aD(et),(er,ea)=>{n(ea,er),et.options.set("plugins",aB(et).concat(ea))}),V(aB(et),et=>{!(et=tQ.trim(et))||dj.urls[et]||jT(et)||n(et,`plugins/${et}/plugin${er}.js`)})})(et,er),ea.loadQueue().then(o,o)},u3=xt().deviceType,u8=u3.isPhone(),u5=u3.isTablet(),KT=et=>{if(y(et))return[];{let er=eW(et)?et:et.split(/[ ,]/),ea=q(er,e4);return Y(ea,Ye)}},YT=(et,er)=>{var ea,ei;let es=((er,ea)=>{let ei={},es={};return ve(er,(er,ea)=>H(et,ea),be(ei),be(es)),{t:ei,f:es}})(er);return ea=es.t,ei=es.f,{sections:N(ea),options:N(ei)}},GT=(et,er)=>Ee(et.sections(),er),XT=(et,er)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:xe(et,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...er?{menubar:!1}:{}}),QT=(et,er)=>{var ea;let ei=null!==(ea=er.external_plugins)&&void 0!==ea?ea:{};return et&&et.external_plugins?tQ.extend({},et.external_plugins,ei):ei},JT=(et,er,ea,ei,es)=>{var ed;let ec=et?{mobile:XT(null!==(ed=es.mobile)&&void 0!==ed?ed:{},er)}:{},ev=YT(["mobile"],cy(ec,es)),eC=tQ.extend(ea,ei,ev.options(),et&&GT(ev,"mobile")?((et,er,ea={})=>{let ei=et.sections(),es=xe(ei,er).getOr({});return tQ.extend({},ea,es)})(ev,"mobile"):{},{external_plugins:QT(ei,ev.options())});return((et,er,ea,ei)=>{var es,ed;let ec=KT(ea.forced_plugins),ev=KT(ei.plugins),eC=GT(er,es="mobile")?er.sections()[es]:{},eI=(ed=eC.plugins?KT(eC.plugins):ev,et&&GT(er,"mobile")?ed:ev),eD=[...KT(ec),...KT(eI)];return tQ.extend(ei,{forced_plugins:ec,plugins:eD})})(et,ev,ei,eC)},ZT=et=>{(et=>{let t=er=>()=>{V("left,center,right,justify".split(","),ea=>{er!==ea&&et.formatter.remove("align"+ea)}),"none"!==er&&(et.formatter.toggle("align"+er,void 0),et.nodeChanged())};et.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})})(et),(et=>{let t=er=>()=>{let ea=et.selection,ei=ea.isCollapsed()?[et.dom.getParent(ea.getNode(),et.dom.isBlock)]:ea.getSelectedBlocks();return $(ei,ea=>C(et.formatter.matchNode(ea,er)))};et.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(et)},eO=(et,er)=>{let ea=et.selection,ei=et.dom;return/^ | $/.test(er)?((et,er,ea,ei)=>{let es=pn(et.getRoot());return ea=eh(es,Vi.fromRangeStart(er),ei)?ea.replace(/^ /,"&nbsp;"):ea.replace(/^&nbsp;/," "),th(es,Vi.fromRangeEnd(er),ei)?ea.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):ea.replace(/&nbsp;(<br( \/)?>)?$/," ")})(ei,ea.getRng(),er,et.schema):er},tO=(et,er)=>{if(et.selection.isEditable()){let{content:ea,details:ei}=(et=>{if("string"!=typeof et){let er=tQ.extend({paste:et.paste,data:{paste:et.paste}},et);return{content:et.content,details:er}}return{content:et,details:{}}})(er);wC(et,{...ei,content:eO(et,ea),format:"html",set:!1,selection:!0}).each(er=>{var ea;let es=(ea=er.content,QC(et).editor.insertContent(ea,ei));xC(et,es,er),et.addVisual()})}},u6={"font-size":"size","font-family":"face"},u9=Xt("font"),rO=et=>(er,ea)=>I.from(ea).map(pn).filter(t1).bind(ea=>{var ei;return Lb(pn(ea.dom),er=>mo(er,et).orThunk(()=>u9(er)?xe(u6,et).bind(et=>tn(er,et)):I.none()),et=>_n(pn(er),et)).or((ei=ea.dom,I.from(za.DOM.getStyle(ei,et,!0))))}).getOr(""),u4=rO("font-size"),u7=k(et=>et.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),rO("font-family")),iO=et=>lM(et.getBody()).bind(et=>{let er=et.container();return I.from(rt(er)?er.parentNode:er)}),lO=(et,er)=>{var ea;return ea=S(I.some,er),I.from(et.selection.getRng()).bind(er=>{let ea=et.getBody();return er.startContainer===ea&&0===er.startOffset?I.none():I.from(et.selection.getStart(!0))}).orThunk(T(iO,et)).map(pn).filter(t1).bind(ea)},dO=(et,er)=>{if(/^[0-9.]+$/.test(er)){let ea=parseInt(er,10);if(ea>=1&&ea<=7){let ei=tQ.explode(et.options.get("font_size_style_values")),es=tQ.explode(et.options.get("font_size_classes"));return es.length>0?es[ea-1]||er:ei[ea-1]||er}}return er},cO=et=>{let er=et.split(/\s*,\s*/);return q(er,et=>-1===et.indexOf(" ")||He(et,'"')||He(et,"'")?et:`'${et}'`).join(",")},uO=(et,er)=>{let ea=et.dom,ei=et.selection.getRng(),es=er?et.selection.getStart():et.selection.getEnd(),ed=er?ei.startContainer:ei.endContainer,ec=hN(ea,ed);if(!ec||!ec.isContentEditable)return;let ev=er?po:ho,eC=oa(et);((et,er,ea,ei)=>{let es=et.dom,s=et=>es.isBlock(et)&&et.parentElement===ea,ed=s(er)?er:es.getParent(ei,s,ea);return I.from(ed).map(pn)})(et,es,ec,ed).each(er=>{let ea=CN(et,ed,er.dom,ec,!1,eC);ev(er,pn(ea)),et.selection.setCursorLocation(ea,0),et.dispatch("NewBlock",{newBlock:ea}),c3(et,"insertParagraph")})},mO=et=>{ZT(et),(et=>{et.editorCommands.addCommands({"Cut,Copy,Paste":er=>{let ea;let ei=et.getDoc();try{ei.execCommand(er)}catch(et){ea=!0}if("paste"!==er||ei.queryCommandEnabled(er)||(ea=!0),ea||!ei.queryCommandSupported(er)){let er=et.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tJ.os.isMacOS()||tJ.os.isiOS())&&(er=er.replace(/Ctrl\+/g,"⌘+")),et.notificationManager.open({text:er,type:"error"})}}})})(et),(et=>{et.editorCommands.addCommands({mceAddUndoLevel:()=>{et.undoManager.add()},mceEndUndoLevel:()=>{et.undoManager.add()},Undo:()=>{et.undoManager.undo()},Redo:()=>{et.undoManager.redo()}})})(et),(et=>{et.editorCommands.addCommands({mceSelectNodeDepth:(er,ea,ei)=>{let es=0;et.dom.getParent(et.selection.getNode(),er=>!t4(er)||es++!==ei||(et.selection.select(er),!1),et.getBody())},mceSelectNode:(er,ea,ei)=>{et.selection.select(ei)},selectAll:()=>{let er=et.dom.getParent(et.selection.getStart(),ry);if(er){let ea=et.dom.createRng();ea.selectNodeContents(er),et.selection.setRng(ea)}}})})(et),(et=>{et.editorCommands.addCommands({mceCleanup:()=>{let er=et.selection.getBookmark();et.setContent(et.getContent()),et.selection.moveToBookmark(er)},insertImage:(er,ea,ei)=>{tO(et,et.dom.createHTML("img",{src:ei}))},insertHorizontalRule:()=>{et.execCommand("mceInsertContent",!1,"<hr>")},insertText:(er,ea,ei)=>{tO(et,et.dom.encode(ei))},insertHTML:(er,ea,ei)=>{tO(et,ei)},mceInsertContent:(er,ea,ei)=>{tO(et,ei)},mceSetContent:(er,ea,ei)=>{et.setContent(ei)},mceReplaceContent:(er,ea,ei)=>{et.execCommand("mceInsertContent",!1,ei.replace(/\{\$selection\}/g,et.selection.getContent({format:"text"})))},mceNewDocument:()=>{et.setContent(aJ(et))}})})(et),(et=>{let t=(er,ea,ei)=>{let es=e$(ei)?{href:ei}:ei,ed=et.dom.getParent(et.selection.getNode(),"a");eq(es)&&e$(es.href)&&(es.href=es.href.replace(/ /g,"%20"),ed&&es.href||et.formatter.remove("link"),es.href&&et.formatter.apply("link",es,ed))};et.editorCommands.addCommands({unlink:()=>{if(et.selection.isEditable()){if(et.selection.isCollapsed()){let er=et.dom.getParent(et.selection.getStart(),"a");return void(er&&et.dom.remove(er,!0))}et.formatter.remove("link")}},mceInsertLink:t,createLink:t})})(et),et.editorCommands.addCommands({Indent:()=>{R_(et,"indent")},Outdent:()=>{A_(et)}}),et.editorCommands.addCommands({Outdent:()=>k_(et)},"state"),(et=>{et.editorCommands.addCommands({InsertNewBlockBefore:()=>{uO(et,!0)},InsertNewBlockAfter:()=>{uO(et,!1)}})})(et),(et=>{et.editorCommands.addCommands({insertParagraph:()=>{ZN(c7,et)},mceInsertNewLine:(er,ea,ei)=>{eR(et,ei)},InsertLineBreak:(er,ea,ei)=>{ZN(ut,et)}})})(et),(et=>{et.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":er=>{et.getDoc().execCommand(er);let ea=et.dom.getParent(et.selection.getNode(),"ol,ul");if(ea){let er=ea.parentNode;if(er&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(er.nodeName)){let ei=et.selection.getBookmark();et.dom.split(er,ea),et.selection.moveToBookmark(ei)}}}})})(et),(et=>{et.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":er=>{let ea=et.dom.getParent(et.selection.getNode(),"ul,ol");return ea&&("insertunorderedlist"===er&&"UL"===ea.tagName||"insertorderedlist"===er&&"OL"===ea.tagName)}},"state")})(et),(et=>{let t=(er,ea)=>{et.formatter.toggle(er,ea),et.nodeChanged()};et.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":et=>{t(et)},"ForeColor,HiliteColor":(et,er,ea)=>{t(et,{value:ea})},BackColor:(et,er,ea)=>{t("hilitecolor",{value:ea})},FontName:(er,ea,ei)=>{((et,er)=>{let ea=dO(et,er);et.formatter.toggle("fontname",{value:cO(ea)}),et.nodeChanged()})(et,ei)},FontSize:(er,ea,ei)=>{et.formatter.toggle("fontsize",{value:dO(et,ei)}),et.nodeChanged()},LineHeight:(er,ea,ei)=>{et.formatter.toggle("lineheight",{value:String(ei)}),et.nodeChanged()},Lang:(et,er,ea)=>{var ei;t(et,{value:ea.code,customValue:null!==(ei=ea.customCode)&&void 0!==ei?ei:null})},RemoveFormat:er=>{et.formatter.remove(er)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(et,er,ea)=>{t(e$(ea)?ea:"p")},mceToggleFormat:(et,er,ea)=>{t(ea)}})})(et),(et=>{let t=er=>et.formatter.match(er);et.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":et=>t(et),mceBlockQuote:()=>t("blockquote")},"state"),et.editorCommands.addQueryValueHandler("FontName",()=>lO(et,er=>u7(et.getBody(),er.dom)).getOr("")),et.editorCommands.addQueryValueHandler("FontSize",()=>lO(et,er=>u4(et.getBody(),er.dom)).getOr("")),et.editorCommands.addQueryValueHandler("LineHeight",()=>lO(et,er=>{let ea=pn(et.getBody()),ei=Lb(er,et=>mo(et,"line-height"),T(_n,ea));return ei.getOrThunk(()=>{let et=parseFloat(co(er,"line-height")),ea=parseFloat(co(er,"font-size"));return String(et/ea)})}).getOr(""))})(et),(et=>{et.editorCommands.addCommands({mceRemoveNode:(er,ea,ei)=>{let es=null!=ei?ei:et.selection.getNode();if(es!==et.getBody()){let er=et.selection.getBookmark();et.dom.remove(es,!0),et.selection.moveToBookmark(er)}},mcePrint:()=>{et.getWin().print()},mceFocus:(er,ea,ei)=>{et.removed||(!0===ei?Tg(et):(et=>{var er;let ea=et.selection,ei=et.getBody(),es=ea.getRng();et.quirks.refreshContentEditable(),C(et.bookmark)&&!Rg(et)&&hg(et).each(er=>{et.selection.setRng(er),es=er});let ed=(er=ea.getNode(),et.dom.getParent(er,er=>"true"===et.dom.getContentEditable(er)));if(ed&&et.dom.isChildOf(ed,ei))return Ng(ed),Sg(et,es),void Tg(et);et.inline||(tJ.browser.isOpera()||Ng(ei),et.getWin().focus()),(tJ.browser.isFirefox()||et.inline)&&(Ng(ei),Sg(et,es)),Tg(et)})(et))},mceToggleVisualAid:()=>{et.hasVisual=!et.hasVisual,et.addVisual()}})})(et)},me=["toggleview"],gO=et=>H(me,et.toLowerCase());let pO=class pO{constructor(et){this.commands={state:{},exec:{},value:{}},this.editor=et}execCommand(et,er=!1,ea,ei){let es=this.editor,ed=et.toLowerCase(),ec=null==ei?void 0:ei.skip_focus;if(es.removed||("mcefocus"!==ed&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(ed)||ec?(et=>{hg(et).each(er=>et.selection.setRng(er))})(es):es.focus()),es.dispatch("BeforeExecCommand",{command:et,ui:er,value:ea}).isDefaultPrevented()))return!1;let ev=this.commands.exec[ed];return!!eJ(ev)&&(ev(ed,er,ea),es.dispatch("ExecCommand",{command:et,ui:er,value:ea}),!0)}queryCommandState(et){if(!gO(et)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let er=et.toLowerCase(),ea=this.commands.state[er];return!!eJ(ea)&&ea(er)}queryCommandValue(et){if(!gO(et)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let er=et.toLowerCase(),ea=this.commands.value[er];return eJ(ea)?ea(er):""}addCommands(et,er="exec"){let ea=this.commands;ge(et,(et,ei)=>{V(ei.toLowerCase().split(","),ei=>{ea[er][ei]=et})})}addCommand(et,er,ea){let ei=et.toLowerCase();this.commands.exec[ei]=(et,ei,es)=>er.call(null!=ea?ea:this.editor,ei,es)}queryCommandSupported(et){let er=et.toLowerCase();return!!this.commands.exec[er]}addQueryStateHandler(et,er,ea){this.commands.state[et.toLowerCase()]=()=>er.call(null!=ea?ea:this.editor)}addQueryValueHandler(et,er,ea){this.commands.value[et.toLowerCase()]=()=>er.call(null!=ea?ea:this.editor)}};let mt="data-mce-contenteditable",bO=(et,er,ea)=>{try{et.getDoc().execCommand(er,!1,String(ea))}catch(et){}},vO=(et,er)=>{et.dom.contentEditable=er?"true":"false"},yO=et=>et.readonly,CO=et=>{et.parser.addAttributeFilter("contenteditable",er=>{yO(et)&&V(er,et=>{et.attr(mt,et.attr("contenteditable")),et.attr("contenteditable","false")})}),et.serializer.addAttributeFilter(mt,er=>{yO(et)&&V(er,et=>{et.attr("contenteditable",et.attr(mt))})}),et.serializer.addTempAttr(mt)},mr=["copy"],ml=tQ.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");let EO=class EO{static isNative(et){return!!ml[et.toLowerCase()]}constructor(et){this.bindings={},this.settings=et||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||eQ}fire(et,er){return this.dispatch(et,er)}dispatch(et,er){let ea=et.toLowerCase(),ei=_a(ea,null!=er?er:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(ei);let es=this.bindings[ea];if(es)for(let et=0,er=es.length;et<er;et++){let er=es[et];if(!er.removed){if(er.once&&this.off(ea,er.func),ei.isImmediatePropagationStopped())return ei;if(!1===er.func.call(this.scope,ei))return ei.preventDefault(),ei}}return ei}on(et,er,ea,ei){if(!1===er&&(er=eQ),er){let es={func:er,removed:!1};ei&&tQ.extend(es,ei);let ed=et.toLowerCase().split(" "),ec=ed.length;for(;ec--;){let et=ed[ec],er=this.bindings[et];er||(er=[],this.toggleEvent(et,!0)),er=ea?[es,...er]:[...er,es],this.bindings[et]=er}}return this}off(et,er){if(et){let ea=et.toLowerCase().split(" "),ei=ea.length;for(;ei--;){let es=ea[ei],ed=this.bindings[es];if(!es)return ge(this.bindings,(et,er)=>{this.toggleEvent(er,!1),delete this.bindings[er]}),this;if(ed){if(er){let et=K(ed,et=>et.func===er);ed=et.fail,this.bindings[es]=ed,V(et.pass,et=>{et.removed=!0})}else ed.length=0;ed.length||(this.toggleEvent(et,!1),delete this.bindings[es])}}}else ge(this.bindings,(et,er)=>{this.toggleEvent(er,!1)}),this.bindings={};return this}once(et,er,ea){return this.on(et,er,ea,{once:!0})}has(et){et=et.toLowerCase();let er=this.bindings[et];return!(!er||0===er.length)}};let _O=et=>(et._eventDispatcher||(et._eventDispatcher=new EO({scope:et,toggleEvent:(er,ea)=>{EO.isNative(er)&&et.toggleNativeEvent&&et.toggleNativeEvent(er,ea)}})),et._eventDispatcher),md={fire(et,er,ea){return this.dispatch(et,er,ea)},dispatch(et,er,ea){if(this.removed&&"remove"!==et&&"detach"!==et)return _a(et.toLowerCase(),null!=er?er:{},this);let ei=_O(this).dispatch(et,er);if(!1!==ea&&this.parent){let er=this.parent();for(;er&&!ei.isPropagationStopped();)er.dispatch(et,ei,!1),er=er.parent?er.parent():void 0}return ei},on(et,er,ea){return _O(this).on(et,er,ea)},off(et,er){return _O(this).off(et,er)},once(et,er){return _O(this).once(et,er)},hasEventListeners(et){return _O(this).has(et)}},mc=za.DOM,RO=(et,er)=>{if("selectionchange"===er)return et.getDoc();if(!et.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(er))return et.getDoc().documentElement;let ea=oQ(et);return ea?(et.eventRoot||(et.eventRoot=mc.select(ea)[0]),et.eventRoot):et.getBody()},AO=(et,er,ea)=>{et.hidden||yO(et)?yO(et)&&((et,er)=>{if("click"!==er.type||lH.metaKeyPressed(er))H(mr,er.type)&&et.dispatch(er.type,er);else{let ea=pn(er.target);no(ea,"a",er=>_n(er,pn(et.getBody()))).bind(et=>tn(et,"href")).each(ea=>{if(er.preventDefault(),/^#/.test(ea)){let er=et.dom.select(`${ea},[name="${ze(ea,"#")}"]`);er.length&&et.selection.scrollIntoView(er[0],!0)}else window.open(ea,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}})(et,ea):et.dispatch(er,ea)},TO=(et,ea)=>{if(et.delegates||(et.delegates={}),et.delegates[ea]||et.removed)return;let ei=RO(et,ea);if(oQ(et)){if(er||(er={},et.editorManager.on("removeEditor",()=>{et.editorManager.activeEditor||er&&(ge(er,(er,ea)=>{et.dom.unbind(RO(et,ea))}),er=null)})),er[ea])return;let o=er=>{let ei=er.target,es=et.editorManager.get(),ed=es.length;for(;ed--;){let et=es[ed].getBody();(et===ei||mc.isChildOf(ei,et))&&AO(es[ed],ea,er)}};er[ea]=o,mc.bind(ei,ea,o)}else{let o=er=>{AO(et,ea,er)};mc.bind(ei,ea,o),et.delegates[ea]=o}},mu={...md,bindPendingEventDelegates(){let et=this;tQ.each(et._pendingNativeEvents,er=>{TO(et,er)})},toggleNativeEvent(et,er){"focus"!==et&&"blur"!==et&&(this.removed||(er?this.initialized?TO(this,et):this._pendingNativeEvents?this._pendingNativeEvents.push(et):this._pendingNativeEvents=[et]:this.initialized&&this.delegates&&(this.dom.unbind(RO(this,et),et,this.delegates[et]),delete this.delegates[et])))},unbindAllNativeEvents(){let et=this,er=et.getBody(),ea=et.dom;et.delegates&&(ge(et.delegates,(er,ea)=>{et.dom.unbind(RO(et,ea),ea,er)}),delete et.delegates),!et.inline&&er&&ea&&(er.onload=null,ea.unbind(et.getWin()),ea.unbind(et.getDoc())),ea&&(ea.unbind(er),ea.unbind(et.getContainer()))}},BO=et=>e$(et)?{value:et.split(/[ ,]/),valid:!0}:E(et,e$)?{value:et,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},PO=(et,er)=>et+(Ge(er.message)?"":`. ${er.message}`),DO=et=>et.valid,LO=(et,er,ea="")=>{let ei=er(et);return eK(ei)?ei?{value:et,valid:!0}:{valid:!1,message:ea}:ei},mp=["design","readonly"],IO=(et,er,ea,ei)=>{let es=ea[er.get()],ed=ea[ei];try{ed.activate()}catch(et){return void console.error(`problem while activating editor mode ${ei}:`,et)}es.deactivate(),es.editorReadOnly!==ed.editorReadOnly&&((et,er)=>{var ea;let ei=pn(et.getBody());gn(ei,ea="mce-content-readonly")&&!er?fn(ei,ea):er&&un(ei,ea),er?(et.selection.controlSelection.hideResizeRect(),et._selectionOverrides.hideFakeCaret(),(et=>{I.from(et.selection.getNode()).each(et=>{et.removeAttribute("data-mce-selected")})})(et),et.readonly=!0,vO(ei,!1),V(Uo(ei,'*[contenteditable="true"]'),et=>{Jt(et,mt,"true"),vO(et,!1)})):(et.readonly=!1,et.hasEditableRoot()&&vO(ei,!0),V(Uo(ei,`*[${mt}="true"]`),et=>{on(et,mt),vO(et,!0)}),bO(et,"StyleWithCSS",!1),bO(et,"enableInlineTableEditing",!1),bO(et,"enableObjectResizing",!1),Ag(et)&&et.focus(),(et=>{et.selection.setRng(et.selection.getRng())})(et),et.nodeChanged())})(et,ed.editorReadOnly),er.set(ei),((et,er)=>{et.dispatch("SwitchMode",{mode:er})})(et,ei)},my=tQ.each,mN=tQ.explode,mw={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},mS=tQ.makeMap("alt,ctrl,shift,meta,access"),HO=et=>{let er;let ea={},ei=tJ.os.isMacOS()||tJ.os.isiOS();my(mN(et.toLowerCase(),"+"),et=>{et in mS?ea[et]=!0:/^[0-9]{2,}$/.test(et)?ea.keyCode=parseInt(et,10):(ea.charCode=et.charCodeAt(0),ea.keyCode=mw[et]||et.toUpperCase().charCodeAt(0))});let es=[ea.keyCode];for(er in mS)ea[er]?es.push(er):ea[er]=!1;return ea.id=es.join(","),ea.access&&(ea.alt=!0,ei?ea.ctrl=!0:ea.shift=!0),ea.meta&&(ei?ea.meta=!0:(ea.ctrl=!0,ea.meta=!1)),ea};let $O=class $O{constructor(et){this.shortcuts={},this.pendingPatterns=[],this.editor=et;let er=this;et.on("keyup keypress keydown",et=>{!er.hasModifier(et)&&!er.isFunctionKey(et)||et.isDefaultPrevented()||(my(er.shortcuts,ea=>{er.matchShortcut(et,ea)&&(er.pendingPatterns=ea.subpatterns.slice(0),"keydown"===et.type&&er.executeShortcutAction(ea))}),er.matchShortcut(et,er.pendingPatterns[0])&&(1===er.pendingPatterns.length&&"keydown"===et.type&&er.executeShortcutAction(er.pendingPatterns[0]),er.pendingPatterns.shift()))})}add(et,er,ea,ei){let es=this,ed=es.normalizeCommandFunc(ea);return my(mN(tQ.trim(et)),et=>{let ea=es.createShortcut(et,er,ed,ei);es.shortcuts[ea.id]=ea}),!0}remove(et){let er=this.createShortcut(et);return!!this.shortcuts[er.id]&&(delete this.shortcuts[er.id],!0)}normalizeCommandFunc(et){let er=this;return"string"==typeof et?()=>{er.editor.execCommand(et,!1,null)}:tQ.isArray(et)?()=>{er.editor.execCommand(et[0],et[1],et[2])}:et}createShortcut(et,er,ea,ei){let es=tQ.map(mN(et,">"),HO);return es[es.length-1]=tQ.extend(es[es.length-1],{func:ea,scope:ei||this.editor}),tQ.extend(es[0],{desc:this.editor.translate(er),subpatterns:es.slice(1)})}hasModifier(et){return et.altKey||et.ctrlKey||et.metaKey}isFunctionKey(et){return"keydown"===et.type&&et.keyCode>=112&&et.keyCode<=123}matchShortcut(et,er){return!!er&&er.ctrl===et.ctrlKey&&er.meta===et.metaKey&&er.alt===et.altKey&&er.shift===et.shiftKey&&!!(et.keyCode===er.keyCode||et.charCode&&et.charCode===er.charCode)&&(et.preventDefault(),!0)}executeShortcutAction(et){return et.func?et.func.call(et.scope):null}};let qO=()=>{let et=(()=>{let et={},er={},ea={},ei={},es={},ed={},ec={},ev={},l=(et,er)=>(ea,ei)=>{et[ea.toLowerCase()]={...ei,type:er}};return{addButton:l(et,"button"),addGroupToolbarButton:l(et,"grouptoolbarbutton"),addToggleButton:l(et,"togglebutton"),addMenuButton:l(et,"menubutton"),addSplitButton:l(et,"splitbutton"),addMenuItem:l(er,"menuitem"),addNestedMenuItem:l(er,"nestedmenuitem"),addToggleMenuItem:l(er,"togglemenuitem"),addAutocompleter:l(ea,"autocompleter"),addContextMenu:l(es,"contextmenu"),addContextToolbar:l(ed,"contexttoolbar"),addContextForm:l(ed,"contextform"),addSidebar:l(ec,"sidebar"),addView:l(ev,"views"),addIcon:(et,er)=>ei[et.toLowerCase()]=er,getAll:()=>({buttons:et,menuItems:er,icons:ei,popups:ea,contextMenus:es,contextToolbars:ed,sidebars:ec,views:ev})}})();return{addAutocompleter:et.addAutocompleter,addButton:et.addButton,addContextForm:et.addContextForm,addContextMenu:et.addContextMenu,addContextToolbar:et.addContextToolbar,addIcon:et.addIcon,addMenuButton:et.addMenuButton,addMenuItem:et.addMenuItem,addNestedMenuItem:et.addNestedMenuItem,addSidebar:et.addSidebar,addSplitButton:et.addSplitButton,addToggleButton:et.addToggleButton,addGroupToolbarButton:et.addGroupToolbarButton,addToggleMenuItem:et.addToggleMenuItem,addView:et.addView,getAll:et.getAll}},mI=za.DOM,mB=tQ.extend,mD=tQ.each;let YO=class YO{constructor(et,er,ea){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=ea,this.documentBaseUrl=ea.documentBaseURL,mB(this,mu),this.id=et,this.hidden=!1;let ei=JT(u8||u5,u8,er,ea.defaultOptions,er);this.options=((et,er)=>{let ea={},ei={},r=(et,er,ea)=>{let es=LO(er,ea);return DO(es)?(ei[et]=es.value,!0):(console.warn(PO(`Invalid value passed for the ${et} option`,es)),!1)},s=et=>Ee(ea,et);return{register:(et,es)=>{let ed=e$(es.processor)?(et=>{let er=(()=>{switch(et){case"array":return eW;case"boolean":return eK;case"function":return eJ;case"number":return eG;case"object":return eq;case"string":return e$;case"string[]":return BO;case"object[]":return et=>E(et,eq);case"regexp":return et=>u(et,RegExp);default:return eZ}})();return ea=>LO(ea,er,`The value must be a ${et}.`)})(es.processor):es.processor,ec=((et,er,ea)=>{if(!eX(er)){let ei=LO(er,ea);if(DO(ei))return ei.value;console.error(PO(`Invalid default value passed for the "${et}" option`,ei))}})(et,es.default,ed);ea[et]={...es,default:ec,processor:ed},xe(ei,et).orThunk(()=>xe(er,et)).each(er=>r(et,er,ed))},isRegistered:s,get:et=>xe(ei,et).orThunk(()=>xe(ea,et).map(et=>et.default)).getOrUndefined(),set:(et,er)=>{if(s(et)){let ei=ea[et];return ei.immutable?(console.error(`"${et}" is an immutable option and cannot be updated`),!1):r(et,er,ei.processor)}return console.warn(`"${et}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:et=>{let er=s(et);return er&&delete ei[et],er},isSet:et=>Ee(ei,et)}})(0,ei),(et=>{let er=et.options.register;er("id",{processor:"string",default:et.id}),er("selector",{processor:"string"}),er("target",{processor:"object"}),er("suffix",{processor:"string"}),er("cache_suffix",{processor:"string"}),er("base_url",{processor:"string"}),er("referrer_policy",{processor:"string",default:""}),er("language_load",{processor:"boolean",default:!0}),er("inline",{processor:"boolean",default:!1}),er("iframe_attrs",{processor:"object",default:{}}),er("doctype",{processor:"string",default:"<!DOCTYPE html>"}),er("document_base_url",{processor:"string",default:et.documentBaseUrl}),er("body_id",{processor:Al(et,"tinymce"),default:"tinymce"}),er("body_class",{processor:Al(et),default:""}),er("content_security_policy",{processor:"string",default:""}),er("br_in_pre",{processor:"boolean",default:!0}),er("forced_root_block",{processor:et=>{let er=e$(et)&&Ye(et);return er?{value:et,valid:er}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),er("forced_root_block_attrs",{processor:"object",default:{}}),er("newline_behavior",{processor:et=>{let er=H(["block","linebreak","invert","default"],et);return er?{value:et,valid:er}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),er("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),er("no_newline_selector",{processor:"string",default:""}),er("keep_styles",{processor:"boolean",default:!0}),er("end_container_on_empty_block",{processor:et=>eK(et)||e$(et)?{valid:!0,value:et}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),er("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),er("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),er("font_size_classes",{processor:"string",default:""}),er("automatic_uploads",{processor:"boolean",default:!0}),er("images_reuse_filename",{processor:"boolean",default:!1}),er("images_replace_blob_uris",{processor:"boolean",default:!0}),er("icons",{processor:"string",default:""}),er("icons_url",{processor:"string",default:""}),er("images_upload_url",{processor:"string",default:""}),er("images_upload_base_path",{processor:"string",default:""}),er("images_upload_credentials",{processor:"boolean",default:!1}),er("images_upload_handler",{processor:"function"}),er("language",{processor:"string",default:"en"}),er("language_url",{processor:"string",default:""}),er("entity_encoding",{processor:"string",default:"named"}),er("indent",{processor:"boolean",default:!0}),er("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),er("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),er("indent_use_margin",{processor:"boolean",default:!1}),er("indentation",{processor:"string",default:"40px"}),er("content_css",{processor:et=>{let er=!1===et||e$(et)||E(et,e$);return er?e$(et)?{value:q(et.split(","),e4),valid:er}:eW(et)?{value:et,valid:er}:!1===et?{value:[],valid:er}:{value:et,valid:er}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:at(et)?[]:["default"]}),er("content_style",{processor:"string"}),er("content_css_cors",{processor:"boolean",default:!1}),er("font_css",{processor:et=>{let er=e$(et)||E(et,e$);return er?{value:eW(et)?et:q(et.split(","),e4),valid:er}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),er("inline_boundaries",{processor:"boolean",default:!0}),er("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),er("object_resizing",{processor:et=>{let er=eK(et)||e$(et);return er?!1===et||n2.isiPhone()||n2.isiPad()?{value:"",valid:er}:{value:!0===et?"table,img,figure.image,div,video,iframe":et,valid:er}:{valid:!1,message:"Must be boolean or a string"}},default:!n3}),er("resize_img_proportional",{processor:"boolean",default:!0}),er("event_root",{processor:"object"}),er("service_message",{processor:"string"}),er("theme",{processor:et=>!1===et||e$(et)||eJ(et),default:"silver"}),er("theme_url",{processor:"string"}),er("formats",{processor:"object"}),er("format_empty_lines",{processor:"boolean",default:!1}),er("format_noneditable_selector",{processor:"string",default:""}),er("preview_styles",{processor:et=>{let er=!1===et||e$(et);return er?{value:!1===et?"":et,valid:er}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),er("custom_ui_selector",{processor:"string",default:""}),er("hidden_input",{processor:"boolean",default:!0}),er("submit_patch",{processor:"boolean",default:!0}),er("encoding",{processor:"string"}),er("add_form_submit_trigger",{processor:"boolean",default:!0}),er("add_unload_trigger",{processor:"boolean",default:!0}),er("custom_undo_redo_levels",{processor:"number",default:0}),er("disable_nodechange",{processor:"boolean",default:!1}),er("readonly",{processor:"boolean",default:!1}),er("editable_root",{processor:"boolean",default:!0}),er("plugins",{processor:"string[]",default:[]}),er("external_plugins",{processor:"object"}),er("forced_plugins",{processor:"string[]"}),er("model",{processor:"string",default:et.hasPlugin("rtc")?"plugin":"dom"}),er("model_url",{processor:"string"}),er("block_unsupported_drop",{processor:"boolean",default:!0}),er("visual",{processor:"boolean",default:!0}),er("visual_table_class",{processor:"string",default:"mce-item-table"}),er("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),er("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),er("setup",{processor:"function"}),er("init_instance_callback",{processor:"function"}),er("url_converter",{processor:"function",default:et.convertURL}),er("url_converter_scope",{processor:"object",default:et}),er("urlconverter_callback",{processor:"function"}),er("allow_conditional_comments",{processor:"boolean",default:!1}),er("allow_html_data_urls",{processor:"boolean",default:!1}),er("allow_svg_data_urls",{processor:"boolean"}),er("allow_html_in_named_anchor",{processor:"boolean",default:!1}),er("allow_script_urls",{processor:"boolean",default:!1}),er("allow_unsafe_link_target",{processor:"boolean",default:!1}),er("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),er("fix_list_elements",{processor:"boolean",default:!1}),er("preserve_cdata",{processor:"boolean",default:!1}),er("remove_trailing_brs",{processor:"boolean",default:!0}),er("pad_empty_with_br",{processor:"boolean",default:!1}),er("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),er("element_format",{processor:"string",default:"html"}),er("entities",{processor:"string"}),er("schema",{processor:"string",default:"html5"}),er("convert_urls",{processor:"boolean",default:!0}),er("relative_urls",{processor:"boolean",default:!0}),er("remove_script_host",{processor:"boolean",default:!0}),er("custom_elements",{processor:"string"}),er("extended_valid_elements",{processor:"string"}),er("invalid_elements",{processor:"string"}),er("invalid_styles",{processor:Rl}),er("valid_children",{processor:"string"}),er("valid_classes",{processor:Rl}),er("valid_elements",{processor:"string"}),er("valid_styles",{processor:Rl}),er("verify_html",{processor:"boolean",default:!0}),er("auto_focus",{processor:et=>e$(et)||!0===et}),er("browser_spellcheck",{processor:"boolean",default:!1}),er("protect",{processor:"array"}),er("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),er("deprecation_warnings",{processor:"boolean",default:!0}),er("a11y_advanced_options",{processor:"boolean",default:!1}),er("api_key",{processor:"string"}),er("paste_block_drop",{processor:"boolean",default:!1}),er("paste_data_images",{processor:"boolean",default:!0}),er("paste_preprocess",{processor:"function"}),er("paste_postprocess",{processor:"function"}),er("paste_webkit_styles",{processor:"string",default:"none"}),er("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),er("paste_merge_formats",{processor:"boolean",default:!0}),er("smart_paste",{processor:"boolean",default:!0}),er("paste_as_text",{processor:"boolean",default:!1}),er("paste_tab_spaces",{processor:"number",default:4}),er("text_patterns",{processor:et=>E(et,eq)||!1===et?{value:xl(!1===et?[]:et),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),er("text_patterns_lookup",{processor:et=>eJ(et)?{value:er=>{let ea=et(er);return xl(ea)},valid:!0}:{valid:!1,message:"Must be a single function"},default:et=>[]}),er("noneditable_class",{processor:"string",default:"mceNonEditable"}),er("editable_class",{processor:"string",default:"mceEditable"}),er("noneditable_regexp",{processor:et=>E(et,Sl)?{value:et,valid:!0}:Sl(et)?{value:[et],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),er("table_tab_navigation",{processor:"boolean",default:!0}),er("highlight_on_focus",{processor:"boolean",default:!1}),er("xss_sanitization",{processor:"boolean",default:!0}),er("details_initial_state",{processor:et=>{let er=H(["inherited","collapsed","expanded"],et);return er?{value:et,valid:er}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),er("details_serialized_state",{processor:et=>{let er=H(["inherited","collapsed","expanded"],et);return er?{value:et,valid:er}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),er("init_content_sync",{processor:"boolean",default:!1}),er("newdocument_content",{processor:"string",default:""}),er("force_hex_color",{processor:et=>{let er=["always","rgb_only","off"],ea=H(er,et);return ea?{value:et,valid:ea}:{valid:!1,message:`Must be one of: ${er.join(", ")}.`}},default:"off"}),er("sandbox_iframes",{processor:"boolean",default:!1}),er("convert_unsafe_embeds",{processor:"boolean",default:!1}),et.on("ScriptsLoaded",()=>{er("directionality",{processor:"string",default:nV.isRtl()?"rtl":void 0}),er("placeholder",{processor:"string",default:n8.getAttrib(et.getElement(),"placeholder")})})})(this);let es=this.options.get;es("deprecation_warnings")&&(((et,er)=>{let ea=gw(et),ei=bw(er),es=ei.length>0,ed=ea.length>0,ec="mobile"===er.theme;if(es||ed||ec){let et=ec?`

Themes:
- mobile`:"",er=es?`

Plugins:
- ${ei.join("\n- ")}`:"",ev=ed?`

Options:
- ${ea.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+et+er+ev)}})(er,ei),((et,er)=>{let ea=pw(et),ei=vw(er),es=ei.length>0,ed=ea.length>0;if(es||ed){let et=es?`

Plugins:
- ${ei.map(yw).join("\n- ")}`:"",er=ed?`

Options:
- ${ea.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+et+er)}})(er,ei));let ed=es("suffix");ed&&(ea.suffix=ed),this.suffix=ea.suffix;let ec=es("base_url");ec&&ea._setBaseUrl(ec),this.baseUri=ea.baseURI;let ev=oF(this);ev&&(Ha.ScriptLoader._setReferrerPolicy(ev),za.DOM.styleSheetLoader._setReferrerPolicy(ev));let eC=aO(this);C(eC)&&za.DOM.styleSheetLoader._setContentCssCors(eC),Ya.languageLoad=es("language_load"),Ya.baseURL=ea.baseURL,this.setDirty(!1),this.documentBaseURI=new oC(n9(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=at(this),this.hasVisual=aL(this),this.shortcuts=new $O(this),this.editorCommands=new pO(this),mO(this);let eI=es("cache_suffix");eI&&(tJ.cacheSuffix=eI.replace(/^[\?\&]+/,"")),this.ui={registry:qO(),styleSheetLoader:void 0,show:_,hide:_,setEnabled:_,isEnabled:eZ},this.mode=(et=>{let er=$a("design"),ea=$a({design:{activate:_,deactivate:_,editorReadOnly:!1},readonly:{activate:_,deactivate:_,editorReadOnly:!0}});return et.serializer?CO(et):et.on("PreInit",()=>{CO(et)}),et.on("ShowCaret",er=>{yO(et)&&er.preventDefault()}),et.on("ObjectSelected",er=>{yO(et)&&er.preventDefault()}),{isReadOnly:()=>yO(et),set:ei=>((et,er,ea,ei)=>{if(ei!==ea.get()){if(!Ee(er,ei))throw Error(`Editor mode '${ei}' is invalid`);et.initialized?IO(et,ea,er,ei):et.on("init",()=>IO(et,ea,er,ei))}})(et,ea.get(),er,ei),get:()=>er.get(),register:(et,er)=>{ea.set(((et,er,ea)=>{if(H(mp,er))throw Error(`Cannot override default mode ${er}`);return{...et,[er]:{...ea,deactivate:()=>{try{ea.deactivate()}catch(et){console.error(`problem while deactivating editor mode ${er}:`,et)}}}}})(ea.get(),et,er))}}})(this),ea.dispatch("SetupEditor",{editor:this});let eD=aU(this);eJ(eD)&&eD.call(this,this)}render(){(et=>{let er=et.id;nV.setCode(oU(et));let n=()=>{u2.unbind(window,"ready",n),et.render()};if(!Ta.Event.domLoaded)return void u2.bind(window,"ready",n);if(!et.getElement())return;let ea=pn(et.getElement()),ei=rn(ea);et.on("remove",()=>{W(ea.dom.attributes,et=>on(ea,et.name)),Zt(ea,ei)}),et.ui.styleSheetLoader=rQ.forElement(ea,{contentCssCors:aO(et),referrerPolicy:oF(et)}),at(et)?et.inline=!0:(et.orgVisibility=et.getElement().style.visibility,et.getElement().style.visibility="hidden");let es=et.getElement().form||u2.getParent(er,"form");es&&(et.formElement=es,ar(et)&&!t7(et.getElement())&&(u2.insertAfter(u2.create("input",{type:"hidden",name:er}),er),et.hasHiddenInput=!0),et.formEventDelegate=er=>{et.dispatch(er.type,er)},u2.bind(es,"submit reset",et.formEventDelegate),et.on("reset",()=>{et.resetContent()}),!aa(et)||es.submit.nodeType||es.submit.length||es._mceOldSubmit||(es._mceOldSubmit=es.submit,es.submit=()=>(et.editorManager.triggerSave(),et.setDirty(!1),es._mceOldSubmit(es)))),et.windowManager=Pw(et),et.notificationManager=Tw(et),"xml"===et.options.get("encoding")&&et.on("GetContent",et=>{et.save&&(et.content=u2.encode(et.content))}),ad(et)&&et.on("submit",()=>{et.initialized&&et.save()}),ac(et)&&(et._beforeUnload=()=>{!et.initialized||et.destroyed||et.isHidden()||et.save({format:"raw",no_events:!0,set_dirty:!1})},et.editorManager.on("BeforeUnload",et._beforeUnload)),et.editorManager.add(et),$T(et,et.suffix)})(this)}focus(et){this.execCommand("mceFocus",!1,et)}hasFocus(){return Rg(this)}translate(et){return nV.translate(et)}getParam(et,er,ea){let ei=this.options;return ei.isRegistered(et)||(C(ea)?ei.register(et,{processor:ea,default:er}):ei.register(et,{processor:eZ,default:er})),ei.isSet(et)||eX(er)?ei.get(et):er}hasPlugin(et,er){return!(!H(aB(this),et)||er&&void 0===dj.get(et))}nodeChanged(et){this._nodeChangeDispatcher.nodeChanged(et)}addCommand(et,er,ea){this.editorCommands.addCommand(et,er,ea)}addQueryStateHandler(et,er,ea){this.editorCommands.addQueryStateHandler(et,er,ea)}addQueryValueHandler(et,er,ea){this.editorCommands.addQueryValueHandler(et,er,ea)}addShortcut(et,er,ea,ei){this.shortcuts.add(et,er,ea,ei)}execCommand(et,er,ea,ei){return this.editorCommands.execCommand(et,er,ea,ei)}queryCommandState(et){return this.editorCommands.queryCommandState(et)}queryCommandValue(et){return this.editorCommands.queryCommandValue(et)}queryCommandSupported(et){return this.editorCommands.queryCommandSupported(et)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(mI.show(this.getContainer()),mI.hide(this.id)),this.load(),this.dispatch("show"))}hide(){this.hidden||(this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(mI.hide(this.getContainer()),mI.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(et,er){this.dispatch("ProgressState",{state:et,time:er})}load(et={}){let er=this.getElement();if(this.removed)return"";if(er){let ea={...et,load:!0},ei=t7(er)?er.value:er.innerHTML,es=this.setContent(ei,ea);return ea.no_events||this.dispatch("LoadContent",{...ea,element:er}),es}return""}save(et={}){let er=this,ea=er.getElement();if(!ea||!er.initialized||er.removed)return"";let ei={...et,save:!0,element:ea},es=er.getContent(ei),ed={...ei,content:es};if(ed.no_events||er.dispatch("SaveContent",ed),"raw"===ed.format&&er.dispatch("RawSaveContent",ed),es=ed.content,t7(ea))ea.value=es;else{!et.is_removing&&er.inline||(ea.innerHTML=es);let ei=mI.getParent(er.id,"form");ei&&mD(ei.elements,et=>et.name!==er.id||(et.value=es,!1))}return ed.element=ei.element=ea=null,!1!==ed.set_dirty&&er.setDirty(!1),es}setContent(et,er){return lw(this,et,er)}getContent(et){return((et,er={})=>{var ea;let ei=(ea=er.format?er.format:"html",{...er,format:ea,get:!0,getInner:!0});return yC(et,ei).fold(R,er=>{let ea=QC(et).editor.getContent(er);return CC(et,ea,er)})})(this,et)}insertContent(et,er){er&&(et=mB({content:et},er)),this.execCommand("mceInsertContent",!1,et)}resetContent(et){void 0===et?lw(this,this.startContent,{format:"raw"}):lw(this,et),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(et){let er=!this.isNotDirty;this.isNotDirty=!et,et&&et!==er&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||mI.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=mI.get(this.id)),this.targetElm}getWin(){if(!this.contentWindow){let et=this.iframeElement;et&&(this.contentWindow=et.contentWindow)}return this.contentWindow}getDoc(){if(!this.contentDocument){let et=this.getWin();et&&(this.contentDocument=et.document)}return this.contentDocument}getBody(){var et,er;let ea=this.getDoc();return null!==(er=null!==(et=this.bodyElement)&&void 0!==et?et:null==ea?void 0:ea.body)&&void 0!==er?er:null}convertURL(et,er,ea){let ei=this.options.get,es=az(this);if(eJ(es))return es.call(this,et,ea,!0,er);if(!ei("convert_urls")||"link"===ea||eq(ea)&&"LINK"===ea.nodeName||0===et.indexOf("file:")||0===et.length)return et;let ed=new oC(et);return"http"!==ed.protocol&&"https"!==ed.protocol&&""!==ed.protocol?et:ei("relative_urls")?this.documentBaseURI.toRelative(et):et=this.documentBaseURI.toAbsolute(et,ei("remove_script_host"))}addVisual(et){((et,er)=>{JC(et).editor.addVisual(er)})(this,et)}setEditableRoot(et){this._editableRoot!==et&&(this._editableRoot=et,this.readonly||(this.getBody().contentEditable=String(this.hasEditableRoot()),this.nodeChanged()),((et,er)=>{et.dispatch("EditableRootStateChange",{state:er})})(this,et))}hasEditableRoot(){return this._editableRoot}remove(){(et=>{if(!et.removed){let{_selectionOverrides:er,editorUpload:ea}=et,ei=et.getBody(),es=et.getElement();ei&&et.save({is_removing:!0}),et.removed=!0,et.unbindAllNativeEvents(),et.hasHiddenInput&&C(null==es?void 0:es.nextSibling)&&dL.remove(es.nextSibling),(et=>{et.dispatch("remove")})(et),et.editorManager.remove(et),!et.inline&&ei&&dL.setStyle(et.id,"display",et.orgDisplay),(et=>{et.dispatch("detach")})(et),dL.remove(et.getContainer()),ww(er),ww(ea),et.destroy()}})(this)}destroy(et){((et,er)=>{let{selection:ea,dom:ei}=et;et.destroyed||(er||et.removed?(er||(et.editorManager.off("beforeunload",et._beforeUnload),et.theme&&et.theme.destroy&&et.theme.destroy(),ww(ea),ww(ei)),(et=>{let er=et.formElement;er&&(er._mceOldSubmit&&(er.submit=er._mceOldSubmit,delete er._mceOldSubmit),dL.unbind(er,"submit reset",et.formEventDelegate))})(et),(et=>{et.contentAreaContainer=et.formElement=et.container=et.editorContainer=null,et.bodyElement=et.contentDocument=et.contentWindow=null,et.iframeElement=et.targetElm=null;let er=et.selection;if(er){let ea=er.dom;et.selection=er.win=er.dom=ea.doc=null}})(et),et.destroyed=!0):et.remove())})(this,et)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}};let mP=za.DOM,mL=tQ.each,mM,mV=!1,mF=[],eB=et=>{let er=et.type;mL(mH.get(),ea=>{switch(er){case"scroll":ea.dispatch("ScrollWindow",et);break;case"resize":ea.dispatch("ResizeWindow",et)}})},tB=et=>{if(et!==mV){let er=za.DOM;et?(er.bind(window,"resize",eB),er.bind(window,"scroll",eB)):(er.unbind(window,"resize",eB),er.unbind(window,"scroll",eB)),mV=et}},nB=et=>{let er=mF;return mF=Y(mF,er=>et!==er),mH.activeEditor===et&&(mH.activeEditor=mF.length>0?mF[0]:null),mH.focusedEditor===et&&(mH.focusedEditor=null),er.length!==mF.length},mU="CSS1Compat"!==document.compatMode,mH={...md,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.2",releaseDate:"2023-12-11",i18n:nV,activeEditor:null,focusedEditor:null,setup(){let et="",er="",ea=oC.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(ea)&&(ea=ea.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(ea)||(ea+="/"));let ei=window.tinymce||window.tinyMCEPreInit;if(ei)et=ei.base||ei.baseURL,er=ei.suffix;else{let ea=document.getElementsByTagName("script");for(let ei=0;ei<ea.length;ei++){let es=ea[ei].src||"";if(""===es)continue;let ed=es.substring(es.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(es)){-1!==ed.indexOf(".min")&&(er=".min"),et=es.substring(0,es.lastIndexOf("/"));break}}if(!et&&document.currentScript){let ea=document.currentScript.src;-1!==ea.indexOf(".min")&&(er=".min"),et=ea.substring(0,ea.lastIndexOf("/"))}}this.baseURL=new oC(ea).toAbsolute(et),this.documentBaseURL=ea,this.baseURI=new oC(this.baseURL),this.suffix=er,this.on("AddEditor",T(_g,this)),this.on("RemoveEditor",T(kg,this))},overrideDefaults(et){let er=et.base_url;er&&this._setBaseUrl(er);let ea=et.suffix;ea&&(this.suffix=ea),this.defaultOptions=et;let ei=et.plugin_base_urls;void 0!==ei&&ge(ei,(et,er)=>{Ya.PluginManager.urls[er]=et})},init(et){let er;let ea=this,ei=tQ.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),r=et=>{er=et},s=()=>{let er,es=0,ed=[];mP.unbind(window,"ready",s),(er=>{let ei=et.onpageload;ei&&ei.apply(ea,[])})(),er=((et,er)=>{let ea=[],ei=eJ(er)?et=>$(ea,ea=>er(ea,et)):et=>H(ea,et);for(let er=0,es=et.length;er<es;er++){let es=et[er];ei(es)||ea.push(es)}return ea})(tJ.browser.isIE()||tJ.browser.isEdge()?(Fw("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):mU?(Fw("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):e$(et.selector)?mP.select(et.selector):C(et.target)?[et.target]:[]),tQ.each(er,et=>{var er;(er=ea.get(et.id))&&er.initialized&&!(er.getContainer()||er.getBody()).parentNode&&(nB(er),er.unbindAllNativeEvents(),er.destroy(!0),er.removed=!0)}),0===(er=tQ.grep(er,et=>!ea.get(et.id))).length?r([]):mL(er,ec=>{let ev;et.inline&&ec.tagName.toLowerCase() in ei?Fw("Could not initialize inline editor on invalid inline target element",ec):((et,ei,ec)=>{let ev=new YO(et,ei,ea);ed.push(ev),ev.on("init",()=>{++es===er.length&&r(ed)}),ev.targetElm=ev.targetElm||ec,ev.render()})(((ev=ec.id)||(ev=xe(ec,"name").filter(et=>!mP.get(et)).getOrThunk(mP.uniqueId),ec.setAttribute("id",ev)),ev),et,ec)})};return mP.bind(window,"ready",s),new Promise(et=>{er?et(er):r=er=>{et(er)}})},get(et){return 0==arguments.length?mF.slice(0):e$(et)?J(mF,er=>er.id===et).getOr(null):eG(et)&&mF[et]?mF[et]:null},add(et){let er=this,ea=er.get(et.id);return ea===et||(null===ea&&mF.push(et),tB(!0),er.activeEditor=et,er.dispatch("AddEditor",{editor:et}),mM||(mM=et=>{let ea=er.dispatch("BeforeUnload");if(ea.returnValue)return et.preventDefault(),et.returnValue=ea.returnValue,ea.returnValue},window.addEventListener("beforeunload",mM))),et},createEditor(et,er){return this.add(new YO(et,er,this))},remove(et){let er;let ea=this;if(et){if(!e$(et))return er=et,eY(ea.get(er.id))?null:(nB(er)&&ea.dispatch("RemoveEditor",{editor:er}),0===mF.length&&window.removeEventListener("beforeunload",mM),er.remove(),tB(mF.length>0),er);mL(mP.select(et),et=>{(er=ea.get(et.id))&&ea.remove(er)})}else for(let et=mF.length-1;et>=0;et--)ea.remove(mF[et])},execCommand(et,er,ea){var ei;let es=eq(ea)?null!==(ei=ea.id)&&void 0!==ei?ei:ea.index:ea;switch(et){case"mceAddEditor":if(!this.get(es)){let et=ea.options;new YO(es,et,this).render()}return!0;case"mceRemoveEditor":{let et=this.get(es);return et&&et.remove(),!0}case"mceToggleEditor":{let et=this.get(es);return et?et.isHidden()?et.show():et.hide():this.execCommand("mceAddEditor",!1,ea),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(et,er,ea)},triggerSave:()=>{mL(mF,et=>{et.save()})},addI18n:(et,er)=>{nV.add(et,er)},translate:et=>nV.translate(et),setActive(et){let er=this.activeEditor;this.activeEditor!==et&&(er&&er.dispatch("deactivate",{relatedTarget:et}),et.dispatch("activate",{relatedTarget:er})),this.activeEditor=et},_setBaseUrl(et){this.baseURL=new oC(this.documentBaseURL).toAbsolute(et.replace(/\/+$/,"")),this.baseURI=new oC(this.baseURL)}};mH.setup();let mz=(()=>{let et=Xa();return{FakeClipboardItem:et=>({items:et,types:e8(et),getType:er=>xe(et,er).getOrUndefined()}),write:er=>{et.set(er)},read:()=>et.get().getOrUndefined(),clear:et.clear}})(),mj=Math.min,m$=Math.max,mq=Math.round,dB=(et,er,ea)=>{let ei=er.x,es=er.y,ed=et.w,ec=et.h,ev=er.w,eC=er.h,eI=(ea||"").split("");return"b"===eI[0]&&(es+=eC),"r"===eI[1]&&(ei+=ev),"c"===eI[0]&&(es+=mq(eC/2)),"c"===eI[1]&&(ei+=mq(ev/2)),"b"===eI[3]&&(es-=ec),"r"===eI[4]&&(ei-=ed),"c"===eI[3]&&(es-=mq(ec/2)),"c"===eI[4]&&(ei-=mq(ed/2)),cB(ei,es,ed,ec)},cB=(et,er,ea,ei)=>({x:et,y:er,w:ea,h:ei}),mW=(()=>{let et={},er={},ea={};return{load:(ea,ei)=>{let es=`Script at URL "${ei}" failed to load`,ed=`Script at URL "${ei}" did not call \`tinymce.Resource.add('${ea}', data)\` within 1 second`;if(void 0!==et[ea])return et[ea];{let ec=new Promise((et,ec)=>{let ev=((et,er,ea=1e3)=>{let ei=!1,es=null,s=et=>(...er)=>{ei||(ei=!0,null!==es&&(clearTimeout(es),es=null),et.apply(null,er))},ed=s(et),ec=s(er);return{start:(...et)=>{ei||null!==es||(es=setTimeout(()=>ec.apply(null,et),ea))},resolve:ed,reject:ec}})(et,ec);er[ea]=ev.resolve,Ha.ScriptLoader.loadScript(ei).then(()=>ev.start(ed),()=>ev.reject(es))});return et[ea]=ec,ec}},add:(ei,es)=>{void 0!==er[ei]&&(er[ei](es),delete er[ei]),et[ei]=Promise.resolve(es),ea[ei]=es},has:et=>et in ea,get:et=>ea[et],unload:er=>{delete et[er]}}})();try{let et="__storage_test__";(ea=window.localStorage).setItem(et,et),ea.removeItem(et)}catch(et){ea=(()=>{let et={},er=[],ea={getItem:er=>et[er]||null,setItem:(ea,ei)=>{er.push(ea),et[ea]=String(ei)},key:et=>er[et],removeItem:ea=>{er=er.filter(et=>et===ea),delete et[ea]},clear:()=>{er=[],et={}},length:0};return Object.defineProperty(ea,"length",{get:()=>er.length,configurable:!1,enumerable:!1}),ea})()}let mY={geom:{Rect:{inflate:(et,er,ea)=>cB(et.x-er,et.y-ea,et.w+2*er,et.h+2*ea),relativePosition:dB,findBestRelativePosition:(et,er,ea,ei)=>{for(let es=0;es<ei.length;es++){let ed=dB(et,er,ei[es]);if(ed.x>=ea.x&&ed.x+ed.w<=ea.w+ea.x&&ed.y>=ea.y&&ed.y+ed.h<=ea.h+ea.y)return ei[es]}return null},intersect:(et,er)=>{let ea=m$(et.x,er.x),ei=m$(et.y,er.y),es=mj(et.x+et.w,er.x+er.w),ed=mj(et.y+et.h,er.y+er.h);return es-ea<0||ed-ei<0?null:cB(ea,ei,es-ea,ed-ei)},clamp:(et,er,ea)=>{let ei=et.x,es=et.y,ed=et.x+et.w,ec=et.y+et.h,ev=er.x+er.w,eC=er.y+er.h,eI=m$(0,er.x-ei),eD=m$(0,er.y-es),eP=m$(0,ed-ev),eL=m$(0,ec-eC);return ei+=eI,es+=eD,ea&&(ed+=eI,ec+=eD,ei-=eP,es-=eL),cB(ei,es,(ed-=eP)-ei,(ec-=eL)-es)},create:cB,fromClientRect:et=>cB(et.left,et.top,et.width,et.height)}},util:{Delay:l1,Tools:tQ,VK:lH,URI:oC,EventDispatcher:EO,Observable:md,I18n:nV,LocalStorage:ea,ImageUploader:et=>{let er=Hw(),ea=Ww(et,er);return{upload:(er,ei=!0)=>ea.upload(er,ei?Vw(et):void 0)}}},dom:{EventUtils:Ta,TreeWalker:jo,TextSeeker:hi,DOMUtils:za,ScriptLoader:Ha,RangeUtils:Uf,Serializer:iw,StyleSheetLoader:Ms,ControlSelection:mf,BookmarkManager:Jm,Selection:rw,Event:Ta.Event},html:{Styles:wa,Entities:r4,Node:Wg,Schema:ua,DomParser:bC,Writer:cp,Serializer:up},Env:tJ,AddOnManager:Ya,Annotator:Qm,Formatter:rx,UndoManager:ax,EditorCommands:pO,WindowManager:Pw,NotificationManager:Tw,EditorObservable:mu,Shortcuts:$O,Editor:YO,FocusManager:l0,EditorManager:mH,DOM:za.DOM,ScriptLoader:Ha.ScriptLoader,PluginManager:dj,ThemeManager:d$,ModelManager:dV,IconManager:dM,Resource:mW,FakeClipboard:mz,trim:tQ.trim,isArray:tQ.isArray,is:tQ.is,toArray:tQ.toArray,makeMap:tQ.makeMap,each:tQ.each,map:tQ.map,grep:tQ.grep,inArray:tQ.inArray,extend:tQ.extend,walk:tQ.walk,resolve:tQ.resolve,explode:tQ.explode,_addCacheSuffix:tQ._addCacheSuffix},mK=tQ.extend(mH,mY);window.tinymce=mK,window.tinyMCE=mK,(et=>{if("object"==typeof module)try{module.exports=et}catch(et){}})(mK)}();