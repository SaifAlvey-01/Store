!function(){"use strict";let et,er,ei,es;var ed,ec,eu,ef,ep,ev,ey,eS,eI,eL,e=function(et){if(null===et)return"null";if(void 0===et)return"undefined";var er=typeof et;return"object"===er&&(Array.prototype.isPrototypeOf(et)||et.constructor&&"Array"===et.constructor.name)?"array":"object"===er&&(String.prototype.isPrototypeOf(et)||et.constructor&&"String"===et.constructor.name)?"string":er},t=function(et){return{eq:et}},eB=t(function(et,er){return et===er}),o=function(et){return t(function(er,ei){if(er.length!==ei.length)return!1;for(var es=er.length,ed=0;ed<es;ed++)if(!et.eq(er[ed],ei[ed]))return!1;return!0})},r=function(et){return t(function(er,ei){var es,ed,ec=Object.keys(er),eu=Object.keys(ei);if(!(es=o(eB),ed=function(et){return Array.prototype.slice.call(et).sort(void 0)},t(function(et,er){return es.eq(ed(et),ed(er))})).eq(ec,eu))return!1;for(var ef=ec.length,ep=0;ep<ef;ep++){var ev=ec[ep];if(!et.eq(er[ev],ei[ev]))return!1}return!0})},eD=t(function(et,er){if(et===er)return!0;var ei=e(et);return ei===e(er)&&(-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(ei)?et===er:"array"===ei?o(eD).eq(et,er):"object"===ei&&r(eD).eq(et,er))});let eF=Object.getPrototypeOf,i=(et,er,ei)=>{var es;return!!ei(et,er.prototype)||(null===(es=et.constructor)||void 0===es?void 0:es.name)===er.name},l=et=>er=>(et=>{let er=typeof et;return null===et?"null":"object"===er&&Array.isArray(et)?"array":"object"===er&&i(et,String,(et,er)=>er.isPrototypeOf(et))?"string":er})(er)===et,d=et=>er=>typeof er===et,c=et=>er=>et===er,u=(et,er)=>eM(et)&&i(et,er,(et,er)=>eF(et)===er),eP=l("string"),eM=l("object"),g=et=>u(et,Object),eU=l("array"),eH=c(null),eq=d("boolean"),ez=c(void 0),y=et=>null==et,C=et=>!y(et),ej=d("function"),e$=d("number"),k=(et,er)=>{if(eU(et)){for(let ei=0,es=et.length;ei<es;++ei)if(!er(et[ei]))return!1;return!0}return!1},E=()=>{},S=(et,er)=>(...ei)=>et(er.apply(null,ei)),_=(et,er)=>ei=>et(er(ei)),N=et=>()=>et,R=et=>et,A=(et,er)=>et===er;function O(et,...er){return(...ei)=>{let es=er.concat(ei);return et.apply(null,es)}}let T=et=>er=>!et(er),B=et=>()=>{throw Error(et)},D=et=>et(),P=et=>{et()},eV=N(!1),eG=N(!0);let I=class I{constructor(et,er){this.tag=et,this.value=er}static some(et){return new I(!0,et)}static none(){return I.singletonNone}fold(et,er){return this.tag?er(this.value):et()}isSome(){return this.tag}isNone(){return!this.tag}map(et){return this.tag?I.some(et(this.value)):I.none()}bind(et){return this.tag?et(this.value):I.none()}exists(et){return this.tag&&et(this.value)}forall(et){return!this.tag||et(this.value)}filter(et){return!this.tag||et(this.value)?this:I.none()}getOr(et){return this.tag?this.value:et}or(et){return this.tag?this:et}getOrThunk(et){return this.tag?this.value:et()}orThunk(et){return this.tag?this:et()}getOrDie(et){if(this.tag)return this.value;throw Error(null!=et?et:"Called getOrDie on None")}static from(et){return C(et)?I.some(et):I.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(et){this.tag&&et(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}};I.singletonNone=new I(!1);let eW=Array.prototype.slice,eK=Array.prototype.indexOf,eY=Array.prototype.push,j=(et,er)=>eK.call(et,er),H=(et,er)=>j(et,er)>-1,$=(et,er)=>{for(let ei=0,es=et.length;ei<es;ei++)if(er(et[ei],ei))return!0;return!1},V=(et,er)=>{let ei=et.length,es=Array(ei);for(let ed=0;ed<ei;ed++){let ei=et[ed];es[ed]=er(ei,ed)}return es},q=(et,er)=>{for(let ei=0,es=et.length;ei<es;ei++)er(et[ei],ei)},W=(et,er)=>{for(let ei=et.length-1;ei>=0;ei--)er(et[ei],ei)},K=(et,er)=>{let ei=[],es=[];for(let ed=0,ec=et.length;ed<ec;ed++){let ec=et[ed];(er(ec,ed)?ei:es).push(ec)}return{pass:ei,fail:es}},G=(et,er)=>{let ei=[];for(let es=0,ed=et.length;es<ed;es++){let ed=et[es];er(ed,es)&&ei.push(ed)}return ei},Y=(et,er,ei)=>(W(et,(et,es)=>{ei=er(ei,et,es)}),ei),X=(et,er,ei)=>(q(et,(et,es)=>{ei=er(ei,et,es)}),ei),Q=(et,er,ei)=>{for(let es=0,ed=et.length;es<ed;es++){let ed=et[es];if(er(ed,es))return I.some(ed);if(ei(ed,es))break}return I.none()},J=(et,er)=>Q(et,er,eV),Z=(et,er)=>{for(let ei=0,es=et.length;ei<es;ei++)if(er(et[ei],ei))return I.some(ei);return I.none()},ee=et=>{let er=[];for(let ei=0,es=et.length;ei<es;++ei){if(!eU(et[ei]))throw Error("Arr.flatten item "+ei+" was not an array, input: "+et);eY.apply(er,et[ei])}return er},te=(et,er)=>ee(V(et,er)),ne=(et,er)=>{for(let ei=0,es=et.length;ei<es;++ei)if(!0!==er(et[ei],ei))return!1;return!0},oe=et=>{let er=eW.call(et,0);return er.reverse(),er},re=(et,er)=>G(et,et=>!H(er,et)),se=(et,er)=>{let ei={};for(let es=0,ed=et.length;es<ed;es++){let ed=et[es];ei[String(ed)]=er(ed,es)}return ei},ae=(et,er)=>{let ei=eW.call(et,0);return ei.sort(er),ei},ie=(et,er)=>er>=0&&er<et.length?I.some(et[er]):I.none(),le=et=>ie(et,0),de=et=>ie(et,et.length-1),eX=ej(Array.from)?Array.from:et=>eW.call(et),ue=(et,er)=>{for(let ei=0;ei<et.length;ei++){let es=er(et[ei],ei);if(es.isSome())return es}return I.none()},eJ=Object.keys,eZ=Object.hasOwnProperty,ge=(et,er)=>{let ei=eJ(et);for(let es=0,ed=ei.length;es<ed;es++){let ed=ei[es];er(et[ed],ed)}},pe=(et,er)=>he(et,(et,ei)=>({k:ei,v:er(et,ei)})),he=(et,er)=>{let ei={};return ge(et,(et,es)=>{let ed=er(et,es);ei[ed.k]=ed.v}),ei},be=et=>(er,ei)=>{et[ei]=er},ve=(et,er,ei,es)=>{ge(et,(et,ed)=>{(er(et,ed)?ei:es)(et,ed)})},ye=(et,er)=>{let ei={};return ve(et,er,be(ei),E),ei},Ce=(et,er)=>{let ei=[];return ge(et,(et,es)=>{ei.push(er(et,es))}),ei},we=et=>Ce(et,R),xe=(et,er)=>ke(et,er)?I.from(et[er]):I.none(),ke=(et,er)=>eZ.call(et,er),Ee=(et,er)=>ke(et,er)&&void 0!==et[er]&&null!==et[er],Se=et=>{let er={};return q(et,et=>{er[et]={}}),eJ(er)},_e=et=>void 0!==et.length,eQ=Array.isArray,Re=(et,er,ei)=>{if(!et)return!1;if(ei=ei||et,_e(et)){for(let es=0,ed=et.length;es<ed;es++)if(!1===er.call(ei,et[es],es,et))return!1}else for(let es in et)if(ke(et,es)&&!1===er.call(ei,et[es],es,et))return!1;return!0},Ae=(et,er)=>{let ei=[];return Re(et,(es,ed)=>{ei.push(er(es,ed,et))}),ei},Oe=(et,er)=>{let ei=[];return Re(et,(es,ed)=>{er&&!er(es,ed,et)||ei.push(es)}),ei},Te=(et,er,ei,es)=>{let ed=ez(ei)?et[0]:ei;for(let ei=0;ei<et.length;ei++)ed=er.call(es,ed,et[ei],ei);return ed},Be=(et,er,ei)=>{for(let es=0,ed=et.length;es<ed;es++)if(er.call(ei,et[es],es,et))return es;return -1},De=et=>et[et.length-1],Pe=et=>{let er,ei=!1;return(...es)=>(ei||(ei=!0,er=et.apply(null,es)),er)},Le=()=>Me(0,0),Me=(et,er)=>({major:et,minor:er}),e0={nu:Me,detect:(et,er)=>{let ei=String(er).toLowerCase();return 0===et.length?Le():((et,er)=>{let ei=((et,er)=>{for(let ei=0;ei<et.length;ei++){let es=et[ei];if(es.test(er))return es}})(et,er);if(!ei)return{major:0,minor:0};let o=et=>Number(er.replace(ei,"$"+et));return Me(o(1),o(2))})(et,ei)},unknown:Le},Fe=(et,er)=>{let ei=String(er).toLowerCase();return J(et,et=>et.search(ei))},Ue=(et,er,ei)=>""===er||et.length>=er.length&&et.substr(ei,ei+er.length)===er,ze=(et,er)=>{var ei;return He(et,er)?(ei=er.length,et.substring(ei)):et},je=(et,er,ei=0,es)=>{let ed=et.indexOf(er,ei);return -1!==ed&&(!!ez(es)||ed+er.length<=es)},He=(et,er)=>Ue(et,er,0),$e=(et,er)=>Ue(et,er,et.length-er.length),Ve=et=>er=>er.replace(et,""),e1=Ve(/^\s+|\s+$/g),e2=Ve(/^\s+/g),e3=Ve(/\s+$/g),Ge=et=>et.length>0,Ye=et=>!Ge(et),Xe=(et,er=10)=>{let ei=parseInt(et,er);return isNaN(ei)?I.none():I.some(ei)},e8=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Je=et=>er=>je(er,et),e5=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:et=>je(et,"edge/")&&je(et,"chrome")&&je(et,"safari")&&je(et,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,e8],search:et=>je(et,"chrome")&&!je(et,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:et=>je(et,"msie")||je(et,"trident")},{name:"Opera",versionRegexes:[e8,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Je("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Je("firefox")},{name:"Safari",versionRegexes:[e8,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:et=>(je(et,"safari")||je(et,"mobile/"))&&je(et,"applewebkit")}],e6=[{name:"Windows",search:Je("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:et=>je(et,"iphone")||je(et,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Je("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Je("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Je("linux"),versionRegexes:[]},{name:"Solaris",search:Je("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Je("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Je("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],e9={browsers:N(e5),oses:N(e6)},e4="Edge",e7="Chromium",tt="Opera",tr="Firefox",ts="Safari",it=et=>{let er=et.current,ei=et.version,o=et=>()=>er===et;return{current:er,version:ei,isEdge:o(e4),isChromium:o(e7),isIE:o("IE"),isOpera:o(tt),isFirefox:o(tr),isSafari:o(ts)}},lt=()=>it({current:void 0,version:e0.unknown()}),td=(N(e4),N(e7),N("IE"),N(tt),N(tr),N(ts),"Windows"),tc="Android",tu="Linux",tf="macOS",tp="Solaris",tv="FreeBSD",ty="ChromeOS",bt=et=>{let er=et.current,ei=et.version,o=et=>()=>er===et;return{current:er,version:ei,isWindows:o(td),isiOS:o("iOS"),isAndroid:o(tc),isMacOS:o(tf),isLinux:o(tu),isSolaris:o(tp),isFreeBSD:o(tv),isChromeOS:o(ty)}},vt=()=>bt({current:void 0,version:e0.unknown()}),tS=(N(td),N("iOS"),N(tc),N(tu),N(tf),N(tp),N(tv),N(ty),et=>window.matchMedia(et).matches),tR=Pe(()=>((et,er,ei)=>{let es=e9.browsers(),ed=e9.oses(),ec=er.bind(et=>ue(et.brands,et=>{let er=et.brand.toLowerCase();return J(es,et=>{var ei;return er===(null===(ei=et.brand)||void 0===ei?void 0:ei.toLowerCase())}).map(er=>({current:er.name,version:e0.nu(parseInt(et.version,10),0)}))})).orThunk(()=>Fe(es,et).map(er=>{let ei=e0.detect(er.versionRegexes,et);return{current:er.name,version:ei}})).fold(lt,it),eu=Fe(ed,et).map(er=>{let ei=e0.detect(er.versionRegexes,et);return{current:er.name,version:ei}}).fold(vt,bt),ef=((et,er,ei,es)=>{let ed=et.isiOS()&&!0===/ipad/i.test(ei),ec=et.isiOS()&&!ed,eu=et.isiOS()||et.isAndroid(),ef=eu||es("(pointer:coarse)"),ep=ed||!ec&&eu&&es("(min-device-width:768px)"),ev=ec||eu&&!ep,ey=er.isSafari()&&et.isiOS()&&!1===/safari/i.test(ei),eS=!ev&&!ep&&!ey;return{isiPad:N(ed),isiPhone:N(ec),isTablet:N(ep),isPhone:N(ev),isTouch:N(ef),isAndroid:et.isAndroid,isiOS:et.isiOS,isWebView:N(ey),isDesktop:N(eS)}})(eu,ec,et,ei);return{browser:ec,os:eu,deviceType:ef}})(navigator.userAgent,I.from(navigator.userAgentData),tS)),xt=()=>tR(),tA=navigator.userAgent,tI=xt(),tL=tI.browser,tB=tI.os,tD=tI.deviceType,tF=-1!==tA.indexOf("Windows Phone"),tP={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:tL.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!tL.isIE(),windowsPhone:tF,browser:{current:tL.current,version:tL.version,isChromium:tL.isChromium,isEdge:tL.isEdge,isFirefox:tL.isFirefox,isIE:tL.isIE,isOpera:tL.isOpera,isSafari:tL.isSafari},os:{current:tB.current,version:tB.version,isAndroid:tB.isAndroid,isChromeOS:tB.isChromeOS,isFreeBSD:tB.isFreeBSD,isiOS:tB.isiOS,isLinux:tB.isLinux,isMacOS:tB.isMacOS,isSolaris:tB.isSolaris,isWindows:tB.isWindows},deviceType:{isDesktop:tD.isDesktop,isiPad:tD.isiPad,isiPhone:tD.isiPhone,isPhone:tD.isPhone,isTablet:tD.isTablet,isTouch:tD.isTouch,isWebView:tD.isWebView}},tM=/^\s*|\s*$/g,Tt=et=>y(et)?"":(""+et).replace(tM,""),Bt=function(et,er,ei,es){es=es||this,et&&(ei&&(et=et[ei]),Re(et,(et,ed)=>!1!==er.call(es,et,ed,ei)&&(Bt(et,er,ei,es),!0)))},tU={trim:Tt,isArray:eQ,is:(et,er)=>er?!("array"!==er||!eQ(et))||typeof et===er:void 0!==et,toArray:et=>{if(eQ(et))return et;{let er=[];for(let ei=0,es=et.length;ei<es;ei++)er[ei]=et[ei];return er}},makeMap:(et,er,ei={})=>{let es=eP(et)?et.split(er||","):et||[],ed=es.length;for(;ed--;)ei[es[ed]]={};return ei},each:Re,map:Ae,grep:Oe,inArray:(et,er)=>{if(et){for(let ei=0,es=et.length;ei<es;ei++)if(et[ei]===er)return ei}return -1},hasOwn:ke,extend:(et,...er)=>{for(let ei=0;ei<er.length;ei++){let es=er[ei];for(let er in es)if(ke(es,er)){let ei=es[er];void 0!==ei&&(et[er]=ei)}}return et},walk:Bt,resolve:(et,er=window)=>{let ei=et.split(".");for(let et=0,es=ei.length;et<es&&(er=er[ei[et]]);et++);return er},explode:(et,er)=>eU(et)?et:""===et?[]:Ae(et.split(er||","),Tt),_addCacheSuffix:et=>{let er=tP.cacheSuffix;return er&&(et+=(-1===et.indexOf("?")?"?":"&")+er),et}},Pt=(et,er,ei=A)=>et.exists(et=>ei(et,er)),Lt=(et,er,ei=A)=>Mt(et,er,ei).getOr(et.isNone()&&er.isNone()),Mt=(et,er,ei)=>et.isSome()&&er.isSome()?I.some(ei(et.getOrDie(),er.getOrDie())):I.none(),It=(et,er)=>et?I.some(er):I.none(),tH="undefined"!=typeof window?window:Function("return this;")(),Ut=(et,er)=>((et,er)=>{let ei=null!=er?er:tH;for(let er=0;er<et.length&&null!=ei;++er)ei=ei[et[er]];return ei})(et.split("."),er),tq=Object.getPrototypeOf,jt=et=>{let er=Ut("ownerDocument.defaultView",et);return eM(et)&&(((et,er)=>{let ei=Ut(et,er);if(null==ei)throw Error(et+" not available on this browser");return ei})("HTMLElement",er).prototype.isPrototypeOf(et)||/^HTML\w*Element$/.test(tq(et).constructor.name))},Ht=et=>et.dom.nodeName.toLowerCase(),$t=et=>et.dom.nodeType,Vt=et=>er=>$t(er)===et,qt=et=>tz(et)&&jt(et.dom),tz=Vt(1),tj=Vt(3),t$=Vt(9),tV=Vt(11),Xt=et=>er=>tz(er)&&Ht(er)===et,Qt=(et,er,ei)=>{if(!(eP(ei)||eq(ei)||e$(ei)))throw console.error("Invalid call to Attribute.set. Key ",er,":: Value ",ei,":: Element ",et),Error("Attribute value was not simple");et.setAttribute(er,ei+"")},Jt=(et,er,ei)=>{Qt(et.dom,er,ei)},Zt=(et,er)=>{let ei=et.dom;ge(er,(et,er)=>{Qt(ei,er,et)})},en=(et,er)=>{let ei=et.dom.getAttribute(er);return null===ei?void 0:ei},tn=(et,er)=>I.from(en(et,er)),nn=(et,er)=>{let ei=et.dom;return!(!ei||!ei.hasAttribute)&&ei.hasAttribute(er)},on=(et,er)=>{et.dom.removeAttribute(er)},rn=et=>X(et.dom.attributes,(et,er)=>(et[er.name]=er.value,et),{}),sn=(et,er)=>{let ei=en(et,er);return void 0===ei||""===ei?[]:ei.split(" ")},an=et=>void 0!==et.dom.classList,ln=et=>sn(et,"class"),dn=(et,er)=>((et,er,ei)=>{let es=sn(et,er).concat([ei]);return Jt(et,er,es.join(" ")),!0})(et,"class",er),cn=(et,er)=>((et,er,ei)=>{let es=G(sn(et,er),et=>et!==ei);return es.length>0?Jt(et,er,es.join(" ")):on(et,er),!1})(et,"class",er),un=(et,er)=>{an(et)?et.dom.classList.add(er):dn(et,er)},mn=et=>{0===(an(et)?et.dom.classList:ln(et)).length&&on(et,"class")},fn=(et,er)=>{an(et)?et.dom.classList.remove(er):cn(et,er),mn(et)},gn=(et,er)=>an(et)&&et.dom.classList.contains(er),pn=et=>{if(null==et)throw Error("Node cannot be null or undefined");return{dom:et}},hn=(et,er)=>{let ei=(er||document).createElement("div");if(ei.innerHTML=et,!ei.hasChildNodes()||ei.childNodes.length>1){let er="HTML does not have a single root node";throw console.error(er,et),Error(er)}return pn(ei.childNodes[0])},bn=(et,er)=>{let ei=(er||document).createElement(et);return pn(ei)},vn=(et,er)=>{let ei=(er||document).createTextNode(et);return pn(ei)},Cn=(et,er,ei)=>I.from(et.dom.elementFromPoint(er,ei)).map(pn),wn=(et,er)=>{let ei=[],o=et=>(ei.push(et),er(et)),es=er(et);do es=es.bind(o);while(es.isSome());return ei},xn=(et,er)=>{let ei=et.dom;if(1!==ei.nodeType)return!1;if(void 0!==ei.matches)return ei.matches(er);if(void 0!==ei.msMatchesSelector)return ei.msMatchesSelector(er);if(void 0!==ei.webkitMatchesSelector)return ei.webkitMatchesSelector(er);if(void 0!==ei.mozMatchesSelector)return ei.mozMatchesSelector(er);throw Error("Browser lacks native selectors")},kn=et=>1!==et.nodeType&&9!==et.nodeType&&11!==et.nodeType||0===et.childElementCount,En=(et,er)=>et.dom===er.dom,Sn=(et,er)=>{let ei=et.dom,es=er.dom;return ei!==es&&ei.contains(es)},_n=et=>pn(et.dom.ownerDocument),Nn=et=>t$(et)?et:_n(et),Rn=et=>pn(Nn(et).dom.defaultView),An=et=>I.from(et.dom.parentNode).map(pn),On=et=>I.from(et.dom.parentElement).map(pn),Tn=(et,er)=>{let ei=ej(er)?er:eV,es=et.dom,ed=[];for(;null!==es.parentNode&&void 0!==es.parentNode;){let et=es.parentNode,er=pn(et);if(ed.push(er),!0===ei(er))break;es=et}return ed},Bn=et=>I.from(et.dom.previousSibling).map(pn),Dn=et=>I.from(et.dom.nextSibling).map(pn),Pn=et=>oe(wn(et,Bn)),Ln=et=>wn(et,Dn),Mn=et=>V(et.dom.childNodes,pn),In=(et,er)=>{let ei=et.dom.childNodes;return I.from(ei[er]).map(pn)},Fn=et=>In(et,0),Un=et=>In(et,et.dom.childNodes.length-1),zn=et=>et.dom.childNodes.length,jn=et=>tV(et)&&C(et.dom.host),tG=ej(Element.prototype.attachShadow)&&ej(Node.prototype.getRootNode),tW=N(tG),tK=tG?et=>pn(et.dom.getRootNode()):Nn,qn=et=>jn(et)?et:(et=>{let er=et.dom.head;if(null==er)throw Error("Head is not available yet");return pn(er)})(Nn(et)),Wn=et=>pn(et.dom.host),Kn=et=>{if(tW()&&C(et.target)){let er=pn(et.target);if(tz(er)&&Gn(er)&&et.composed&&et.composedPath){let er=et.composedPath();if(er)return le(er)}}return I.from(et.target)},Gn=et=>C(et.dom.shadowRoot),Yn=et=>{let er=tj(et)?et.dom.parentNode:et.dom;if(null==er||null===er.ownerDocument)return!1;let ei=er.ownerDocument;return(et=>{let er=tK(et);return jn(er)?I.some(er):I.none()})(pn(er)).fold(()=>ei.body.contains(er),_(Yn,Wn))};var Xn=(et,er,ei,es,ed)=>et(ei,es)?I.some(ei):ej(ed)&&ed(ei)?I.none():er(ei,es,ed);let Qn=(et,er,ei)=>{let es=et.dom,ed=ej(ei)?ei:eV;for(;es.parentNode;){es=es.parentNode;let et=pn(es);if(er(et))return I.some(et);if(ed(et))break}return I.none()},Jn=(et,er,ei)=>Xn((et,er)=>er(et),Qn,et,er,ei),Zn=(et,er,ei)=>Qn(et,et=>xn(et,er),ei),eo=(et,er)=>((et,er)=>{let ei=void 0===er?document:er.dom;return kn(ei)?I.none():I.from(ei.querySelector(et)).map(pn)})(er,et),to=(et,er,ei)=>Xn((et,er)=>xn(et,er),Zn,et,er,ei),no=(et,er=!1)=>Yn(et)?et.dom.isContentEditable:to(et,"[contenteditable]").fold(N(er),et=>"true"===oo(et)),oo=et=>et.dom.contentEditable,ro=et=>void 0!==et.style&&ej(et.style.getPropertyValue),so=(et,er,ei)=>{if(!eP(ei))throw console.error("Invalid call to CSS.set. Property ",er,":: Value ",ei,":: Element ",et),Error("CSS value must be a string: "+ei);ro(et)&&et.style.setProperty(er,ei)},ao=(et,er,ei)=>{let es=et.dom;so(es,er,ei)},io=(et,er)=>{let ei=et.dom;ge(er,(et,er)=>{so(ei,er,et)})},lo=(et,er)=>{let ei=et.dom,es=window.getComputedStyle(ei).getPropertyValue(er);return""!==es||Yn(et)?es:co(ei,er)},co=(et,er)=>ro(et)?et.style.getPropertyValue(er):"",uo=(et,er)=>{let ei=et.dom,es=co(ei,er);return I.from(es).filter(et=>et.length>0)},mo=et=>{let er={},ei=et.dom;if(ro(ei))for(let et=0;et<ei.style.length;et++){let es=ei.style.item(et);er[es]=ei.style[es]}return er},fo=(et,er)=>{var ei;ro(ei=et.dom)&&ei.style.removeProperty(er),Pt(tn(et,"style").map(e1),"")&&on(et,"style")},go=(et,er)=>{An(et).each(ei=>{ei.dom.insertBefore(er.dom,et.dom)})},po=(et,er)=>{Dn(et).fold(()=>{An(et).each(et=>{bo(et,er)})},et=>{go(et,er)})},ho=(et,er)=>{Fn(et).fold(()=>{bo(et,er)},ei=>{et.dom.insertBefore(er.dom,ei.dom)})},bo=(et,er)=>{et.dom.appendChild(er.dom)},vo=(et,er)=>{go(et,er),bo(er,et)},yo=(et,er)=>{q(er,er=>{bo(et,er)})},Co=et=>{et.dom.textContent="",q(Mn(et),et=>{wo(et)})},wo=et=>{let er=et.dom;null!==er.parentNode&&er.parentNode.removeChild(er)},xo=et=>{let er=Mn(et);er.length>0&&q(er,(ei,es)=>{let ed=0===es?et:er[es-1];po(ed,ei)}),wo(et)},ko=et=>V(et,pn),Eo=et=>et.dom.innerHTML,So=(et,er)=>{let ei=_n(et).dom,es=pn(ei.createDocumentFragment()),ed=((et,er)=>{let ei=(er||document).createElement("div");return ei.innerHTML=et,Mn(pn(ei))})(er,ei);yo(es,ed),Co(et),bo(et,es)},_o=(et,er,ei,es)=>((et,er,ei,es,ed)=>{let s=et=>{ei(et)&&es((et=>{let er=pn(Kn(et).getOr(et.target)),n=()=>et.stopPropagation(),o=()=>et.preventDefault(),ei=S(o,n);return{target:er,x:et.clientX,y:et.clientY,stop:n,prevent:o,kill:ei,raw:et}})(et))};return et.dom.addEventListener(er,s,!1),{unbind:O(No,et,er,s,!1)}})(et,er,ei,es),No=(et,er,ei,es)=>{et.dom.removeEventListener(er,ei,es)},Ro=(et,er)=>({left:et,top:er,translate:(ei,es)=>Ro(et+ei,er+es)}),Oo=(et,er)=>void 0!==et?et:void 0!==er?er:0,To=et=>{let er=et.dom,ei=er.ownerDocument.body;return ei===er?Ro(ei.offsetLeft,ei.offsetTop):Yn(et)?(et=>{let er=et.getBoundingClientRect();return Ro(er.left,er.top)})(er):Ro(0,0)},Bo=et=>{let er=void 0!==et?et.dom:document,ei=er.body.scrollLeft||er.documentElement.scrollLeft,es=er.body.scrollTop||er.documentElement.scrollTop;return Ro(ei,es)},Do=(et,er,ei)=>{let es=(void 0!==ei?ei.dom:document).defaultView;es&&es.scrollTo(et,er)},Po=(et,er)=>{xt().browser.isSafari()&&ej(et.dom.scrollIntoViewIfNeeded)?et.dom.scrollIntoViewIfNeeded(!1):et.dom.scrollIntoView(er)},Lo=(et,er,ei,es)=>({x:et,y:er,width:ei,height:es,right:et+ei,bottom:er+es}),Mo=et=>{let er=void 0===et?window:et,ei=er.document,es=Bo(pn(ei));return(et=>{let er=void 0===et?window:et;return xt().browser.isFirefox()?I.none():I.from(er.visualViewport)})(er).fold(()=>{let et=er.document.documentElement,ei=et.clientWidth,ed=et.clientHeight;return Lo(es.left,es.top,ei,ed)},et=>Lo(Math.max(et.pageLeft,es.left),Math.max(et.pageTop,es.top),et.width,et.height))},Io=(et,er)=>{let ei=[];return q(Mn(et),et=>{er(et)&&(ei=ei.concat([et])),ei=ei.concat(Io(et,er))}),ei},Fo=(et,er)=>((et,er)=>{let ei=void 0===er?document:er.dom;return kn(ei)?[]:V(ei.querySelectorAll(et),pn)})(er,et),Uo=(et,er,ei)=>Zn(et,er,ei).isSome();let zo=class zo{constructor(et,er){this.node=et,this.rootNode=er,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(et){return this.node=this.findSibling(this.node,"firstChild","nextSibling",et),this.node}prev(et){return this.node=this.findSibling(this.node,"lastChild","previousSibling",et),this.node}prev2(et){return this.node=this.findPreviousNode(this.node,et),this.node}findSibling(et,er,ei,es){if(et){if(!es&&et[er])return et[er];if(et!==this.rootNode){let er=et[ei];if(er)return er;for(let es=et.parentNode;es&&es!==this.rootNode;es=es.parentNode)if(er=es[ei])return er}}}findPreviousNode(et,er){if(et){let ei=et.previousSibling;if(this.rootNode&&ei===this.rootNode)return;if(ei){if(!er){for(let et=ei.lastChild;et;et=et.lastChild)if(!et.lastChild)return et}return ei}let es=et.parentNode;if(es&&es!==this.rootNode)return es}}};let jo=et=>er=>!!er&&er.nodeType===et,Ho=et=>!!et&&!Object.getPrototypeOf(et),tY=jo(1),Vo=et=>{let er=et.toLowerCase();return et=>C(et)&&et.nodeName.toLowerCase()===er},qo=et=>{let er=et.map(et=>et.toLowerCase());return et=>{if(et&&et.nodeName){let ei=et.nodeName.toLowerCase();return H(er,ei)}return!1}},Wo=(et,er)=>{let ei=er.toLowerCase().split(" ");return er=>{if(tY(er)){let es=er.ownerDocument.defaultView;if(es)for(let ed=0;ed<ei.length;ed++){let ec=es.getComputedStyle(er,null);if((ec?ec.getPropertyValue(et):null)===ei[ed])return!0}}return!1}},Ko=et=>er=>tY(er)&&er.hasAttribute(et),Go=et=>tY(et)&&et.hasAttribute("data-mce-bogus"),Yo=et=>tY(et)&&"TABLE"===et.tagName,Xo=et=>er=>!!tY(er)&&(er.contentEditable===et||er.getAttribute("data-mce-contenteditable")===et),tX=qo(["textarea","input"]),tJ=jo(3),tZ=jo(4),tQ=jo(7),t0=jo(8),t1=jo(9),t2=jo(11),t3=Vo("br"),t8=Vo("img"),t5=Xo("true"),t6=Xo("false"),t9=qo(["td","th"]),t4=qo(["td","th","caption"]),t7=qo(["video","audio","object","embed"]),rt=Vo("li"),rr=Vo("details"),ra=Vo("summary"),hr=et=>"\uFEFF"===et,rs=((et,er)=>{let n=er=>et(er)?I.from(er.dom.nodeValue):I.none();return{get:er=>{if(!et(er))throw Error("Can only get text value of a text node");return n(er).getOr("")},getOption:n,set:(er,ei)=>{if(!et(er))throw Error("Can only set raw text value of a text node");er.dom.nodeValue=ei}}})(tj),vr=et=>rs.get(et),yr=et=>rs.getOption(et),rd=["pre"].concat(["h1","h2","h3","h4","h5","h6"]),wr=et=>{let er;return ei=>ke(er=er||se(et,eG),Ht(ei))},rc=wr(["article","aside","details","div","dt","figcaption","footer","form","fieldset","header","hgroup","html","main","nav","section","summary","body","p","dl","multicol","dd","figure","address","center","blockquote","h1","h2","h3","h4","h5","h6","listing","xmp","pre","plaintext","menu","dir","ul","ol","li","hr","table","tbody","thead","tfoot","th","tr","td","caption"]),kr=et=>tz(et)&&!rc(et),Er=et=>tz(et)&&"br"===Ht(et),rf=wr(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),ry=wr(["ul","ol","dl"]),rw=wr(["li","dd","dt"]),rI=wr(["thead","tbody","tfoot"]),rT=wr(["td","th"]),rL=wr(["pre","script","textarea","style"]),rB=wr(rd),Br=et=>rB(et)||kr(et),Dr=()=>{let et=bn("br");return Jt(et,"data-mce-bogus","1"),et},Pr=et=>{Co(et),bo(et,Dr())},Lr=et=>{Un(et).each(er=>{Bn(er).each(ei=>{rc(et)&&Er(er)&&rc(ei)&&wo(er)})})},Fr=et=>et.replace(/\uFEFF/g,""),jr=et=>(tJ(et)&&(et=et.parentNode),tY(et)&&et.hasAttribute("data-mce-caret")),Hr=et=>tJ(et)&&hr(et.data),$r=et=>jr(et)||Hr(et),Vr=et=>et.firstChild!==et.lastChild||!t3(et.firstChild),qr=et=>{let er=et.container();return!!tJ(er)&&("\uFEFF"===er.data.charAt(et.offset())||et.isAtStart()&&Hr(er.previousSibling))},Wr=et=>{let er=et.container();return!!tJ(er)&&("\uFEFF"===er.data.charAt(et.offset()-1)||et.isAtEnd()&&Hr(er.nextSibling))},Kr=et=>tJ(et)&&"\uFEFF"===et.data[0],Gr=et=>tJ(et)&&"\uFEFF"===et.data[et.data.length-1],Yr=et=>et&&et.hasAttribute("data-mce-caret")?((et=>{var er;let ei=et.getElementsByTagName("br"),es=ei[ei.length-1];Go(es)&&(null===(er=es.parentNode)||void 0===er||er.removeChild(es))})(et),et.removeAttribute("data-mce-caret"),et.removeAttribute("data-mce-bogus"),et.removeAttribute("style"),et.removeAttribute("data-mce-style"),et.removeAttribute("_moz_abspos"),et):null,Xr=et=>jr(et.startContainer),rD=qo(["script","style","textarea"]),rF=qo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),rP=qo(["table"]),ss=et=>!$r(et)&&(tJ(et)?!rD(et.parentNode):rF(et)||t3(et)||rP(et)||as(et)),as=et=>(!tY(et)||"true"!==et.getAttribute("unselectable"))&&t6(et),is=(et,er)=>ss(et)&&((et,er)=>{for(let ei=et.parentNode;ei&&ei!==er;ei=ei.parentNode){if(as(ei))return!1;if(t5(ei))break}return!0})(et,er),rM=/^[ \t\r\n]*$/,ds=et=>rM.test(et),cs=et=>{for(let er of et)if(!hr(er))return!1;return!0},us=et=>"\n"===et||"\r"===et,ms=(et,er=4,ei=!0,es=!0)=>{let ed=er<=0?"":Array(er+1).join(" "),ec=et.replace(/\t/g,ed),eu=X(ec,(et,er)=>{var ed;return -1!==" \f	\v".indexOf(er)||"\xa0"===er?et.pcIsSpace||""===et.str&&ei||et.str.length===ec.length-1&&es||(ed=et.str.length+1)<ec.length&&ed>=0&&us(ec[ed])?{pcIsSpace:!1,str:et.str+"\xa0"}:{pcIsSpace:!0,str:et.str+" "}:{pcIsSpace:us(er),str:et.str+er}},{pcIsSpace:!1,str:""});return eu.str},fs=(et,er)=>ss(et)&&(!(tJ(et)&&ds(et.data))||!!((et,er)=>{let ei=pn(er),es=pn(et);return Uo(es,"pre,code",O(En,ei))})(et,er))||tY(et)&&"A"===et.nodeName&&!et.hasAttribute("href")&&(et.hasAttribute("name")||et.hasAttribute("id"))||rU(et),rU=Ko("data-mce-bookmark"),rH=Ko("data-mce-bogus"),hs=et=>tY(et)&&"all"===et.getAttribute("data-mce-bogus"),bs=(et,er=!0)=>((et,er)=>{let ei=0;if(fs(et,et))return!1;{let es=et.firstChild;if(!es)return!0;let ed=new zo(es,et);do{if(er){if(hs(es)){es=ed.next(!0);continue}if(rH(es)){es=ed.next();continue}}if(t3(es))ei++,es=ed.next();else{if(fs(es,et))return!1;es=ed.next()}}while(es);return ei<=1}})(et.dom,er),rq="data-mce-block",ys=et=>G(eJ(et),et=>!/[A-Z]/.test(et)).join(","),Cs=(et,er)=>C(er.querySelector(et))?(er.setAttribute(rq,"true"),"inline-boundary"===er.getAttribute("data-mce-selected")&&er.removeAttribute("data-mce-selected"),!0):(er.removeAttribute(rq),!1),ws=(et,er)=>{let ei=ys(et.getTransparentElements()),es=ys(et.getBlockElements());return G(er.querySelectorAll(ei),et=>Cs(es,et))},xs=(et,er)=>{var ei;let es=er?"lastChild":"firstChild";for(let er=et[es];er;er=er[es])if(bs(pn(er)))return void(null===(ei=er.parentNode)||void 0===ei||ei.removeChild(er))},ks=(et,er,ei)=>{let es=et.getBlockElements(),ed=pn(er),s=et=>Ht(et) in es,a=et=>En(et,ed);q(ko(ei),er=>{Qn(er,s,a).each(ei=>{let es=G(Mn(er),er=>s(er)&&!et.isValidChild(Ht(ei),Ht(er)));if(es.length>0){let er=On(ei);q(es,et=>{Qn(et,s,a).each(er=>{((et,er)=>{let ei=document.createRange(),es=et.parentNode;if(es){ei.setStartBefore(et),ei.setEndBefore(er);let ed=ei.extractContents();xs(ed,!0),ei.setStartAfter(er),ei.setEndAfter(et);let ec=ei.extractContents();xs(ec,!1),bs(pn(ed))||es.insertBefore(ed,et),bs(pn(er))||es.insertBefore(er,et),bs(pn(ec))||es.insertBefore(ec,et),es.removeChild(et)}})(er.dom,et.dom)})}),er.each(er=>ws(et,er.dom))}})})},Es=(et,er)=>{let ei=ws(et,er);ks(et,er,ei),q([...ei,...As(et,er)?[er]:[]],er=>q(Fo(pn(er),er.nodeName.toLowerCase()),er=>{Os(et,er.dom)&&xo(er)}))},Ss=(et,er)=>{if(Rs(et,er)){let ei=ys(et.getBlockElements());Cs(ei,er)}},_s=et=>et.hasAttribute(rq),Ns=(et,er)=>ke(et.getTransparentElements(),er),Rs=(et,er)=>tY(er)&&Ns(et,er.nodeName),As=(et,er)=>Rs(et,er)&&_s(er),Os=(et,er)=>Rs(et,er)&&!_s(er),Ts=(et,er)=>1===er.type&&Ns(et,er.name)&&eP(er.attr(rq)),rz=xt().browser,Ds=et=>J(et,tz),Ps=(et,er)=>et.children&&H(et.children,er),Ls=(et,er={})=>{let ei=0,es={},ed=pn(et),ec=Nn(ed),a=et=>new Promise((eu,ef)=>{let ep;let ev=tU._addCacheSuffix(et),ey=xe(es,ev).getOrThunk(()=>({id:"mce-u"+ei++,passed:[],failed:[],count:0}));es[ev]=ey,ey.count++;let u=(et,er)=>{q(et,P),ey.status=er,ey.passed=[],ey.failed=[],ep&&(ep.onload=null,ep.onerror=null,ep=null)},m=()=>u(ey.passed,2),f=()=>u(ey.failed,3);if(eu&&ey.passed.push(eu),ef&&ey.failed.push(ef),1===ey.status)return;if(2===ey.status)return void m();if(3===ey.status)return void f();ey.status=1;let eS=bn("link",ec.dom);Zt(eS,{rel:"stylesheet",type:"text/css",id:ey.id}),er.contentCssCors&&Jt(eS,"crossOrigin","anonymous"),er.referrerPolicy&&Jt(eS,"referrerpolicy",er.referrerPolicy),(ep=eS.dom).onload=m,ep.onerror=f,bo(qn(ed),eS),Jt(eS,"href",ev)}),i=et=>{let er=tU._addCacheSuffix(et);xe(es,er).each(et=>{0==--et.count&&(delete es[er],(et=>{let er=qn(ed);eo(er,"#"+et).each(wo)})(et.id))})};return{load:a,loadAll:et=>Promise.allSettled(V(et,et=>a(et).then(N(et)))).then(et=>{let er=K(et,et=>"fulfilled"===et.status);return er.fail.length>0?Promise.reject(V(er.fail,et=>et.reason)):V(er.pass,et=>et.value)}),unload:i,unloadAll:et=>{q(et,et=>{i(et)})},_setReferrerPolicy:et=>{er.referrerPolicy=et},_setContentCssCors:et=>{er.contentCssCors=et}}},rj=(()=>{let et=new WeakMap;return{forElement:(er,ei)=>{let es=tK(er).dom;return I.from(et.get(es)).getOrThunk(()=>{let er=Ls(es,ei);return et.set(es,er),er})}}})(),Is=(et,er)=>C(et)&&(fs(et,er)||kr(pn(et))),Fs=et=>"span"===et.nodeName.toLowerCase()&&"bookmark"===et.getAttribute("data-mce-type"),Us=(et,er,ei)=>{var es;let ed=ei||er;if(tY(er)&&Fs(er))return er;let ec=er.childNodes;for(let er=ec.length-1;er>=0;er--)Us(et,ec[er],ed);if(tY(er)){let et=er.childNodes;1===et.length&&Fs(et[0])&&(null===(es=er.parentNode)||void 0===es||es.insertBefore(et[0],er))}return t2(er)||t1(er)||fs(er,ed)||tY(er)&&er.childNodes.length>0||tJ(er)&&er.data.length>0&&((et,er)=>{let ei=new zo(et,er).prev(!1),es=new zo(et,er).next(!1),ed=ez(ei)||Is(ei,er),ec=ez(es)||Is(es,er);return ed&&ec})(er,ed)||et.remove(er),er},r$=tU.makeMap,rV=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rG=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,rW=/[<>&\"\']/g,rK=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,rY={128:"€",130:"‚",131:"ƒ",132:"„",133:"…",134:"†",135:"‡",136:"ˆ",137:"‰",138:"Š",139:"‹",140:"Œ",142:"Ž",145:"‘",146:"’",147:"“",148:"”",149:"•",150:"–",151:"—",152:"˜",153:"™",154:"š",155:"›",156:"œ",158:"ž",159:"Ÿ"},rX={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},rJ={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Gs=(et,er)=>{let ei={};if(et){let es=et.split(",");er=er||10;for(let et=0;et<es.length;et+=2){let ed=String.fromCharCode(parseInt(es[et],er));if(!rX[ed]){let er="&"+es[et+1]+";";ei[ed]=er,ei[er]=ed}}return ei}},rZ=Gs("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),Xs=(et,er)=>et.replace(er?rV:rG,et=>rX[et]||et),Qs=(et,er)=>et.replace(er?rV:rG,et=>et.length>1?"&#"+(1024*(et.charCodeAt(0)-55296)+(et.charCodeAt(1)-56320)+65536)+";":rX[et]||"&#"+et.charCodeAt(0)+";"),Js=(et,er,ei)=>{let es=ei||rZ;return et.replace(er?rV:rG,et=>rX[et]||es[et]||et)},rQ={encodeRaw:Xs,encodeAllRaw:et=>(""+et).replace(rW,et=>rX[et]||et),encodeNumeric:Qs,encodeNamed:Js,getEncodeFunc:(et,er)=>{let ei=Gs(er)||rZ,es=r$(et.replace(/\+/g,","));return es.named&&es.numeric?(et,er)=>et.replace(er?rV:rG,et=>void 0!==rX[et]?rX[et]:void 0!==ei[et]?ei[et]:et.length>1?"&#"+(1024*(et.charCodeAt(0)-55296)+(et.charCodeAt(1)-56320)+65536)+";":"&#"+et.charCodeAt(0)+";"):es.named?er?(et,er)=>Js(et,er,ei):Js:es.numeric?Qs:Xs},decode:et=>et.replace(rK,(et,er)=>er?(er="x"===er.charAt(0).toLowerCase()?parseInt(er.substr(1),16):parseInt(er,10))>65535?String.fromCharCode(55296+((er-=65536)>>10),56320+(1023&er)):rY[er]||String.fromCharCode(er):rJ[et]||rZ[et]||(et=>{let er=bn("div").dom;return er.innerHTML=et,er.textContent||er.innerText||et})(et))},ea=(et,er)=>(et=tU.trim(et))?et.split(er||" "):[],ta=et=>RegExp("^"+et.replace(/([?+*])/g,".$1")+"$"),r0={},r1=tU.makeMap,r2=tU.each,r3=tU.extend,r8=tU.explode,ia=(et,er={})=>{let ei=r1(et," ",r1(et.toUpperCase()," "));return r3(ei,er)},la=et=>ia("td th li dt dd figcaption caption details summary",et.getTextBlockElements()),da=(et,er)=>{if(et){let ei={};return eP(et)&&(et={"*":et}),r2(et,(et,es)=>{ei[es]=ei[es.toUpperCase()]="map"===er?r1(et,/[, ]/):r8(et,/[, ]/)}),ei}},ca=(et={})=>{var er;let ei={},es={},ed=[],ec={},eu={},i=(er,ei,es)=>{let ed=et[er];if(ed)return r1(ed,/[, ]/,r1(ed.toUpperCase(),/[, ]/));{let et=r0[er];return et||(et=ia(ei,es),r0[er]=et),et}},ef=null!==(er=et.schema)&&void 0!==er?er:"html5",ep=(et=>{let er,ei,es,ed;let{globalAttributes:ec,phrasingContent:eu,flowContent:ef}=(er="id accesskey class dir lang style tabindex title role",ei="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",es="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==et&&(er+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",ei+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",es+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen"),"html5-strict"!==et&&(er+=" xml:lang",es=[es,"acronym applet basefont big font strike tt"].join(" "),ed=[ei=[ei,"center dir isindex noframes"].join(" "),es].join(" ")),ed=ed||[ei,es].join(" "),{globalAttributes:er,blockContent:ei,phrasingContent:es,flowContent:ed}),ep={},s=(et,er="",ei="")=>{let es=ea(ei),ed=ea(et),eu=ed.length;for(;eu--;){let et=ea([ec,er].join(" "));ep[ed[eu]]={attributes:se(et,N({})),attributesOrder:et,children:se(es,N({}))}}},a=(et,er)=>{let ei=ea(et),es=ea(er),ed=ei.length;for(;ed--;){let et=ep[ei[ed]];for(let er=0,ei=es.length;er<ei;er++)et.attributes[es[er]]={},et.attributesOrder.push(es[er])}};return"html5-strict"!==et&&(q(ea("acronym applet basefont big font strike tt"),et=>{s(et,"",eu)}),q(ea("center dir isindex noframes"),et=>{s(et,"",ef)})),s("html","manifest","head body"),s("head","","base command link meta noscript script style title"),s("title hr noscript br"),s("base","href target"),s("link","href rel media hreflang type sizes hreflang"),s("meta","name http-equiv content charset"),s("style","media type scoped"),s("script","src async defer type charset"),s("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",ef),s("dd div","",ef),s("address dt caption","","html4"===et?eu:ef),s("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",eu),s("blockquote","cite",ef),s("ol","reversed start type","li"),s("ul","","li"),s("li","value",ef),s("dl","","dt dd"),s("a","href target rel media hreflang type","html4"===et?eu:ef),s("q","cite",eu),s("ins del","cite datetime",ef),s("img","src sizes srcset alt usemap ismap width height"),s("iframe","src name width height",ef),s("embed","src type width height"),s("object","data type typemustmatch name usemap form width height",[ef,"param"].join(" ")),s("param","name value"),s("map","name",[ef,"area"].join(" ")),s("area","alt coords shape href target rel media hreflang type"),s("table","border","caption colgroup thead tfoot tbody tr"+("html4"===et?" col":"")),s("colgroup","span","col"),s("col","span"),s("tbody thead tfoot","","tr"),s("tr","","td th"),s("td","colspan rowspan headers",ef),s("th","colspan rowspan headers scope abbr",ef),s("form","accept-charset action autocomplete enctype method name novalidate target",ef),s("fieldset","disabled form name",[ef,"legend"].join(" ")),s("label","form for",eu),s("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),s("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===et?ef:eu),s("select","disabled form multiple name required size","option optgroup"),s("optgroup","disabled label","option"),s("option","disabled label selected value"),s("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),s("menu","type label",[ef,"li"].join(" ")),s("noscript","",ef),"html4"!==et&&(s("wbr"),s("ruby","",[eu,"rt rp"].join(" ")),s("figcaption","",ef),s("mark rt rp summary bdi","",eu),s("canvas","width height",ef),s("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[ef,"track source"].join(" ")),s("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[ef,"track source"].join(" ")),s("picture","","img source"),s("source","src srcset type media sizes"),s("track","kind src srclang label default"),s("datalist","",[eu,"option"].join(" ")),s("article section nav aside main header footer","",ef),s("hgroup","","h1 h2 h3 h4 h5 h6"),s("figure","",[ef,"figcaption"].join(" ")),s("time","datetime",eu),s("dialog","open",ef),s("command","type label icon disabled checked radiogroup command"),s("output","for form name",eu),s("progress","value max",eu),s("meter","value min max low high optimum",eu),s("details","open",[ef,"summary"].join(" ")),s("keygen","autofocus challenge disabled form keytype name")),"html5-strict"!==et&&(a("script","language xml:space"),a("style","xml:space"),a("object","declare classid code codebase codetype archive standby align border hspace vspace"),a("embed","align name hspace vspace"),a("param","valuetype type"),a("a","charset name rev shape coords"),a("br","clear"),a("applet","codebase archive code object alt name width height align hspace vspace"),a("img","name longdesc align border hspace vspace"),a("iframe","longdesc frameborder marginwidth marginheight scrolling align"),a("font basefont","size color face"),a("input","usemap align"),a("select"),a("textarea"),a("h1 h2 h3 h4 h5 h6 div p legend caption","align"),a("ul","type compact"),a("li","type"),a("ol dl menu dir","compact"),a("pre","width xml:space"),a("hr","align noshade size width"),a("isindex","prompt"),a("table","summary width frame rules cellspacing cellpadding align bgcolor"),a("col","width align char charoff valign"),a("colgroup","width align char charoff valign"),a("thead","align char charoff valign"),a("tr","align char charoff valign bgcolor"),a("th","axis align char charoff valign nowrap bgcolor width height"),a("form","accept"),a("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),a("tfoot","align char charoff valign"),a("tbody","align char charoff valign"),a("area","nohref"),a("body","background bgcolor text link vlink alink")),"html4"!==et&&(a("input button select textarea","autofocus"),a("input textarea","placeholder"),a("a","download"),a("link script img","crossorigin"),a("img","loading"),a("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==et&&q([ep.video,ep.audio],et=>{delete et.children.audio,delete et.children.video}),q(ea("a form meter progress dfn"),et=>{ep[et]&&delete ep[et].children[et]}),delete ep.caption.children.table,delete ep.script,ep})(ef);!1===et.verify_html&&(et.valid_elements="*[*]");let ev=da(et.valid_styles),ey=da(et.invalid_styles,"map"),eS=da(et.valid_classes,"map"),eI=i("whitespace_elements","pre script noscript style textarea video audio iframe object code"),eL=i("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),eB=i("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),eD=i("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),eF="td th iframe video audio object script code",eP=i("non_empty_elements",eF+" pre",eB),eM=i("move_caret_before_on_enter_elements",eF+" table",eB),eU=i("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),eH=i("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary",eU),eq=i("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),ez=i("transparent_elements","a ins del canvas map");r2("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),et=>{eu[et]=RegExp("</"+et+"[^>]*>","gi")});let E=et=>{let er=I.from(ei["@"]),es=/[*?+]/;q(((et,er)=>{let ei=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return te(ea(er,","),er=>{let es=ei.exec(er);if(es){let er=es[1],ei=es[2],ed=es[3],ec=es[4],eu=es[5],ef={attributes:{},attributesOrder:[]};if(et.each(et=>{ge(et.attributes,(et,er)=>{ef.attributes[er]=et}),ef.attributesOrder.push(...et.attributesOrder)}),"#"===er?ef.paddEmpty=!0:"-"===er&&(ef.removeEmpty=!0),"!"===ec&&(ef.removeEmptyAttrs=!0),eu&&((et,er)=>{let ei=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,es=/[*?+]/,{attributes:ed,attributesOrder:ec}=er;q(ea(et,"|"),et=>{let eu=ei.exec(et);if(eu){let et={},ei=eu[1],ef=eu[2].replace(/[\\:]:/g,":"),ep=eu[3],ev=eu[4];if("!"===ei&&(er.attributesRequired=er.attributesRequired||[],er.attributesRequired.push(ef),et.required=!0),"-"===ei)return delete ed[ef],void ec.splice(tU.inArray(ec,ef),1);(ep&&("="===ep?(er.attributesDefault=er.attributesDefault||[],er.attributesDefault.push({name:ef,value:ev}),et.defaultValue=ev):"~"===ep?(er.attributesForced=er.attributesForced||[],er.attributesForced.push({name:ef,value:ev}),et.forcedValue=ev):"<"===ep&&(et.validValues=tU.makeMap(ev,"?"))),es.test(ef))?(er.attributePatterns=er.attributePatterns||[],et.pattern=ta(ef),er.attributePatterns.push(et)):(ed[ef]||ec.push(ef),ed[ef]=et)}})})(eu,ef),ed&&(ef.outputName=ei),"@"===ei){if(!et.isNone())return[];et=I.some(ef)}return[ed?{name:ei,element:ef,aliasName:ed}:{name:ei,element:ef}]}return[]})})(er,null!=et?et:""),({name:et,element:er,aliasName:ec})=>{(ec&&(ei[ec]=er),es.test(et))?(er.pattern=ta(et),ed.push(er)):ei[et]=er})},S=et=>{ed=[],q(eJ(ei),et=>{delete ei[et]}),E(et)},_=et=>{delete r0.text_block_elements,delete r0.block_elements,q((et=>{let er=/^(~)?(.+)$/;return te(ea(et,","),et=>{let ei=er.exec(et);if(ei){let et="~"===ei[1];return[{inline:et,cloneName:et?"span":"div",name:ei[2]}]}return[]})})(null!=et?et:""),({inline:et,name:er,cloneName:ed})=>{if(es[er]=es[ed],ec[er]=ed,eP[er.toUpperCase()]={},eP[er]={},et||(eH[er.toUpperCase()]={},eH[er]={}),!ei[er]){let et=ei[ed];et=r3({},et),delete et.removeEmptyAttrs,delete et.removeEmpty,ei[er]=et}ge(es,(et,ei)=>{et[ed]&&(es[ei]=et=r3({},es[ei]),et[er]=et[ed])})})},R=et=>{q((et=>{let er=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return te(ea(et,","),et=>{let ei=er.exec(et);if(ei){let et=ei[1];return[{operation:et?"-"===et?"remove":"add":"replace",name:ei[2],validChildren:ea(ei[3],"|")}]}return[]})})(null!=et?et:""),({operation:et,name:er,validChildren:ei})=>{let ed="replace"===et?{"#comment":{}}:es[er];q(ei,er=>{"remove"===et?delete ed[er]:ed[er]={}}),es[er]=ed})},A=et=>{let er=ei[et];if(er)return er;let es=ed.length;for(;es--;){let er=ed[es];if(er.pattern.test(et))return er}};et.valid_elements?(S(et.valid_elements),r2(ep,(et,er)=>{es[er]=et.children})):(r2(ep,(et,er)=>{ei[er]={attributes:et.attributes,attributesOrder:et.attributesOrder},es[er]=et.children}),r2(ea("strong/b em/i"),et=>{let er=ea(et,"/");ei[er[1]].outputName=er[0]}),r2(eq,(er,es)=>{ei[es]&&(et.padd_empty_block_inline_children&&(ei[es].paddInEmptyBlock=!0),ei[es].removeEmpty=!0)}),r2(ea("ol ul blockquote a table tbody"),et=>{ei[et]&&(ei[et].removeEmpty=!0)}),r2(ea("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),et=>{ei[et]&&(ei[et].paddEmpty=!0)}),r2(ea("span"),et=>{ei[et].removeEmptyAttrs=!0})),_(et.custom_elements),R(et.valid_children),E(et.extended_valid_elements),R("+ol[ul|ol],+ul[ul|ol]"),r2({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(et,er)=>{ei[er]&&(ei[er].parentsRequired=ea(et))}),et.invalid_elements&&r2(r8(et.invalid_elements),et=>{ei[et]&&delete ei[et]}),A("span")||E("span[!data-mce-type|*]");let ej=N(ev),e$=N(ey),eV=N(eS),eG=N(eD),eW=N(eH),eK=N(eU),eY=N(eq),eX=N(Object.seal(eB)),eZ=N(eL),eQ=N(eP),e0=N(eM),e1=N(eI),e2=N(ez),e3=N(Object.seal(eu)),e8=N(ec);return{type:ef,children:es,elements:ei,getValidStyles:ej,getValidClasses:eV,getBlockElements:eW,getInvalidStyles:e$,getVoidElements:eX,getTextBlockElements:eK,getTextInlineElements:eY,getBoolAttrs:eG,getElementRule:A,getSelfClosingElements:eZ,getNonEmptyElements:eQ,getMoveCaretBeforeOnEnterElements:e0,getWhitespaceElements:e1,getTransparentElements:e2,getSpecialElements:e3,isValidChild:(et,er)=>{let ei=es[et.toLowerCase()];return!(!ei||!ei[er.toLowerCase()])},isValid:(et,er)=>{let ei=A(et);if(ei){if(!er)return!0;{if(ei.attributes[er])return!0;let et=ei.attributePatterns;if(et){let ei=et.length;for(;ei--;)if(et[ei].pattern.test(er))return!0}}}return!1},getCustomElements:e8,addValidElements:E,setValidElements:S,addCustomElements:_,addValidChildren:R}},ua=(et={},er)=>{let ei,es;let ed=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,ec=/\s*([^:]+):\s*([^;]+);?/g,eu=/\s+$/,ef={};er&&(ei=er.getValidStyles(),es=er.getInvalidStyles());let ep="\\\" \\' \\; \\: ; : \uFEFF".split(" ");for(let et=0;et<ep.length;et++)ef[ep[et]]="\uFEFF"+et,ef["\uFEFF"+et]=ep[et];let ev={parse:er=>{var ei,es,ep;let ey={},eS=!1,eI=et.url_converter,eL=et.url_converter_scope||ev,m=(et,er,ei)=>{let es=ey[et+"-top"+er];if(!es)return;let ed=ey[et+"-right"+er];if(!ed)return;let ec=ey[et+"-bottom"+er];if(!ec)return;let eu=ey[et+"-left"+er];if(!eu)return;let ef=[es,ed,ec,eu],ep=ef.length-1;for(;ep--&&ef[ep]===ef[ep+1];);ep>-1&&ei||(ey[et+er]=-1===ep?ef[0]:ef.join(" "),delete ey[et+"-top"+er],delete ey[et+"-right"+er],delete ey[et+"-bottom"+er],delete ey[et+"-left"+er])},f=et=>{let er=ey[et];if(!er)return;let ei=er.indexOf(",")>-1?[er]:er.split(" "),es=ei.length;for(;es--;)if(ei[es]!==ei[0])return!1;return ey[et]=ei[0],!0},g=et=>(eS=!0,ef[et]),p=(et,er)=>(eS&&(et=et.replace(/\uFEFF[0-9]/g,et=>ef[et])),er||(et=et.replace(/\\([\'\";:])/g,"$1")),et),h=et=>String.fromCharCode(parseInt(et.slice(1),16)),b=et=>et.replace(/\\[0-9a-f]+/gi,h),v=(er,ei,es,ed,ec,eu)=>{if(ec=ec||eu)return"'"+(ec=p(ec)).replace(/\'/g,"\\'")+"'";if(ei=p(ei||es||ed||""),!et.allow_script_urls){let er=ei.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(er)||!et.allow_svg_data_urls&&/^data:image\/svg/i.test(er))return""}return eI&&(ei=eI.call(eL,ei,"style")),"url('"+ei.replace(/\'/g,"\\'")+"')"};if(er){let ef;for(er=(er=er.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,g).replace(/\"[^\"]+\"|\'[^\']+\'/g,et=>et.replace(/[;:]/g,g));ef=ec.exec(er);){ec.lastIndex=ef.index+ef[0].length;let er=ef[1].replace(eu,"").toLowerCase(),ei=ef[2].replace(eu,"");if(er&&ei){if(er=b(er),ei=b(ei),-1!==er.indexOf("\uFEFF")||-1!==er.indexOf('"')||!et.allow_script_urls&&("behavior"===er||/expression\s*\(|\/\*|\*\//.test(ei)))continue;"font-weight"===er&&"700"===ei?ei="bold":"color"!==er&&"background-color"!==er||(ei=ei.toLowerCase()),ei=ei.replace(ed,v),ey[er]=eS?p(ei,!0):ei}}m("border","",!0),m("border","-width"),m("border","-color"),m("border","-style"),m("padding",""),m("margin",""),es="border-style",ep="border-color",f(ei="border-width")&&f(es)&&f(ep)&&(ey.border=ey[ei]+" "+ey[es]+" "+ey[ep],delete ey[ei],delete ey[es],delete ey[ep]),"medium none"===ey.border&&delete ey.border,"none"===ey["border-image"]&&delete ey["border-image"]}return ey},serialize:(et,er)=>{let ed="",o=(er,ei)=>{let es=ei[er];if(es)for(let er=0,ei=es.length;er<ei;er++){let ei=es[er],ec=et[ei];ec&&(ed+=(ed.length>0?" ":"")+ei+": "+ec+";")}};return er&&ei?(o("*",ei),o(er,ei)):ge(et,(et,ei)=>{et&&((et,er)=>{if(!es||!er)return!0;let ei=es["*"];return!(ei&&ei[et]||(ei=es[er])&&ei[et])})(ei,er)&&(ed+=(ed.length>0?" ":"")+ei+": "+et+";")}),ed}};return ev},r5={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},fa=(et,er)=>{let ei=null!=er?er:{};for(let er in et)ke(r5,er)||(ei[er]=et[er]);return C(et.composedPath)&&(ei.composedPath=()=>et.composedPath()),ei},ga=(et,er,ei,es)=>{var ed;let ec=fa(er,es);return ec.type=et,y(ec.target)&&(ec.target=null!==(ed=ec.srcElement)&&void 0!==ed?ed:ei),(y(er.preventDefault)||er instanceof Event||ej(er.initEvent))&&(ec.preventDefault=()=>{ec.defaultPrevented=!0,ec.isDefaultPrevented=eG,ej(er.preventDefault)&&er.preventDefault()},ec.stopPropagation=()=>{ec.cancelBubble=!0,ec.isPropagationStopped=eG,ej(er.stopPropagation)&&er.stopPropagation()},ec.stopImmediatePropagation=()=>{ec.isImmediatePropagationStopped=eG,ec.stopPropagation()},ec.isDefaultPrevented===eG||ec.isDefaultPrevented===eV||(ec.isDefaultPrevented=!0===ec.defaultPrevented?eG:eV,ec.isPropagationStopped=!0===ec.cancelBubble?eG:eV,ec.isImmediatePropagationStopped=eV)),ec},r6=/^(?:mouse|contextmenu)|click/,ha=(et,er,ei,es)=>{et.addEventListener(er,ei,es||!1)},ba=(et,er,ei,es)=>{et.removeEventListener(er,ei,es||!1)},va=(et,er)=>{let ei=ga(et.type,et,document,er);if(C(et)&&r6.test(et.type)&&ez(et.pageX)&&!ez(et.clientX)){let er=ei.target.ownerDocument||document,es=er.documentElement,ed=er.body;ei.pageX=et.clientX+(es&&es.scrollLeft||ed&&ed.scrollLeft||0)-(es&&es.clientLeft||ed&&ed.clientLeft||0),ei.pageY=et.clientY+(es&&es.scrollTop||ed&&ed.scrollTop||0)-(es&&es.clientTop||ed&&ed.clientTop||0)}return ei},ya=(et,er,ei)=>{let es=et.document,ed={type:"ready"};if(ei.domLoaded)return void er(ed);let s=()=>{ba(et,"DOMContentLoaded",s),ba(et,"load",s),ei.domLoaded||(ei.domLoaded=!0,er(ed)),et=null};"complete"===es.readyState||"interactive"===es.readyState&&es.body?s():ha(et,"DOMContentLoaded",s),ei.domLoaded||ha(et,"load",s)};let Ca=class Ca{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(et,er,ei,es){let ed,ec;let eu=this,ef=window,i=et=>{eu.executeHandlers(va(et||ef.event),ec)};if(!et||tJ(et)||t0(et))return ei;et[eu.expando]?ec=et[eu.expando]:(ec=eu.count++,et[eu.expando]=ec,eu.events[ec]={}),es=es||et;let ep=er.split(" "),ev=ep.length;for(;ev--;){let er=ep[ev],ey=i,eS=!1,eI=!1;"DOMContentLoaded"===er&&(er="ready"),eu.domLoaded&&"ready"===er&&"complete"===et.readyState?ei.call(es,va({type:er})):(eu.hasFocusIn||"focusin"!==er&&"focusout"!==er||(eS=!0,eI="focusin"===er?"focus":"blur",ey=et=>{let er=va(et||ef.event);er.type="focus"===er.type?"focusin":"focusout",eu.executeHandlers(er,ec)}),(ed=eu.events[ec][er])?"ready"===er&&eu.domLoaded?ei(va({type:er})):ed.push({func:ei,scope:es}):(eu.events[ec][er]=ed=[{func:ei,scope:es}],ed.fakeName=eI,ed.capture=eS,ed.nativeHandler=ey,"ready"===er?ya(et,ey,eu):ha(et,eI||er,ey,eS)))}return et=ed=null,ei}unbind(et,er,ei){if(!et||tJ(et)||t0(et))return this;let es=et[this.expando];if(es){let ed=this.events[es];if(er){let es=er.split(" "),ec=es.length;for(;ec--;){let er=es[ec],eu=ed[er];if(eu){if(ei){let et=eu.length;for(;et--;)if(eu[et].func===ei){let ei=eu.nativeHandler,es=eu.fakeName,ec=eu.capture,ef=eu.slice(0,et).concat(eu.slice(et+1));ef.nativeHandler=ei,ef.fakeName=es,ef.capture=ec,ed[er]=ef}}ei&&0!==eu.length||(delete ed[er],ba(et,eu.fakeName||er,eu.nativeHandler,eu.capture))}}}else ge(ed,(er,ei)=>{ba(et,er.fakeName||ei,er.nativeHandler,er.capture)}),ed={};for(let et in ed)if(ke(ed,et))return this;delete this.events[es];try{delete et[this.expando]}catch(er){et[this.expando]=null}}return this}fire(et,er,ei){return this.dispatch(et,er,ei)}dispatch(et,er,ei){if(!et||tJ(et)||t0(et))return this;let es=va({type:er,target:et},ei);do{let er=et[this.expando];er&&this.executeHandlers(es,er),et=et.parentNode||et.ownerDocument||et.defaultView||et.parentWindow}while(et&&!es.isPropagationStopped());return this}clean(et){if(!et||tJ(et)||t0(et))return this;if(et[this.expando]&&this.unbind(et),et.getElementsByTagName||(et=et.document),et&&et.getElementsByTagName){this.unbind(et);let er=et.getElementsByTagName("*"),ei=er.length;for(;ei--;)(et=er[ei])[this.expando]&&this.unbind(et)}return this}destroy(){this.events={}}cancel(et){return et&&(et.preventDefault(),et.stopImmediatePropagation()),!1}executeHandlers(et,er){let ei=this.events[er],es=ei&&ei[et.type];if(es)for(let er=0,ei=es.length;er<ei;er++){let ei=es[er];if(ei&&!1===ei.func.call(ei.scope,et)&&et.preventDefault(),et.isImmediatePropagationStopped())return}}};Ca.Event=new Ca;let r9=tU.each,r4=tU.grep,r7="data-mce-style",nt=tU.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Sa=(et,er,ei)=>{y(ei)||""===ei?on(et,er):Jt(et,er,ei)},_a=et=>et.replace(/[A-Z]/g,et=>"-"+et.toLowerCase()),Na=(et,er)=>{let ei=0;if(et)for(let es=et.nodeType,ed=et.previousSibling;ed;ed=ed.previousSibling){let et=ed.nodeType;er&&tJ(ed)&&(et===es||!ed.data.length)||(ei++,es=et)}return ei},Ra=(et,er)=>{let ei=en(er,"style"),es=et.serialize(et.parse(ei),Ht(er));Sa(er,r7,es)},Aa=(et,er,ei)=>{let es=_a(er);y(ei)||""===ei?fo(et,es):ao(et,es,e$(ei)?ke(nt,es)?ei+"":ei+"px":ei)},Oa=(et,er={})=>{let ei={},es=window,ed={},ec=0,eu=rj.forElement(pn(et),{contentCssCors:er.contentCssCors,referrerPolicy:er.referrerPolicy}),ef=[],ep=er.schema?er.schema:ca({}),ev=ua({url_converter:er.url_converter,url_converter_scope:er.url_converter_scope},er.schema),ey=er.ownEvents?new Ca:Ca.Event,eS=ep.getBlockElements(),f=er=>er&&et&&eP(er)?et.getElementById(er):er,g=et=>{let er=f(et);return C(er)?pn(er):null},h=(et,er,ei="")=>{let es;let ed=g(et);if(C(ed)&&tz(ed)){let et=eB[er];es=et&&et.get?et.get(ed.dom,er):en(ed,er)}return C(es)?es:ei},b=et=>{let er=f(et);return y(er)?[]:er.attributes},v=(et,ei,es)=>{T(et,et=>{if(tY(et)){let ed=pn(et),ec=""===es?null:es,eu=en(ed,ei),ef=eB[ei];ef&&ef.set?ef.set(ed.dom,ec,ei):Sa(ed,ei,ec),eu!==ec&&er.onSetAttrib&&er.onSetAttrib({attrElm:ed.dom,attrName:ei,attrValue:ec})}})},x=()=>er.root_element||et.body,k=(er,ei)=>((et,er,ei)=>{let es=0,ed=0,ec=et.ownerDocument;if(ei=ei||et,er){var eu;if(ei===et&&er.getBoundingClientRect&&"static"===lo(pn(et),"position")){let ei=er.getBoundingClientRect();return{x:es=ei.left+(ec.documentElement.scrollLeft||et.scrollLeft)-ec.documentElement.clientLeft,y:ed=ei.top+(ec.documentElement.scrollTop||et.scrollTop)-ec.documentElement.clientTop}}let ef=er;for(;ef&&ef!==ei&&ef.nodeType&&!Ps(ef,ei);){let et=ef;es+=et.offsetLeft||0,ed+=et.offsetTop||0,ef=et.offsetParent}for(ef=er.parentNode;ef&&ef!==ei&&ef.nodeType&&!Ps(ef,ei);)es-=ef.scrollLeft||0,ed-=ef.scrollTop||0,ef=ef.parentNode;ed+=(eu=pn(er),rz.isFirefox()&&"table"===Ht(eu)?Ds(Mn(eu)).filter(et=>"caption"===Ht(et)).bind(et=>Ds(Ln(et)).map(er=>{let ei=er.dom.offsetTop,es=et.dom.offsetTop,ed=et.dom.offsetHeight;return ei<=es?-ed:0})).getOr(0):0)}return{x:es,y:ed}})(et.body,f(er),ei),S=(et,er,ei)=>{let es=f(et);if(!y(es)&&tY(es))return ei?lo(pn(es),_a(er)):("float"===(er=er.replace(/-(\D)/g,(et,er)=>er.toUpperCase()))&&(er="cssFloat"),es.style?es.style[er]:void 0)},_=et=>{let er=f(et);if(!er)return{w:0,h:0};let ei=S(er,"width"),es=S(er,"height");return ei&&-1!==ei.indexOf("px")||(ei="0"),es&&-1!==es.indexOf("px")||(es="0"),{w:parseInt(ei,10)||er.offsetWidth||er.clientWidth,h:parseInt(es,10)||er.offsetHeight||er.clientHeight}},R=(et,er)=>{if(!et)return!1;let ei=eU(et)?et:[et];return $(ei,et=>xn(pn(et),er))},A=(et,er,ei,es)=>{let ed=[],ec=f(et);es=void 0===es;let eu=ei||("BODY"!==x().nodeName?x().parentNode:null);if(eP(er)){if("*"===er)er=tY;else{let et=er;er=er=>R(er,et)}}for(;ec&&!(ec===eu||y(ec.nodeType)||t1(ec)||t2(ec));){if(!er||er(ec)){if(!es)return[ec];ed.push(ec)}ec=ec.parentNode}return es?ed:null},O=(et,er,ei)=>{let es=er;if(et){eP(er)&&(es=et=>R(et,er));for(let er=et[ei];er;er=er[ei])if(ej(es)&&es(er))return er}return null},T=function(et,er,ei){let es=null!=ei?ei:this;if(eU(et)){let ei=[];return r9(et,(et,ed)=>{let ec=f(et);ec&&ei.push(er.call(es,ec,ed))}),ei}{let ei=f(et);return!!ei&&er.call(es,ei)}},B=(et,er)=>{T(et,et=>{ge(er,(er,ei)=>{v(et,ei,er)})})},D=(et,er)=>{T(et,et=>{let ei=pn(et);So(ei,er)})},P=(er,ei,es,ed,ec)=>T(er,er=>{let eu=eP(ei)?et.createElement(ei):ei;return C(es)&&B(eu,es),ed&&(!eP(ed)&&ed.nodeType?eu.appendChild(ed):eP(ed)&&D(eu,ed)),ec?eu:er.appendChild(eu)}),L=(er,ei,es)=>P(et.createElement(er),er,ei,es,!0),eI=rQ.encodeAllRaw,I=(et,er)=>T(et,et=>{let ei=pn(et);return er&&q(Mn(ei),et=>{tj(et)&&0===et.dom.length?wo(et):go(ei,et)}),wo(ei),ei.dom}),F=(et,er,ei)=>{T(et,et=>{if(tY(et)){let es=pn(et),ed=er.split(" ");q(ed,et=>{C(ei)?(ei?un:fn)(es,et):(an(es)?es.dom.classList.toggle(et):H(ln(es),et)?cn(es,et):dn(es,et),mn(es))})}})},U=(et,er,ei)=>T(er,es=>{var ed;let ec=eU(er)?et.cloneNode(!0):et;return ei&&r9(r4(es.childNodes),et=>{ec.appendChild(et)}),null===(ed=es.parentNode)||void 0===ed||ed.replaceChild(ec,es),es}),z=et=>{if(tY(et)){let er="a"===et.nodeName.toLowerCase()&&!h(et,"href")&&h(et,"id");if(h(et,"name")||h(et,"data-mce-bookmark")||er)return!0}return!1},j=()=>et.createRange(),V=(ei,ed,ec,eu)=>{if(eU(ei)){let et=ei.length,er=[];for(;et--;)er[et]=V(ei[et],ed,ec,eu);return er}return er.collect&&(ei===et||ei===es)&&ef.push([ei,ed,ec,eu]),ey.bind(ei,ed,ec,eu||eL)},W=(er,ei,ed)=>{if(eU(er)){let et=er.length,es=[];for(;et--;)es[et]=W(er[et],ei,ed);return es}if(ef.length>0&&(er===et||er===es)){let et=ef.length;for(;et--;){let[es,ec,eu]=ef[et];er!==es||ei&&ei!==ec||ed&&ed!==eu||ey.unbind(es,ec,eu)}}return ey.unbind(er,ei,ed)},K=et=>{if(et&&tY(et)){let er=et.getAttribute("data-mce-contenteditable");return er&&"inherit"!==er?er:"inherit"!==et.contentEditable?et.contentEditable:null}return null},eL={doc:et,settings:er,win:es,files:ed,stdMode:!0,boxModel:!0,styleSheetLoader:eu,boundEvents:ef,styles:ev,schema:ep,events:ey,isBlock:et=>eP(et)?ke(eS,et):tY(et)&&(ke(eS,et.nodeName)||As(ep,et)),root:null,clone:(et,er)=>et.cloneNode(er),getRoot:x,getViewPort:et=>{let er=Mo(et);return{x:er.x,y:er.y,w:er.width,h:er.height}},getRect:et=>{let er=f(et),ei=k(er),es=_(er);return{x:ei.x,y:ei.y,w:es.w,h:es.h}},getSize:_,getParent:(et,er,ei)=>{let es=A(et,er,ei,!1);return es&&es.length>0?es[0]:null},getParents:A,get:f,getNext:(et,er)=>O(et,er,"nextSibling"),getPrev:(et,er)=>O(et,er,"previousSibling"),select:(ei,es)=>{var ed,ec;let eu=null!==(ec=null!==(ed=f(es))&&void 0!==ed?ed:er.root_element)&&void 0!==ec?ec:et;return ej(eu.querySelectorAll)?eX(eu.querySelectorAll(ei)):[]},is:R,add:P,create:L,createHTML:(et,er,ei="")=>{let es="<"+et;for(let et in er)Ee(er,et)&&(es+=" "+et+'="'+eI(er[et])+'"');return Ye(ei)&&ke(ep.getVoidElements(),et)?es+" />":es+">"+ei+"</"+et+">"},createFragment:er=>{let ei;let es=et.createElement("div"),ed=et.createDocumentFragment();for(ed.appendChild(es),er&&(es.innerHTML=er);ei=es.firstChild;)ed.appendChild(ei);return ed.removeChild(es),ed},remove:I,setStyle:(et,ei,es)=>{T(et,et=>{let ed=pn(et);Aa(ed,ei,es),er.update_styles&&Ra(ev,ed)})},getStyle:S,setStyles:(et,ei)=>{T(et,et=>{let es=pn(et);ge(ei,(et,er)=>{Aa(es,er,et)}),er.update_styles&&Ra(ev,es)})},removeAllAttribs:et=>T(et,et=>{let er=et.attributes;for(let ei=er.length-1;ei>=0;ei--)et.removeAttributeNode(er.item(ei))}),setAttrib:v,setAttribs:B,getAttrib:h,getPos:k,parseStyle:et=>ev.parse(et),serializeStyle:(et,er)=>ev.serialize(et,er),addStyle:er=>{if(eL!==Oa.DOM&&et===document){if(ei[er])return;ei[er]=!0}let es=et.getElementById("mceDefaultStyles");if(!es){(es=et.createElement("style")).id="mceDefaultStyles",es.type="text/css";let er=et.head;er.firstChild?er.insertBefore(es,er.firstChild):er.appendChild(es)}es.styleSheet?es.styleSheet.cssText+=er:es.appendChild(et.createTextNode(er))},loadCSS:et=>{et||(et=""),q(et.split(","),et=>{ed[et]=!0,eu.load(et).catch(E)})},addClass:(et,er)=>{F(et,er,!0)},removeClass:(et,er)=>{F(et,er,!1)},hasClass:(et,er)=>{let ei=g(et),es=er.split(" ");return C(ei)&&ne(es,et=>gn(ei,et))},toggleClass:F,show:et=>{T(et,et=>fo(pn(et),"display"))},hide:et=>{T(et,et=>ao(pn(et),"display","none"))},isHidden:et=>{let er=g(et);return C(er)&&Pt(uo(er,"display"),"none")},uniqueId:et=>(et||"mce_")+ec++,setHTML:D,getOuterHTML:et=>{let er=g(et);return C(er)?tY(er.dom)?er.dom.outerHTML:(et=>{let er=bn("div"),ei=pn(et.dom.cloneNode(!0));return bo(er,ei),Eo(er)})(er):""},setOuterHTML:(et,er)=>{T(et,et=>{tY(et)&&(et.outerHTML=er)})},decode:rQ.decode,encode:eI,insertAfter:(et,er)=>{let ei=f(er);return T(et,et=>{let er=null==ei?void 0:ei.parentNode,es=null==ei?void 0:ei.nextSibling;return er&&(es?er.insertBefore(et,es):er.appendChild(et)),et})},replace:U,rename:(et,er)=>{if(et.nodeName!==er.toUpperCase()){let ei=L(er);return r9(b(et),er=>{v(ei,er.nodeName,h(et,er.nodeName))}),U(ei,et,!0),ei}return et},findCommonAncestor:(et,er)=>{let ei=et;for(;ei;){let et=er;for(;et&&ei!==et;)et=et.parentNode;if(ei===et)break;ei=ei.parentNode}return!ei&&et.ownerDocument?et.ownerDocument.documentElement:ei},run:T,getAttribs:b,isEmpty:(et,er,ei)=>{let es=0;if(z(et))return!1;let ed=et.firstChild;if(ed){let ec=new zo(ed,et),eu=ep?ep.getWhitespaceElements():{},ef=er||(ep?ep.getNonEmptyElements():null),ev=ed;do{if(tY(ev)){let et=ev.getAttribute("data-mce-bogus");if(et){ev=ec.next("all"===et);continue}let er=ev.nodeName.toLowerCase();if(ef&&ef[er]){if("br"===er){es++,ev=ec.next();continue}return!1}if(z(ev))return!1}if(t0(ev)||tJ(ev)&&!ds(ev.data)&&(!(null==ei?void 0:ei.includeZwsp)||!cs(ev.data))||tJ(ev)&&ev.parentNode&&eu[ev.parentNode.nodeName]&&ds(ev.data))return!1;ev=ec.next()}while(ev)}return es<=1},createRng:j,nodeIndex:Na,split:(et,er,ei)=>{let es,ed,ec=j();if(et&&er&&et.parentNode&&er.parentNode){let eu=et.parentNode;return ec.setStart(eu,Na(et)),ec.setEnd(er.parentNode,Na(er)),es=ec.extractContents(),(ec=j()).setStart(er.parentNode,Na(er)+1),ec.setEnd(eu,Na(et)+1),ed=ec.extractContents(),eu.insertBefore(Us(eL,es),et),ei?eu.insertBefore(ei,et):eu.insertBefore(er,et),eu.insertBefore(Us(eL,ed),et),I(et),ei||er}},bind:V,unbind:W,fire:(et,er,ei)=>ey.dispatch(et,er,ei),dispatch:(et,er,ei)=>ey.dispatch(et,er,ei),getContentEditable:K,getContentEditableParent:et=>{let er=x(),ei=null;for(let es=et;es&&es!==er&&null===(ei=K(es));es=es.parentNode);return ei},isEditable:et=>{if(C(et)){let er=tY(et)?et:et.parentElement;return C(er)&&no(pn(er))}return!1},destroy:()=>{if(ef.length>0){let et=ef.length;for(;et--;){let[er,ei,es]=ef[et];ey.unbind(er,ei,es)}}ge(ed,(et,er)=>{eu.unload(er),delete ed[er]})},isChildOf:(et,er)=>et===er||er.contains(et),dumpRng:et=>"startContainer: "+et.startContainer.nodeName+", startOffset: "+et.startOffset+", endContainer: "+et.endContainer.nodeName+", endOffset: "+et.endOffset},eB=((et,er,ei)=>{let es=er.keep_values,ed={set:(et,es,ed)=>{let ec=pn(et);ej(er.url_converter)&&C(es)&&(es=er.url_converter.call(er.url_converter_scope||ei(),String(es),ed,et)),Sa(ec,"data-mce-"+ed,es),Sa(ec,ed,es)},get:(et,er)=>{let ei=pn(et);return en(ei,"data-mce-"+er)||en(ei,er)}},ec={style:{set:(er,ei)=>{let ed=pn(er);es&&Sa(ed,r7,ei),on(ed,"style"),eP(ei)&&io(ed,et.parse(ei))},get:er=>{let ei=pn(er),es=en(ei,r7)||en(ei,"style");return et.serialize(et.parse(es),Ht(ei))}}};return es&&(ec.href=ec.src=ed),ec})(ev,er,N(eL));return eL};Oa.DOM=Oa(document),Oa.nodeIndex=Na;let nr=Oa.DOM;let Ba=class Ba{constructor(et={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=et}_setReferrerPolicy(et){this.settings.referrerPolicy=et}loadScript(et){return new Promise((er,ei)=>{let es;let s=()=>{nr.remove(ed),es&&(es.onerror=es.onload=es=null)},ed=nr.uniqueId();(es=document.createElement("script")).id=ed,es.type="text/javascript",es.src=tU._addCacheSuffix(et),this.settings.referrerPolicy&&nr.setAttrib(es,"referrerpolicy",this.settings.referrerPolicy),es.onload=()=>{s(),er()},es.onerror=()=>{s(),ei("Failed to load script: "+et)},(document.getElementsByTagName("head")[0]||document.body).appendChild(es)})}isDone(et){return 2===this.states[et]}markDone(et){this.states[et]=2}add(et){let er=this;return er.queue.push(et),void 0===er.states[et]&&(er.states[et]=0),new Promise((ei,es)=>{er.scriptLoadedCallbacks[et]||(er.scriptLoadedCallbacks[et]=[]),er.scriptLoadedCallbacks[et].push({resolve:ei,reject:es})})}load(et){return this.add(et)}remove(et){delete this.states[et],delete this.scriptLoadedCallbacks[et]}loadQueue(){let et=this.queue;return this.queue=[],this.loadScripts(et)}loadScripts(et){let er=this,n=(et,ei)=>{xe(er.scriptLoadedCallbacks,ei).each(er=>{q(er,er=>er[et](ei))}),delete er.scriptLoadedCallbacks[ei]},o=et=>{let er=G(et,et=>"rejected"===et.status);return er.length>0?Promise.reject(te(er,({reason:et})=>eU(et)?et:[et])):Promise.resolve()},r=et=>Promise.allSettled(V(et,et=>2===er.states[et]?(n("resolve",et),Promise.resolve()):3===er.states[et]?(n("reject",et),Promise.reject(et)):(er.states[et]=1,er.loadScript(et).then(()=>{er.states[et]=2,n("resolve",et);let ei=er.queue;return ei.length>0?(er.queue=[],r(ei).then(o)):Promise.resolve()},()=>(er.states[et]=3,n("reject",et),Promise.reject(et)))))),s=et=>(er.loading=!0,r(et).then(et=>{er.loading=!1;let ei=er.queueLoadedCallbacks.shift();return I.from(ei).each(P),o(et)})),ei=Se(et);return er.loading?new Promise((et,es)=>{er.queueLoadedCallbacks.push(()=>{s(ei).then(et,es)})}):s(ei)}};Ba.ScriptLoader=new Ba;let Da=et=>{let er=et;return{get:()=>er,set:et=>{er=et}}},na={},nl=Da("en"),Ma=()=>xe(na,nl.get()),ns={getData:()=>pe(na,et=>({...et})),setCode:et=>{et&&nl.set(et)},getCode:()=>nl.get(),add:(et,er)=>{let ei=na[et];ei||(na[et]=ei={});let es=V(eJ(er),et=>et.toLowerCase());ge(er,(et,ed)=>{let ec=ed.toLowerCase();ec!==ed&&((et,er)=>{let ei=et.indexOf(er);return -1!==ei&&et.indexOf(er,ei+1)>ei})(es,ec)?(ke(er,ec)||(ei[ec]=et),ei[ed]=et):ei[ec]=et})},translate:et=>{let er=Ma().getOr({}),n=et=>ej(et)?Object.prototype.toString.call(et):o(et)?"":""+et,o=et=>""===et||null==et,r=et=>{let ei=n(et);return ke(er,ei)?n(er[ei]):xe(er,ei.toLowerCase()).map(n).getOr(ei)},s=et=>et.replace(/{context:\w+}$/,"");if(o(et))return"";if(eM(et)&&ke(et,"raw"))return n(et.raw);if(eU(et)&&et.length>1){let er=et.slice(1);return s(r(et[0]).replace(/\{([0-9]+)\}/g,(et,ei)=>ke(er,ei)?n(er[ei]):et))}return s(r(et))},isRtl:()=>Ma().bind(et=>xe(et,"_dir")).exists(et=>"rtl"===et),hasCode:et=>ke(na,et)},Fa=()=>{let et=[],er={},ei={},es=[],r=(et,er)=>{let ei=G(es,ei=>ei.name===et&&ei.state===er);q(ei,et=>et.resolve())},s=et=>ke(er,et),a=(et,ei)=>{let es=ns.getCode();!es||ei&&-1===(","+(ei||"")+",").indexOf(","+es+",")||Ba.ScriptLoader.add(er[et]+"/langs/"+es+".js")},i=(et,er="added")=>"added"===er&&ke(ei,et)||"loaded"===er&&s(et)?Promise.resolve():new Promise(ei=>{es.push({name:et,state:er,resolve:ei})});return{items:et,urls:er,lookup:ei,get:et=>{if(ei[et])return ei[et].instance},requireLangPack:(et,er)=>{!1!==Fa.languageLoad&&(s(et)?a(et,er):i(et,"loaded").then(()=>a(et,er)))},add:(er,es)=>(et.push(es),ei[er]={instance:es},r(er,"added"),es),remove:et=>{delete er[et],delete ei[et]},createUrl:(et,er)=>eP(er)?eP(et)?{prefix:"",resource:er,suffix:""}:{prefix:et.prefix,resource:er,suffix:et.suffix}:er,load:(et,es)=>{if(er[et])return Promise.resolve();let ed=eP(es)?es:es.prefix+es.resource+es.suffix;0!==ed.indexOf("/")&&-1===ed.indexOf("://")&&(ed=Fa.baseURL+"/"+ed),er[et]=ed.substring(0,ed.lastIndexOf("/"));let a=()=>(r(et,"loaded"),Promise.resolve());return ei[et]?a():Ba.ScriptLoader.add(ed).then(a)},waitFor:i}};Fa.languageLoad=!0,Fa.baseURL="",Fa.PluginManager=Fa(),Fa.ThemeManager=Fa(),Fa.ModelManager=Fa();let Ua=et=>{let er=Da(I.none()),n=()=>er.get().each(et=>clearInterval(et));return{clear:()=>{n(),er.set(I.none())},isSet:()=>er.get().isSome(),get:()=>er.get(),set:ei=>{n(),er.set(I.some(setInterval(ei,et)))}}},za=()=>{let et=(et=>{let er=Da(I.none()),n=()=>er.get().each(et);return{clear:()=>{n(),er.set(I.none())},isSet:()=>er.get().isSome(),get:()=>er.get(),set:et=>{n(),er.set(I.some(et))}}})(E);return{...et,on:er=>et.get().each(er)}},ja=(et,er)=>{let ei=null;return{cancel:()=>{eH(ei)||(clearTimeout(ei),ei=null)},throttle:(...es)=>{eH(ei)&&(ei=setTimeout(()=>{ei=null,et.apply(null,es)},er))}}},Ha=(et,er)=>{let ei=null,o=()=>{eH(ei)||(clearTimeout(ei),ei=null)};return{cancel:o,throttle:(...es)=>{o(),ei=setTimeout(()=>{ei=null,et.apply(null,es)},er)}}},nd=N("mce-annotation"),nc=N("data-mce-annotation"),nu=N("data-mce-annotation-uid"),nf=N("data-mce-annotation-active"),nv=N("data-mce-annotation-classes"),ny=N("data-mce-annotation-attrs"),Ya=et=>er=>En(er,et),Xa=(et,er)=>{let ei=et.selection.getRng(),es=pn(ei.startContainer),ed=pn(et.getBody()),ec=er.fold(()=>"."+nd(),et=>`[${nc()}="${et}"]`),eu=In(es,ei.startOffset).getOr(es);return to(eu,ec,Ya(ed)).bind(er=>tn(er,`${nu()}`).bind(ei=>tn(er,`${nc()}`).map(er=>{let es=Ja(et,ei);return{uid:ei,name:er,elements:es}})))},Qa=(et,er)=>nn(et,"data-mce-bogus")||Uo(et,'[data-mce-bogus="all"]',Ya(er)),Ja=(et,er)=>{let ei=pn(et.getBody()),es=Fo(ei,`[${nu()}="${er}"]`);return G(es,et=>!Qa(et,ei))},Za=(et,er)=>{let ei=pn(et.getBody()),es=Fo(ei,`[${nc()}="${er}"]`),ed={};return q(es,et=>{if(!Qa(et,ei)){let er=en(et,nu()),ei=xe(ed,er).getOr([]);ed[er]=ei.concat([et])}}),ed},nR=0,ti=et=>{let er=(new Date).getTime();return et+"_"+Math.floor(1e9*Math.random())+ ++nR+String(er)},ni=(et,er)=>pn(et.dom.cloneNode(er)),oi=et=>ni(et,!1),ri=et=>ni(et,!0),si=(et,er,ei=eV)=>{let es=new zo(et,er),r=et=>{let er;do er=es[et]();while(er&&!tJ(er)&&!ei(er));return I.from(er).filter(tJ)};return{current:()=>I.from(es.current()).filter(tJ),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},ai=(et,er)=>{let ei=er||(er=>et.isBlock(er)||t3(er)||t6(er)),o=(et,er,ei,es)=>{if(tJ(et)){let ei=es(et,er,et.data);if(-1!==ei)return I.some({container:et,offset:ei})}return ei().bind(et=>o(et.container,et.offset,ei,es))};return{backwards:(er,es,ed,ec)=>{let eu=si(er,null!=ec?ec:et.getRoot(),ei);return o(er,es,()=>eu.prev().map(et=>({container:et,offset:et.length})),ed).getOrNull()},forwards:(er,es,ed,ec)=>{let eu=si(er,null!=ec?ec:et.getRoot(),ei);return o(er,es,()=>eu.next().map(et=>({container:et,offset:0})),ed).getOrNull()}}},nA=Math.round,li=et=>et?{left:nA(et.left),top:nA(et.top),bottom:nA(et.bottom),right:nA(et.right),width:nA(et.width),height:nA(et.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},di=(et,er)=>(et=li(et),er||(et.left=et.left+et.width),et.right=et.left,et.width=0,et),ci=(et,er,ei)=>et>=0&&et<=Math.min(er.height,ei.height)/2,ui=(et,er)=>{let ei=Math.min(er.height/2,et.height/2);return et.bottom-ei<er.top||!(et.top>er.bottom)&&ci(er.top-et.bottom,et,er)},mi=(et,er)=>et.top>er.bottom||!(et.bottom<er.top)&&ci(er.bottom-et.top,et,er),fi=(et,er,ei)=>{let es=Math.max(Math.min(er,et.left+et.width),et.left),ed=Math.max(Math.min(ei,et.top+et.height),et.top);return Math.sqrt((er-es)*(er-es)+(ei-ed)*(ei-ed))},gi=et=>{let er=et.startContainer,ei=et.startOffset;return er===et.endContainer&&er.hasChildNodes()&&et.endOffset===ei+1?er.childNodes[ei]:null},pi=(et,er)=>{if(tY(et)&&et.hasChildNodes()){let ei=et.childNodes,es=Math.min(Math.max(er,0),ei.length-1);return ei[es]}return et},nI=RegExp("[̀-ͯ҃-҇҈-҉֑-ֽֿׁ-ׂׄ-ׇׅؐ-ًؚ-ٰٟۖ-ۜ۟-ۤۧ-۪ۨ-ܑۭܰ-݊ަ-ް߫-߳ࠖ-࠙ࠛ-ࠣࠥ-ࠧࠩ-࡙࠭-࡛ࣣ-ंऺ़ु-ै्॑-ॗॢ-ॣঁ়াু-ৄ্ৗৢ-ৣਁ-ਂ਼ੁ-ੂੇ-ੈੋ-੍ੑੰ-ੱੵઁ-ં઼ુ-ૅે-ૈ્ૢ-ૣଁ଼ାିୁ-ୄ୍ୖୗୢ-ୣஂாீ்ௗఀా-ీె-ైొ-్ౕ-ౖౢ-ౣಁ಼ಿೂೆೌ-್ೕ-ೖೢ-ೣഁാു-ൄ്ൗൢ-ൣ්ාි-ුූෟัิ-ฺ็-๎ັິ-ູົ-ຼ່-ໍ༘-ཱ༹༙༵༷-ཾྀ-྄྆-྇ྍ-ྗྙ-ྼ࿆ိ-ူဲ-့္-်ွ-ှၘ-ၙၞ-ၠၱ-ၴႂႅ-ႆႍႝ፝-፟ᜒ-᜔ᜲ-᜴ᝒ-ᝓᝲ-ᝳ឴-឵ិ-ួំ៉-៓៝᠋-᠍ᢩᤠ-ᤢᤧ-ᤨᤲ᤹-᤻ᨗ-ᨘᨛᩖᩘ-ᩞ᩠ᩢᩥ-ᩬᩳ-᩿᩼᪰-᪽᪾ᬀ-ᬃ᬴ᬶ-ᬺᬼᭂ᭫-᭳ᮀ-ᮁᮢ-ᮥᮨ-ᮩ᮫-ᮭ᯦ᯨ-ᯩᯭᯯ-ᯱᰬ-ᰳᰶ-᰷᳐-᳔᳒-᳢᳠-᳨᳭᳴᳸-᳹᷀-᷵᷼-᷿‌-‍⃐-⃜⃝-⃠⃡⃢-⃤⃥-⃰⳯-⵿⳱ⷠ-〪ⷿ-〭〮-゙〯-゚꙯꙰-꙲ꙴ-꙽ꚞ-ꚟ꛰-꛱ꠂ꠆ꠋꠥ-ꠦ꣄꣠-꣱ꤦ-꤭ꥇ-ꥑꦀ-ꦂ꦳ꦶ-ꦹꦼꧥꨩ-ꨮꨱ-ꨲꨵ-ꨶꩃꩌꩼꪰꪲ-ꪴꪷ-ꪸꪾ-꪿꫁ꫬ-ꫭ꫶ꯥꯨ꯭ﬞ︀-️︠-︯ﾞ-ﾟ]"),bi=et=>eP(et)&&et.charCodeAt(0)>=768&&nI.test(et),nL=Wo("display","block table"),nB=Wo("float","left right"),nD=((...et)=>er=>{for(let ei=0;ei<et.length;ei++)if(!et[ei](er))return!1;return!0})(tY,ss,T(nB)),nF=T(Wo("white-space","pre pre-line pre-wrap")),nP=Oa.nodeIndex,Ni=(et,er)=>er<0&&tY(et)&&et.hasChildNodes()?void 0:pi(et,er),Ri=et=>et?et.createRange():Oa.DOM.createRng(),Ai=et=>eP(et)&&/[\r\n\t ]/.test(et),Oi=et=>!!et.setStart&&!!et.setEnd,Ti=et=>{let er=et.startContainer,ei=et.startOffset;if(Ai(et.toString())&&nF(er.parentNode)&&tJ(er)){let et=er.data;if(Ai(et[ei-1])||Ai(et[ei+1]))return!0}return!1},Bi=et=>0===et.left&&0===et.right&&0===et.top&&0===et.bottom,Di=et=>{var er;let ei;let es=et.getClientRects();return ei=es.length>0?li(es[0]):li(et.getBoundingClientRect()),!Oi(et)&&t3(et)&&Bi(ei)?(et=>{let er=et.ownerDocument,ei=Ri(er),es=er.createTextNode("\xa0"),ed=et.parentNode;ed.insertBefore(es,et),ei.setStart(es,0),ei.setEnd(es,1);let ec=li(ei.getBoundingClientRect());return ed.removeChild(es),ec})(et):Bi(ei)&&Oi(et)&&null!==(er=(et=>{let er=et.startContainer,ei=et.endContainer,es=et.startOffset,ed=et.endOffset;if(er===ei&&tJ(ei)&&0===es&&1===ed){let er=et.cloneRange();return er.setEndAfter(ei),Di(er)}return null})(et))&&void 0!==er?er:ei},Pi=(et,er)=>{let ei=di(et,er);return ei.width=1,ei.right=ei.left+1,ei},Li=(et,er,ei)=>{let o=()=>(ei||(ei=(et=>{let er=[],n=et=>{var ei;0!==et.height&&(er.length>0&&(ei=er[er.length-1],et.left===ei.left&&et.top===ei.top&&et.bottom===ei.bottom&&et.right===ei.right)||er.push(et))},o=(et,er)=>{let ei=Ri(et.ownerDocument);if(er<et.data.length){if(bi(et.data[er]))return;if(bi(et.data[er-1])&&(ei.setStart(et,er),ei.setEnd(et,er+1),!Ti(ei)))return void n(Pi(Di(ei),!1))}er>0&&(ei.setStart(et,er-1),ei.setEnd(et,er),Ti(ei)||n(Pi(Di(ei),!1))),er<et.data.length&&(ei.setStart(et,er),ei.setEnd(et,er+1),Ti(ei)||n(Pi(Di(ei),!0)))},ei=et.container(),es=et.offset();if(tJ(ei))return o(ei,es),er;if(tY(ei)){if(et.isAtEnd()){let et=Ni(ei,es);tJ(et)&&o(et,et.data.length),nD(et)&&!t3(et)&&n(Pi(Di(et),!1))}else{let ed=Ni(ei,es);if(tJ(ed)&&o(ed,0),nD(ed)&&et.isAtEnd())return n(Pi(Di(ed),!1)),er;let ec=Ni(et.container(),et.offset()-1);nD(ec)&&!t3(ec)&&(nL(ec)||nL(ed)||!nD(ed))&&n(Pi(Di(ec),!1)),nD(ed)&&n(Pi(Di(ed),!0))}}return er})(Li(et,er))),ei);return{container:N(et),offset:N(er),toRange:()=>{let ei=Ri(et.ownerDocument);return ei.setStart(et,er),ei.setEnd(et,er),ei},getClientRects:o,isVisible:()=>o().length>0,isAtStart:()=>(tJ(et),0===er),isAtEnd:()=>tJ(et)?er>=et.data.length:er>=et.childNodes.length,isEqual:ei=>ei&&et===ei.container()&&er===ei.offset(),getNode:ei=>Ni(et,ei?er-1:er)}};Li.fromRangeStart=et=>Li(et.startContainer,et.startOffset),Li.fromRangeEnd=et=>Li(et.endContainer,et.endOffset),Li.after=et=>Li(et.parentNode,nP(et)+1),Li.before=et=>Li(et.parentNode,nP(et)),Li.isAbove=(et,er)=>Mt(le(er.getClientRects()),de(et.getClientRects()),ui).getOr(!1),Li.isBelow=(et,er)=>Mt(de(er.getClientRects()),le(et.getClientRects()),mi).getOr(!1),Li.isAtStart=et=>!!et&&et.isAtStart(),Li.isAtEnd=et=>!!et&&et.isAtEnd(),Li.isTextPosition=et=>!!et&&tJ(et.container()),Li.isElementPosition=et=>!Li.isTextPosition(et);let Mi=(et,er)=>{tJ(er)&&0===er.data.length&&et.remove(er)},Ii=(et,er,ei)=>{t2(ei)?((et,er,ei)=>{let es=I.from(ei.firstChild),ed=I.from(ei.lastChild);er.insertNode(ei),es.each(er=>Mi(et,er.previousSibling)),ed.each(er=>Mi(et,er.nextSibling))})(et,er,ei):(er.insertNode(ei),Mi(et,ei.previousSibling),Mi(et,ei.nextSibling))},nM=Oa.nodeIndex,ji=et=>{let er=et.parentNode;return Go(er)?ji(er):er},Hi=et=>et?Te(et.childNodes,(et,er)=>(Go(er)&&"BR"!==er.nodeName?et=et.concat(Hi(er)):et.push(er),et),[]):[],$i=et=>er=>et===er,Vi=et=>(tJ(et)?"text()":et.nodeName.toLowerCase())+"["+(et=>{let er,ei;ei=Be(er=Hi(ji(et)),$i(et),et),er=er.slice(0,ei+1);let es=Te(er,(et,ei,es)=>(tJ(ei)&&tJ(er[es-1])&&et++,et),0);return(ei=Be(er=Oe(er,qo([et.nodeName])),$i(et),et))-es})(et)+"]",qi=(et,er)=>{let ei,es=[],ed=er.container(),ec=er.offset();if(tJ(ed))ei=((et,er)=>{let ei=et;for(;(ei=ei.previousSibling)&&tJ(ei);)er+=ei.data.length;return er})(ed,ec);else{let et=ed.childNodes;ec>=et.length?(ei="after",ec=et.length-1):ei="before",ed=et[ec]}es.push(Vi(ed));let eu=((et,er,ei)=>{let es=[];for(let ei=er.parentNode;ei&&ei!==et;ei=ei.parentNode)es.push(ei);return es})(et,ed);return eu=Oe(eu,T(Go)),(es=es.concat(Ae(eu,et=>Vi(et)))).reverse().join("/")+","+ei},Wi=(et,er)=>{if(!er)return null;let ei=er.split(","),es=ei[0].split("/"),ed=ei.length>1?ei[1]:"before",ec=Te(es,(et,er)=>{var ei,es;let ed;let ec=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(er);return ec?("text()"===ec[1]&&(ec[1]="#text"),ei=ec[1],es=parseInt(ec[2],10),ed=Oe(ed=Hi(et),(et,er)=>!tJ(et)||!tJ(ed[er-1])),(ed=Oe(ed,qo([ei])))[es]):null},et);if(!ec)return null;if(!tJ(ec)&&ec.parentNode){let et;return et="after"===ed?nM(ec)+1:nM(ec),Li(ec.parentNode,et)}return((et,er)=>{let ei=et,es=0;for(;tJ(ei);){let ed=ei.data.length;if(er>=es&&er<=es+ed){et=ei,er-=es;break}if(!tJ(ei.nextSibling)){et=ei,er=ed;break}es+=ed,ei=ei.nextSibling}return tJ(et)&&er>et.data.length&&(er=et.data.length),Li(et,er)})(ec,parseInt(ed,10))},Gi=(et,er,ei,es,ed)=>{let ec=ed?es.startContainer:es.endContainer,eu=ed?es.startOffset:es.endOffset,ef=[],ep=et.getRoot();if(tJ(ec))ef.push(ei?((et,er,ei)=>{let es=et(er.data.slice(0,ei)).length;for(let ei=er.previousSibling;ei&&tJ(ei);ei=ei.previousSibling)es+=et(ei.data).length;return es})(er,ec,eu):eu);else{let er=0,es=ec.childNodes;eu>=es.length&&es.length&&(er=1,eu=Math.max(0,es.length-1)),ef.push(et.nodeIndex(es[eu],ei)+er)}for(let er=ec;er&&er!==ep;er=er.parentNode)ef.push(et.nodeIndex(er,ei));return ef},Yi=(et,er,ei)=>{let es=0;return tU.each(et.select(er),et=>"all"===et.getAttribute("data-mce-bogus")?void 0:et!==ei&&void es++),es},Xi=(et,er)=>{let ei=er?et.startContainer:et.endContainer,es=er?et.startOffset:et.endOffset;if(tY(ei)&&"TR"===ei.nodeName){let ed=ei.childNodes;(ei=ed[Math.min(er?es:es-1,ed.length-1)])&&(es=er?0:ei.childNodes.length,er?et.setStart(ei,es):et.setEnd(ei,es))}},Qi=et=>(Xi(et,!0),Xi(et,!1),et),Ji=(et,er)=>{if(tY(et)&&t6(et=pi(et,er)))return et;if($r(et)){tJ(et)&&jr(et)&&(et=et.parentNode);let er=et.previousSibling;if(t6(er)||t6(er=et.nextSibling))return er}},Zi=(et,er,ei)=>{let es=ei.getNode(),ed=ei.getRng();if("IMG"===es.nodeName||t6(es)){let et=es.nodeName;return{name:et,index:Yi(ei.dom,et,es)}}let ec=Ji(ed.startContainer,ed.startOffset)||Ji(ed.endContainer,ed.endOffset);if(ec){let et=ec.tagName;return{name:et,index:Yi(ei.dom,et,ec)}}return((et,er,ei,es)=>{let ed=er.dom,ec=Gi(ed,et,ei,es,!0),eu=er.isForward(),ef=Xr(es)?{isFakeCaret:!0}:{};return er.isCollapsed()?{start:ec,forward:eu,...ef}:{start:ec,end:Gi(ed,et,ei,es,!1),forward:eu,...ef}})(et,ei,er,ed)},el=(et,er,ei)=>{let es={"data-mce-type":"bookmark",id:er,style:"overflow:hidden;line-height:0px"};return ei?et.create("span",es,"&#xFEFF;"):et.create("span",es)},tl=(et,er)=>{let ei=et.dom,es=et.getRng(),ed=ei.uniqueId(),ec=et.isCollapsed(),eu=et.getNode(),ef=eu.nodeName,ep=et.isForward();if("IMG"===ef)return{name:ef,index:Yi(ei,ef,eu)};let ev=Qi(es.cloneRange());if(!ec){ev.collapse(!1);let et=el(ei,ed+"_end",er);Ii(ei,ev,et)}(es=Qi(es)).collapse(!0);let ey=el(ei,ed+"_start",er);return Ii(ei,es,ey),et.moveToBookmark({id:ed,keep:!0,forward:ep}),{id:ed,forward:ep}},nU=O(Zi,R,!0),ol=et=>{let t=er=>er(et),er=N(et),o=()=>ei,ei={tag:!0,inner:et,fold:(er,ei)=>ei(et),isValue:eG,isError:eV,map:er=>nH.value(er(et)),mapError:o,bind:t,exists:t,forall:t,getOr:er,or:o,getOrThunk:er,orThunk:o,getOrDie:er,each:er=>{er(et)},toOptional:()=>I.some(et)};return ei},rl=et=>{let t=()=>er,er={tag:!1,inner:et,fold:(er,ei)=>er(et),isValue:eV,isError:eG,map:t,mapError:er=>nH.error(er(et)),bind:t,exists:eV,forall:eG,getOr:R,or:R,getOrThunk:D,orThunk:D,getOrDie:B(String(et)),each:E,toOptional:I.none};return er},nH={value:ol,error:rl,fromOption:(et,er)=>et.fold(()=>rl(er),ol)},al=et=>{if(!eU(et))throw Error("cases must be an array");if(0===et.length)throw Error("there must be at least one case");let er=[],ei={};return q(et,(es,ed)=>{let ec=eJ(es);if(1!==ec.length)throw Error("one and only one name per case");let eu=ec[0],ef=es[eu];if(void 0!==ei[eu])throw Error("duplicate key detected:"+eu);if("cata"===eu)throw Error("cannot have a case named cata (sorry)");if(!eU(ef))throw Error("case arguments must be an array");er.push(eu),ei[eu]=(...ei)=>{let es=ei.length;if(es!==ef.length)throw Error("Wrong number of arguments to case "+eu+". Expected "+ef.length+" ("+ef+"), got "+es);return{fold:(...er)=>{if(er.length!==et.length)throw Error("Wrong number of arguments to fold. Expected "+et.length+", got "+er.length);return er[ed].apply(null,ei)},match:et=>{let es=eJ(et);if(er.length!==es.length)throw Error("Wrong number of arguments to match. Expected: "+er.join(",")+"\nActual: "+es.join(","));if(!ne(er,et=>H(es,et)))throw Error("Not all branches were specified when using match. Specified: "+es.join(", ")+"\nRequired: "+er.join(", "));return et[eu].apply(null,ei)},log:et=>{console.log(et,{constructors:er,constructor:eu,params:ei})}}}}),ei};al([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);let il=et=>"inline-command"===et.type||"inline-format"===et.type,ll=et=>"block-command"===et.type||"block-format"===et.type,dl=et=>{let t=er=>nH.error({message:er,pattern:et}),n=(er,ei,es)=>{if(void 0!==et.format){let es;if(eU(et.format)){if(!ne(et.format,eP))return t(er+" pattern has non-string items in the `format` array");es=et.format}else{if(!eP(et.format))return t(er+" pattern has non-string `format` parameter");es=[et.format]}return nH.value(ei(es))}return void 0!==et.cmd?eP(et.cmd)?nH.value(es(et.cmd,et.value)):t(er+" pattern has non-string `cmd` parameter"):t(er+" pattern is missing both `format` and `cmd` parameters")};if(!eM(et))return t("Raw pattern is not an object");if(!eP(et.start))return t("Raw pattern is missing `start` parameter");if(void 0!==et.end){if(!eP(et.end))return t("Inline pattern has non-string `end` parameter");if(0===et.start.length&&0===et.end.length)return t("Inline pattern has empty `start` and `end` parameters");let er=et.start,ei=et.end;return 0===ei.length&&(ei=er,er=""),n("Inline",et=>({type:"inline-format",start:er,end:ei,format:et}),(et,es)=>({type:"inline-command",start:er,end:ei,cmd:et,value:es}))}return void 0!==et.replacement?eP(et.replacement)?0===et.start.length?t("Replacement pattern has empty `start` parameter"):nH.value({type:"inline-command",start:"",end:et.start,cmd:"mceInsertContent",value:et.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===et.start.length?t("Block pattern has empty `start` parameter"):n("Block",er=>({type:"block-format",start:et.start,format:er[0]}),(er,ei)=>({type:"block-command",start:et.start,cmd:er,value:ei}))},cl=et=>G(et,ll),ul=et=>G(et,il),ml=et=>{let er=(et=>{let er=[],ei=[];return q(et,et=>{et.fold(et=>{er.push(et)},et=>{ei.push(et)})}),{errors:er,values:ei}})(V(et,dl));return q(er.errors,et=>console.error(et.message,et.pattern)),er.values},nq=xt().deviceType,nz=nq.isTouch(),nj=Oa.DOM,hl=et=>u(et,RegExp),bl=et=>er=>er.options.get(et),vl=et=>eP(et)||eM(et),yl=(et,er="")=>ei=>{let es=eP(ei);if(es){if(-1!==ei.indexOf("=")){let ed=(et=>{let er=et.indexOf("=")>0?et.split(/[;,](?![^=;,]*(?:[;,]|$))/):et.split(",");return X(er,(et,er)=>{let ei=er.split("="),es=ei[0],ed=ei.length>1?ei[1]:es;return et[e1(es)]=e1(ed),et},{})})(ei);return{value:xe(ed,et.id).getOr(er),valid:es}}return{value:ei,valid:es}}return{valid:!1,message:"Must be a string."}},n$=bl("iframe_attrs"),nV=bl("doctype"),nG=bl("document_base_url"),nW=bl("body_id"),nK=bl("body_class"),nY=bl("content_security_policy"),nX=bl("br_in_pre"),nJ=bl("forced_root_block"),nZ=bl("forced_root_block_attrs"),nQ=bl("newline_behavior"),n0=bl("br_newline_selector"),n1=bl("no_newline_selector"),n2=bl("keep_styles"),n3=bl("end_container_on_empty_block"),n8=bl("automatic_uploads"),n5=bl("images_reuse_filename"),n6=bl("images_replace_blob_uris"),n9=bl("icons"),n4=bl("icons_url"),n7=bl("images_upload_url"),ot=bl("images_upload_base_path"),or=bl("images_upload_credentials"),oa=bl("images_upload_handler"),os=bl("content_css_cors"),od=bl("referrer_policy"),oc=bl("language"),ou=bl("language_url"),of=bl("indent_use_margin"),oh=bl("indentation"),oy=bl("content_css"),oR=bl("content_style"),oI=bl("font_css"),oT=bl("directionality"),oL=bl("inline_boundaries_selector"),oB=bl("object_resizing"),oD=bl("resize_img_proportional"),oF=bl("placeholder"),oP=bl("event_root"),oM=bl("service_message"),oU=bl("theme"),oH=bl("theme_url"),oq=bl("model"),oz=bl("model_url"),oj=bl("inline_boundaries"),o$=bl("formats"),oV=bl("preview_styles"),oG=bl("format_empty_lines"),oW=bl("format_noneditable_selector"),oK=bl("custom_ui_selector"),oY=bl("inline"),oX=bl("hidden_input"),oJ=bl("submit_patch"),oZ=bl("add_form_submit_trigger"),oQ=bl("add_unload_trigger"),o0=bl("custom_undo_redo_levels"),o1=bl("disable_nodechange"),o2=bl("readonly"),o3=bl("editable_root"),o8=bl("content_css_cors"),o5=bl("plugins"),o6=bl("external_plugins"),o9=bl("block_unsupported_drop"),o4=bl("visual"),o7=bl("visual_table_class"),at=bl("visual_anchor_class"),ar=bl("iframe_aria_text"),aa=bl("setup"),ad=bl("init_instance_callback"),ac=bl("urlconverter_callback"),ap=bl("auto_focus"),ay=bl("browser_spellcheck"),aw=bl("protect"),aO=bl("paste_block_drop"),aI=bl("paste_data_images"),aL=bl("paste_preprocess"),aB=bl("paste_postprocess"),aD=bl("newdocument_content"),aF=bl("paste_webkit_styles"),aP=bl("paste_remove_styles_if_webkit"),aM=bl("paste_merge_formats"),aU=bl("smart_paste"),aH=bl("paste_as_text"),aq=bl("paste_tab_spaces"),az=bl("allow_html_data_urls"),aj=bl("text_patterns"),a$=bl("text_patterns_lookup"),aV=bl("noneditable_class"),aG=bl("editable_class"),aW=bl("noneditable_regexp"),aK=bl("preserve_cdata"),aY=bl("highlight_on_focus"),aX=bl("xss_sanitization"),aJ=bl("init_content_sync"),sc=et=>tU.explode(et.options.get("images_file_types")),aZ=bl("table_tab_navigation"),aQ=bl("details_initial_state"),a0=bl("details_serialized_state"),uc=et=>{let er=et.parentNode;er&&er.removeChild(et)},mc=et=>{let er=Fr(et);return{count:et.length-er.length,text:er}},fc=et=>{let er;for(;-1!==(er=et.data.lastIndexOf("\uFEFF"));)et.deleteData(er,1)},gc=(et,er)=>(hc(et),er),pc=(et,er)=>Li.isTextPosition(er)?tJ(et)&&er.container()===et?((et,er)=>{let ei=mc(et.data.substr(0,er.offset())),es=mc(et.data.substr(er.offset()));return(ei.text+es.text).length>0?(fc(et),Li(et,er.offset()-ei.count)):er})(et,er):gc(et,er):er.container()===et.parentNode?((et,er)=>{let ei=er.container(),es=((et,er)=>{let ei=j(et,er);return -1===ei?I.none():I.some(ei)})(eX(ei.childNodes),et).map(et=>et<er.offset()?Li(ei,er.offset()-1):er).getOr(er);return hc(et),es})(et,er):gc(et,er),hc=et=>{tY(et)&&$r(et)&&(Vr(et)?et.removeAttribute("data-mce-caret"):uc(et)),tJ(et)&&(fc(et),0===et.data.length&&uc(et))},Cc=(et,er,ei)=>{let es,ed;let ec=di(er.getBoundingClientRect(),ei);if("BODY"===et.tagName){let er=et.ownerDocument.documentElement;es=et.scrollLeft||er.scrollLeft,ed=et.scrollTop||er.scrollTop}else{let er=et.getBoundingClientRect();es=et.scrollLeft-er.left,ed=et.scrollTop-er.top}ec.left+=es,ec.right+=es,ec.top+=ed,ec.bottom+=ed,ec.width=1;let eu=er.offsetWidth-er.clientWidth;return eu>0&&(ei&&(eu*=-1),ec.left+=eu,ec.right+=eu),ec},wc=(et,er,ei,es)=>{let ed,ec;let eu=za(),ef=nJ(et),ep=et.dom,d=()=>{(et=>{var er,ei;let es=Fo(pn(et),"*[contentEditable=false],video,audio,embed,object");for(let et=0;et<es.length;et++){let ed=es[et].dom,ec=ed.previousSibling;if(Gr(ec)){let et=ec.data;1===et.length?null===(er=ec.parentNode)||void 0===er||er.removeChild(ec):ec.deleteData(et.length-1,1)}Kr(ec=ed.nextSibling)&&(1===ec.data.length?null===(ei=ec.parentNode)||void 0===ei||ei.removeChild(ec):ec.deleteData(0,1))}})(er),ec&&(hc(ec),ec=null),eu.on(et=>{ep.remove(et.caret),eu.clear()}),ed&&(clearInterval(ed),ed=void 0)};return{show:(et,ev)=>{let ey;if(d(),t9(ev))return null;if(!ei(ev))return ec=((et,er)=>{var ei;let es=(null!==(ei=et.ownerDocument)&&void 0!==ei?ei:document).createTextNode("\uFEFF"),ed=et.parentNode;if(er){let er=et.previousSibling;if(tJ(er)){if($r(er))return er;if(Gr(er))return er.splitText(er.data.length-1)}null==ed||ed.insertBefore(es,et)}else{let er=et.nextSibling;if(tJ(er)){if($r(er))return er;if(Kr(er))return er.splitText(1),er}et.nextSibling?null==ed||ed.insertBefore(es,et.nextSibling):null==ed||ed.appendChild(es)}return es})(ev,et),ey=ev.ownerDocument.createRange(),kc(ec.nextSibling)?(ey.setStart(ec,0),ey.setEnd(ec,0)):(ey.setStart(ec,1),ey.setEnd(ec,1)),ey;{let ei=((et,er,ei)=>{var es;let ed=(null!==(es=er.ownerDocument)&&void 0!==es?es:document).createElement(et);ed.setAttribute("data-mce-caret",ei?"before":"after"),ed.setAttribute("data-mce-bogus","all"),ed.appendChild(Dr().dom);let ec=er.parentNode;return ei?null==ec||ec.insertBefore(ed,er):er.nextSibling?null==ec||ec.insertBefore(ed,er.nextSibling):null==ec||ec.appendChild(ed),ed})(ef,ev,et),eS=Cc(er,ev,et);ep.setStyle(ei,"top",eS.top),ec=ei;let eI=ep.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});ep.setStyles(eI,{...eS}),ep.add(er,eI),eu.set({caret:eI,element:ev,before:et}),et&&ep.addClass(eI,"mce-visual-caret-before"),ed=setInterval(()=>{eu.on(et=>{es()?ep.toggleClass(et.caret,"mce-visual-caret-hidden"):ep.addClass(et.caret,"mce-visual-caret-hidden")})},500),(ey=ev.ownerDocument.createRange()).setStart(ei,0),ey.setEnd(ei,0)}return ey},hide:d,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{eu.on(et=>{let ei=Cc(er,et.element,et.before);ep.setStyles(et.caret,{...ei})})},destroy:()=>clearInterval(ed)}},xc=()=>tP.browser.isFirefox(),kc=et=>t6(et)||t7(et),Ec=et=>(kc(et)||Yo(et)&&xc())&&On(pn(et)).exists(no),a1=Wo("display","block table table-cell table-caption list-item"),Pc=et=>et>0,Lc=et=>et<0,Mc=(et,er)=>{let ei;for(;ei=et(er);)if(!jr(ei))return ei;return null},Ic=(et,er,ei,es,ed)=>{let ec;let eu=new zo(et,es),ef=t6(et)||jr(et);if(Lc(er)){if(ef&&ei(ec=Mc(eu.prev.bind(eu),!0)))return ec;for(;ec=Mc(eu.prev.bind(eu),ed);)if(ei(ec))return ec}if(Pc(er)){if(ef&&ei(ec=Mc(eu.next.bind(eu),!0)))return ec;for(;ec=Mc(eu.next.bind(eu),ed);)if(ei(ec))return ec}return null},Fc=(et,er)=>{for(;et&&et!==er;){if(a1(et))return et;et=et.parentNode}return null},Uc=(et,er,ei)=>Fc(et.container(),ei)===Fc(er.container(),ei),zc=(et,er)=>{if(!er)return I.none();let ei=er.container(),es=er.offset();return tY(ei)?I.from(ei.childNodes[es+et]):I.none()},jc=(et,er)=>{var ei;let es=(null!==(ei=er.ownerDocument)&&void 0!==ei?ei:document).createRange();return et?(es.setStartBefore(er),es.setEndBefore(er)):(es.setStartAfter(er),es.setEndAfter(er)),es},Hc=(et,er,ei)=>Fc(er,et)===Fc(ei,et),$c=(et,er,ei)=>{let es=et?"previousSibling":"nextSibling",ed=ei;for(;ed&&ed!==er;){let et=ed[es];if(et&&$r(et)&&(et=et[es]),t6(et)||t7(et)){if(Hc(er,et,ed))return et;break}if(ss(et))break;ed=ed.parentNode}return null},a2=O(jc,!0),a3=O(jc,!1),Wc=(et,er,ei)=>{let es;let ed=O($c,!0,er),ec=O($c,!1,er),eu=ei.startContainer,ef=ei.startOffset;if(jr(eu)){let et=tJ(eu)?eu.parentNode:eu,er=et.getAttribute("data-mce-caret");if("before"===er&&Ec(es=et.nextSibling))return a2(es);if("after"===er&&Ec(es=et.previousSibling))return a3(es)}if(!ei.collapsed)return ei;if(tJ(eu)){if($r(eu)){if(1===et){if(es=ec(eu))return a2(es);if(es=ed(eu))return a3(es)}if(-1===et){if(es=ed(eu))return a3(es);if(es=ec(eu))return a2(es)}return ei}if(Gr(eu)&&ef>=eu.data.length-1)return 1===et&&(es=ec(eu))?a2(es):ei;if(Kr(eu)&&ef<=1)return -1===et&&(es=ed(eu))?a3(es):ei;if(ef===eu.data.length)return(es=ec(eu))?a2(es):ei;if(0===ef)return(es=ed(eu))?a3(es):ei}return ei},Kc=(et,er)=>zc(et?0:-1,er).filter(t6),Gc=(et,er,ei)=>{let es=Wc(et,er,ei);return -1===et?Li.fromRangeStart(es):Li.fromRangeEnd(es)},Yc=et=>I.from(et.getNode()).map(pn),Xc=(et,er)=>{let ei=er;for(;(ei=et(ei))&&!ei.isVisible(););return ei},Qc=(et,er)=>{let ei=Uc(et,er);return!(ei||!t3(et.getNode()))||ei};(iY=iX||(iX={}))[iY.Backwards=-1]="Backwards",iY[iY.Forwards=1]="Forwards";let ru=et=>rF(et)||!!as(et)&&!X(eX(et.getElementsByTagName("*")),(et,er)=>et||t5(er),!1),au=(et,er)=>et.hasChildNodes()&&er<et.childNodes.length?et.childNodes[er]:null,iu=(et,er)=>{if(Pc(et)){if(ss(er.previousSibling)&&!tJ(er.previousSibling))return Li.before(er);if(tJ(er))return Li(er,0)}if(Lc(et)){if(ss(er.nextSibling)&&!tJ(er.nextSibling))return Li.after(er);if(tJ(er))return Li(er,er.data.length)}return Lc(et)?t3(er)?Li.before(er):Li.after(er):Li.before(er)},lu=(et,er,ei)=>{let es,ed,ec,eu;if(!tY(ei)||!er)return null;if(er.isEqual(Li.after(ei))&&ei.lastChild){if(eu=Li.after(ei.lastChild),Lc(et)&&ss(ei.lastChild)&&tY(ei.lastChild))return t3(ei.lastChild)?Li.before(ei.lastChild):eu}else eu=er;let ef=eu.container(),ep=eu.offset();if(tJ(ef)){if(Lc(et)&&ep>0)return Li(ef,--ep);if(Pc(et)&&ep<ef.length)return Li(ef,++ep);es=ef}else{if(Lc(et)&&ep>0&&ss(ed=au(ef,ep-1)))return!ru(ed)&&(ec=Ic(ed,et,is,ed))?tJ(ec)?Li(ec,ec.data.length):Li.after(ec):tJ(ed)?Li(ed,ed.data.length):Li.before(ed);if(Pc(et)&&ep<ef.childNodes.length&&ss(ed=au(ef,ep)))return t3(ed)?((et,er)=>{let ei=er.nextSibling;return ei&&ss(ei)?tJ(ei)?Li(ei,0):Li.before(ei):lu(iX.Forwards,Li.after(er),et)})(ei,ed):!ru(ed)&&(ec=Ic(ed,et,is,ed))?tJ(ec)?Li(ec,0):Li.before(ec):tJ(ed)?Li(ed,0):Li.after(ed);es=ed||eu.getNode()}if(es&&(Pc(et)&&eu.isAtEnd()||Lc(et)&&eu.isAtStart())&&is(es=Ic(es,et,eG,ei,!0),ei))return iu(et,es);ed=es?Ic(es,et,is,ei):es;let ev=De(G(((et,er)=>{let ei=[],es=et;for(;es&&es!==er;)ei.push(es),es=es.parentNode;return ei})(ef,ei),t6));return!ev||ed&&ev.contains(ed)?ed?iu(et,ed):null:eu=Pc(et)?Li.after(ev):Li.before(ev)},du=et=>({next:er=>lu(iX.Forwards,er,et),prev:er=>lu(iX.Backwards,er,et)}),cu=et=>Li.isTextPosition(et)?0===et.offset():ss(et.getNode()),uu=et=>{if(Li.isTextPosition(et)){let er=et.container();return et.offset()===er.data.length}return ss(et.getNode(!0))},mu=(et,er)=>!Li.isTextPosition(et)&&!Li.isTextPosition(er)&&et.getNode()===er.getNode(!0),fu=(et,er,ei)=>{let es=du(er);return I.from(et?es.next(ei):es.prev(ei))},gu=(et,er,ei)=>fu(et,er,ei).bind(es=>Uc(ei,es,er)&&(et?!mu(ei,es)&&!(!Li.isTextPosition(ei)&&t3(ei.getNode()))&&uu(ei)&&cu(es):!mu(es,ei)&&cu(ei)&&uu(es))?fu(et,er,es):I.some(es)),pu=(et,er,ei,es)=>gu(et,er,ei).bind(ei=>es(ei)?pu(et,er,ei,es):I.some(ei)),hu=(et,er)=>{let ei=et?er.firstChild:er.lastChild;return tJ(ei)?I.some(Li(ei,et?0:ei.data.length)):ei?ss(ei)?I.some(et?Li.before(ei):t3(ei)?Li.before(ei):Li.after(ei)):((et,er,ei)=>{let es=et?Li.before(ei):Li.after(ei);return fu(et,er,es)})(et,er,ei):I.none()},a8=O(fu,!0),a5=O(fu,!1),a6=O(hu,!0),a9=O(hu,!1),a4="_mce_caret",xu=et=>tY(et)&&et.id===a4,ku=(et,er)=>{let ei=er;for(;ei&&ei!==et;){if(xu(ei))return ei;ei=ei.parentNode}return null},Eu=et=>ke(et,"name"),Su=et=>tU.isArray(et.start),_u=et=>!(!Eu(et)&&eq(et.forward))||et.forward,Nu=(et,er)=>(tY(er)&&et.isBlock(er)&&!er.innerHTML&&(er.innerHTML='<br data-mce-bogus="1" />'),er),Ru=(et,er)=>a9(et).fold(eV,et=>(er.setStart(et.container(),et.offset()),er.setEnd(et.container(),et.offset()),!0)),Au=(et,er,ei)=>!er.hasChildNodes()&&!!ku(et,er)&&(((et,er)=>{var ei;let es=(null!==(ei=et.ownerDocument)&&void 0!==ei?ei:document).createTextNode("\uFEFF");et.appendChild(es),er.setStart(es,0),er.setEnd(es,0)})(er,ei),!0),Ou=(et,er,ei,es)=>{let ed=ei[er?"start":"end"],ec=et.getRoot();if(ed){let et=ec,ei=ed[0];for(let er=ed.length-1;et&&er>=1;er--){let ei=et.childNodes;if(Au(ec,et,es))return!0;if(ed[er]>ei.length-1)return!!Au(ec,et,es)||Ru(et,es);et=ei[ed[er]]}tJ(et)&&(ei=Math.min(ed[0],et.data.length)),tY(et)&&(ei=Math.min(ed[0],et.childNodes.length)),er?es.setStart(et,ei):es.setEnd(et,ei)}return!0},Tu=et=>tJ(et)&&et.data.length>0,Bu=(et,er,ei)=>{let es=et.get(ei.id+"_"+er),ed=null==es?void 0:es.parentNode,ec=ei.keep;if(es&&ed){let eu,ef;if("start"===er?ec?es.hasChildNodes()?(eu=es.firstChild,ef=1):Tu(es.nextSibling)?(eu=es.nextSibling,ef=0):Tu(es.previousSibling)?(eu=es.previousSibling,ef=es.previousSibling.data.length):(eu=ed,ef=et.nodeIndex(es)+1):(eu=ed,ef=et.nodeIndex(es)):ec?es.hasChildNodes()?(eu=es.firstChild,ef=1):Tu(es.previousSibling)?(eu=es.previousSibling,ef=es.previousSibling.data.length):(eu=ed,ef=et.nodeIndex(es)):(eu=ed,ef=et.nodeIndex(es)),!ec){let ed;let ec=es.previousSibling,ep=es.nextSibling;for(tU.each(tU.grep(es.childNodes),et=>{tJ(et)&&(et.data=et.data.replace(/\uFEFF/g,""))});ed=et.get(ei.id+"_"+er);)et.remove(ed,!0);if(tJ(ep)&&tJ(ec)&&!tP.browser.isOpera()){let er=ec.data.length;ec.appendData(ep.data),et.remove(ep),eu=ec,ef=er}}return I.some(Li(eu,ef))}return I.none()},Du=(et,er,ei)=>((et,er,ei=!1)=>2===er?Zi(Fr,ei,et):3===er?(et=>{let er=et.getRng();return{start:qi(et.dom.getRoot(),Li.fromRangeStart(er)),end:qi(et.dom.getRoot(),Li.fromRangeEnd(er)),forward:et.isForward()}})(et):er?{rng:et.getRng(),forward:et.isForward()}:tl(et,!1))(et,er,ei),Pu=(et,er)=>{((et,er)=>{let ei=et.dom;if(er){if(Su(er))return((et,er)=>{let ei=et.createRng();return Ou(et,!0,er,ei)&&Ou(et,!1,er,ei)?I.some({range:ei,forward:_u(er)}):I.none()})(ei,er);if(eP(er.start))return((et,er)=>{let ei=I.from(Wi(et.getRoot(),er.start)),es=I.from(Wi(et.getRoot(),er.end));return Mt(ei,es,(ei,es)=>{let ed=et.createRng();return ed.setStart(ei.container(),ei.offset()),ed.setEnd(es.container(),es.offset()),{range:ed,forward:_u(er)}})})(ei,er);if(ke(er,"id"))return((et,er)=>{let ei=Bu(et,"start",er),es=Bu(et,"end",er);return Mt(ei,es.or(ei),(ei,es)=>{let ed=et.createRng();return ed.setStart(Nu(et,ei.container()),ei.offset()),ed.setEnd(Nu(et,es.container()),es.offset()),{range:ed,forward:_u(er)}})})(ei,er);if(Eu(er))return I.from(ei.select(er.name)[er.index]).map(et=>{let er=ei.createRng();return er.selectNode(et),{range:er,forward:!0}});if(ke(er,"rng"))return I.some({range:er.rng,forward:_u(er)})}return I.none()})(et,er).each(({range:er,forward:ei})=>{et.setRng(er,ei)})},Lu=et=>tY(et)&&"SPAN"===et.tagName&&"bookmark"===et.getAttribute("data-mce-type"),Mu=et=>"\xa0"===et,Fu=et=>""!==et&&-1!==" \f\n\r	\v".indexOf(et),Uu=et=>!Fu(et)&&!Mu(et)&&!hr(et),zu=et=>{let er=et.toString(16);return(1===er.length?"0"+er:er).toUpperCase()},ju=et=>({value:ze(zu(et.red)+zu(et.green)+zu(et.blue),"#").toUpperCase()}),a7=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,lr=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Vu=(et,er,ei,es)=>({red:et,green:er,blue:ei,alpha:es}),qu=(et,er,ei,es)=>{let ed=parseInt(et,10),ec=parseInt(er,10),eu=parseInt(ei,10),ef=parseFloat(es);return Vu(ed,ec,eu,ef)},Wu=et=>(et=>{if("transparent"===et)return I.some(Vu(0,0,0,0));let er=a7.exec(et);if(null!==er)return I.some(qu(er[1],er[2],er[3],"1"));let ei=lr.exec(et);return null!==ei?I.some(qu(ei[1],ei[2],ei[3],ei[4])):I.none()})(et).map(ju).map(et=>"#"+et.value).getOr(et),Ku=et=>{let er=[];if(et)for(let ei=0;ei<et.rangeCount;ei++)er.push(et.getRangeAt(ei));return er},Gu=(et,er)=>{let ei=Fo(er,"td[data-mce-selected],th[data-mce-selected]");return ei.length>0?ei:G(te(et,et=>{let er=gi(et);return er?[pn(er)]:[]}),rT)},Yu=et=>Gu(Ku(et.selection.getSel()),pn(et.getBody())),Xu=(et,er)=>Zn(et,"table",er),Qu=et=>Fn(et).fold(N([et]),er=>[et].concat(Qu(er))),Ju=et=>Un(et).fold(N([et]),er=>"br"===Ht(er)?Bn(er).map(er=>[et].concat(Ju(er))).getOr([]):[et].concat(Ju(er))),Zu=(et,er)=>Mt((et=>{let er=et.startContainer,ei=et.startOffset;return tJ(er)?0===ei?I.some(pn(er)):I.none():I.from(er.childNodes[ei]).map(pn)})(er),(et=>{let er=et.endContainer,ei=et.endOffset;return tJ(er)?ei===er.data.length?I.some(pn(er)):I.none():I.from(er.childNodes[ei-1]).map(pn)})(er),(er,ei)=>{let es=J(Qu(et),O(En,er)),ed=J(Ju(et),O(En,ei));return es.isSome()&&ed.isSome()}).getOr(!1),em=(et,er,ei,es)=>{let ed=new zo(ei,ei),ec=ye(et.schema.getMoveCaretBeforeOnEnterElements(),(et,er)=>!H(["td","th","table"],er.toLowerCase())),eu=ei;do{if(tJ(eu)&&0!==tU.trim(eu.data).length)return void(es?er.setStart(eu,0):er.setEnd(eu,eu.data.length));if(ec[eu.nodeName])return void(es?er.setStartBefore(eu):"BR"===eu.nodeName?er.setEndBefore(eu):er.setEndAfter(eu))}while(eu=es?ed.next():ed.prev());"BODY"===ei.nodeName&&(es?er.setStart(ei,0):er.setEnd(ei,ei.childNodes.length))},tm=et=>{let er=et.selection.getSel();return C(er)&&er.rangeCount>0},nm=(et,er)=>{let ei=Yu(et);ei.length>0?q(ei,ei=>{let es=ei.dom,ed=et.dom.createRng();ed.setStartBefore(es),ed.setEndAfter(es),er(ed,!0)}):er(et.selection.getRng(),!1)},om=(et,er,ei)=>{let es=tl(et,er);ei(es),et.moveToBookmark(es)},rm=et=>e$(null==et?void 0:et.nodeType),sm=et=>tY(et)&&!Lu(et)&&!xu(et)&&!Go(et),am=et=>!0===et.isContentEditable,im=(et,er,ei)=>{let{selection:es,dom:ed}=et,ec=es.getNode(),eu=t6(ec);om(es,!0,()=>{er()}),eu&&t6(ec)&&ed.isChildOf(ec,et.getBody())?et.selection.select(ec):ei(es.getStart())&&lm(ed,es)},lm=(et,er)=>{var ei,es;let ed=er.getRng(),{startContainer:ec,startOffset:eu}=ed;if(!((et,er)=>{if(sm(er)&&!/^(TD|TH)$/.test(er.nodeName)){let ei=et.getAttrib(er,"data-mce-selected"),es=parseInt(ei,10);return!isNaN(es)&&es>0}return!1})(et,er.getNode())&&tY(ec)){let ef;let ep=ec.childNodes,ev=et.getRoot();if(eu<ep.length){let er=ep[eu];ef=new zo(er,null!==(ei=et.getParent(er,et.isBlock))&&void 0!==ei?ei:ev)}else{let er=ep[ep.length-1];(ef=new zo(er,null!==(es=et.getParent(er,et.isBlock))&&void 0!==es?es:ev)).next(!0)}for(let ei=ef.current();ei;ei=ef.next()){if("false"===et.getContentEditable(ei))return;if(tJ(ei)&&!mm(ei))return ed.setStart(ei,0),void er.setRng(ed)}}},dm=(et,er,ei)=>{if(et){let es=er?"nextSibling":"previousSibling";for(et=ei?et:et[es];et;et=et[es])if(tY(et)||!mm(et))return et}},cm=(et,er)=>!!et.getTextBlockElements()[er.nodeName.toLowerCase()]||As(et,er),um=(et,er,ei)=>et.schema.isValidChild(er,ei),mm=(et,er=!1)=>{if(C(et)&&tJ(et)){let ei=er?et.data.replace(/ /g,"\xa0"):et.data;return ds(ei)}return!1},fm=(et,er)=>{let ei=et.dom;return sm(er)&&"false"===ei.getContentEditable(er)&&((et,er)=>{let ei="[data-mce-cef-wrappable]",es=oW(et),ed=Ye(es)?ei:`${ei},${es}`;return xn(pn(er),ed)})(et,er)&&0===ei.select('[contenteditable="true"]',er).length},gm=(et,er)=>ej(et)?et(er):(C(er)&&(et=et.replace(/%(\w+)/g,(et,ei)=>er[ei]||et)),et),pm=(et,er)=>(er=er||"",et=""+((et=et||"").nodeName||et),er=""+(er.nodeName||er),et.toLowerCase()===er.toLowerCase()),hm=(et,er)=>{if(y(et))return null;{let ei=String(et);return"color"!==er&&"backgroundColor"!==er||(ei=Wu(ei)),"fontWeight"===er&&700===et&&(ei="bold"),"fontFamily"===er&&(ei=ei.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),ei}},bm=(et,er,ei)=>{let es=et.getStyle(er,ei);return hm(es,ei)},vm=(et,er)=>{let ei;return et.getParent(er,er=>!!tY(er)&&!!(ei=et.getStyle(er,"text-decoration"))&&"none"!==ei),ei},ym=(et,er,ei)=>et.getParents(er,ei,et.getRoot()),Cm=(et,er,ei)=>{let es=et.formatter.get(er);return C(es)&&$(es,ei)},wm=et=>Ee(et,"block"),xm=et=>Ee(et,"selector"),km=et=>Ee(et,"inline"),Em=et=>xm(et)&&!1!==et.expand&&!km(et),Am=(et,er)=>{let ei=er;for(;ei;){if(tY(ei)&&et.getContentEditable(ei))return"false"===et.getContentEditable(ei)?ei:er;ei=ei.parentNode}return er},Om=(et,er,ei,es)=>{let ed=er.data;if(et){for(let et=ei;et>0;et--)if(es(ed.charAt(et-1)))return et}else for(let et=ei;et<ed.length;et++)if(es(ed.charAt(et)))return et;return -1},Tm=(et,er,ei)=>Om(et,er,ei,et=>Mu(et)||Fu(et)),Bm=(et,er,ei)=>Om(et,er,ei,Uu),Dm=(et,er,ei,es,ed,ec)=>{let eu;let ef=et.getParent(ei,et.isBlock)||er,l=(er,ei,es)=>{let ec=ai(et),ep=ed?ec.backwards:ec.forwards;return I.from(ep(er,ei,(et,er)=>Lu(et.parentNode)?-1:(eu=et,es(ed,et,er)),ef))};return l(ei,es,Tm).bind(et=>ec?l(et.container,et.offset+(ed?-1:0),Bm):I.some(et)).orThunk(()=>eu?I.some({container:eu,offset:ed?0:eu.length}):I.none())},Pm=(et,er,ei,es,ed)=>{let ec=es[ed];tJ(es)&&Ye(es.data)&&ec&&(es=ec);let eu=ym(et,es);for(let es=0;es<eu.length;es++)for(let ed=0;ed<er.length;ed++){let ec=er[ed];if((!C(ec.collapsed)||ec.collapsed===ei.collapsed)&&xm(ec)&&et.is(eu[es],ec.selector))return eu[es]}return es},Lm=(et,er,ei,es)=>{var ed;let ec=ei,eu=et.getRoot(),ef=er[0];if(wm(ef)&&(ec=ef.wrapper?null:et.getParent(ei,ef.block,eu)),!ec){let er=null!==(ed=et.getParent(ei,"LI,TD,TH"))&&void 0!==ed?ed:eu;ec=et.getParent(tJ(ei)?ei.parentNode:ei,er=>er!==eu&&cm(et.schema,er),er)}if(ec&&wm(ef)&&ef.wrapper&&(ec=ym(et,ec,"ul,ol").reverse()[0]||ec),!ec)for(ec=ei;ec&&ec[es]&&!et.isBlock(ec[es])&&!pm(ec=ec[es],"br"););return ec||ei},Mm=(et,er,ei,es)=>{let ed=ei.parentNode;return!C(ei[es])&&(!(ed!==er&&!y(ed)&&!et.isBlock(ed))||Mm(et,er,ed,es))},Im=(et,er,ei,es,ed)=>{var ec;let eu=ei,ef=ed?"previousSibling":"nextSibling",ep=et.getRoot();if(tJ(ei)&&!mm(ei)&&(ed?es>0:es<ei.data.length))return ei;for(;eu;){if(!er[0].block_expand&&et.isBlock(eu))return eu;for(let er=eu[ef];er;er=er[ef]){let ei=tJ(er)&&!Mm(et,ep,er,ef);if(!Lu(er)&&(!t3(ec=er)||!ec.getAttribute("data-mce-bogus")||ec.nextSibling)&&!mm(er,ei))return eu}if(eu===ep||eu.parentNode===ep){ei=eu;break}eu=eu.parentNode}return ei},Fm=et=>Lu(et.parentNode)||Lu(et),Um=(et,er,ei,es=!1)=>{let{startContainer:ed,startOffset:ec,endContainer:eu,endOffset:ef}=er,ep=ei[0];return tY(ed)&&ed.hasChildNodes()&&tJ(ed=pi(ed,ec))&&(ec=0),tY(eu)&&eu.hasChildNodes()&&tJ(eu=pi(eu,er.collapsed?ef:ef-1))&&(ef=eu.data.length),ed=Am(et,ed),eu=Am(et,eu),Fm(ed)&&(ed=Lu(ed)?ed:ed.parentNode,tJ(ed=er.collapsed?ed.previousSibling||ed:ed.nextSibling||ed)&&(ec=er.collapsed?ed.length:0)),Fm(eu)&&(eu=Lu(eu)?eu:eu.parentNode,tJ(eu=er.collapsed?eu.nextSibling||eu:eu.previousSibling||eu)&&(ef=er.collapsed?0:eu.length)),er.collapsed&&(Dm(et,et.getRoot(),ed,ec,!0,es).each(({container:et,offset:er})=>{ed=et,ec=er}),Dm(et,et.getRoot(),eu,ef,!1,es).each(({container:et,offset:er})=>{eu=et,ef=er})),(km(ep)||ep.block_expand)&&(km(ep)&&tJ(ed)&&0!==ec||(ed=Im(et,ei,ed,ec,!0)),km(ep)&&tJ(eu)&&ef!==eu.data.length||(eu=Im(et,ei,eu,ef,!1))),Em(ep)&&(ed=Pm(et,ei,er,ed,"previousSibling"),eu=Pm(et,ei,er,eu,"nextSibling")),(wm(ep)||xm(ep))&&(ed=Lm(et,ei,ed,"previousSibling"),eu=Lm(et,ei,eu,"nextSibling"),wm(ep)&&(et.isBlock(ed)||(ed=Im(et,ei,ed,ec,!0)),et.isBlock(eu)||(eu=Im(et,ei,eu,ef,!1)))),tY(ed)&&ed.parentNode&&(ec=et.nodeIndex(ed),ed=ed.parentNode),tY(eu)&&eu.parentNode&&(ef=et.nodeIndex(eu)+1,eu=eu.parentNode),{startContainer:ed,startOffset:ec,endContainer:eu,endOffset:ef}},zm=(et,er,ei)=>{var es;let ed=er.startOffset,ec=pi(er.startContainer,ed),eu=er.endOffset,ef=pi(er.endContainer,eu-1),l=et=>{let er=et[0];tJ(er)&&er===ec&&ed>=er.data.length&&et.splice(0,1);let ei=et[et.length-1];return 0===eu&&et.length>0&&ei===ef&&tJ(ei)&&et.splice(et.length-1,1),et},d=(et,er,ei)=>{let es=[];for(;et&&et!==ei;et=et[er])es.push(et);return es},c=(er,ei)=>et.getParent(er,et=>et.parentNode===ei,ei),u=(et,er,es)=>{let ed=es?"nextSibling":"previousSibling";for(let ec=et,eu=ec.parentNode;ec&&ec!==er;ec=eu){eu=ec.parentNode;let er=d(ec===et?ec:ec[ed],ed);er.length&&(es||er.reverse(),ei(l(er)))}};if(ec===ef)return ei(l([ec]));let ep=null!==(es=et.findCommonAncestor(ec,ef))&&void 0!==es?es:et.getRoot();if(et.isChildOf(ec,ef))return u(ec,ep,!0);if(et.isChildOf(ef,ec))return u(ef,ep);let ev=c(ec,ep)||ec,ey=c(ef,ep)||ef;u(ec,ev,!0);let eS=d(ev===ec?ev:ev.nextSibling,"nextSibling",ey===ef?ey.nextSibling:ey);eS.length&&ei(l(eS)),u(ef,ey)},ls=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Hm=(et,er,ei,es,ed,ec)=>{let{uid:eu=er,...ef}=ei;un(et,nd()),Jt(et,`${nu()}`,eu),Jt(et,`${nc()}`,es);let{attributes:ep={},classes:ev=[]}=ed(eu,ef);if(Zt(et,ep),q(ev,er=>{un(et,er)}),ec){ev.length>0&&Jt(et,`${nv()}`,ev.join(","));let er=eJ(ep);er.length>0&&Jt(et,`${ny()}`,er.join(","))}},$m=(et,er,ei,es,ed)=>{let ec=bn("span",et);return Hm(ec,er,ei,es,ed,!1),ec},Vm=(et,er,ei,es,ed,ec)=>{let eu=[],ef=$m(et.getDoc(),ei,ec,es,ed),ep=za(),d=()=>{ep.clear()},c=et=>{q(et,u)},u=er=>{var ev,ey;switch(ev="span",ey=Ht(er),An(er).fold(()=>"skipping",ei=>"br"===ey||tj(er)&&"\uFEFF"===vr(er)?"valid":tz(er)&&gn(er,nd())?"existing":xu(er.dom)?"caret":$(ls,et=>xn(er,et))?"valid-block":um(et,ev,ey)&&um(et,Ht(ei),ev)?"valid":"invalid-child")){case"invalid-child":{d();let et=Mn(er);c(et),d();break}case"valid-block":d(),Hm(er,ei,ec,es,ed,!0);break;case"valid":{let et=ep.get().getOrThunk(()=>{let et=oi(ef);return eu.push(et),ep.set(et),et});vo(er,et)}}};return zm(et.dom,er,et=>{d(),(et=>{let er=V(et,pn);c(er)})(et)}),eu},qm=et=>{let er=(()=>{let et={};return{register:(er,ei)=>{et[er]={name:er,settings:ei}},lookup:er=>xe(et,er).map(et=>et.settings),getNames:()=>eJ(et)}})();((et,er)=>{let ei=nc(),o=et=>I.from(et.attr(ei)).bind(er.lookup),r=et=>{var er,ei;et.attr(nu(),null),et.attr(nc(),null),et.attr(nf(),null);let es=I.from(et.attr(ny())).map(et=>et.split(",")).getOr([]),ed=I.from(et.attr(nv())).map(et=>et.split(",")).getOr([]);q(es,er=>et.attr(er,null));let ec=null!==(ei=null===(er=et.attr("class"))||void 0===er?void 0:er.split(" "))&&void 0!==ei?ei:[],eu=re(ec,[nd()].concat(ed));et.attr("class",eu.length>0?eu.join(" "):null),et.attr(nv(),null),et.attr(ny(),null)};et.serializer.addTempAttr(nf()),et.serializer.addAttributeFilter(ei,et=>{for(let er of et)o(er).each(et=>{!1===et.persistent&&("span"===er.name?er.unwrap():r(er))})})})(et,er);let ei=((et,er)=>{let ei=Da({}),o=()=>({listeners:[],previous:za()}),r=(et,er)=>{s(et,et=>(er(et),et))},s=(et,er)=>{let es=ei.get(),ed=er(xe(es,et).getOrThunk(o));es[et]=ed,ei.set(es)},a=(er,ei)=>{q(Ja(et,er),et=>{ei?Jt(et,nf(),"true"):on(et,nf())})},es=Ha(()=>{let ei=ae(er.getNames());q(ei,er=>{s(er,ei=>{let es=ei.previous.get();return Xa(et,I.some(er)).fold(()=>{es.each(et=>{r(er,et=>{q(et.listeners,et=>et(!1,er))}),ei.previous.clear(),a(et,!1)})},({uid:et,name:er,elements:ed})=>{Pt(es,et)||(es.each(et=>a(et,!1)),r(er,ei=>{q(ei.listeners,ei=>ei(!0,er,{uid:et,nodes:V(ed,et=>et.dom)}))}),ei.previous.set(et),a(et,!0))}),{previous:ei.previous,listeners:ei.listeners}})})},30);return et.on("remove",()=>{es.cancel()}),et.on("NodeChange",()=>{es.throttle()}),{addListener:(et,er)=>{s(et,et=>({previous:et.previous,listeners:et.listeners.concat([er])}))}}})(et,er),es=Xt("span"),r=et=>{q(et,et=>{es(et)?xo(et):(et=>{fn(et,nd()),on(et,`${nu()}`),on(et,`${nc()}`),on(et,`${nf()}`);let er=tn(et,`${ny()}`).map(et=>et.split(",")).getOr([]),ei=tn(et,`${nv()}`).map(et=>et.split(",")).getOr([]);q(er,er=>on(et,er)),q(ei,er=>{fn(et,er)}),on(et,`${nv()}`),on(et,`${ny()}`)})(et)})};return{register:(et,ei)=>{er.register(et,ei)},annotate:(ei,es)=>{er.lookup(ei).each(er=>{((et,er,ei,es)=>{et.undoManager.transact(()=>{let ed=et.selection,ec=ed.getRng(),eu=Yu(et).length>0,ef=ti("mce-annotation");if(ec.collapsed&&!eu&&((et,er)=>{let ei=Um(et.dom,er,[{inline:"span"}]);er.setStart(ei.startContainer,ei.startOffset),er.setEnd(ei.endContainer,ei.endOffset),et.selection.setRng(er)})(et,ec),ed.getRng().collapsed&&!eu){let ec=$m(et.getDoc(),ef,es,er,ei.decorate);So(ec,"\xa0"),ed.getRng().insertNode(ec.dom),ed.select(ec.dom)}else om(ed,!1,()=>{nm(et,ed=>{Vm(et,ed,ef,er,ei.decorate,es)})})})})(et,ei,er,es)})},annotationChanged:(et,er)=>{ei.addListener(et,er)},remove:er=>{Xa(et,I.some(er)).each(({elements:er})=>{let ei=et.selection.getBookmark();r(er),et.selection.moveToBookmark(ei)})},removeAll:er=>{let ei=et.selection.getBookmark();ge(Za(et,er),(et,er)=>{r(et)}),et.selection.moveToBookmark(ei)},getAll:er=>{let ei=Za(et,er);return pe(ei,et=>V(et,et=>et.dom))}}},Wm=et=>({getBookmark:O(Du,et),moveToBookmark:O(Pu,et)});Wm.isBookmarkNode=Lu;let Km=(et,er,ei)=>!ei.collapsed&&$(ei.getClientRects(),ei=>et>=ei.left&&et<=ei.right&&er>=ei.top&&er<=ei.bottom),Gm=(et,er,ei)=>{et.dispatch(er,ei)},Ym=(et,er,ei,es)=>{et.dispatch("FormatApply",{format:er,node:ei,vars:es})},Xm=(et,er,ei,es)=>{et.dispatch("FormatRemove",{format:er,node:ei,vars:es})},Qm=(et,er)=>et.dispatch("SetContent",er),Jm=(et,er)=>et.dispatch("GetContent",er),Zm=(et,er)=>et.dispatch("PastePlainTextToggle",{state:er}),ld={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:et=>et.shiftKey||et.ctrlKey||et.altKey||ld.metaKeyPressed(et),metaKeyPressed:et=>tP.os.isMacOS()||tP.os.isiOS()?et.metaKey:et.ctrlKey&&!et.altKey},lc="data-mce-selected",lp=Math.abs,lh=Math.round,ly={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},sf=(et,er)=>{let ei,es,ed,ec,eu,ef,ep,ev,ey,eS,eI,eL,eB,eD,eF;let eP=er.dom,eM=er.getDoc(),eU=document,eH=er.getBody(),x=et=>C(et)&&(t8(et)||eP.is(et,"figure.image")),k=et=>t7(et)||eP.hasClass(et,"mce-preview-object"),E=et=>{let ei=et.target;((et,er)=>{if("longpress"===et.type||0===et.type.indexOf("touch")){let ei=et.touches[0];return x(et.target)&&!Km(ei.clientX,ei.clientY,er)}return x(et.target)&&!Km(et.clientX,et.clientY,er)})(et,er.selection.getRng())&&!et.isDefaultPrevented()&&er.selection.select(ei)},S=et=>eP.hasClass(et,"mce-preview-object")&&C(et.firstElementChild)?[et,et.firstElementChild]:eP.is(et,"figure.image")?[et.querySelector("img")]:[et],_=et=>{let ei=oB(er);return!!ei&&"false"!==et.getAttribute("data-mce-resize")&&et!==er.getBody()&&(eP.hasClass(et,"mce-preview-object")&&C(et.firstElementChild)?xn(pn(et.firstElementChild),ei):xn(pn(et),ei))},N=(et,ei,es)=>{if(C(es)){let ed=S(et);q(ed,et=>{et.style[ei]||!er.schema.isValid(et.nodeName.toLowerCase(),ei)?eP.setStyle(et,ei,es):eP.setAttrib(et,ei,""+es)})}},R=(et,er,ei)=>{N(et,"width",er),N(et,"height",ei)},A=et=>{let eu,eM,eU,eq;eu=et.screenX-ef,eM=et.screenY-ep,eL=eu*ec[2]+ev,eB=eM*ec[3]+ey,eL=eL<5?5:eL,eB=eB<5?5:eB,((x(ei)||k(ei))&&!1!==oD(er)?!ld.modifierPressed(et):ld.modifierPressed(et))&&(lp(eu)>lp(eM)?(eB=lh(eL*eS),eL=lh(eB/eS)):(eL=lh(eB/eS),eB=lh(eL*eS))),R(es,eL,eB),eU=ec.startPos.x+eu,eq=ec.startPos.y+eM,eU=eU>0?eU:0,eq=eq>0?eq:0,eP.setStyles(ed,{left:eU,top:eq,display:"block"}),ed.innerHTML=eL+" &times; "+eB,ec[2]<0&&es.clientWidth<=eL&&eP.setStyle(es,"left",(void 0)+(ev-eL)),ec[3]<0&&es.clientHeight<=eB&&eP.setStyle(es,"top",(void 0)+(ey-eB)),(eu=eH.scrollWidth-eD)+(eM=eH.scrollHeight-eF)!=0&&eP.setStyles(ed,{left:eU-eu,top:eq-eM}),eI||(((et,er,ei,es,ed)=>{et.dispatch("ObjectResizeStart",{target:er,width:ei,height:es,origin:ed})})(er,ei,ev,ey,"corner-"+ec.name),eI=!0)},O=()=>{let et=eI;eI=!1,et&&(N(ei,"width",eL),N(ei,"height",eB)),eP.unbind(eM,"mousemove",A),eP.unbind(eM,"mouseup",O),eU!==eM&&(eP.unbind(eU,"mousemove",A),eP.unbind(eU,"mouseup",O)),eP.remove(es),eP.remove(ed),eP.remove(eu),T(ei),et&&(((et,er,ei,es,ed)=>{et.dispatch("ObjectResized",{target:er,width:ei,height:es,origin:ed})})(er,ei,eL,eB,"corner-"+ec.name),eP.setAttrib(ei,"style",eP.getAttrib(ei,"style"))),er.nodeChanged()},T=et=>{M();let eI=eP.getPos(et,eH),eq=eI.x,ez=eI.y,ej=et.getBoundingClientRect(),e$=ej.width||ej.right-ej.left,eV=ej.height||ej.bottom-ej.top;ei!==et&&(D(),ei=et,eL=eB=0);let eG=er.dispatch("ObjectSelected",{target:et});_(et)&&!eG.isDefaultPrevented()?ge(ly,(et,er)=>{let eI=eP.get("mceResizeHandle"+er);eI&&eP.remove(eI),eI=eP.add(eH,"div",{id:"mceResizeHandle"+er,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+er+"-resize; margin:0; padding:0"}),eP.bind(eI,"mousedown",eI=>{eI.stopImmediatePropagation(),eI.preventDefault(),(eI=>{var eL;let eB=S(ei)[0];ef=eI.screenX,ep=eI.screenY,ev=eB.clientWidth,eS=(ey=eB.clientHeight)/ev,(ec=et).name=er,ec.startPos={x:e$*et[0]+eq,y:eV*et[1]+ez},eD=eH.scrollWidth,eF=eH.scrollHeight,eu=eP.add(eH,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),eP.setStyles(eu,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),es=k(eL=ei)?eP.create("img",{src:tP.transparentSrc}):eL.cloneNode(!0),eP.addClass(es,"mce-clonedresizable"),eP.setAttrib(es,"data-mce-bogus","all"),es.contentEditable="false",eP.setStyles(es,{left:eq,top:ez,margin:0}),R(es,e$,eV),es.removeAttribute(lc),eH.appendChild(es),eP.bind(eM,"mousemove",A),eP.bind(eM,"mouseup",O),eU!==eM&&(eP.bind(eU,"mousemove",A),eP.bind(eU,"mouseup",O)),ed=eP.add(eH,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},ev+" &times; "+ey)})(eI)}),et.elm=eI,eP.setStyles(eI,{left:e$*et[0]+eq-eI.offsetWidth/2,top:eV*et[1]+ez-eI.offsetHeight/2})}):D(!1)},eq=ja(T,0),D=(et=!0)=>{eq.cancel(),M(),ei&&et&&ei.removeAttribute(lc),ge(ly,(et,er)=>{let ei=eP.get("mceResizeHandle"+er);ei&&(eP.unbind(ei),eP.remove(ei))})},P=(et,er)=>eP.isChildOf(et,er),L=ei=>{if(eI||er.removed||er.composing)return;let es="mousedown"===ei.type?ei.target:et.getNode(),ed=to(pn(es),"table,img,figure.image,hr,video,span.mce-preview-object,details").map(et=>et.dom).filter(et=>eP.isEditable(et.parentElement)).getOrUndefined(),ec=C(ed)?eP.getAttrib(ed,lc,"1"):"1";if(q(eP.select(`img[${lc}],hr[${lc}]`),et=>{et.removeAttribute(lc)}),C(ed)&&P(ed,eH)&&er.hasFocus()){I();let er=et.getStart(!0);if(P(er,ed)&&P(et.getEnd(!0),ed))return eP.setAttrib(ed,lc,ec),void eq.throttle(ed)}D()},M=()=>{ge(ly,et=>{et.elm&&(eP.unbind(et.elm),delete et.elm)})},I=()=>{try{er.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(et){}};return er.on("init",()=>{I(),er.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),er.on("keyup compositionend",et=>{ei&&"TABLE"===ei.nodeName&&L(et)}),er.on("hide blur",D),er.on("contextmenu longpress",E,!0)}),er.on("remove",M),{isResizable:_,showResizeRect:T,hideResizeRect:D,updateResizeRect:L,destroy:()=>{eq.cancel(),ei=es=eu=null}}},af=(et,er,ei)=>{let es=et.document.createRange();return er.fold(et=>{es.setStartBefore(et.dom)},(et,er)=>{es.setStart(et.dom,er)},et=>{es.setStartAfter(et.dom)}),((et,er)=>{er.fold(er=>{et.setEndBefore(er.dom)},(er,ei)=>{et.setEnd(er.dom,ei)},er=>{et.setEndAfter(er.dom)})})(es,ei),es},lf=(et,er,ei,es,ed)=>{let ec=et.document.createRange();return ec.setStart(er.dom,ei),ec.setEnd(es.dom,ed),ec},lk=al([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),cf=(et,er,ei)=>er(pn(ei.startContainer),ei.startOffset,pn(ei.endContainer),ei.endOffset);lk.ltr,lk.rtl;let uf=(et,er,ei,es)=>({start:et,soffset:er,finish:ei,foffset:es}),lR=document.caretPositionFromPoint?(et,er,ei)=>{var es,ed;return I.from(null===(ed=(es=et.dom).caretPositionFromPoint)||void 0===ed?void 0:ed.call(es,er,ei)).bind(er=>{if(null===er.offsetNode)return I.none();let ei=et.dom.createRange();return ei.setStart(er.offsetNode,er.offset),ei.collapse(),I.some(ei)})}:document.caretRangeFromPoint?(et,er,ei)=>{var es,ed;return I.from(null===(ed=(es=et.dom).caretRangeFromPoint)||void 0===ed?void 0:ed.call(es,er,ei))}:I.none,lA=al([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),lI={before:lA.before,on:lA.on,after:lA.after,cata:(et,er,ei,es)=>et.fold(er,ei,es),getStart:et=>et.fold(R,R,R)},lT=al([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),lL={domRange:lT.domRange,relative:lT.relative,exact:lT.exact,exactFromRange:et=>lT.exact(et.start,et.soffset,et.finish,et.foffset),getWin:et=>{let er=et.match({domRange:et=>pn(et.startContainer),relative:(et,er)=>lI.getStart(et),exact:(et,er,ei,es)=>et});return Rn(er)},range:uf},bf=(et,er)=>{let ei=Ht(et);return"input"===ei?lI.after(et):H(["br","img"],ei)?0===er?lI.before(et):lI.after(et):lI.on(et,er)},vf=(et,er)=>{let ei=et.fold(lI.before,bf,lI.after),es=er.fold(lI.before,bf,lI.after);return lL.relative(ei,es)},yf=(et,er,ei,es)=>{let ed=bf(et,er),ec=bf(ei,es);return lL.relative(ed,ec)},Cf=(et,er)=>{let ei=(er||document).createDocumentFragment();return q(et,et=>{ei.appendChild(et.dom)}),pn(ei)},wf=et=>{let er=lL.getWin(et).dom,n=(et,ei,es,ed)=>lf(er,et,ei,es,ed),ei=et.match({domRange:et=>{let er=pn(et.startContainer),ei=pn(et.endContainer);return yf(er,et.startOffset,ei,et.endOffset)},relative:vf,exact:yf});return((et,er)=>{let ei=er.match({domRange:et=>({ltr:N(et),rtl:I.none}),relative:(er,ei)=>({ltr:Pe(()=>af(et,er,ei)),rtl:Pe(()=>I.some(af(et,ei,er)))}),exact:(er,ei,es,ed)=>({ltr:Pe(()=>lf(et,er,ei,es,ed)),rtl:Pe(()=>I.some(lf(et,es,ed,er,ei)))})});return((et,er)=>{let ei=er.ltr();return ei.collapsed?er.rtl().filter(et=>!1===et.collapsed).map(et=>lk.rtl(pn(et.endContainer),et.endOffset,pn(et.startContainer),et.startOffset)).getOrThunk(()=>cf(0,lk.ltr,ei)):cf(0,lk.ltr,ei)})(0,ei)})(er,ei).match({ltr:n,rtl:n})},xf=(et,er,ei)=>((et,er,ei)=>{let es=pn(et.document);return lR(es,er,ei).map(et=>uf(pn(et.startContainer),et.startOffset,pn(et.endContainer),et.endOffset))})(Rn(pn(ei)).dom,et,er).map(et=>{let er=ei.createRange();return er.setStart(et.start.dom,et.soffset),er.setEnd(et.finish.dom,et.foffset),er}).getOrUndefined(),kf=(et,er)=>C(et)&&C(er)&&et.startContainer===er.startContainer&&et.startOffset===er.startOffset&&et.endContainer===er.endContainer&&et.endOffset===er.endOffset,Ef=(et,er,ei)=>null!==((et,er,ei)=>{let es=et;for(;es&&es!==er;){if(ei(es))return es;es=es.parentNode}return null})(et,er,ei),Sf=(et,er,ei)=>Ef(et,er,et=>et.nodeName===ei),_f=(et,er)=>$r(et)&&!Ef(et,er,xu),Nf=(et,er,ei)=>{let es=er.parentNode;if(es){let ed;let ec=new zo(er,et.getParent(es,et.isBlock)||et.getRoot());for(;ed=ec[ei?"prev":"next"]();)if(t3(ed))return!0}return!1},Rf=(et,er,ei,es,ed)=>{let ec,eu;let ef=et.getRoot(),ep=et.schema.getNonEmptyElements(),ev=ed.parentNode;if(!ev)return I.none();let ey=et.getParent(ev,et.isBlock)||ef;if(es&&t3(ed)&&er&&et.isEmpty(ey))return I.some(Li(ev,et.nodeIndex(ed)));let eS=new zo(ed,ey);for(;eu=eS[es?"prev":"next"]();){if("false"===et.getContentEditableParent(eu)||_f(eu,ef))return I.none();if(tJ(eu)&&eu.data.length>0)return Sf(eu,ef,"A")?I.none():I.some(Li(eu,es?eu.data.length:0));if(et.isBlock(eu)||ep[eu.nodeName.toLowerCase()])return I.none();ec=eu}return t0(ec)?I.none():ei&&ec?I.some(Li(ec,0)):I.none()},Af=(et,er,ei,es)=>{var ed;let ec=et.getRoot(),eu,ef=!1,ep=ei?es.startContainer:es.endContainer,ev=ei?es.startOffset:es.endOffset,ey=tY(ep)&&ev===ep.childNodes.length,eS=et.schema.getNonEmptyElements(),eI=ei;if($r(ep))return I.none();if(tY(ep)&&ev>ep.childNodes.length-1&&(eI=!1),t1(ep)&&(ep=ec,ev=0),ep===ec){if(eI&&(eu=ep.childNodes[ev>0?ev-1:0])&&($r(eu)||eS[eu.nodeName]||Yo(eu)))return I.none();if(ep.hasChildNodes()){if(ev=Math.min(!eI&&ev>0?ev-1:ev,ep.childNodes.length-1),ev=tJ(ep=ep.childNodes[ev])&&ey?ep.data.length:0,!er&&ep===ec.lastChild&&Yo(ep)||((et,er)=>{let ei=er;for(;ei&&ei!==et;){if(t6(ei))return!0;ei=ei.parentNode}return!1})(ec,ep)||$r(ep))return I.none();if(ep.hasChildNodes()&&!Yo(ep)){eu=ep;let er=new zo(ep,ec);do{if(t6(eu)||$r(eu)){ef=!1;break}if(tJ(eu)&&eu.data.length>0){ev=eI?0:eu.data.length,ep=eu,ef=!0;break}if(eS[eu.nodeName.toLowerCase()]&&!t4(eu)){ev=et.nodeIndex(eu),ep=eu.parentNode,eI||ev++,ef=!0;break}}while(eu=eI?er.next():er.prev())}}}return er&&(tJ(ep)&&0===ev&&Rf(et,ey,er,!0,ep).each(et=>{ep=et.container(),ev=et.offset(),ef=!0}),tY(ep)&&((eu=ep.childNodes[ev])||(eu=ep.childNodes[ev-1]),!eu||!t3(eu)||"A"===(null===(ed=eu.previousSibling)||void 0===ed?void 0:ed.nodeName)||Nf(et,eu,!1)||Nf(et,eu,!0)||Rf(et,ey,er,!0,eu).each(et=>{ep=et.container(),ev=et.offset(),ef=!0}))),eI&&!er&&tJ(ep)&&ev===ep.data.length&&Rf(et,ey,er,!1,ep).each(et=>{ep=et.container(),ev=et.offset(),ef=!0}),ef&&ep?I.some(Li(ep,ev)):I.none()},Of=(et,er)=>{let ei=er.collapsed,es=er.cloneRange(),ed=Li.fromRangeStart(er);return Af(et,ei,!0,es).each(et=>{ei&&Li.isAbove(ed,et)||es.setStart(et.container(),et.offset())}),ei||Af(et,ei,!1,es).each(et=>{es.setEnd(et.container(),et.offset())}),ei&&es.collapse(!0),kf(er,es)?I.none():I.some(es)},Tf=(et,er)=>et.splitText(er),Bf=et=>{let er=et.startContainer,ei=et.startOffset,es=et.endContainer,ed=et.endOffset;if(er===es&&tJ(er)){if(ei>0&&ei<er.data.length){if(er=(es=Tf(er,ei)).previousSibling,ed>ei){ed-=ei;let et=Tf(es,ed).previousSibling;er=es=et,ed=et.data.length,ei=0}else ed=0}}else if(tJ(er)&&ei>0&&ei<er.data.length&&(er=Tf(er,ei),ei=0),tJ(es)&&ed>0&&ed<es.data.length){let et=Tf(es,ed).previousSibling;es=et,ed=et.data.length}return{startContainer:er,startOffset:ei,endContainer:es,endOffset:ed}},Df=et=>({walk:(er,ei)=>zm(et,er,ei),split:Bf,expand:(er,ei={type:"word"})=>{if("word"===ei.type){let ei=Um(et,er,[{inline:"span"}]),es=et.createRng();return es.setStart(ei.startContainer,ei.startOffset),es.setEnd(ei.endContainer,ei.endOffset),es}return er},normalize:er=>Of(et,er).fold(eV,et=>(er.setStart(et.startContainer,et.startOffset),er.setEnd(et.endContainer,et.endOffset),!0))});Df.compareRanges=kf,Df.getCaretRangeFromPoint=xf,Df.getSelectedNode=gi,Df.getNode=pi;let lB=((et,er)=>{let n=er=>{let ei=(et=>{let er=et.dom;return Yn(et)?er.getBoundingClientRect().height:er.offsetHeight})(er);if(ei<=0||null===ei){let ei=lo(er,et);return parseFloat(ei)||0}return ei},o=(et,er)=>X(er,(er,ei)=>{let es=lo(et,ei),ed=void 0===es?0:parseInt(es,10);return isNaN(ed)?er:er+ed},0);return{set:(er,ei)=>{if(!e$(ei)&&!ei.match(/^[0-9]+$/))throw Error(et+".set accepts only positive integer values. Value was "+ei);let es=er.dom;ro(es)&&(es.style[et]=ei+"px")},get:n,getOuter:n,aggregate:o,max:(et,er,ei)=>{let es=o(et,ei);return er>es?er-es:0}}})("height"),Lf=()=>pn(document),Mf=(et,er)=>et.view(er).fold(N([]),er=>{let ei=et.owner(er),es=Mf(et,ei);return[er].concat(es)});var lD=Object.freeze({__proto__:null,view:et=>{var er;return(et.dom===document?I.none():I.from(null===(er=et.dom.defaultView)||void 0===er?void 0:er.frameElement)).map(pn)},owner:et=>Nn(et)});let Ff=et=>"textarea"===Ht(et),Uf=(et,er)=>{let ei=(et=>{let er=et.dom.ownerDocument,ei=er.body,es=er.defaultView,ed=er.documentElement;if(ei===et.dom)return Ro(ei.offsetLeft,ei.offsetTop);let ec=Oo(null==es?void 0:es.pageYOffset,ed.scrollTop),eu=Oo(null==es?void 0:es.pageXOffset,ed.scrollLeft),ef=Oo(ed.clientTop,ei.clientTop),ep=Oo(ed.clientLeft,ei.clientLeft);return To(et).translate(eu-ep,ec-ef)})(et),es=lB.get(et);return{element:et,bottom:ei.top+es,height:es,pos:ei,cleanup:er}},zf=(et,er,ei,es)=>{Vf(et,(ed,ec)=>Hf(et,er,ei,es),ei)},jf=(et,er,ei,es,ed)=>{let ec={elm:es.element.dom,alignToTop:ed};et.dispatch("ScrollIntoView",ec).isDefaultPrevented()||(ei(et,er,Bo(er).top,es,ed),((et,er)=>{et.dispatch("AfterScrollIntoView",er)})(et,ec))},Hf=(et,er,ei,es)=>{let ed=pn(et.getBody()),ec=pn(et.getDoc());ed.dom.offsetWidth;let eu=((et,er)=>{let ei=((et,er)=>{let ei=Mn(et);if(0===ei.length||Ff(et))return{element:et,offset:er};if(er<ei.length&&!Ff(ei[er]))return{element:ei[er],offset:0};{let es=ei[ei.length-1];return Ff(es)?{element:et,offset:er}:"img"===Ht(es)?{element:es,offset:1}:tj(es)?{element:es,offset:vr(es).length}:{element:es,offset:Mn(es).length}}})(et,er),es=hn('<span data-mce-bogus="all" style="display: inline-block;">\uFEFF</span>');return go(ei.element,es),Uf(es,()=>wo(es))})(pn(ei.startContainer),ei.startOffset);jf(et,ec,er,eu,es),eu.cleanup()},$f=(et,er,ei,es)=>{let ed=pn(et.getDoc());jf(et,ed,ei,Uf(pn(er),E),es)},Vf=(et,er,ei)=>{let es=ei.startContainer,ed=ei.startOffset,ec=ei.endContainer,eu=ei.endOffset;er(pn(es),pn(ec));let ef=et.dom.createRng();ef.setStart(es,ed),ef.setEnd(ec,eu),et.selection.setRng(ei)},qf=(et,er,ei,es,ed)=>{let ec=er.pos;if(es)Do(ec.left,ec.top,ed);else{let es=ec.top-ei+er.height;Do(-et.getBody().getBoundingClientRect().left,es,ed)}},Wf=(et,er,ei,es,ed,ec)=>{let eu=es+ei,ef=ed.pos.top,ep=ed.bottom,ev=ep-ef>=es;ef<ei?qf(et,ed,es,!1!==ec,er):ef>eu?qf(et,ed,es,ev?!1!==ec:!0===ec,er):ep>eu&&!ev&&qf(et,ed,es,!0===ec,er)},Kf=(et,er,ei,es,ed)=>{let ec=Rn(er).dom.innerHeight;Wf(et,er,ei,ec,es,ed)},Gf=(et,er,ei,es,ed)=>{let ec=Rn(er).dom.innerHeight;Wf(et,er,ei,ec,es,ed);let eu=(et=>{let er=Lf(),ei=Bo(er),es=((et,er)=>{let ei=er.owner(et);return Mf(er,ei)})(et,lD),ed=To(et),ec=Y(es,(et,er)=>{let ei=To(er);return{left:et.left+ei.left,top:et.top+ei.top}},{left:0,top:0});return Ro(ec.left+ed.left+ei.left,ec.top+ed.top+ei.top)})(es.element),ef=Mo(window);eu.top<ef.y?Po(es.element,!1!==ed):eu.top>ef.bottom&&Po(es.element,!0===ed)},Yf=(et,er,ei)=>zf(et,Kf,er,ei),Xf=(et,er,ei)=>$f(et,er,Kf,ei),Qf=(et,er,ei)=>zf(et,Gf,er,ei),Jf=(et,er,ei)=>$f(et,er,Gf,ei),Zf=(et,er,ei)=>{(et.inline?Yf:Qf)(et,er,ei)},eg=et=>et.dom.focus(),tg=et=>{let er=tK(et).dom;return et.dom===er.activeElement},ng=(et=Lf())=>I.from(et.dom.activeElement).map(pn),og=(et,er)=>{let ei=tj(er)?vr(er).length:Mn(er).length+1;return et>ei?ei:et<0?0:et},rg=et=>lL.range(et.start,og(et.soffset,et.start),et.finish,og(et.foffset,et.finish)),sg=(et,er)=>!Ho(er.dom)&&(Sn(et,er)||En(et,er)),ag=et=>er=>sg(et,er.start)&&sg(et,er.finish),ig=et=>lL.range(pn(et.startContainer),et.startOffset,pn(et.endContainer),et.endOffset),lg=et=>{let er=document.createRange();try{return er.setStart(et.start.dom,et.soffset),er.setEnd(et.finish.dom,et.foffset),I.some(er)}catch(et){return I.none()}},dg=et=>{var er;let ei=et.inline||tP.browser.isFirefox()?(et=>{let er=et.getSelection();return(er&&0!==er.rangeCount?I.from(er.getRangeAt(0)):I.none()).map(ig)})(Rn(er=pn(et.getBody())).dom).filter(ag(er)):I.none();et.bookmark=ei.isSome()?ei:et.bookmark},cg=et=>(et.bookmark?et.bookmark:I.none()).bind(er=>{var ei;return ei=pn(et.getBody()),I.from(er).filter(ag(ei)).map(rg)}).bind(lg),lF={isEditorUIElement:et=>{let er=et.className.toString();return -1!==er.indexOf("tox-")||-1!==er.indexOf("mce-")}},lP={setEditorTimeout:(et,er,ei)=>{var es;return e$(es=ei)||(es=0),setTimeout(()=>{et.removed||er()},es)},setEditorInterval:(et,er,ei)=>{var es;let ed=(e$(es=ei)||(es=0),setInterval(()=>{et.removed?clearInterval(ed):er()},es));return ed}},lM=Oa.DOM,pg=et=>{let er=et.classList;return void 0!==er&&(er.contains("tox-edit-area")||er.contains("tox-edit-area__iframe")||er.contains("mce-content-body"))},hg=(et,er)=>{let ei=oK(et),es=lM.getParent(er,er=>tY(er)&&lF.isEditorUIElement(er)||!!ei&&et.dom.is(er,ei));return null!==es},bg=et=>{try{let er=tK(pn(et.getElement()));return ng(er).fold(()=>document.body,et=>et.dom)}catch(et){return document.body}},vg=(er,ei)=>{let es=ei.editor;(et=>{let er=ja(()=>{dg(et)},0);et.on("init",()=>{et.inline&&((et,er)=>{let n=()=>{er.throttle()};Oa.DOM.bind(document,"mouseup",n),et.on("remove",()=>{Oa.DOM.unbind(document,"mouseup",n)})})(et,er),((et,er)=>{et.on("mouseup touchend",et=>{er.throttle()})})(et,er),et.on("keyup NodeChange AfterSetSelectionRange",er=>{"nodechange"===er.type&&er.selectionChange||dg(et)})}),et.on("remove",()=>{er.cancel()})})(es);let o=(et,er)=>{aY(et)&&!0!==et.inline&&er(pn(et.getContainer()),"tox-edit-focus")};es.on("focusin",()=>{let et=er.focusedEditor;pg(bg(es))&&o(es,un),et!==es&&(et&&et.dispatch("blur",{focusedEditor:es}),er.setActive(es),er.focusedEditor=es,es.dispatch("focus",{blurredEditor:et}),es.focus(!0))}),es.on("focusout",()=>{lP.setEditorTimeout(es,()=>{let et=er.focusedEditor;pg(bg(es))&&et===es||o(es,fn),hg(es,bg(es))||et!==es||(es.dispatch("blur",{focusedEditor:null}),er.focusedEditor=null)})}),et||(et=et=>{let ei=er.activeEditor;ei&&Kn(et).each(et=>{et.ownerDocument===document&&(et===document.body||hg(ei,et)||er.focusedEditor!==ei||(ei.dispatch("blur",{focusedEditor:null}),er.focusedEditor=null))})},lM.bind(document,"focusin",et))},yg=(er,ei)=>{er.focusedEditor===ei.editor&&(er.focusedEditor=null),!er.activeEditor&&et&&(lM.unbind(document,"focusin",et),et=null)},Cg=(et,er)=>{var ei;(ei=pn(et.getBody()),(er.collapsed?I.from(pi(er.startContainer,er.startOffset)).map(pn):I.none()).bind(et=>rI(et)?I.some(et):Sn(ei,et)?I.none():I.some(ei))).bind(et=>a6(et.dom)).fold(()=>{et.selection.normalize()},er=>et.selection.setRng(er.toRange()))},wg=et=>{if(et.setActive)try{et.setActive()}catch(er){et.focus()}else et.focus()},xg=et=>et.inline?(et=>{var er;let ei=et.getBody();return ei&&(tg(er=pn(ei))||ng(tK(er)).filter(et=>er.dom.contains(et.dom)).isSome())})(et):C(et.iframeElement)&&tg(pn(et.iframeElement)),kg=et=>et.editorManager.setActive(et),Eg=(et,er,ei,es,ed)=>{let ec=ei?er.startContainer:er.endContainer,eu=ei?er.startOffset:er.endOffset;return I.from(ec).map(pn).map(et=>es&&er.collapsed?et:In(et,ed(et,eu)).getOr(et)).bind(et=>tz(et)?I.some(et):An(et).filter(tz)).map(et=>et.dom).getOr(et)},Sg=(et,er,ei=!1)=>Eg(et,er,!0,ei,(et,er)=>Math.min(zn(et),er)),_g=(et,er,ei=!1)=>Eg(et,er,!1,ei,(et,er)=>er>0?er-1:er),Ng=(et,er)=>{let ei=et;for(;et&&tJ(et)&&0===et.length;)et=er?et.nextSibling:et.previousSibling;return et||ei},Rg=(et,er)=>V(er,er=>{let ei=et.dispatch("GetSelectionRange",{range:er});return ei.range!==er?ei.range:er}),lU=["img","br"],Og=et=>{let er=yr(et).filter(et=>0!==et.trim().length||et.indexOf("\xa0")>-1).isSome();return er||H(lU,Ht(et))||qt(et)&&"false"===en(et,"contenteditable")},lH="[data-mce-autocompleter]",Bg=(et,er)=>{if(Dg(pn(et.getBody())).isNone()){let ei=hn('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',et.getDoc());bo(ei,pn(er.extractContents())),er.insertNode(ei.dom),An(ei).each(et=>et.dom.normalize()),((et,er)=>{let n=et=>{let ei=Mn(et);for(let et=ei.length-1;et>=0;et--){let es=ei[et];if(er(es))return I.some(es);let ed=n(es);if(ed.isSome())return ed}return I.none()};return n(et)})(ei,Og).map(er=>{et.selection.setCursorLocation(er.dom,"img"===Ht(er)?1:yr(er).fold(()=>Mn(er).length,et=>et.length))})}},Dg=et=>eo(et,lH),lq={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Lg=(et,er,ei)=>{let es=ei?"lastChild":"firstChild",ed=ei?"prev":"next";if(et[es])return et[es];if(et!==er){let ei=et[ed];if(ei)return ei;for(let es=et.parent;es&&es!==er;es=es.parent)if(ei=es[ed])return ei}},Mg=et=>{var er;let ei=null!==(er=et.value)&&void 0!==er?er:"";if(!ds(ei))return!1;let es=et.parent;return!es||"span"===es.name&&!es.attr("style")||!/^[ ]+$/.test(ei)},Ig=et=>{let er="a"===et.name&&!et.attr("href")&&et.attr("id");return et.attr("name")||et.attr("id")&&!et.firstChild||et.attr("data-mce-bookmark")||er};let Fg=class Fg{static create(et,er){let ei=new Fg(et,lq[et]||1);return er&&ge(er,(et,er)=>{ei.attr(er,et)}),ei}constructor(et,er){this.name=et,this.type=er,1===er&&(this.attributes=[],this.attributes.map={})}replace(et){return et.parent&&et.remove(),this.insert(et,this),this.remove(),this}attr(et,er){let ei=this;if(!eP(et))return C(et)&&ge(et,(et,er)=>{ei.attr(er,et)}),ei;let es=ei.attributes;if(es){if(void 0!==er){if(null===er){if(et in es.map){delete es.map[et];let er=es.length;for(;er--;)if(es[er].name===et)return es.splice(er,1),ei}return ei}if(et in es.map){let ei=es.length;for(;ei--;)if(es[ei].name===et){es[ei].value=er;break}}else es.push({name:et,value:er});return es.map[et]=er,ei}return es.map[et]}}clone(){let et=new Fg(this.name,this.type),er=this.attributes;if(er){let ei=[];ei.map={};for(let et=0,es=er.length;et<es;et++){let es=er[et];"id"!==es.name&&(ei[ei.length]={name:es.name,value:es.value},ei.map[es.name]=es.value)}et.attributes=ei}return et.value=this.value,et}wrap(et){return this.parent&&(this.parent.insert(et,this),et.append(this)),this}unwrap(){for(let et=this.firstChild;et;){let er=et.next;this.insert(et,this,!0),et=er}this.remove()}remove(){let et=this.parent,er=this.next,ei=this.prev;return et&&(et.firstChild===this?(et.firstChild=er,er&&(er.prev=null)):ei&&(ei.next=er),et.lastChild===this?(et.lastChild=ei,ei&&(ei.next=null)):er&&(er.prev=ei),this.parent=this.next=this.prev=null),this}append(et){et.parent&&et.remove();let er=this.lastChild;return er?(er.next=et,et.prev=er,this.lastChild=et):this.lastChild=this.firstChild=et,et.parent=this,et}insert(et,er,ei){et.parent&&et.remove();let es=er.parent||this;return ei?(er===es.firstChild?es.firstChild=et:er.prev&&(er.prev.next=et),et.prev=er.prev,et.next=er,er.prev=et):(er===es.lastChild?es.lastChild=et:er.next&&(er.next.prev=et),et.next=er.next,et.prev=er,er.next=et),et.parent=es,et}getAll(et){let er=[];for(let ei=this.firstChild;ei;ei=Lg(ei,this))ei.name===et&&er.push(ei);return er}children(){let et=[];for(let er=this.firstChild;er;er=er.next)et.push(er);return et}empty(){if(this.firstChild){let et=[];for(let er=this.firstChild;er;er=Lg(er,this))et.push(er);let er=et.length;for(;er--;){let ei=et[er];ei.parent=ei.firstChild=ei.lastChild=ei.next=ei.prev=null}}return this.firstChild=this.lastChild=null,this}isEmpty(et,er={},ei){var es;let ed=this.firstChild;if(Ig(this))return!1;if(ed)do{if(1===ed.type){if(ed.attr("data-mce-bogus"))continue;if(et[ed.name]||Ig(ed))return!1}if(8===ed.type||3===ed.type&&!Mg(ed)||3===ed.type&&ed.parent&&er[ed.parent.name]&&ds(null!==(es=ed.value)&&void 0!==es?es:"")||ei&&ei(ed))return!1}while(ed=Lg(ed,this));return!0}walk(et){return Lg(this,null,et)}};let Ug=(et,er,ei=0)=>{let es=et.toLowerCase();if(-1!==es.indexOf("[if ",ei)&&/^\s*\[if [\w\W]+\]>.*<!\[endif\](--!?)?>/.test(es.substr(ei))){let et=es.indexOf("[endif]",ei);return es.indexOf(">",et)}if(er){let et=es.indexOf(">",ei);return -1!==et?et:es.length}{let er=/--!?>/g;er.lastIndex=ei;let ed=er.exec(et);return ed?ed.index+ed[0].length:es.length}},zg=(et,er,ei)=>{let es=/<([!?\/])?([A-Za-z0-9\-_:.]+)/g,ed=/(?:\s(?:[^'">]+(?:"[^"]*"|'[^']*'))*[^"'>]*(?:"[^">]*|'[^'>]*)?|\s*|\/)>/g,ec=et.getVoidElements(),eu=1,ef=ei;for(;0!==eu;)for(es.lastIndex=ef;;){let et=es.exec(er);if(null===et)return ef;if("!"===et[1]){ef=He(et[2],"--")?Ug(er,!1,et.index+3):Ug(er,!0,et.index+1);break}{ed.lastIndex=es.lastIndex;let ei=ed.exec(er);if(eH(ei)||ei.index!==es.lastIndex)continue;"/"===et[1]?eu-=1:ke(ec,et[2])||(eu+=1),ef=es.lastIndex+ei[0].length;break}}return ef},jg=(et,er)=>{let ei;let es=/<(\w+) [^>]*data-mce-bogus="all"[^>]*>/g,ed=et.schema,ec=((et,er)=>{let ei=RegExp(["\\s?("+et.join("|")+')="[^"]+"'].join("|"),"gi");return er.replace(ei,"")})(et.getTempAttrs(),er),eu=ed.getVoidElements();for(;ei=es.exec(ec);){let et;let er=es.lastIndex,ef=ei[0].length;et=eu[ei[1]]?er:zg(ed,ec,er),ec=ec.substring(0,er-ef)+ec.substring(et),es.lastIndex=er-ef}return Fr(ec)},$g=et=>{let er=Fo(et,"[data-mce-bogus]");q(er,et=>{"all"===en(et,"data-mce-bogus")?wo(et):Er(et)?(go(et,vn("\uFEFF")),wo(et)):xo(et)})},Vg=et=>{let er=Fo(et,"input");q(er,et=>{on(et,"name")})},qg=(et,er,ei)=>{let es;return es="raw"===er.format?tU.trim(jg(et.serializer,ei.innerHTML)):"text"===er.format?((et,er)=>{let ei=et.getDoc(),es=tK(pn(et.getBody())),ed=bn("div",ei);Jt(ed,"data-mce-bogus","all"),io(ed,{position:"fixed",left:"-9999999px",top:"0"}),So(ed,er.innerHTML),$g(ed),Vg(ed);let ec=jn(es)?es:pn(Nn(es).dom.body);bo(ec,ed);let eu=Fr(ed.dom.innerText);return wo(ed),eu})(et,ei):"tree"===er.format?et.serializer.serialize(ei,er):((et,er)=>{let ei=nJ(et),es=RegExp(`^(<${ei}[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/${ei}>[\r
]*|<br \\/>[\r
]*)$`);return er.replace(es,"")})(et,et.serializer.serialize(ei,er)),"text"!==er.format&&!rL(pn(ei))&&eP(es)?tU.trim(es):es},lz=tU.makeMap,Kg=et=>{let er=[],ei=(et=et||{}).indent,es=lz(et.indent_before||""),ed=lz(et.indent_after||""),ec=rQ.getEncodeFunc(et.entity_encoding||"raw",et.entities),eu="xhtml"!==et.element_format;return{start:(et,ef,ep)=>{if(ei&&es[et]&&er.length>0){let et=er[er.length-1];et.length>0&&"\n"!==et&&er.push("\n")}if(er.push("<",et),ef)for(let et=0,ei=ef.length;et<ei;et++){let ei=ef[et];er.push(" ",ei.name,'="',ec(ei.value,!0),'"')}if(er[er.length]=!ep||eu?">":" />",ep&&ei&&ed[et]&&er.length>0){let et=er[er.length-1];et.length>0&&"\n"!==et&&er.push("\n")}},end:et=>{let es;er.push("</",et,">"),ei&&ed[et]&&er.length>0&&(es=er[er.length-1]).length>0&&"\n"!==es&&er.push("\n")},text:(et,ei)=>{et.length>0&&(er[er.length]=ei?et:ec(et))},cdata:et=>{er.push("<![CDATA[",et,"]]>")},comment:et=>{er.push("<!--",et,"-->")},pi:(et,es)=>{es?er.push("<?",et," ",ec(es),"?>"):er.push("<?",et,"?>"),ei&&er.push("\n")},doctype:et=>{er.push("<!DOCTYPE",et,">",ei?"\n":"")},reset:()=>{er.length=0},getContent:()=>er.join("").replace(/\n$/,"")}},Gg=(et={},er=ca())=>{let ei=Kg(et);return et.validate=!("validate"in et)||et.validate,{serialize:es=>{let ed=et.validate,ec={3:et=>{var er;ei.text(null!==(er=et.value)&&void 0!==er?er:"",et.raw)},8:et=>{var er;ei.comment(null!==(er=et.value)&&void 0!==er?er:"")},7:et=>{ei.pi(et.name,et.value)},10:et=>{var er;ei.doctype(null!==(er=et.value)&&void 0!==er?er:"")},4:et=>{var er;ei.cdata(null!==(er=et.value)&&void 0!==er?er:"")},11:et=>{let er=et;if(er=er.firstChild)do a(er);while(er=er.next)}};ei.reset();let a=et=>{var es;let eu=ec[et.type];if(eu)eu(et);else{let ec=et.name,eu=ec in er.getVoidElements(),ef=et.attributes;if(ed&&ef&&ef.length>1){let ei=[];ei.map={};let es=er.getElementRule(et.name);if(es){for(let et=0,er=es.attributesOrder.length;et<er;et++){let er=es.attributesOrder[et];if(er in ef.map){let et=ef.map[er];ei.map[er]=et,ei.push({name:er,value:et})}}for(let et=0,er=ef.length;et<er;et++){let er=ef[et].name;if(!(er in ei.map)){let et=ef.map[er];ei.map[er]=et,ei.push({name:er,value:et})}}ef=ei}}if(ei.start(ec,ef,eu),!eu){let er=et.firstChild;if(er){"pre"!==ec&&"textarea"!==ec||3!==er.type||"\n"!==(null===(es=er.value)||void 0===es?void 0:es[0])||ei.text("\n",!0);do a(er);while(er=er.next)}ei.end(ec)}}};return 1!==es.type||et.inner?3===es.type?ec[3](es):ec[11](es):a(es),ei.getContent()}}},lj=new Set;q(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],et=>{lj.add(et)});let l$=["font","text-decoration","text-emphasis"],Qg=(et,er)=>eJ(et.parseStyle(et.getAttrib(er,"style"))),Jg=(et,er,ei)=>{let es=Qg(et,er),ed=Qg(et,ei),s=es=>{var ed,ec;let eu=null!==(ed=et.getStyle(er,es))&&void 0!==ed?ed:"",ef=null!==(ec=et.getStyle(ei,es))&&void 0!==ec?ec:"";return Ge(eu)&&Ge(ef)&&eu!==ef};return $(es,et=>{let t=er=>$(er,er=>er===et);if(!t(ed)&&t(l$)){let et=G(ed,et=>$(l$,er=>He(et,er)));return $(et,s)}return s(et)})},Zg=(et,er,ei)=>I.from(ei.container()).filter(tJ).exists(es=>er(es.data.charAt(ei.offset()+(et?0:-1)))),lV=O(Zg,!0,Fu),lG=O(Zg,!1,Fu),np=et=>{let er=et.container();return tJ(er)&&(0===er.data.length||hr(er.data)&&Wm.isBookmarkNode(er.parentNode))},op=(et,er)=>ei=>zc(et?0:-1,ei).filter(er).isSome(),rp=et=>t8(et)&&"block"===lo(pn(et),"display"),sp=et=>t6(et)&&(!tY(et)||"all"!==et.getAttribute("data-mce-bogus")),lW=op(!0,rp),lK=op(!1,rp),lY=op(!0,t7),lX=op(!1,t7),lJ=op(!0,Yo),lZ=op(!1,Yo),lQ=op(!0,sp),l0=op(!1,sp),gp=(et,er)=>Sn(er,et)?Tn(et,et=>eV(et)||En(et,er)).slice(0,-1):[],pp=(et,er)=>[et].concat(gp(et,er)),hp=(et,er,ei)=>pu(et,er,ei,np),bp=(et,er)=>J(pp(pn(er.container()),et),rc),vp=(et,er,ei)=>hp(et,er.dom,ei).forall(et=>bp(er,ei).fold(()=>!Uc(et,ei,er.dom),es=>!Uc(et,ei,er.dom)&&Sn(es,pn(et.container())))),yp=(et,er,ei)=>bp(er,ei).fold(()=>hp(et,er.dom,ei).forall(et=>!Uc(et,ei,er.dom)),er=>hp(et,er.dom,ei).isNone()),l1=O(yp,!1),l2=O(yp,!0),l3=O(vp,!1),l8=O(vp,!0),Ep=et=>Yc(et).exists(Er),Sp=(et,er,ei)=>{let es=G(pp(pn(ei.container()),er),rc),ed=le(es).getOr(er);return fu(et,ed.dom,ei).filter(Ep)},_p=(et,er)=>Yc(er).exists(Er)||Sp(!0,et,er).isSome(),Np=(et,er)=>I.from(er.getNode(!0)).map(pn).exists(Er)||Sp(!1,et,er).isSome(),l5=O(Sp,!1),l6=O(Sp,!0),Op=et=>Li.isTextPosition(et)&&!et.isAtStart()&&!et.isAtEnd(),Tp=(et,er)=>{let ei=G(pp(pn(er.container()),et),rc);return le(ei).getOr(et)},Bp=(et,er)=>Op(er)?lG(er):lG(er)||a5(Tp(et,er).dom,er).exists(lG),Dp=(et,er)=>Op(er)?lV(er):lV(er)||a8(Tp(et,er).dom,er).exists(lV),Pp=et=>Yc(et).bind(et=>Jn(et,tz)).exists(et=>H(["pre","pre-wrap"],lo(et,"white-space"))),Lp=(et,er)=>ei=>{var es;return C(es=new zo(ei,et)[er]())&&t6(es)&&a1(es)},Mp=(et,er)=>!Pp(er)&&(a5(et.dom,er).isNone()||a8(et.dom,er).isNone()||l1(et,er)||l2(et,er)||Np(et,er)||_p(et,er)||Bp(et,er)||Dp(et,er)),Ip=(et,er)=>!Pp(er)&&(l1(et,er)||l3(et,er)||Np(et,er)||Bp(et,er)||((et,er)=>{let ei=a5(et.dom,er).getOr(er),es=Lp(et.dom,"prev");return er.isAtStart()&&(es(er.container())||es(ei.container()))})(et,er)),Fp=(et,er)=>!Pp(er)&&(l2(et,er)||l8(et,er)||_p(et,er)||Dp(et,er)||((et,er)=>{let ei=a8(et.dom,er).getOr(er),es=Lp(et.dom,"next");return er.isAtEnd()&&(es(er.container())||es(ei.container()))})(et,er)),Up=(et,er)=>Ip(et,er)||Fp(et,(et=>{let er=et.container(),ei=et.offset();return tJ(er)&&ei<er.data.length?Li(er,ei+1):et})(er)),zp=(et,er)=>Mu(et.charAt(er)),jp=(et,er)=>Fu(et.charAt(er)),Hp=(et,er,ei)=>{let es=er.data,ed=Li(er,0);return ei||!zp(es,0)||Up(et,ed)?!!(ei&&jp(es,0)&&Ip(et,ed))&&(er.data="\xa0"+es.slice(1),!0):(er.data=" "+es.slice(1),!0)},$p=(et,er,ei)=>{let es=er.data,ed=Li(er,es.length-1);return ei||!zp(es,es.length-1)||Up(et,ed)?!!(ei&&jp(es,es.length-1)&&Fp(et,ed))&&(er.data=es.slice(0,-1)+"\xa0",!0):(er.data=es.slice(0,-1)+" ",!0)},Vp=(et,er)=>{let ei=er.container();if(!tJ(ei))return I.none();if((et=>{let er=et.container();return tJ(er)&&je(er.data,"\xa0")})(er)){let es=Hp(et,ei,!1)||(et=>{let er=et.data,ei=(et=>{let er=et.split("");return V(er,(et,ei)=>Mu(et)&&ei>0&&ei<er.length-1&&Uu(er[ei-1])&&Uu(er[ei+1])?" ":et).join("")})(er);return ei!==er&&(et.data=ei,!0)})(ei)||$p(et,ei,!1);return It(es,er)}if(Up(et,er)){let es=Hp(et,ei,!0)||$p(et,ei,!0);return It(es,er)}return I.none()},qp=(et,er,ei)=>{if(0===ei)return;let es=pn(et),ed=Qn(es,rc).getOr(es),ec=et.data.slice(er,er+ei),eu=er+ei>=et.data.length&&Fp(ed,Li(et,et.data.length)),ef=0===er&&Ip(ed,Li(et,0));et.replaceData(er,ei,ms(ec,4,ef,eu))},Wp=(et,er)=>{let ei=et.data.slice(er),es=ei.length-e2(ei).length;qp(et,er,es)},Kp=(et,er)=>{let ei=et.data.slice(0,er),es=ei.length-e3(ei).length;qp(et,er-es,es)},Gp=(et,er,ei,es=!0)=>{let ed=e3(et.data).length,ec=es?et:er,eu=es?er:et;return es?ec.appendData(eu.data):ec.insertData(0,eu.data),wo(pn(eu)),ei&&Wp(ec,ed),ec},Yp=(et,er)=>((et,er)=>{let ei=et.container(),es=et.offset();return!Li.isTextPosition(et)&&ei===er.parentNode&&es>Li.before(er).offset()})(er,et)?Li(er.container(),er.offset()-1):er,Xp=et=>{var er;return ss(et.previousSibling)?I.some(tJ(er=et.previousSibling)?Li(er,er.data.length):Li.after(er)):et.previousSibling?a9(et.previousSibling):I.none()},Qp=et=>{var er;return ss(et.nextSibling)?I.some(tJ(er=et.nextSibling)?Li(er,0):Li.before(er)):et.nextSibling?a6(et.nextSibling):I.none()},Jp=(et,er,ei)=>(et?Qp(ei).orThunk(()=>Xp(ei)).orThunk(()=>a8(er,Li.after(ei)).orThunk(()=>a5(er,Li.before(ei)))):Xp(ei).orThunk(()=>Qp(ei)).orThunk(()=>I.from(ei.previousSibling?ei.previousSibling:ei.parentNode).bind(et=>a5(er,Li.before(et))).orThunk(()=>a8(er,Li.after(ei))))).map(O(Yp,ei)),Zp=(et,er,ei)=>{ei.fold(()=>{et.focus()},ei=>{et.selection.setRng(ei.toRange(),er)})},eh=(et,er)=>er&&ke(et.schema.getBlockElements(),Ht(er)),th=et=>{if(bs(et)){let er=hn('<br data-mce-bogus="1">');return Co(et),bo(et,er),I.some(Li.before(er.dom))}return I.none()},nh=(et,er,ei,es=!0)=>{var ed;let ec=Jp(er,et.getBody(),ei.dom),eu=Qn(ei,O(eh,et),(ed=et.getBody(),et=>et.dom===ed)),ef=((et,er,ei)=>{let es=Bn(et).filter(tj),ed=Dn(et).filter(tj);return wo(et),(es.isSome()&&ed.isSome()&&er.isSome()?I.some(((et,er,es)=>{let ed=et.dom,ec=er.dom,eu=ed.data.length;return Gp(ed,ec,ei),es.container()===ec?Li(ed,eu):es})(es.getOrDie(),ed.getOrDie(),er.getOrDie())):I.none()).orThunk(()=>(ei&&(es.each(et=>Kp(et.dom,et.dom.length)),ed.each(et=>Wp(et.dom,0))),er))})(ei,ec,ke(et.schema.getTextInlineElements(),Ht(ei)));et.dom.isEmpty(et.getBody())?(et.setContent(""),et.selection.setCursorLocation()):eu.bind(th).fold(()=>{es&&Zp(et,er,ef)},ei=>{es&&Zp(et,er,I.some(ei))})},l9=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,rh=(et,er)=>xn(pn(er),oL(et))&&!As(et.schema,er)&&et.dom.isEditable(er),sh=et=>{var er,ei;return"rtl"===Oa.DOM.getStyle(et,"direction",!0)||(ei=null!==(er=et.textContent)&&void 0!==er?er:"",l9.test(ei))},ah=(et,er,ei)=>{let es=G(Oa.DOM.getParents(ei.container(),"*",er),et);return I.from(es[es.length-1])},ih=(et,er)=>{let ei=er.container(),es=er.offset();return et?Hr(ei)?tJ(ei.nextSibling)?Li(ei.nextSibling,0):Li.after(ei):qr(er)?Li(ei,es+1):er:Hr(ei)?tJ(ei.previousSibling)?Li(ei.previousSibling,ei.previousSibling.data.length):Li.before(ei):Wr(er)?Li(ei,es-1):er},l4=O(ih,!0),l7=O(ih,!1),ch=(et,er)=>{let n=et=>et.stopImmediatePropagation();et.on("beforeinput input",n,!0),et.getDoc().execCommand(er),et.off("beforeinput input",n)},uh=et=>ch(et,"Delete"),mh=et=>rf(et)||rw(et),fh=(et,er)=>Sn(et,er)?Jn(er,mh,er=>Pt(An(er),et,En)):I.none(),gh=(et,er=!0)=>{et.dom.isEmpty(et.getBody())&&et.setContent("",{no_selection:!er})},ph=(et,er,ei)=>Mt(a6(ei),a9(ei),(es,ed)=>{let ec=ih(!0,es),eu=ih(!1,ed),ef=ih(!1,er);return et?a8(ei,ef).exists(et=>et.isEqual(eu)&&er.isEqual(ec)):a5(ei,ef).exists(et=>et.isEqual(ec)&&er.isEqual(eu))}).getOr(!0),hh=et=>(8===$t(et)||"#comment"===Ht(et)?Bn(et):Un(et)).bind(hh).orThunk(()=>I.some(et)),bh=(et,er,ei,es=!0)=>{var ed;er.deleteContents();let ec=hh(ei).getOr(ei),eu=pn(null!==(ed=et.dom.getParent(ec.dom,et.dom.isBlock))&&void 0!==ed?ed:ei.dom);if(eu.dom===et.getBody()?gh(et,es):bs(eu)&&(Pr(eu),es&&et.selection.setCursorLocation(eu.dom,0)),!En(ei,eu)){let et=Pt(An(eu),ei)?[]:An(eu).map(Mn).map(et=>G(et,et=>!En(eu,et))).getOr([]);q(et.concat(Mn(ei)),et=>{En(et,eu)||Sn(et,eu)||!bs(et)||wo(et)})}},vh=et=>Fo(et,"td,th"),yh=(et,er)=>({start:et,end:er}),ir=al([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),wh=(et,er)=>to(pn(et),"td,th",er),xh=et=>!En(et.start,et.end),kh=(et,er)=>Xu(et.start,er).bind(ei=>Xu(et.end,er).bind(et=>It(En(ei,et),ei))),Eh=et=>er=>kh(er,et).map(et=>{var ei;return ei=vh(et),{rng:er,table:et,cells:ei}}),Sh=(et,er,ei,es)=>{if(ei.collapsed||!et.forall(xh))return I.none();if(er.isSameTable){let er=et.bind(Eh(es));return I.some({start:er,end:er})}{let et=wh(ei.startContainer,es),er=wh(ei.endContainer,es),ed=et.bind(et=>Xu(et,es).bind(er=>de(vh(er)).map(er=>yh(et,er)))).bind(Eh(es)),ec=er.bind(et=>Xu(et,es).bind(er=>le(vh(er)).map(er=>yh(er,et)))).bind(Eh(es));return I.some({start:ed,end:ec})}},_h=(et,er)=>Z(et,et=>En(et,er)),Nh=et=>Mt(_h(et.cells,et.rng.start),_h(et.cells,et.rng.end),(er,ei)=>et.cells.slice(er,ei+1)),Rh=(et,er)=>{let{startTable:ei,endTable:es}=er,ed=et.cloneRange();return ei.each(et=>ed.setStartAfter(et.dom)),es.each(et=>ed.setEndBefore(et.dom)),ed},Ah=(et,er)=>{let n=er=>En(et,er),ei=((et,er)=>{let ei=wh(et.startContainer,er),es=wh(et.endContainer,er);return Mt(ei,es,yh)})(er,n),es=((et,er)=>{let n=et=>Xu(pn(et),er),ei=n(et.startContainer),es=n(et.endContainer),ed=ei.isSome(),ec=es.isSome(),eu=Mt(ei,es,En).getOr(!1);return{startTable:ei,endTable:es,isStartInTable:ed,isEndInTable:ec,isSameTable:eu,isMultiTable:!eu&&ed&&ec}})(er,n);return ei.exists(et=>!xh(et)&&kh(et,n).exists(et=>{let er=et.dom.rows;return 1===er.length&&1===er[0].cells.length})&&Zu(et.start,er))?ei.map(et=>ir.singleCellTable(er,et.start)):es.isMultiTable?Sh(ei,es,er,n).bind(({start:et,end:ei})=>{let ed=et.bind(Nh).getOr([]),ec=ei.bind(Nh).getOr([]);if(ed.length>0&&ec.length>0){let et=Rh(er,es);return I.some(ir.multiTable(ed,ec,et))}return I.none()}):Sh(ei,es,er,n).bind(({start:et,end:er})=>et.or(er)).bind(et=>{let{isSameTable:ei}=es,ed=Nh(et).getOr([]);if(ei&&et.cells.length===ed.length)return I.some(ir.fullTable(et.table));if(ed.length>0){if(ei)return I.some(ir.partialTable(ed,I.none()));{let et=Rh(er,es);return I.some(ir.partialTable(ed,I.some({...es,rng:et})))}}return I.none()})},Oh=et=>q(et,et=>{on(et,"contenteditable"),Pr(et)}),Th=(et,er,ei,es)=>{let ed=ei.cloneRange();es?(ed.setStart(ei.startContainer,ei.startOffset),ed.setEndAfter(er.dom.lastChild)):(ed.setStartBefore(er.dom.firstChild),ed.setEnd(ei.endContainer,ei.endOffset)),Lh(et,ed,er,!1).each(et=>et())},Bh=et=>{let er=Yu(et),ei=pn(et.selection.getNode());t9(ei.dom)&&bs(ei)?et.selection.setCursorLocation(ei.dom,0):et.selection.collapse(!0),er.length>1&&$(er,et=>En(et,ei))&&Jt(ei,"data-mce-selected","1")},Dh=(et,er,ei)=>I.some(()=>{let es=et.selection.getRng(),ed=ei.bind(({rng:ei,isStartInTable:ed})=>{var ec;let eu=(ec=ed?ei.endContainer:ei.startContainer,I.from(et.dom.getParent(ec,et.dom.isBlock)).map(pn));ei.deleteContents(),((et,er,ei)=>{ei.each(ei=>{er?wo(ei):(Pr(ei),et.selection.setCursorLocation(ei.dom,0))})})(et,ed,eu.filter(bs));let ef=ed?er[0]:er[er.length-1];return Th(et,ef,es,ed),bs(ef)?I.none():I.some(ed?er.slice(1):er.slice(0,-1))}).getOr(er);Oh(ed),Bh(et)}),Ph=(et,er,ei,es)=>I.some(()=>{let ed=et.selection.getRng(),ec=er[0],eu=ei[ei.length-1];Th(et,ec,ed,!0),Th(et,eu,ed,!1);let ef=bs(ec)?er:er.slice(1),ep=bs(eu)?ei:ei.slice(0,-1);Oh(ef.concat(ep)),es.deleteContents(),Bh(et)}),Lh=(et,er,ei,es=!0)=>I.some(()=>{bh(et,er,ei,es)}),Mh=(et,er)=>I.some(()=>nh(et,!1,er)),Ih=(et,er)=>J(pp(er,et),rT),Fh=(et,er)=>J(pp(er,et),Xt("caption")),Uh=(et,er)=>I.some(()=>{Pr(er),et.selection.setCursorLocation(er.dom,0)}),zh=(et,er)=>et?lJ(er):lZ(er),jh=(et,er,ei)=>{let es=pn(et.getBody());return Fh(es,ei).fold(()=>((et,er,ei,es)=>{let ed=Li.fromRangeStart(et.selection.getRng());return Ih(ei,es).bind(es=>bs(es)?Uh(et,es):gu(er,et.getBody(),ed).bind(et=>Ih(ei,pn(et.getNode())).bind(et=>En(et,es)?I.none():I.some(E))))})(et,er,es,ei).orThunk(()=>It(((et,er)=>{let ei=Li.fromRangeStart(et.selection.getRng());return zh(er,ei)||fu(er,et.getBody(),ei).exists(et=>zh(er,et))})(et,er),E)),ei=>((et,er,ei,es)=>{let ed=Li.fromRangeStart(et.selection.getRng());return bs(es)?Uh(et,es):gu(er,et.getBody(),ed).fold(()=>I.some(E),ec=>a6(es.dom).bind(et=>a9(es.dom).map(ei=>er?ed.isEqual(et)&&ec.isEqual(ei):ed.isEqual(ei)&&ec.isEqual(et))).getOr(!0)?Uh(et,es):Fh(ei,pn(ec.getNode())).fold(()=>I.some(E),et=>It(!En(et,es),E)))})(et,er,es,ei))},Hh=(et,er)=>{let ei=pn(et.selection.getStart(!0)),es=Yu(et);return et.selection.isCollapsed()&&0===es.length?jh(et,er,ei):((et,er,ei)=>{let es=pn(et.getBody()),ed=et.selection.getRng();return 0!==ei.length?Dh(et,ei,I.none()):Fh(es,er).fold(()=>Ah(es,ed).bind(er=>er.fold(O(Lh,et),O(Mh,et),O(Dh,et),O(Ph,et))),er=>Uh(et,er))})(et,ei,es)},$h=(et,er)=>{let ei=er;for(;ei&&ei!==et;){if(t5(ei)||t6(ei))return ei;ei=ei.parentNode}return null},ii=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],id=tU.each,Wh=et=>{let er=et.dom,ei=new Set(et.serializer.getTempAttrs()),o=et=>$(ii,er=>He(et,er))||ei.has(et);return{compare:(et,ei)=>{if(et.nodeName!==ei.nodeName||et.nodeType!==ei.nodeType)return!1;let r=et=>{let ei={};return id(er.getAttribs(et),es=>{let ed=es.nodeName.toLowerCase();"style"===ed||o(ed)||(ei[ed]=er.getAttrib(et,ed))}),ei},s=(et,er)=>{for(let ei in et)if(ke(et,ei)){let es=er[ei];if(ez(es)||et[ei]!==es)return!1;delete er[ei]}for(let et in er)if(ke(er,et))return!1;return!0};return(!(tY(et)&&tY(ei))||!!s(r(et),r(ei))&&!!s(er.parseStyle(er.getAttrib(et,"style")),er.parseStyle(er.getAttrib(ei,"style"))))&&!Lu(et)&&!Lu(ei)},isAttributeInternal:o}},Kh=(et,er,ei,es)=>{let ed=ei.name;for(let er=0,ec=et.length;er<ec;er++){let ec=et[er];if(ec.name===ed){let et=es.nodes[ed];et?et.nodes.push(ei):es.nodes[ed]={filter:ec,nodes:[ei]}}}if(ei.attributes)for(let et=0,ed=er.length;et<ed;et++){let ed=er[et],ec=ed.name;if(ec in ei.attributes.map){let et=es.attributes[ec];et?et.nodes.push(ei):es.attributes[ec]={filter:ed,nodes:[ei]}}}},Gh=(et,er)=>{let n=(et,ei)=>{ge(et,et=>{let es=eX(et.nodes);q(et.filter.callbacks,ed=>{for(let er=es.length-1;er>=0;er--){let ed=es[er];((ei?void 0===ed.attr(et.filter.name):ed.name!==et.filter.name)||y(ed.parent))&&es.splice(er,1)}es.length>0&&ed(es,et.filter.name,er)})})};n(et.nodes,!1),n(et.attributes,!0)},Yh=(et,er,ei,es={})=>{let ed=((et,er,ei)=>{let es={nodes:{},attributes:{}};return ei.firstChild&&((ei,ed)=>{let ec=ei;for(;ec=ec.walk();)Kh(et,er,ec,es)})(ei),es})(et,er,ei);Gh(ed,es)},Xh=(et,er,ei,es)=>{if((et.pad_empty_with_br||er.insert)&&ei(es)){let et=new Fg("br",1);er.insert&&et.attr("data-mce-bogus","1"),es.empty().append(et)}else es.empty().append(new Fg("#text",3)).value="\xa0"},Qh=(et,er)=>{let ei=null==et?void 0:et.firstChild;return C(ei)&&ei===et.lastChild&&ei.name===er},Jh=(et,er,ei,es)=>es.isEmpty(er,ei,er=>((et,er)=>{let ei=et.getElementRule(er.name);return!0===(null==ei?void 0:ei.paddEmpty)})(et,er)),Zh=et=>{let er;for(let ei=et;ei;ei=ei.parent){let et=ei.attr("contenteditable");if("false"===et)break;"true"===et&&(er=ei)}return I.from(er)},eb=(et,er,ei=et.parent)=>{if(er.getSpecialElements()[et.name])et.empty().remove();else{let es=et.children();for(let et of es)ei&&!er.isValidChild(ei.name,et.name)&&eb(et,er,ei);et.unwrap()}},tb=(et,er,ei,es=E)=>{let ed=er.getTextBlockElements(),ec=er.getNonEmptyElements(),eu=er.getWhitespaceElements(),ef=tU.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),ep=new Set,d=et=>et!==ei&&!ef[et.name];for(let ei=0;ei<et.length;ei++){let ef,ev,ey;let eS=et[ei];if(!eS.parent||ep.has(eS))continue;if(ed[eS.name]&&"li"===eS.parent.name){let et=eS.next;for(;et&&ed[et.name];)et.name="li",ep.add(et),eS.parent.insert(et,eS.parent),et=et.next;eS.unwrap();continue}let eI=[eS];for(ef=eS.parent;ef&&!er.isValidChild(ef.name,eS.name)&&d(ef);ef=ef.parent)eI.push(ef);if(ef&&eI.length>1){if(er.isValidChild(ef.name,eS.name)){eI.reverse(),es(ev=eI[0].clone());let et=ev;for(let ei=0;ei<eI.length-1;ei++){er.isValidChild(et.name,eI[ei].name)&&ei>0?(es(ey=eI[ei].clone()),et.append(ey)):ey=et;for(let et=eI[ei].firstChild;et&&et!==eI[ei+1];){let er=et.next;ey.append(et),et=er}et=ey}Jh(er,ec,eu,ev)?ef.insert(eS,eI[0],!0):(ef.insert(ev,eI[0],!0),ef.insert(eS,ev)),(Jh(er,ec,eu,ef=eI[0])||Qh(ef,"br"))&&ef.empty().remove()}else eb(eS,er)}else if(eS.parent){if("li"===eS.name){let et=eS.prev;if(et&&("ul"===et.name||"ol"===et.name)){et.append(eS);continue}if((et=eS.next)&&("ul"===et.name||"ol"===et.name)&&et.firstChild){et.insert(eS,et.firstChild,!0);continue}let er=new Fg("ul",1);es(er),eS.wrap(er);continue}if(er.isValidChild(eS.parent.name,"div")&&er.isValidChild("div",eS.name)){let et=new Fg("div",1);es(et),eS.wrap(et)}else eb(eS,er)}}},nb=(et,er,ei=er.parent)=>!(!ei||!et.children[er.name]||et.isValidChild(ei.name,er.name))||!(!ei||"a"!==er.name||!((et,er)=>{let ei=et;for(;ei;){if("a"===ei.name)return!0;ei=ei.parent}return!1})(ei)),ob=et=>et.collapsed?et:(et=>{let er=Li.fromRangeStart(et),ei=Li.fromRangeEnd(et),es=et.commonAncestorContainer;return fu(!1,es,ei).map(ed=>!Uc(er,ei,es)&&Uc(er,ed,es)?((et,er,ei,es)=>{let ed=document.createRange();return ed.setStart(et,er),ed.setEnd(ei,es),ed})(er.container(),er.offset(),ed.container(),ed.offset()):et).getOr(et)})(et),rb=(et,er)=>{let ei=er.firstChild,es=er.lastChild;return ei&&"meta"===ei.name&&(ei=ei.next),es&&"mce_marker"===es.attr("id")&&(es=es.prev),((et,er)=>{var ei;let es=et.getNonEmptyElements();return C(er)&&(er.isEmpty(es)||et.getBlockElements()[er.name]&&C(er.firstChild)&&er.firstChild===er.lastChild&&("br"===(ei=er.firstChild).name||"\xa0"===ei.value))})(et,es)&&(es=null==es?void 0:es.prev),!(!ei||ei!==es||"ul"!==ei.name&&"ol"!==ei.name)},sb=et=>{var er,ei;return et.length>0&&(!(er=et[et.length-1]).firstChild||C(null==er?void 0:er.firstChild)&&er.firstChild===er.lastChild&&("\xa0"===(ei=er.firstChild).data||t3(ei)))?et.slice(0,-1):et},ab=(et,er)=>{let ei=et.getParent(er,et.isBlock);return ei&&"LI"===ei.nodeName?ei:null},ib=(et,er)=>{let ei=Li.after(et),es=du(er).prev(ei);return es?es.toRange():null},lb=(et,er,ei,es)=>{var ed,ec;let eu=((et,er,ei)=>{let es=er.serialize(ei);return(et=>{var er,ei;let es=et.firstChild,ed=et.lastChild;return es&&"META"===es.nodeName&&(null===(er=es.parentNode)||void 0===er||er.removeChild(es)),ed&&"mce_marker"===ed.id&&(null===(ei=ed.parentNode)||void 0===ei||ei.removeChild(ed)),et})(et.createFragment(es))})(er,et,es),ef=ab(er,ei.startContainer),ep=sb(G(null!==(ec=null==(ed=eu.firstChild)?void 0:ed.childNodes)&&void 0!==ec?ec:[],et=>"LI"===et.nodeName)),ev=er.getRoot(),c=et=>{let es=Li.fromRangeStart(ei),ed=du(er.getRoot()),ec=1===et?ed.prev(es):ed.next(es),eu=null==ec?void 0:ec.getNode();return!eu||ab(er,eu)!==ef};return ef?c(1)?((et,er,ei)=>{let es=et.parentNode;return es&&tU.each(er,er=>{es.insertBefore(er,et)}),((et,er)=>{let ei=Li.before(et),es=du(er).next(ei);return es?es.toRange():null})(et,ei)})(ef,ep,ev):c(2)?(er.insertAfter(ep.reverse(),ef),ib(ep[0],ev)):((et,er,ei,es)=>{let ed=((et,er)=>{let ei=er.cloneRange(),es=er.cloneRange();return ei.setStartBefore(et),es.setEndAfter(et),[ei.cloneContents(),es.cloneContents()]})(et,es),ec=et.parentNode;return ec&&(ec.insertBefore(ed[0],et),tU.each(er,er=>{ec.insertBefore(er,et)}),ec.insertBefore(ed[1],et),ec.removeChild(et)),ib(er[er.length-1],ei)})(ef,ep,ev,ei):null},ic=["pre"],ub=(et,er,ei)=>{var es,ed,ec,eu;let ef=et.selection,ep=et.dom,ev=et.parser,ey=ei.merge,eS=Gg({validate:!0},et.schema),eI='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';-1===er.indexOf("{$caret}")&&(er+="{$caret}"),er=er.replace(/\{\$caret\}/,eI);let eL=ef.getRng(),eB=eL.startContainer,eD=et.getBody();eB===eD&&ef.isCollapsed()&&ep.isBlock(eD.firstChild)&&C(eu=eD.firstChild)&&!et.schema.getVoidElements()[eu.nodeName]&&ep.isEmpty(eD.firstChild)&&((eL=ep.createRng()).setStart(eD.firstChild,0),eL.setEnd(eD.firstChild,0),ef.setRng(eL)),ef.isCollapsed()||(et=>{let er=et.dom,ei=ob(et.selection.getRng());et.selection.setRng(ei);let es=er.getParent(ei.startContainer,t9);C(es)&&es===er.getParent(ei.endContainer,t9)&&Zu(pn(es),ei)?Lh(et,ei,pn(es)):ei.startContainer===ei.endContainer&&ei.endOffset-ei.startOffset==1&&tJ(ei.startContainer.childNodes[ei.startOffset])?ei.deleteContents():et.getDoc().execCommand("Delete",!1)})(et);let eF=ef.getNode(),eP={context:eF.nodeName.toLowerCase(),data:ei.data,insert:!0},eM=ev.parse(er,eP);if(!0===ei.paste&&rb(et.schema,eM)&&ab(ep,eF))return(eL=lb(eS,ep,ef.getRng(),eM))&&ef.setRng(eL),er;!0===ei.paste&&((et,er,ei,es)=>{var ed;let ec=er.firstChild,eu=er.lastChild,ef=ec===("bookmark"===eu.attr("data-mce-type")?eu.prev:eu),ep=H(ic,ec.name);if(ef&&ep){let er="false"!==ec.attr("contenteditable"),eu=(null===(ed=et.getParent(ei,et.isBlock))||void 0===ed?void 0:ed.nodeName.toLowerCase())===ec.name,ef=I.from($h(es,ei)).forall(t5);return er&&eu&&ef}return!1})(ep,eM,eF,et.getBody())&&(null===(es=eM.firstChild)||void 0===es||es.unwrap()),(et=>{let er=et;for(;er=er.walk();)1===er.type&&er.attr("data-mce-fragment","1")})(eM);let eU=eM.lastChild;if(eU&&"mce_marker"===eU.attr("id")){let er=eU;for(eU=eU.prev;eU;eU=eU.walk(!0))if(3===eU.type||!ep.isBlock(eU.name)){eU.parent&&et.schema.isValidChild(eU.parent.name,"span")&&eU.parent.insert(er,eU,"br"===eU.name);break}}if(et._selectionOverrides.showBlockCaretContainer(eF),eP.invalid){et.selection.setContent(eI);let ei,es=ef.getNode(),ec=et.getBody();for(t1(es)?es=ei=ec:ei=es;ei&&ei!==ec;)es=ei,ei=ei.parentNode;er=es===ec?ec.innerHTML:ep.getOuterHTML(es);let eu=ev.parse(er),ey=(et=>{for(let er=et;er;er=er.walk())if("mce_marker"===er.attr("id"))return I.some(er);return I.none()})(eu),eL=ey.bind(Zh).getOr(eu);ey.each(et=>et.replace(eM));let eB=eM.children(),eD=null!==(ed=eM.parent)&&void 0!==ed?ed:eu;eM.unwrap();let eF=G(eB,er=>nb(et.schema,er,eD));tb(eF,et.schema,eL),Yh(ev.getNodeFilters(),ev.getAttributeFilters(),eu),er=eS.serialize(eu),es===ec?ep.setHTML(ec,er):ep.setOuterHTML(es,er)}else((et,er,ei)=>{var es;if("all"===ei.getAttribute("data-mce-bogus"))null===(es=ei.parentNode)||void 0===es||es.insertBefore(et.dom.createFragment(er),ei);else{let es=ei.firstChild,ed=ei.lastChild;es&&(es!==ed||"BR"!==es.nodeName)?et.selection.setContent(er,{no_events:!0}):et.dom.setHTML(ei,er)}})(et,er=eS.serialize(eM),eF);return((et,er)=>{let ei=et.schema.getTextInlineElements(),es=et.dom;if(er){let er=et.getBody(),ed=Wh(et);tU.each(es.select("*[data-mce-fragment]"),et=>{if(C(ei[et.nodeName.toLowerCase()])&&ne(Qg(es,et),et=>!lj.has(et))){for(let ei=et.parentElement;C(ei)&&ei!==er&&!Jg(es,et,ei);ei=ei.parentElement)if(ed.compare(ei,et)){es.remove(et,!0);break}}})}})(et,ey),((et,er)=>{var ei,es,ed,ec;let eu;let ef=et.dom,ep=et.selection;if(!er)return;ep.scrollIntoView(er);let ev=$h(et.getBody(),er);if(ev&&"false"===ef.getContentEditable(ev))return ef.remove(er),void ep.select(ev);let ey=ef.createRng(),eS=er.previousSibling;if(tJ(eS)){ey.setStart(eS,null!==(es=null===(ei=eS.nodeValue)||void 0===ei?void 0:ei.length)&&void 0!==es?es:0);let et=er.nextSibling;tJ(et)&&(eS.appendData(et.data),null===(ed=et.parentNode)||void 0===ed||ed.removeChild(et))}else ey.setStartBefore(er),ey.setEndBefore(er);let eI=ef.getParent(er,ef.isBlock);if(ef.remove(er),eI&&ef.isEmpty(eI)){let er;let ei=t9(eI);Co(pn(eI)),ey.setStart(eI,0),ey.setEnd(eI,0),ei||eI.getAttribute("data-mce-fragment")||(ec=ey,er=Li.fromRangeStart(ec),!(eu=null==(er=du(et.getBody()).next(er))?void 0:er.toRange()))?ef.add(eI,ef.create("br",ei?{}:{"data-mce-bogus":"1"})):(ey=eu,ef.remove(eI))}ep.setRng(ey)})(et,ep.get("mce_marker")),ec=et.getBody(),tU.each(ec.getElementsByTagName("*"),et=>{et.removeAttribute("data-mce-fragment")}),((et,er)=>{I.from(et.getParent(er,"td,th")).map(pn).each(Lr)})(ep,ef.getStart()),((et,er,ei)=>{let es=Tn(pn(ei),et=>En(et,pn(er)));ie(es,es.length-2).filter(tz).fold(()=>Es(et,er),er=>Es(et,er.dom))})(et.schema,et.getBody(),ef.getStart()),er},mb=et=>et instanceof Fg,fb=(et,er,ei)=>{et.dom.setHTML(et.getBody(),er),!0!==ei&&xg(et)&&a6(et.getBody()).each(er=>{let ei=er.getNode(),es=Yo(ei)?a6(ei).getOr(er):er;et.selection.setRng(es.toRange())})},gb=(et,er)=>((et,er)=>{var ei,es;let ed=et.dom;return ed.parentNode?(ei=pn(ed.parentNode),es=ei=>!En(et,ei)&&er(ei),J(ei.dom.childNodes,et=>es(pn(et))).map(pn)):I.none()})(et,er).isSome(),pb=et=>ej(et)?et:eV,hb=(et,er,ei)=>{let es=er(et),ed=pb(ei);return es.orThunk(()=>ed(et)?I.none():((et,er,ei)=>{let es=et.dom,ed=pb(ei);for(;es.parentNode;){es=es.parentNode;let et=pn(es),ei=er(et);if(ei.isSome())return ei;if(ed(et))break}return I.none()})(et,er,ed))},vb=(et,er,ei)=>{let es=et.formatter.get(ei);if(es)for(let ei=0;ei<es.length;ei++){let ed=es[ei];if(xm(ed)&&!1===ed.inherit&&et.dom.is(er,ed.selector))return!0}return!1},yb=(et,er,ei,es,ed)=>{let ec=et.dom.getRoot();if(er===ec)return!1;let eu=et.dom.getParent(er,er=>!!vb(et,er,ei)||er.parentNode===ec||!!xb(et,er,ei,es,!0));return!!xb(et,eu,ei,es,ed)},Cb=(et,er,ei)=>!(!km(ei)||!pm(er,ei.inline))||!(!wm(ei)||!pm(er,ei.block))||!!xm(ei)&&tY(er)&&et.is(er,ei.selector),wb=(et,er,ei,es,ed,ec)=>{let eu=ei[es],ef="attributes"===es;if(ej(ei.onmatch))return ei.onmatch(er,ei,es);if(eu){if(_e(eu))for(let ei=0;ei<eu.length&&(ef?!et.getAttrib(er,eu[ei]):!bm(et,er,eu[ei]));ei++);else for(let es in eu)if(ke(eu,es)){let ep=ef?et.getAttrib(er,es):bm(et,er,es),ev=gm(eu[es],ec),ey=y(ep)||Ye(ep);if(ey&&y(ev))continue;if(ed&&ey&&!ei.exact||(!ed||ei.exact)&&!pm(ep,hm(ev,es)))return!1}}return!0},xb=(et,er,ei,es,ed)=>{let ec=et.formatter.get(ei),eu=et.dom;if(ec&&tY(er))for(let ei=0;ei<ec.length;ei++){let ef=ec[ei];if(Cb(et.dom,er,ef)&&wb(eu,er,ef,"attributes",ed,es)&&wb(eu,er,ef,"styles",ed,es)){let ei=ef.classes;if(ei){for(let ed=0;ed<ei.length;ed++)if(!et.dom.hasClass(er,gm(ei[ed],es)))return}return ef}}},kb=(et,er,ei,es,ed)=>{if(es)return yb(et,es,er,ei,ed);if(es=et.selection.getNode(),yb(et,es,er,ei,ed))return!0;let ec=et.selection.getStart();return!(ec===es||!yb(et,ec,er,ei,ed))},Sb=et=>(et=>{let er=[],ei=et;for(;ei;){if(tJ(ei)&&"\uFEFF"!==ei.data||ei.childNodes.length>1)return[];tY(ei)&&er.push(ei),ei=ei.firstChild}return er})(et).length>0,_b=et=>{if(et){let er=new zo(et,et);for(let et=er.current();et;et=er.next())if(tJ(et))return et}return null},Nb=et=>{let er=bn("span");return Zt(er,{id:a4,"data-mce-bogus":"1","data-mce-type":"format-caret"}),et&&bo(er,vn("\uFEFF")),er},Rb=(et,er,ei=!0)=>{let es=et.dom,ed=et.selection;if(Sb(er))nh(et,!1,pn(er),ei);else{let et=ed.getRng(),ei=es.getParent(er,es.isBlock),ec=et.startContainer,eu=et.startOffset,ef=et.endContainer,ep=et.endOffset,ev=(et=>{let er=_b(et);return er&&"\uFEFF"===er.data.charAt(0)&&er.deleteData(0,1),er})(er);es.remove(er,!0),ec===ev&&eu>0&&et.setStart(ev,eu-1),ef===ev&&ep>0&&et.setEnd(ev,ep-1),ei&&es.isEmpty(ei)&&Pr(pn(ei)),ed.setRng(et)}},Ab=(et,er,ei=!0)=>{let es=et.dom,ed=et.selection;if(er)Rb(et,er,ei);else if(!(er=ku(et.getBody(),ed.getStart())))for(;er=es.get(a4);)Rb(et,er,ei)},Ob=(et,er)=>(et.appendChild(er),er),Tb=(et,er)=>{var ei;let es=Y(et,(et,er)=>Ob(et,er.cloneNode(!1)),er),ed=null!==(ei=es.ownerDocument)&&void 0!==ei?ei:document;return Ob(es,ed.createTextNode("\uFEFF"))},Bb=(et,er,ei,es)=>{let ed;let ec=et.dom,eu=et.selection,ef=!1,ep=et.formatter.get(er);if(!ep)return;let ev=eu.getRng(),ey=ev.startContainer,eS=ev.startOffset,eI=ey;tJ(ey)&&(eS!==ey.data.length&&(ef=!0),eI=eI.parentNode);let eL=[];for(;eI;){if(xb(et,eI,er,ei,es)){ed=eI;break}eI.nextSibling&&(ef=!0),eL.push(eI),eI=eI.parentNode}if(ed){if(ef){let ed=eu.getBookmark();ev.collapse(!0);let ef=Um(ec,ev,ep,!0);ef=Bf(ef),et.formatter.remove(er,ei,ef,es),eu.moveToBookmark(ed)}else{let ef=ku(et.getBody(),ed),ep=Nb(!1).dom;((et,er,ei)=>{var es,ed;let ec=et.dom,eu=ec.getParent(ei,O(cm,et.schema));eu&&ec.isEmpty(eu)?null===(es=ei.parentNode)||void 0===es||es.replaceChild(er,ei):((et=>{let er=Fo(et,"br"),ei=G((et=>{let er=[],ei=et.dom;for(;ei;)er.push(pn(ei)),ei=ei.lastChild;return er})(et).slice(-1),Er);er.length===ei.length&&q(ei,wo)})(pn(ei)),ec.isEmpty(ei)?null===(ed=ei.parentNode)||void 0===ed||ed.replaceChild(er,ei):ec.insertAfter(er,ei))})(et,ep,null!=ef?ef:ed);let ev=((et,er,ei,es,ed,ec)=>{let eu=et.formatter,ef=et.dom,ep=G(eJ(eu.get()),et=>et!==es&&!je(et,"removeformat")),ev=X(ep,(er,es)=>{let ed=Cm(et,es,et=>{let t=et=>ej(et)||et.length>1&&"%"===et.charAt(0);return $(["styles","attributes"],er=>xe(et,er).exists(et=>{let er=eU(et)?et:we(et);return $(er,t)}))});return et.formatter.matchNode(ei,es,{},ed)?er.concat([es]):er},[]);if(G(ev,er=>!((et,er,ei)=>{let es=["inline","block","selector","attributes","styles","classes"],a=et=>ye(et,(et,er)=>$(es,et=>et===er));return Cm(et,er,er=>{let es=a(er);return Cm(et,ei,et=>{let er=a(et);return((et,er,ei=eD)=>r(ei).eq(et,er))(es,er)})})})(et,er,es)).length>0){let et=ei.cloneNode(!1);return ef.add(er,et),eu.remove(es,ed,et,ec),ef.remove(et),I.some(et)}return I.none()})(et,ep,ed,er,ei,es),ey=Tb(eL.concat(ev.toArray()),ep);ef&&Rb(et,ef,!1),eu.setCursorLocation(ey,1),ec.isEmpty(ed)&&ec.remove(ed)}}},Db=et=>{let er=Nb(!1),ei=Tb(et,er.dom);return{caretContainer:er,caretPosition:Li(ei,0)}},Pb=(et,er)=>{let{caretContainer:ei,caretPosition:es}=Db(er);return go(pn(et),ei),wo(pn(et)),es},Lb=(et,er)=>{let ei=et.schema.getTextInlineElements();return ke(ei,Ht(er))&&!xu(er.dom)&&!Go(er.dom)},Mb=et=>xu(et.dom)&&Sb(et.dom),ip={},iy=qo(["pre"]);ip.pre||(ip.pre=[]),ip.pre.push(et=>{if(!et.selection.getRng().collapsed){let er=et.selection.getSelectedBlocks(),ei=G(G(er,iy),et=>{let ei=et.previousSibling;return iy(ei)&&H(er,ei)});q(ei,et=>{((et,er)=>{let ei=pn(er),es=Nn(ei).dom;wo(ei),yo(pn(et),[bn("br",es),bn("br",es),...Mn(ei)])})(et.previousSibling,et)})}});let ik=["fontWeight","fontStyle","color","fontSize","fontFamily"],zb=(et,er)=>{let ei=et.get(er);return eU(ei)?J(ei,et=>km(et)&&"span"===et.inline&&eM(et.styles)&&$(eJ(et.styles),et=>H(ik,et))):I.none()},jb=(et,er)=>a5(er,Li.fromRangeStart(et)).isNone(),Hb=(et,er)=>!1===a8(er,Li.fromRangeEnd(et)).exists(et=>!t3(et.getNode())||a8(er,et).isSome()),$b=et=>er=>rt(er)&&et.isEditable(er),Vb=et=>G(et.getSelectedBlocks(),$b(et.dom)),iw=tU.each,Wb=et=>tY(et)&&!Lu(et)&&!xu(et)&&!Go(et),Kb=(et,er)=>{for(let ei=et;ei&&!(tJ(ei)&&Ge(ei.data));ei=ei[er])if(tY(ei)&&!Lu(ei))return ei;return et},Gb=(et,er,ei)=>{let es=Wh(et),ed=tY(er)&&am(er),ec=tY(ei)&&am(ei);if(ed&&ec){let ed=Kb(er,"previousSibling"),ec=Kb(ei,"nextSibling");if(es.compare(ed,ec)){for(let et=ed.nextSibling;et&&et!==ec;){let er=et;et=et.nextSibling,ed.appendChild(er)}return et.dom.remove(ec),tU.each(tU.grep(ec.childNodes),et=>{ed.appendChild(et)}),ed}}return ei},Yb=(et,er,ei,es)=>{var ed;if(es&&!1!==er.merge_siblings){let er=null!==(ed=Gb(et,dm(es),es))&&void 0!==ed?ed:es;Gb(et,er,dm(er,!0))}},Xb=(et,er,ei)=>{iw(et.childNodes,et=>{Wb(et)&&(er(et)&&ei(et),et.hasChildNodes()&&Xb(et,er,ei))})},Qb=(et,er)=>ei=>!(!ei||!bm(et,ei,er)),Jb=(et,er,ei)=>es=>{et.setStyle(es,er,ei),""===es.getAttribute("style")&&es.removeAttribute("style"),"SPAN"===es.nodeName&&0===et.getAttribs(es).length&&et.remove(es,!0)},iI=al([{keep:[]},{rename:["name"]},{removed:[]}]),iT=/^(src|href|style)$/,iL=tU.each,ov=(et,er,ei)=>et.isChildOf(er,ei)&&er!==ei&&!et.isBlock(ei),rv=(et,er,ei)=>{let es=er[ei?"startContainer":"endContainer"],ed=er[ei?"startOffset":"endOffset"];if(tY(es)){let et=es.childNodes.length-1;!ei&&ed&&ed--,es=es.childNodes[ed>et?et:ed]}return tJ(es)&&ei&&ed>=es.data.length&&(es=new zo(es,et.getBody()).next()||es),tJ(es)&&!ei&&0===ed&&(es=new zo(es,et.getBody()).prev()||es),es},sv=(et,er)=>{let ei=er?"firstChild":"lastChild",es=et[ei];return/^(TR|TH|TD)$/.test(et.nodeName)&&es?"TR"===et.nodeName&&es[ei]||es:et},av=(et,er,ei,es)=>{var ed;let ec=et.create(ei,es);return null===(ed=er.parentNode)||void 0===ed||ed.insertBefore(ec,er),ec.appendChild(er),ec},iv=(et,er,ei,es,ed)=>{let ec=pn(er),eu=pn(et.create(es,ed)),ef=ei?Ln(ec):Pn(ec);return yo(eu,ef),ei?(go(ec,eu),ho(eu,ec)):(po(ec,eu),bo(eu,ec)),eu.dom},lv=(et,er,ei)=>{let es;let ed=er.parentNode,ec=et.dom,eu=nJ(et);wm(ei)&&ed===ec.getRoot()&&(ei.list_block&&pm(er,ei.list_block)||q(eX(er.childNodes),er=>{um(et,eu,er.nodeName.toLowerCase())?es?es.appendChild(er):(es=av(ec,er,eu),ec.setAttribs(es,nZ(et))):es=null})),xm(ei)&&km(ei)&&Pt(xe(ei,"mixed"),!0)&&!pm(ei.inline,er)||ec.remove(er,!0)},dv=(et,er,ei)=>e$(et)?{name:er,value:null}:{name:et,value:gm(er,ei)},cv=(et,er)=>{""===et.getAttrib(er,"style")&&(er.removeAttribute("style"),er.removeAttribute("data-mce-style"))},uv=(et,er,ei,es,ed)=>{let ec=!1;iL(ei.styles,(eu,ef)=>{let{name:ep,value:ev}=dv(ef,eu,es),ey=hm(ev,ep);(ei.remove_similar||eH(ev)||!tY(ed)||pm(bm(et,ed,ep),ey))&&et.setStyle(er,ep,""),ec=!0}),ec&&cv(et,er)},mv=(et,er,ei,es,ed)=>{let ec=et.dom,eu=Wh(et),ef=et.schema;if(km(er)&&Ns(ef,er.inline)&&As(ef,es)&&es.parentElement===et.getBody())return lv(et,es,er),iI.removed();if(!er.ceFalseOverride&&es&&"false"===ec.getContentEditableParent(es)||es&&!Cb(ec,es,er)&&(!er.links||"A"!==es.nodeName))return iI.keep();let ep=er.preserve_attributes;if(km(er)&&"all"===er.remove&&eU(ep)){let et=G(ec.getAttribs(es),et=>H(ep,et.name.toLowerCase()));if(ec.removeAllAttribs(es),q(et,et=>ec.setAttrib(es,et.name,et.value)),et.length>0)return iI.rename("span")}if("all"!==er.remove){uv(ec,es,er,ei,ed),iL(er.attributes,(et,eu)=>{let{name:ef,value:ep}=dv(eu,et,ei);if(er.remove_similar||eH(ep)||!tY(ed)||pm(ec.getAttrib(ed,ef),ep)){if("class"===ef){let et=ec.getAttrib(es,ef);if(et){let er="";if(q(et.split(/\s+/),et=>{/mce\-\w+/.test(et)&&(er+=(er?" ":"")+et)}),er)return void ec.setAttrib(es,ef,er)}}if(iT.test(ef)&&es.removeAttribute("data-mce-"+ef),"style"===ef&&qo(["li"])(es)&&"none"===ec.getStyle(es,"list-style-type"))return es.removeAttribute(ef),void ec.setStyle(es,"list-style-type","none");"class"===ef&&es.removeAttribute("className"),es.removeAttribute(ef)}}),iL(er.classes,et=>{et=gm(et,ei),tY(ed)&&!ec.hasClass(ed,et)||ec.removeClass(es,et)});let et=ec.getAttribs(es);for(let er=0;er<et.length;er++){let ei=et[er].nodeName;if(!eu.isAttributeInternal(ei))return iI.keep()}}return"none"!==er.remove?(lv(et,es,er),iI.removed()):iI.keep()},fv=(et,er,ei,es)=>mv(et,er,ei,es,es).fold(N(es),er=>(et.dom.createFragment().appendChild(es),et.dom.rename(es,er)),N(null)),gv=(et,er,ei,es,ed)=>{(es||et.selection.isEditable())&&((et,er,ei,es,ed)=>{let ec=et.formatter.get(er),eu=ec[0],ef=et.dom,ep=et.selection,d=es=>{let ef;let ep=(es.parentNode&&q(ym(et.dom,es.parentNode).reverse(),es=>{if(!ef&&tY(es)&&"_start"!==es.id&&"_end"!==es.id){let ec=xb(et,es,er,ei,ed);ec&&!1!==ec.split&&(ef=es)}}),ef);return((et,er,ei,es,ed,ec,eu,ef)=>{var ep,ev;let ey,eS;let eI=et.dom;if(ei){let ec=ei.parentNode;for(let ei=es.parentNode;ei&&ei!==ec;ei=ei.parentNode){let es=eI.clone(ei,!1);for(let ei=0;ei<er.length&&null!==(es=fv(et,er[ei],ef,es));ei++);es&&(ey&&es.appendChild(ey),eS||(eS=es),ey=es)}eu.mixed&&eI.isBlock(ei)||(es=null!==(ep=eI.split(ei,es))&&void 0!==ep?ep:es),ey&&eS&&(null===(ev=ed.parentNode)||void 0===ev||ev.insertBefore(ey,ed),eS.appendChild(ed),km(eu)&&Yb(et,eu,0,ey))}return es})(et,ec,ep,es,es,0,eu,ei)},c=er=>$(ec,es=>pv(et,es,ei,er,er)),u=er=>{let ei=eX(er.childNodes),es=c(er)||$(ec,et=>Cb(ef,er,et)),ed=er.parentNode;if(!es&&C(ed)&&Em(eu)&&c(ed),eu.deep&&ei.length)for(let et=0;et<ei.length;et++)u(ei[et]);q(["underline","line-through","overline"],ei=>{tY(er)&&et.dom.getStyle(er,"text-decoration")===ei&&er.parentNode&&vm(ef,er.parentNode)===ei&&pv(et,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:ei}},void 0,er)})},m=et=>{let er=ef.get(et?"_start":"_end");if(er){var ei;let es=er[et?"firstChild":"lastChild"];return Lu(ei=es)&&tY(ei)&&("_start"===ei.id||"_end"===ei.id)&&(es=es[et?"firstChild":"lastChild"]),tJ(es)&&0===es.data.length&&(es=et?er.previousSibling||er.nextSibling:er.nextSibling||er.previousSibling),ef.remove(er,!0),es}return null},f=er=>{let ei,es,ed=Um(ef,er,ec,er.collapsed);if(eu.split){if((ei=rv(et,ed=Bf(ed),!0))!==(es=rv(et,ed))){if(ov(ef,ei=sv(ei,!0),es=sv(es,!1))){let et=I.from(ei.firstChild).getOr(ei);return d(iv(ef,et,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void m(!0)}if(ov(ef,es,ei)){let et=I.from(es.lastChild).getOr(es);return d(iv(ef,et,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void m(!1)}ei=av(ef,ei,"span",{id:"_start","data-mce-type":"bookmark"}),es=av(ef,es,"span",{id:"_end","data-mce-type":"bookmark"});let et=ef.createRng();et.setStartAfter(ei),et.setEndBefore(es),zm(ef,et,et=>{q(et,et=>{Lu(et)||Lu(et.parentNode)||d(et)})}),d(ei),d(es),ei=m(!0),es=m()}else ei=es=d(ei);ed.startContainer=ei.parentNode?ei.parentNode:ei,ed.startOffset=ef.nodeIndex(ei),ed.endContainer=es.parentNode?es.parentNode:es,ed.endOffset=ef.nodeIndex(es)+1}zm(ef,ed,et=>{q(et,u)})};if(es){if(rm(es)){let et=ef.createRng();et.setStartBefore(es),et.setEndAfter(es),f(et)}else f(es);Xm(et,er,es,ei)}else ep.isCollapsed()&&km(eu)&&!Yu(et).length?Bb(et,er,ei,ed):(im(et,()=>nm(et,f),es=>km(eu)&&kb(et,er,ei,es)),et.nodeChanged()),"removeformat"===er?q(Vb(et.selection),er=>{q(ik,ei=>et.dom.setStyle(er,ei,"")),cv(et.dom,er)}):zb(et.formatter,er).each(er=>{q(Vb(et.selection),es=>uv(et.dom,es,er,ei,null))}),Xm(et,er,es,ei)})(et,er,ei,es,ed)},pv=(et,er,ei,es,ed)=>mv(et,er,ei,es,ed).fold(eV,er=>(et.dom.rename(es,er),!0),eG),iB=tU.each,iD=tU.each,vv=(et,er,ei,es)=>{if(iD(ei.styles,(ei,ed)=>{et.setStyle(er,ed,gm(ei,es))}),ei.styles){let ei=et.getAttrib(er,"style");ei&&et.setAttrib(er,"data-mce-style",ei)}},yv=(et,er,ei,es)=>{let ed=et.formatter.get(er),ec=ed[0],eu=!es&&et.selection.isCollapsed(),ef=et.dom,ep=et.selection,d=(et,er=ec)=>{ej(er.onformat)&&er.onformat(et,er,ei,es),vv(ef,et,er,ei),iD(er.attributes,(er,es)=>{ef.setAttrib(et,es,gm(er,ei))}),iD(er.classes,er=>{let es=gm(er,ei);ef.hasClass(et,es)||ef.addClass(et,es)})},c=(et,er)=>{let ei=!1;return iD(et,et=>!(!xm(et)||("false"!==ef.getContentEditable(er)||et.ceFalseOverride)&&(!C(et.collapsed)||et.collapsed===eu)&&ef.is(er,et.selector)&&!xu(er)&&(d(er,et),ei=!0,1))),ei},u=et=>{if(eP(et)){let er=ef.create(et);return d(er),er}return null},f=(es,eu,ef)=>{let ep=[],ev=!0,ey=ec.inline||ec.block,eS=u(ey);zm(es,eu,eu=>{let eI;let p=eu=>{let eL=!1,eB=ev,eD=!1,eF=eu.parentNode,eP=eF.nodeName.toLowerCase(),eM=es.getContentEditable(eu);C(eM)&&(eB=ev,ev="true"===eM,eL=!0,eD=fm(et,eu));let eU=ev&&!eL;if(t3(eu)&&!((et,er,ei,es)=>{if(oG(et)&&km(er)&&ei.parentNode){let er=la(et.schema),ed=gb(pn(ei),et=>xu(et.dom));return Ee(er,es)&&bs(pn(ei.parentNode),!1)&&!ed}return!1})(et,ec,eu,eP))return eI=null,void(wm(ec)&&es.remove(eu));if(wm(ec)&&!0===ec.wrapper&&xb(et,eu,er,ei))eI=null;else{if(((er,ei,es)=>{let ed=wm(ec)&&!0!==ec.wrapper&&cm(et.schema,er)&&um(et,ei,ey);return es&&ed})(eu,eP,eU)){let et=es.rename(eu,ey);return d(et),ep.push(et),void(eI=null)}if(xm(ec)){let et=c(ed,eu);if(!et&&C(eF)&&Em(ec)&&(et=c(ed,eF)),!km(ec)||et)return void(eI=null)}C(eS)&&((er,ei,ed,eu)=>{let ep=er.nodeName.toLowerCase(),ev=um(et,ey,ep)&&um(et,ei,ey),eS=!ef&&tJ(er)&&hr(er.data),eI=xu(er),eL=!km(ec)||!es.isBlock(er);return(ed||eu)&&ev&&!eS&&!eI&&eL})(eu,eP,eU,eD)?(eI||(eI=es.clone(eS,!1),eF.insertBefore(eI,eu),ep.push(eI)),eD&&eL&&(ev=eB),eI.appendChild(eu)):(eI=null,q(eX(eu.childNodes),p),eL&&(ev=eB),eI=null)}};q(eu,p)}),!0===ec.links&&q(ep,et=>{let t=et=>{"A"===et.nodeName&&d(et,ec),q(eX(et.childNodes),t)};t(et)}),q(ep,eu=>{var ef;let ev;let ey=(ev=0,q(eu.childNodes,et=>{C(et)&&tJ(et)&&0===et.length||Lu(et)||ev++}),ev);!(ep.length>1)&&es.isBlock(eu)||0!==ey?(km(ec)||wm(ec)&&ec.wrapper)&&(ec.exact||1!==ey||(eu=(et=>{let er=J(et.childNodes,sm).filter(et=>"false"!==es.getContentEditable(et)&&Cb(es,et,ec));return er.map(er=>{let ei=es.clone(er,!1);return d(ei),es.replace(ei,et,!0),es.remove(er,!0),ei}).getOr(et)})(eu)),ef=eu,iB(ed,er=>{km(er)&&iB(et.dom.select(er.inline,ef),es=>{Wb(es)&&pv(et,er,ei,es,er.exact?es:null)}),((et,er,ei)=>{if(er.clear_child_styles){let es=er.links?"*:not(a)":"*";iw(et.select(es,ei),ei=>{Wb(ei)&&am(ei)&&iw(er.styles,(er,es)=>{et.setStyle(ei,es,"")})})}})(et.dom,er,ef)}),((et,er,ei,es,ed)=>{let ec=ed.parentNode;xb(et,ec,ei,es)&&pv(et,er,es,ed)||er.merge_with_parents&&ec&&et.dom.getParent(ec,ec=>!!xb(et,ec,ei,es)&&(pv(et,er,es,ed),!0))})(et,ec,er,ei,eu),((et,er,ei,es)=>{if(er.styles&&er.styles.backgroundColor){let ed=Qb(et,"fontSize");Xb(es,et=>ed(et)&&am(et),Jb(et,"backgroundColor",gm(er.styles.backgroundColor,ei)))}})(es,ec,ei,eu),((et,er,ei,es)=>{let r=er=>{if(tY(er)&&tY(er.parentNode)&&am(er)){let ei=vm(et,er.parentNode);et.getStyle(er,"color")&&ei?et.setStyle(er,"text-decoration",ei):et.getStyle(er,"text-decoration")===ei&&et.setStyle(er,"text-decoration",null)}};er.styles&&(er.styles.color||er.styles.textDecoration)&&(tU.walk(es,r,"childNodes"),r(es))})(es,ec,0,eu),((et,er,ei,es)=>{if(km(er)&&("sub"===er.inline||"sup"===er.inline)){let ei=Qb(et,"fontSize");Xb(es,et=>ei(et)&&am(et),Jb(et,"fontSize",""));let ed=G(et.select("sup"===er.inline?"sub":"sup",es),am);et.remove(ed,!0)}})(es,ec,0,eu),Yb(et,ec,0,eu)):es.remove(eu,!0)})},ev=rm(es)?es:ep.getNode();if("false"===ef.getContentEditable(ev)&&!fm(et,ev))return c(ed,es=ev),void Ym(et,er,es,ei);if(ec){if(es){if(rm(es)){if(!c(ed,es)){let et=ef.createRng();et.setStartBefore(es),et.setEndAfter(es),f(ef,Um(ef,et,ed),!0)}}else f(ef,es,!0)}else eu&&km(ec)&&!Yu(et).length?((et,er,ei)=>{var es,ed;let ec;let eu=et.selection,ef=et.formatter.get(er);if(!ef)return;let ep=eu.getRng(),ev=ep.startOffset,ey=ep.startContainer.nodeValue;ec=ku(et.getBody(),eu.getStart());let eS=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(ey&&ev>0&&ev<ey.length&&eS.test(ey.charAt(ev))&&eS.test(ey.charAt(ev-1))){let es=eu.getBookmark();ep.collapse(!0);let ed=Um(et.dom,ep,ef);ed=Bf(ed),et.formatter.apply(er,ei,ed),eu.moveToBookmark(es)}else{let ef=ec?_b(ec):null;ec&&(null==ef?void 0:ef.data)==="\uFEFF"||(es=et.getDoc(),ed=Nb(!0).dom,ef=(ec=es.importNode(ed,!0)).firstChild,ep.insertNode(ec),ev=1),et.formatter.apply(er,ei,ec),eu.setCursorLocation(ef,ev)}})(et,er,ei):(ep.setRng(ob(ep.getRng())),im(et,()=>{nm(et,(et,er)=>{let ei=er?et:Um(ef,et,ed);f(ef,ei,!1)})},eG),et.nodeChanged()),zb(et.formatter,er).each(er=>{var es;q(G((et=>{let er=et.getSelectedBlocks(),ei=et.getRng();if(et.isCollapsed())return[];if(1===er.length)return jb(ei,er[0])&&Hb(ei,er[0])?er:[];{let et=le(er).filter(et=>jb(ei,et)).toArray(),es=de(er).filter(et=>Hb(ei,et)).toArray(),ed=er.slice(1,-1);return et.concat(ed).concat(es)}})(es=et.selection),$b(es.dom)),et=>vv(ef,et,er,ei))});ke(ip,er)&&q(ip[er],er=>{er(et)})}Ym(et,er,es,ei)},Cv=(et,er,ei,es)=>{(es||et.selection.isEditable())&&yv(et,er,ei,es)},wv=et=>ke(et,"vars"),xv=et=>et.selection.getStart(),kv=(et,er,ei,es,ed)=>Q(er,er=>{let ec=et.formatter.matchNode(er,ei,null!=ed?ed:{},es);return!ez(ec)},er=>!!vb(et,er,ei)||!es&&C(et.formatter.matchNode(er,ei,ed,!0))),Ev=(et,er)=>{let ei=null!=er?er:xv(et);return G(ym(et.dom,ei),et=>tY(et)&&!Go(et))},Sv=(et,er,ei)=>{let es=Ev(et,er);ge(ei,(ei,ed)=>{let s=ei=>{let ec=kv(et,es,ed,ei.similar,wv(ei)?ei.vars:void 0),eu=ec.isSome();if(ei.state.get()!==eu){ei.state.set(eu);let et=ec.getOr(er);wv(ei)?ei.callback(eu,{node:et,format:ed,parents:es}):q(ei.callbacks,er=>er(eu,{node:et,format:ed,parents:es}))}};q([ei.withSimilar,ei.withoutSimilar],s),q(ei.withVars,s)})},iF=tU.explode,Nv=()=>{let et={};return{addFilter:(er,ei)=>{q(iF(er),er=>{ke(et,er)||(et[er]={name:er,callbacks:[]}),et[er].callbacks.push(ei)})},getFilters:()=>we(et),removeFilter:(er,ei)=>{q(iF(er),er=>{if(ke(et,er)){if(C(ei)){let es=et[er],ed=G(es.callbacks,et=>et!==ei);ed.length>0?es.callbacks=ed:delete et[er]}else delete et[er]}})}}},Rv=(et,er,ei)=>{var es;let ed=ua();er.convert_fonts_to_spans&&((et,er,ei)=>{et.addNodeFilter("font",et=>{q(et,et=>{let es=er.parse(et.attr("style")),ed=et.attr("color"),ec=et.attr("face"),eu=et.attr("size");ed&&(es.color=ed),ec&&(es["font-family"]=ec),eu&&Xe(eu).each(et=>{es["font-size"]=ei[et-1]}),et.name="span",et.attr("style",er.serialize(es)),q(["color","face","size"],er=>{et.attr(er,null)})})})})(et,ed,tU.explode(null!==(es=er.font_size_legacy_values)&&void 0!==es?es:"")),((et,er,ei)=>{et.addNodeFilter("strike",et=>{let es="html4"!==er.type;q(et,et=>{if(es)et.name="s";else{let er=ei.parse(et.attr("style"));er["text-decoration"]="line-through",et.name="span",et.attr("style",ei.serialize(er))}})})})(et,ei,ed)},Av=(et,er,ei)=>{er.addNodeFilter("br",(er,es,ed)=>{let ec=tU.extend({},ei.getBlockElements()),eu=ei.getNonEmptyElements(),ef=ei.getWhitespaceElements();ec.body=1;let l=et=>et.name in ec||Ts(ei,et);for(let es=0,ep=er.length;es<ep;es++){let ep=er[es],ev=ep.parent;if(ev&&l(ev)&&ep===ev.lastChild){let er=ep.prev;for(;er;){let et=er.name;if("span"!==et||"bookmark"!==er.attr("data-mce-type")){"br"===et&&(ep=null);break}er=er.prev}if(ep&&(ep.remove(),Jh(ei,eu,ef,ev))){let er=ei.getElementRule(ev.name);er&&(er.removeEmpty?ev.remove():er.paddEmpty&&Xh(et,ed,l,ev))}}else{let et=ep;for(;ev&&ev.firstChild===et&&ev.lastChild===et&&(et=ev,!ec[ev.name]);)ev=ev.parent;if(et===ev){let et=new Fg("#text",3);et.value="\xa0",ep.replace(et)}}}})},Ov=et=>{let[er,...ei]=et.split(","),es=ei.join(","),ed=/data:([^/]+\/[^;]+)(;.+)?/.exec(er);if(ed){let et=";base64"===ed[2],er=et?(et=>{let er=/([a-z0-9+\/=\s]+)/i.exec(et);return er?er[1]:""})(es):decodeURIComponent(es);return I.some({type:ed[1],data:er,base64Encoded:et})}return I.none()},Tv=(et,er,ei=!0)=>{let es=er;if(ei)try{es=atob(er)}catch(et){return I.none()}let ed=new Uint8Array(es.length);for(let et=0;et<ed.length;et++)ed[et]=es.charCodeAt(et);return I.some(new Blob([ed],{type:et}))},Bv=et=>new Promise((er,ei)=>{let es=new FileReader;es.onloadend=()=>{er(es.result)},es.onerror=()=>{var et;ei(null===(et=es.error)||void 0===et?void 0:et.message)},es.readAsDataURL(et)}),iP=0,Pv=(et,er,ei)=>Ov(et).bind(({data:et,type:es,base64Encoded:ed})=>{if(er&&!ed)return I.none();{let er=ed?et:btoa(et);return ei(er,es)}}),Lv=(et,er,ei)=>{let es=et.create("blobid"+iP++,er,ei);return et.add(es),es},Mv=(et,er,ei=!1)=>Pv(er,ei,(er,ei)=>I.from(et.getByData(er,ei)).orThunk(()=>Tv(ei,er).map(ei=>Lv(et,ei,er)))),Iv=(et,er)=>{let ei=et.schema;er.remove_trailing_brs&&Av(er,et,ei),et.addAttributeFilter("href",et=>{let ei=et.length,o=et=>{let er=et?tU.trim(et):"";return/\b(noopener)\b/g.test(er)?er:er.split(" ").filter(et=>et.length>0).concat(["noopener"]).sort().join(" ")};if(!er.allow_unsafe_link_target)for(;ei--;){let er=et[ei];"a"===er.name&&"_blank"===er.attr("target")&&er.attr("rel",o(er.attr("rel")))}}),er.allow_html_in_named_anchor||et.addAttributeFilter("id,name",et=>{let er,ei,es,ed,ec=et.length;for(;ec--;)if("a"===(ed=et[ec]).name&&ed.firstChild&&!ed.attr("href"))for(es=ed.parent,er=ed.lastChild;er&&es;)ei=er.prev,es.insert(er,ed),er=ei}),er.fix_list_elements&&et.addNodeFilter("ul,ol",et=>{let er,ei,es=et.length;for(;es--;)if((ei=(er=et[es]).parent)&&("ul"===ei.name||"ol"===ei.name)){if(er.prev&&"li"===er.prev.name)er.prev.append(er);else{let et=new Fg("li",1);et.attr("style","list-style-type: none"),er.wrap(et)}}});let es=ei.getValidClasses();er.validate&&es&&et.addAttributeFilter("class",et=>{var er;let ei=et.length;for(;ei--;){let ed=et[ei],ec=null!==(er=ed.attr("class"))&&void 0!==er?er:"",eu=tU.explode(ec," "),ef="";for(let et=0;et<eu.length;et++){let er=eu[et],ei=!1,ec=es["*"];ec&&ec[er]&&(ei=!0),ec=es[ed.name],!ei&&ec&&ec[er]&&(ei=!0),ei&&(ef&&(ef+=" "),ef+=er)}ef.length||(ef=null),ed.attr("class",ef)}}),((et,er)=>{let{blob_cache:ei}=er;if(ei){let t=et=>{let er=et.attr("src");et.attr("src")===tP.transparentSrc||C(et.attr("data-mce-placeholder"))||C(et.attr("data-mce-bogus"))||y(er)||Mv(ei,er,!0).each(er=>{et.attr("src",er.blobUri())})};et.addAttributeFilter("src",et=>q(et,t))}})(et,er)};function Fv(et){return(Fv="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(et){return typeof et}:function(et){return et&&"function"==typeof Symbol&&et.constructor===Symbol&&et!==Symbol.prototype?"symbol":typeof et})(et)}function Uv(et,er){return(Uv=Object.setPrototypeOf||function(et,er){return et.__proto__=er,et})(et,er)}function zv(et,er,ei){return(zv=!function(){if("undefined"==typeof Reflect||!Reflect.construct||Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(et){return!1}}()?function(et,er,ei){var es=[null];es.push.apply(es,er);var ed=new(Function.bind.apply(et,es));return ei&&Uv(ed,ei.prototype),ed}:Reflect.construct).apply(null,arguments)}function jv(et){return function(et){if(Array.isArray(et))return Hv(et)}(et)||function(et){if("undefined"!=typeof Symbol&&null!=et[Symbol.iterator]||null!=et["@@iterator"])return Array.from(et)}(et)||function(et,er){if(et){if("string"==typeof et)return Hv(et,er);var ei=Object.prototype.toString.call(et).slice(8,-1);return"Object"===ei&&et.constructor&&(ei=et.constructor.name),"Map"===ei||"Set"===ei?Array.from(et):"Arguments"===ei||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(ei)?Hv(et,er):void 0}}(et)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hv(et,er){(null==er||er>et.length)&&(er=et.length);for(var ei=0,es=Array(er);ei<er;ei++)es[ei]=et[ei];return es}var iM=Object.hasOwnProperty,iU=Object.setPrototypeOf,iH=Object.isFrozen,iq=Object.getPrototypeOf,iz=Object.getOwnPropertyDescriptor,ij=Object.freeze,i$=Object.seal,iV=Object.create,iG="undefined"!=typeof Reflect&&Reflect,iW=iG.apply,iK=iG.construct;iW||(iW=function(et,er,ei){return et.apply(er,ei)}),ij||(ij=function(et){return et}),i$||(i$=function(et){return et}),iK||(iK=function(et,er){return zv(et,jv(er))});var iY,iX,iJ,iZ=uy(Array.prototype.forEach),iQ=uy(Array.prototype.pop),i0=uy(Array.prototype.push),i1=uy(String.prototype.toLowerCase),i2=uy(String.prototype.match),i3=uy(String.prototype.replace),i8=uy(String.prototype.indexOf),i5=uy(String.prototype.trim),i6=uy(RegExp.prototype.test),i9=(iJ=TypeError,function(){for(var et=arguments.length,er=Array(et),ei=0;ei<et;ei++)er[ei]=arguments[ei];return iK(iJ,er)});function uy(et){return function(er){for(var ei=arguments.length,es=Array(ei>1?ei-1:0),ed=1;ed<ei;ed++)es[ed-1]=arguments[ed];return iW(et,er,es)}}function my(et,er){iU&&iU(et,null);for(var ei=er.length;ei--;){var es=er[ei];if("string"==typeof es){var ed=i1(es);ed!==es&&(iH(er)||(er[ei]=ed),es=ed)}et[es]=!0}return et}function fy(et){var er,ei=iV(null);for(er in et)iW(iM,et,[er])&&(ei[er]=et[er]);return ei}function gy(et,er){for(;null!==et;){var ei=iz(et,er);if(ei){if(ei.get)return uy(ei.get);if("function"==typeof ei.value)return uy(ei.value)}et=iq(et)}return function(et){return console.warn("fallback value for",et),null}}var i4=ij(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),i7=ij(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),st=ij(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),sr=ij(["animate","color-profile","cursor","discard","fedropshadow","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),sa=ij(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),sl=ij(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),sd=ij(["#text"]),su=ij(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),sy=ij(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),sR=ij(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),sI=ij(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),sL=i$(/\{\{[\w\W]*|[\w\W]*\}\}/gm),sB=i$(/<%[\w\W]*|[\w\W]*%>/gm),sD=i$(/^data-[\-\w.\u00B7-\uFFFF]/),sF=i$(/^aria-[\-\w]+$/),sP=i$(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),sM=i$(/^(?:\w+script|data):/i),sU=i$(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),sH=i$(/^html$/i),sq=function e(){var et=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"undefined"==typeof window?null:window,n=function(et){return e(et)};if(n.version="2.3.8",n.removed=[],!et||!et.document||9!==et.document.nodeType)return n.isSupported=!1,n;var er=et.document,ei=et.document,es=et.DocumentFragment,ed=et.HTMLTemplateElement,ec=et.Node,eu=et.Element,ef=et.NodeFilter,ep=et.NamedNodeMap,ev=void 0===ep?et.NamedNodeMap||et.MozNamedAttrMap:ep,ey=et.HTMLFormElement,eS=et.DOMParser,eI=et.trustedTypes,eL=eu.prototype,eB=gy(eL,"cloneNode"),eD=gy(eL,"nextSibling"),eF=gy(eL,"childNodes"),eP=gy(eL,"parentNode");if("function"==typeof ed){var eM=ei.createElement("template");eM.content&&eM.content.ownerDocument&&(ei=eM.content.ownerDocument)}var eU=function(et,er){if("object"!==Fv(et)||"function"!=typeof et.createPolicy)return null;var ei=null,es="data-tt-policy-suffix";er.currentScript&&er.currentScript.hasAttribute(es)&&(ei=er.currentScript.getAttribute(es));var ed="dompurify"+(ei?"#"+ei:"");try{return et.createPolicy(ed,{createHTML:function(et){return et}})}catch(et){return console.warn("TrustedTypes policy "+ed+" could not be created."),null}}(eI,er),eH=eU?eU.createHTML(""):"",eq=ei,ez=eq.implementation,ej=eq.createNodeIterator,e$=eq.createDocumentFragment,eV=eq.getElementsByTagName,eG=er.importNode,eW={};try{eW=fy(ei).documentMode?ei.documentMode:{}}catch(et){}var eK={};n.isSupported="function"==typeof eP&&ez&&void 0!==ez.createHTMLDocument&&9!==eW;var eY,eX,eJ=sP,eZ=null,eQ=my({},[].concat(jv(i4),jv(i7),jv(st),jv(sa),jv(sd))),e0=null,e1=my({},[].concat(jv(su),jv(sy),jv(sR),jv(sI))),e2=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),e3=null,e8=null,e5=!0,e6=!0,e9=!1,e4=!1,e7=!1,tt=!1,tr=!1,ts=!1,td=!1,tc=!1,tu=!0,tf=!0,tp=!1,tv={},ty=null,tS=my({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),tR=null,tA=my({},["audio","video","img","source","image","track"]),tI=null,tL=my({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),tB="http://www.w3.org/1998/Math/MathML",tD="http://www.w3.org/2000/svg",tF="http://www.w3.org/1999/xhtml",tP=tF,tM=!1,tU=["application/xhtml+xml","text/html"],tH=null,tq=ei.createElement("form"),we=function(et){return et instanceof RegExp||et instanceof Function},xe=function(et){tH&&tH===et||(et&&"object"===Fv(et)||(et={}),eZ="ALLOWED_TAGS"in(et=fy(et))?my({},et.ALLOWED_TAGS):eQ,e0="ALLOWED_ATTR"in et?my({},et.ALLOWED_ATTR):e1,tI="ADD_URI_SAFE_ATTR"in et?my(fy(tL),et.ADD_URI_SAFE_ATTR):tL,tR="ADD_DATA_URI_TAGS"in et?my(fy(tA),et.ADD_DATA_URI_TAGS):tA,ty="FORBID_CONTENTS"in et?my({},et.FORBID_CONTENTS):tS,e3="FORBID_TAGS"in et?my({},et.FORBID_TAGS):{},e8="FORBID_ATTR"in et?my({},et.FORBID_ATTR):{},tv="USE_PROFILES"in et&&et.USE_PROFILES,e5=!1!==et.ALLOW_ARIA_ATTR,e6=!1!==et.ALLOW_DATA_ATTR,e9=et.ALLOW_UNKNOWN_PROTOCOLS||!1,e4=et.SAFE_FOR_TEMPLATES||!1,e7=et.WHOLE_DOCUMENT||!1,ts=et.RETURN_DOM||!1,td=et.RETURN_DOM_FRAGMENT||!1,tc=et.RETURN_TRUSTED_TYPE||!1,tr=et.FORCE_BODY||!1,tu=!1!==et.SANITIZE_DOM,tf=!1!==et.KEEP_CONTENT,tp=et.IN_PLACE||!1,eJ=et.ALLOWED_URI_REGEXP||eJ,tP=et.NAMESPACE||tF,et.CUSTOM_ELEMENT_HANDLING&&we(et.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(e2.tagNameCheck=et.CUSTOM_ELEMENT_HANDLING.tagNameCheck),et.CUSTOM_ELEMENT_HANDLING&&we(et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(e2.attributeNameCheck=et.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),et.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(e2.allowCustomizedBuiltInElements=et.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),eX="application/xhtml+xml"===(eY=eY=-1===tU.indexOf(et.PARSER_MEDIA_TYPE)?"text/html":et.PARSER_MEDIA_TYPE)?function(et){return et}:i1,e4&&(e6=!1),td&&(ts=!0),tv&&(eZ=my({},jv(sd)),e0=[],!0===tv.html&&(my(eZ,i4),my(e0,su)),!0===tv.svg&&(my(eZ,i7),my(e0,sy),my(e0,sI)),!0===tv.svgFilters&&(my(eZ,st),my(e0,sy),my(e0,sI)),!0===tv.mathMl&&(my(eZ,sa),my(e0,sR),my(e0,sI))),et.ADD_TAGS&&(eZ===eQ&&(eZ=fy(eZ)),my(eZ,et.ADD_TAGS)),et.ADD_ATTR&&(e0===e1&&(e0=fy(e0)),my(e0,et.ADD_ATTR)),et.ADD_URI_SAFE_ATTR&&my(tI,et.ADD_URI_SAFE_ATTR),et.FORBID_CONTENTS&&(ty===tS&&(ty=fy(ty)),my(ty,et.FORBID_CONTENTS)),tf&&(eZ["#text"]=!0),e7&&my(eZ,["html","head","body"]),eZ.table&&(my(eZ,["tbody"]),delete e3.tbody),ij&&ij(et),tH=et)},tz=my({},["mi","mo","mn","ms","mtext"]),tj=my({},["foreignobject","desc","title","annotation-xml"]),t$=my({},["title","style","font","a","script"]),tV=my({},i7);my(tV,st),my(tV,sr);var tG=my({},sa);my(tG,sl);var Re=function(et){i0(n.removed,{element:et});try{et.parentNode.removeChild(et)}catch(er){try{et.outerHTML=eH}catch(er){et.remove()}}},Ae=function(et,er){try{i0(n.removed,{attribute:er.getAttributeNode(et),from:er})}catch(et){i0(n.removed,{attribute:null,from:er})}if(er.removeAttribute(et),"is"===et&&!e0[et]){if(ts||td)try{Re(er)}catch(et){}else try{er.setAttribute(et,"")}catch(et){}}},Oe=function(et){if(tr)et="<remove></remove>"+et;else{var er,es,ed=i2(et,/^[\r\n\t ]+/);es=ed&&ed[0]}"application/xhtml+xml"===eY&&(et='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+et+"</body></html>");var ec=eU?eU.createHTML(et):et;if(tP===tF)try{er=(new eS).parseFromString(ec,eY)}catch(et){}if(!er||!er.documentElement){er=ez.createDocument(tP,"template",null);try{er.documentElement.innerHTML=tM?"":ec}catch(et){}}var eu=er.body||er.documentElement;return et&&es&&eu.insertBefore(ei.createTextNode(es),eu.childNodes[0]||null),tP===tF?eV.call(er,e7?"html":"body")[0]:e7?er.documentElement:eu},Te=function(et){return ej.call(et.ownerDocument||et,et,ef.SHOW_ELEMENT|ef.SHOW_COMMENT|ef.SHOW_TEXT,null,!1)},Be=function(et){return"object"===Fv(ec)?et instanceof ec:et&&"object"===Fv(et)&&"number"==typeof et.nodeType&&"string"==typeof et.nodeName},De=function(et,er,ei){eK[et]&&iZ(eK[et],function(et){et.call(n,er,ei,tH)})},Pe=function(et){if(De("beforeSanitizeElements",et,null),et instanceof ey&&("string"!=typeof et.nodeName||"string"!=typeof et.textContent||"function"!=typeof et.removeChild||!(et.attributes instanceof ev)||"function"!=typeof et.removeAttribute||"function"!=typeof et.setAttribute||"string"!=typeof et.namespaceURI||"function"!=typeof et.insertBefore)||i6(/[\u0080-\uFFFF]/,et.nodeName))return Re(et),!0;var er,ei,es,ed,ec=eX(et.nodeName);if(De("uponSanitizeElement",et,{tagName:ec,allowedTags:eZ}),et.hasChildNodes()&&!Be(et.firstElementChild)&&(!Be(et.content)||!Be(et.content.firstElementChild))&&i6(/<[/\w]/g,et.innerHTML)&&i6(/<[/\w]/g,et.textContent)||"select"===ec&&i6(/<template/i,et.innerHTML))return Re(et),!0;if(!eZ[ec]||e3[ec]){if(!e3[ec]&&Me(ec)&&(e2.tagNameCheck instanceof RegExp&&i6(e2.tagNameCheck,ec)||e2.tagNameCheck instanceof Function&&e2.tagNameCheck(ec)))return!1;if(tf&&!ty[ec]){var ef=eP(et)||et.parentNode,ep=eF(et)||et.childNodes;if(ep&&ef)for(var eS=ep.length-1;eS>=0;--eS)ef.insertBefore(eB(ep[eS],!0),eD(et))}return Re(et),!0}return!(et instanceof eu)||((er=eP(et))&&er.tagName||(er={namespaceURI:tF,tagName:"template"}),ei=i1(et.tagName),es=i1(er.tagName),et.namespaceURI===tD?er.namespaceURI===tF?"svg"===ei:er.namespaceURI===tB?"svg"===ei&&("annotation-xml"===es||tz[es]):tV[ei]:et.namespaceURI===tB?er.namespaceURI===tF?"math"===ei:er.namespaceURI===tD?"math"===ei&&tj[es]:tG[ei]:et.namespaceURI===tF&&(er.namespaceURI!==tD||tj[es])&&(er.namespaceURI!==tB||tz[es])&&!tG[ei]&&(t$[ei]||!tV[ei]))?("noscript"===ec||"noembed"===ec)&&i6(/<\/no(script|embed)/i,et.innerHTML)?(Re(et),!0):(e4&&3===et.nodeType&&(ed=i3(ed=et.textContent,sL," "),ed=i3(ed,sB," "),et.textContent!==ed&&(i0(n.removed,{element:et.cloneNode()}),et.textContent=ed)),De("afterSanitizeElements",et,null),!1):(Re(et),!0)},Le=function(et,er,es){if(tu&&("id"===er||"name"===er)&&(es in ei||es in tq))return!1;if(e6&&!e8[er]&&i6(sD,er));else if(e5&&i6(sF,er));else if(!e0[er]||e8[er]){if(!(Me(et)&&(e2.tagNameCheck instanceof RegExp&&i6(e2.tagNameCheck,et)||e2.tagNameCheck instanceof Function&&e2.tagNameCheck(et))&&(e2.attributeNameCheck instanceof RegExp&&i6(e2.attributeNameCheck,er)||e2.attributeNameCheck instanceof Function&&e2.attributeNameCheck(er))||"is"===er&&e2.allowCustomizedBuiltInElements&&(e2.tagNameCheck instanceof RegExp&&i6(e2.tagNameCheck,es)||e2.tagNameCheck instanceof Function&&e2.tagNameCheck(es))))return!1}else if(tI[er]);else if(i6(eJ,i3(es,sU,"")));else if("src"!==er&&"xlink:href"!==er&&"href"!==er||"script"===et||0!==i8(es,"data:")||!tR[et]){if(e9&&!i6(sM,i3(es,sU,"")));else if(es)return!1}return!0},Me=function(et){return et.indexOf("-")>0},Ie=function(et){De("beforeSanitizeAttributes",et,null);var er,ei,es,ed,ec=et.attributes;if(ec){var eu={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:e0};for(ed=ec.length;ed--;){var ef=er=ec[ed],ep=ef.name,ev=ef.namespaceURI;ei="value"===ep?er.value:i5(er.value),es=eX(ep);var ey=ei;if(eu.attrName=es,eu.attrValue=ei,eu.keepAttr=!0,eu.forceKeepAttr=void 0,De("uponSanitizeAttribute",et,eu),ei=eu.attrValue,!eu.forceKeepAttr){if(eu.keepAttr){if(i6(/\/>/i,ei))Ae(ep,et);else if(e4&&(ei=i3(ei,sL," "),ei=i3(ei,sB," ")),Le(eX(et.nodeName),es,ei)){if(ei!==ey)try{ev?et.setAttributeNS(ev,ep,ei):et.setAttribute(ep,ei)}catch(er){Ae(ep,et)}}else Ae(ep,et)}else Ae(ep,et)}}De("afterSanitizeAttributes",et,null)}},Fe=function e(et){var er,ei=Te(et);for(De("beforeSanitizeShadowDOM",et,null);er=ei.nextNode();)De("uponSanitizeShadowNode",er,null),Pe(er)||(er.content instanceof es&&e(er.content),Ie(er));De("afterSanitizeShadowDOM",et,null)};return n.sanitize=function(ei,ed){if((tM=!ei)&&(ei="<!-->"),"string"!=typeof ei&&!Be(ei)){if("function"!=typeof ei.toString)throw i9("toString is not a function");if("string"!=typeof(ei=ei.toString()))throw i9("dirty is not a string, aborting")}if(!n.isSupported){if("object"===Fv(et.toStaticHTML)||"function"==typeof et.toStaticHTML){if("string"==typeof ei)return et.toStaticHTML(ei);if(Be(ei))return et.toStaticHTML(ei.outerHTML)}return ei}if(tt||xe(ed),n.removed=[],"string"==typeof ei&&(tp=!1),tp){if(ei.nodeName){var eu,ef,ep,ev,ey,eS=eX(ei.nodeName);if(!eZ[eS]||e3[eS])throw i9("root node is forbidden and cannot be sanitized in-place")}}else if(ei instanceof ec)1===(ef=(eu=Oe("<!---->")).ownerDocument.importNode(ei,!0)).nodeType&&"BODY"===ef.nodeName||"HTML"===ef.nodeName?eu=ef:eu.appendChild(ef);else{if(!ts&&!e4&&!e7&&-1===ei.indexOf("<"))return eU&&tc?eU.createHTML(ei):ei;if(!(eu=Oe(ei)))return ts?null:tc?eH:""}eu&&tr&&Re(eu.firstChild);for(var eI=Te(tp?ei:eu);ep=eI.nextNode();)3===ep.nodeType&&ep===ev||Pe(ep)||(ep.content instanceof es&&Fe(ep.content),Ie(ep),ev=ep);if(ev=null,tp)return ei;if(ts){if(td)for(ey=e$.call(eu.ownerDocument);eu.firstChild;)ey.appendChild(eu.firstChild);else ey=eu;return e0.shadowroot&&(ey=eG.call(er,ey,!0)),ey}var eL=e7?eu.outerHTML:eu.innerHTML;return e7&&eZ["!doctype"]&&eu.ownerDocument&&eu.ownerDocument.doctype&&eu.ownerDocument.doctype.name&&i6(sH,eu.ownerDocument.doctype.name)&&(eL="<!DOCTYPE "+eu.ownerDocument.doctype.name+">\n"+eL),e4&&(eL=i3(eL,sL," "),eL=i3(eL,sB," ")),eU&&tc?eU.createHTML(eL):eL},n.setConfig=function(et){xe(et),tt=!0},n.clearConfig=function(){tH=null,tt=!1},n.isValidAttribute=function(et,er,ei){return tH||xe({}),Le(eX(et),eX(er),ei)},n.addHook=function(et,er){"function"==typeof er&&(eK[et]=eK[et]||[],i0(eK[et],er))},n.removeHook=function(et){if(eK[et])return iQ(eK[et])},n.removeHooks=function(et){eK[et]&&(eK[et]=[])},n.removeAllHooks=function(){eK={}},n}();let sz=tU.each,sj=tU.trim,s$=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],sV={ftp:21,http:80,https:443,mailto:25},sG=["img","video"],jy=(et,er,ei)=>{var es;let ed=(et=>{try{return decodeURIComponent(et)}catch(er){return unescape(et)}})(er).replace(/\s/g,"");return!et.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(ed)||!et.allow_html_data_urls&&(/^data:image\//i.test(ed)?(C(es=et.allow_svg_data_urls)?!es:!C(ei)||!H(sG,ei))&&/^data:image\/svg\+xml/i.test(ed):/^data:/i.test(ed)))};let Hy=class Hy{static parseDataUri(et){let er;let ei=decodeURIComponent(et).split(","),es=/data:([^;]+)/.exec(ei[0]);return es&&(er=es[1]),{type:er,data:ei[1]}}static isDomSafe(et,er,ei={}){if(ei.allow_script_urls)return!0;{let es=rQ.decode(et).replace(/[\s\u0000-\u001F]+/g,"");return!jy(ei,es,er)}}static getDocumentBaseUrl(et){var er;let ei;return ei=0!==et.protocol.indexOf("http")&&"file:"!==et.protocol?null!==(er=et.href)&&void 0!==er?er:"":et.protocol+"//"+et.host+et.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(ei)&&(ei=ei.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(ei)||(ei+="/")),ei}constructor(et,er={}){this.path="",this.directory="",et=sj(et),this.settings=er;let ei=er.base_uri,es=this;if(/^([\w\-]+):([^\/]{2})/i.test(et)||/^\s*#/.test(et))return void(es.source=et);let ed=0===et.indexOf("//");if(0!==et.indexOf("/")||ed||(et=(ei&&ei.protocol||"http")+"://mce_host"+et),!/^[\w\-]*:?\/\//.test(et)){let er=ei?ei.path:new Hy(document.location.href).directory;if(""===(null==ei?void 0:ei.protocol))et="//mce_host"+es.toAbsPath(er,et);else{let ed=/([^#?]*)([#?]?.*)/.exec(et);ed&&(et=(ei&&ei.protocol||"http")+"://mce_host"+es.toAbsPath(er,ed[1])+ed[2])}}et=et.replace(/@@/g,"(mce_at)");let ec=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(et);ec&&sz(s$,(et,er)=>{let ei=ec[er];ei&&(ei=ei.replace(/\(mce_at\)/g,"@@")),es[et]=ei}),ei&&(es.protocol||(es.protocol=ei.protocol),es.userInfo||(es.userInfo=ei.userInfo),es.port||"mce_host"!==es.host||(es.port=ei.port),es.host&&"mce_host"!==es.host||(es.host=ei.host),es.source=""),ed&&(es.protocol="")}setPath(et){let er=/^(.*?)\/?(\w+)?$/.exec(et);er&&(this.path=er[0],this.directory=er[1],this.file=er[2]),this.source="",this.getURI()}toRelative(et){if("./"===et)return et;let er=new Hy(et,{base_uri:this});if("mce_host"!==er.host&&this.host!==er.host&&er.host||this.port!==er.port||this.protocol!==er.protocol&&""!==er.protocol)return er.getURI();let ei=this.getURI(),es=er.getURI();if(ei===es||"/"===ei.charAt(ei.length-1)&&ei.substr(0,ei.length-1)===es)return ei;let ed=this.toRelPath(this.path,er.path);return er.query&&(ed+="?"+er.query),er.anchor&&(ed+="#"+er.anchor),ed}toAbsolute(et,er){let ei=new Hy(et,{base_uri:this});return ei.getURI(er&&this.isSameOrigin(ei))}isSameOrigin(et){if(this.host==et.host&&this.protocol==et.protocol){if(this.port==et.port)return!0;let er=this.protocol?sV[this.protocol]:null;if(er&&(this.port||er)==(et.port||er))return!0}return!1}toRelPath(et,er){let ei,es,ed=0,ec="",eu=et.substring(0,et.lastIndexOf("/")).split("/"),ef=er.split("/");if(eu.length>=ef.length){for(ei=0,es=eu.length;ei<es;ei++)if(ei>=ef.length||eu[ei]!==ef[ei]){ed=ei+1;break}}if(eu.length<ef.length){for(ei=0,es=ef.length;ei<es;ei++)if(ei>=eu.length||eu[ei]!==ef[ei]){ed=ei+1;break}}if(1===ed)return er;for(ei=0,es=eu.length-(ed-1);ei<es;ei++)ec+="../";for(ei=ed-1,es=ef.length;ei<es;ei++)ec+=ei!==ed-1?"/"+ef[ei]:ef[ei];return ec}toAbsPath(et,er){let ei,es=0,ed=/\/$/.test(er)?"/":"",ec=et.split("/"),eu=er.split("/"),ef=[];sz(ec,et=>{et&&ef.push(et)});let ep=[];for(let et=eu.length-1;et>=0;et--)0!==eu[et].length&&"."!==eu[et]&&(".."!==eu[et]?es>0?es--:ep.push(eu[et]):es++);let ev=ef.length-es;return 0!==(ei=ev<=0?oe(ep).join("/"):ef.slice(0,ev).join("/")+"/"+oe(ep).join("/")).indexOf("/")&&(ei="/"+ei),ed&&ei.lastIndexOf("/")!==ei.length-1&&(ei+=ed),ei}getURI(et=!1){let er;return this.source&&!et||(er="",et||(this.protocol?er+=this.protocol+"://":er+="//",this.userInfo&&(er+=this.userInfo+"@"),this.host&&(er+=this.host),this.port&&(er+=":"+this.port)),this.path&&(er+=this.path),this.query&&(er+="?"+this.query),this.anchor&&(er+="#"+this.anchor),this.source=er),this.source}};let sW=tU.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),sK="data-mce-type",sY=0,Wy=(et,er,ei,es)=>{var ed,ec,eu,ef;let ep=er.validate,ev=ei.getSpecialElements();8===et.nodeType&&!er.allow_conditional_comments&&/^\[if/i.test(null!==(ed=et.nodeValue)&&void 0!==ed?ed:"")&&(et.nodeValue=" "+et.nodeValue);let ey=null!==(ec=null==es?void 0:es.tagName)&&void 0!==ec?ec:et.nodeName.toLowerCase();if(1!==et.nodeType||"body"===ey)return;let eS=pn(et),eI=nn(eS,sK),eL=en(eS,"data-mce-bogus");if(!eI&&eP(eL))return void("all"===eL?wo(eS):xo(eS));let eB=ei.getElementRule(ey);if(!ep||eB){if(C(es)&&(es.allowedTags[ey]=!0),ep&&eB&&!eI){if(q(null!==(eu=eB.attributesForced)&&void 0!==eu?eu:[],et=>{Jt(eS,et.name,"{$uid}"===et.value?"mce_"+sY++:et.value)}),q(null!==(ef=eB.attributesDefault)&&void 0!==ef?ef:[],et=>{nn(eS,et.name)||Jt(eS,et.name,"{$uid}"===et.value?"mce_"+sY++:et.value)}),eB.attributesRequired&&!$(eB.attributesRequired,et=>nn(eS,et))||eB.removeEmptyAttrs&&(et=>{let er=et.dom.attributes;return null==er||0===er.length})(eS))return void xo(eS);eB.outputName&&eB.outputName!==ey&&((et,er)=>{let ei=((et,er)=>{let ei=bn(er),es=rn(et);return Zt(ei,es),ei})(et,er);po(et,ei);let es=Mn(et);yo(ei,es),wo(et)})(eS,eB.outputName)}}else ke(ev,ey)?wo(eS):xo(eS)},Ky=(et,er,ei,es,ed)=>!(es in sW&&jy(et,ed,ei))&&(!et.validate||er.isValid(ei,es)||He(es,"data-")||He(es,"aria-")),Gy=(et,er)=>et.hasAttribute(sK)&&("id"===er||"class"===er||"style"===er),Yy=(et,er)=>et in er.getBoolAttrs(),Xy=(et,er,ei)=>{let{attributes:es}=et;for(let ed=es.length-1;ed>=0;ed--){let ec=es[ed],eu=ec.name,ef=ec.value;Ky(er,ei,et.tagName.toLowerCase(),eu,ef)||Gy(et,eu)?Yy(eu,ei)&&et.setAttribute(eu,eu):et.removeAttribute(eu)}},Qy=(et,er)=>{let ei=sq();return ei.addHook("uponSanitizeElement",(ei,es)=>{Wy(ei,et,er,es)}),ei.addHook("uponSanitizeAttribute",(ei,es)=>{let ed=ei.tagName.toLowerCase(),{attrName:ec,attrValue:eu}=es;es.keepAttr=Ky(et,er,ed,ec,eu),es.keepAttr?(es.allowedAttributes[ec]=!0,Yy(ec,er)&&(es.attrValue=ec),et.allow_svg_data_urls&&He(eu,"data:image/svg+xml")&&(es.forceKeepAttr=!0)):Gy(ei,ec)&&(es.forceKeepAttr=!0)}),ei},sX=tU.makeMap,sJ=tU.extend,eC=(et,er,ei)=>{let es=et.name,ed=es in ei&&"title"!==es&&"textarea"!==es,ec=er.childNodes;for(let er=0,es=ec.length;er<es;er++){let es=ec[er],eu=new Fg(es.nodeName.toLowerCase(),es.nodeType);if(tY(es)){let et=es.attributes;for(let er=0,ei=et.length;er<ei;er++){let ei=et[er];eu.attr(ei.name,ei.value)}}else tJ(es)?(eu.value=es.data,ed&&(eu.raw=!0)):(t0(es)||tZ(es)||tQ(es))&&(eu.value=es.data);eC(eu,es,ei),et.append(eu)}},tC=(et={},er=ca())=>{let ei=Nv(),es=Nv(),ed={validate:!0,root_name:"body",sanitize:!0,...et},ec=new DOMParser,eu=((et,er)=>{if(et.sanitize){let ei=Qy(et,er);return(er,es)=>{ei.sanitize(er,((et,er)=>{let ei={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return ei.PARSER_MEDIA_TYPE=er,et.allow_script_urls?ei.ALLOWED_URI_REGEXP=/.*/:et.allow_html_data_urls&&(ei.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),ei})(et,es)),ei.removed=[]}}return(ei,es)=>{let ed;let ec=document.createNodeIterator(ei,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);for(;ed=ec.nextNode();)Wy(ed,et,er),tY(ed)&&Xy(ed,et,er)}})(ed,er),ef=ei.addFilter,ep=ei.getFilters,ev=ei.removeFilter,ey=es.addFilter,eS=es.getFilters,eI=es.removeFilter,g=(et,ei)=>{let es=eP(ei.attr(sK)),ed=1===ei.type&&!ke(et,ei.name)&&!Ts(er,ei);return 3===ei.type||ed&&!es},eL={schema:er,addAttributeFilter:ey,getAttributeFilters:eS,removeAttributeFilter:eI,addNodeFilter:ef,getNodeFilters:ep,removeNodeFilter:ev,parse:(et,ei={})=>{var es;let ef=ed.validate,ev=null!==(es=ei.context)&&void 0!==es?es:ed.root_name,ey=((et,ei,es="html")=>{let ed="xhtml"===es?"application/xhtml+xml":"text/html",ef=ke(er.getSpecialElements(),ei.toLowerCase()),ep=ef?`<${ei}>${et}</${ei}>`:et,ev="xhtml"===es?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${ep}</body></html>`:`<body>${ep}</body>`,ey=ec.parseFromString(ev,ed).body;return eu(ey,ed),ef?ey.firstChild:ey})(et,ev,ei.format);Es(er,ey);let eI=new Fg(ev,11);eC(eI,ey,er.getSpecialElements()),ey.innerHTML="";let[eL,eB]=((et,er,ei,es)=>{let ed=ei.validate,ec=er.getNonEmptyElements(),eu=er.getWhitespaceElements(),ef=sJ(sX("script,style,head,html,body,title,meta,param"),er.getBlockElements()),ep=la(er),ev=/[ \t\r\n]+/g,ey=/^[ \t\r\n]+/,eS=/[ \t\r\n]+$/,m=et=>{let er=et.parent;for(;C(er);){if(er.name in eu)return!0;er=er.parent}return!1},f=et=>et.name in ef||Ts(er,et),g=(er,ei)=>{let ed=ei?er.prev:er.next;return!C(ed)&&!y(er.parent)&&f(er.parent)&&(er.parent!==et||!0===es.isRootContent)};return[et=>{var er,ei;if(3===et.type&&!m(et)){let es=null!==(er=et.value)&&void 0!==er?er:"";es=es.replace(ev," "),(C(ei=et.prev)&&(f(ei)||"br"===ei.name)||g(et,!0))&&(es=es.replace(ey,"")),0===es.length?et.remove():et.value=es}},et=>{var ef,ev;if(1===et.type){let ef=er.getElementRule(et.name);if(ed&&ef){let ed=Jh(er,ec,eu,et);ef.paddInEmptyBlock&&ed&&(et=>{let ei=et;for(;C(ei);){if(ei.name in ep)return Jh(er,ec,eu,ei);ei=ei.parent}return!1})(et)?Xh(ei,es,f,et):ef.removeEmpty&&ed?f(et)?et.remove():et.unwrap():ef.paddEmpty&&(ed||Qh(et,"#text")&&(null===(ev=null==et?void 0:et.firstChild)||void 0===ev?void 0:ev.value)==="\xa0")&&Xh(ei,es,f,et)}}else if(3===et.type&&!m(et)){let er=null!==(ef=et.value)&&void 0!==ef?ef:"";(et.next&&f(et.next)||g(et,!1))&&(er=er.replace(eS,"")),0===er.length?et.remove():et.value=er}}]})(eI,er,ed,ei),eD=[],eF=ef?et=>{nb(er,et)&&eD.push(et)}:E,eP={nodes:{},attributes:{}},w=et=>Kh(ep(),eS(),et,eP);if(((et,er,ei)=>{let es=[];for(let ei=et,ed=ei;ei;ed=ei,ei=ei.walk()){let ec=ei;q(er,et=>et(ec)),y(ec.parent)&&ec!==et?ei=ed:es.push(ec)}for(let et=es.length-1;et>=0;et--){let er=es[et];q(ei,et=>et(er))}})(eI,[eL,w],[eB,eF]),eD.reverse(),ef&&eD.length>0){if(ei.context){let{pass:et,fail:es}=K(eD,et=>et.parent===eI);tb(es,er,eI,w),ei.invalid=et.length>0}else tb(eD,er,eI,w)}let eM=((et,er)=>{var ei;let es=null!==(ei=er.forced_root_block)&&void 0!==ei?ei:et.forced_root_block;return!1===es?"":!0===es?"p":es})(ed,ei);return eM&&("body"===eI.name||ei.isRootContent)&&((et,ei)=>{let es=sJ(sX("script,style,head,html,body,title,meta,param"),er.getBlockElements()),ec=/^[ \t\r\n]+/,eu=/[ \t\r\n]+$/,ef=et.firstChild,ep=null,d=et=>{var er,ei;et&&((ef=et.firstChild)&&3===ef.type&&(ef.value=null===(er=ef.value)||void 0===er?void 0:er.replace(ec,"")),(ef=et.lastChild)&&3===ef.type&&(ef.value=null===(ei=ef.value)||void 0===ei?void 0:ei.replace(eu,"")))};if(er.isValidChild(et.name,ei.toLowerCase())){for(;ef;){let er=ef.next;g(es,ef)?(ep||((ep=new Fg(ei,1)).attr(ed.forced_root_block_attrs),et.insert(ep,ef)),ep.append(ef)):(d(ep),ep=null),ef=er}d(ep)}})(eI,eM),ei.invalid||Gh(eP,ei),eI}};return Iv(eL,ed),ed.inline_styles&&Rv(eL,ed,er),eL},nC=(et,er,ei)=>{let es=mb(et)?Gg({validate:!1}).serialize(et):et,ed=er(es);if(ed.isDefaultPrevented())return ed;if(mb(et)){if(ed.content!==es){let er=tC({validate:!1,forced_root_block:!1,sanitize:ei}).parse(ed.content,{context:et.name});return{...ed,content:er}}return{...ed,content:et}}return ed},oC=(et,er)=>{if(er.no_events)return nH.value(er);{let ei=et.dispatch("BeforeGetContent",er);return ei.isDefaultPrevented()?nH.error(Jm(et,{content:"",...ei}).content):nH.value(ei)}},rC=(et,er,ei)=>{if(ei.no_events)return er;{let es=nC(er,er=>Jm(et,{...ei,content:er}),aX(et));return es.content}},sC=(et,er)=>{if(er.no_events)return nH.value(er);{let ei=nC(er.content,ei=>{var es;return es={...er,content:ei},et.dispatch("BeforeSetContent",es)},aX(et));return ei.isDefaultPrevented()?(Qm(et,ei),nH.error(void 0)):nH.value(ei)}},aC=(et,er,ei)=>{ei.no_events||Qm(et,{...ei,content:er})},iC=(et,er,ei)=>({element:et,width:er,rows:ei}),lC=(et,er)=>({element:et,cells:er}),dC=(et,er)=>({x:et,y:er}),cC=(et,er)=>tn(et,er).bind(Xe).getOr(1),uC=(et,er,ei)=>{let es=et.rows;return!!(es[ei]?es[ei].cells:[])[er]},mC=et=>X(et,(et,er)=>er.cells.length>et?er.cells.length:et,0),fC=(et,er)=>{let ei=et.rows;for(let et=0;et<ei.length;et++){let es=ei[et].cells;for(let ei=0;ei<es.length;ei++)if(En(es[ei],er))return I.some(dC(ei,et))}return I.none()},gC=(et,er,ei,es,ed)=>{let ec=[],eu=et.rows;for(let et=ei;et<=ed;et++){let ei=eu[et].cells,ed=er<es?ei.slice(er,es+1):ei.slice(es,er+1);ec.push(lC(eu[et].element,ed))}return ec},pC=et=>((et,er)=>{let ei=oi(et.element),es=bn("tbody");return yo(es,er),bo(ei,es),ei})(et,V(et.rows,et=>{let er=V(et.cells,et=>{let er=ri(et);return on(er,"colspan"),on(er,"rowspan"),er}),ei=oi(et.element);return yo(ei,er),ei})),hC=(et,er)=>{let ei=pn(er.commonAncestorContainer),es=pp(ei,et),ed=G(es,Br),ec=J(es,et=>"li"===Ht(et)&&Zu(et,er)).fold(N([]),et=>J(es,et=>"ul"===Ht(et)||"ol"===Ht(et)).map(et=>{let er=bn(Ht(et)),ei=ye(mo(et),(et,er)=>He(er,"list-style"));return io(er,ei),[bn("li"),er]}).getOr([])),eu=ed.concat(ec.length?ec:rw(ei)?An(ei).filter(ry).fold(N([]),et=>[ei,et]):ry(ei)?[ei]:[]);return V(eu,oi)},bC=()=>Cf([]),vC=(et,er)=>Zn(er[0],"table",O(En,et)).bind(et=>{let ei=er[0],es=er[er.length-1],ed=(et=>{let er=iC(oi(et),0,[]);return q(Fo(et,"tr"),(et,ei)=>{q(Fo(et,"td,th"),(es,ed)=>{((et,er,ei,es,ed)=>{let ec=cC(ed,"rowspan"),eu=cC(ed,"colspan"),ef=et.rows;for(let et=ei;et<ei+ec;et++){ef[et]||(ef[et]=lC(ri(es),[]));for(let es=er;es<er+eu;es++)ef[et].cells[es]=et===ei&&es===er?ed:oi(ed)}})(er,((et,er,ei)=>{for(;uC(et,er,ei);)er++;return er})(er,ed,ei),ei,et,es)})}),iC(er.element,mC(er.rows),er.rows)})(et);return fC(ed,ei).bind(et=>fC(ed,es).map(er=>((et,er,ei)=>{let es=er.x,ed=er.y,ec=ei.x,eu=ei.y,ef=ed<eu?gC(et,es,ed,ec,eu):gC(et,es,eu,ec,ed);return iC(et.element,mC(ef),ef)})(ed,et,er))).map(et=>Cf([pC(et)]))}).getOrThunk(bC),yC=(et,er)=>{var ei;let es=Gu(er,et);return es.length>0?vC(et,es):er.length>0&&er[0].collapsed?bC():((et,er)=>{let ei=X(er,(et,er)=>(bo(er,et),er),et);return er.length>0?Cf([ei]):ei})(pn((ei=er[0]).cloneContents()),hC(et,ei))},CC=(et,er)=>er>=0&&er<et.length&&Fu(et.charAt(er)),wC=et=>Fr(et.innerText),xC=et=>tY(et)?et.outerHTML:tJ(et)?rQ.encodeRaw(et.data,!1):t0(et)?"<!--"+et.data+"-->":"",kC=(et,er)=>{var ei;let es;return ei=((et,er)=>{let ei=et.length+er.length+2,es=Array(ei),ed=Array(ei),s=(ei,es,ed,ec,eu)=>{let ef=i(ei,es,ed,ec);if(null===ef||ef.start===es&&ef.diag===es-ec||ef.end===ei&&ef.diag===ei-ed){let ef=ei,ep=ed;for(;ef<es||ep<ec;)ef<es&&ep<ec&&et[ef]===er[ep]?(eu.push([0,et[ef]]),++ef,++ep):es-ei>ec-ed?(eu.push([2,et[ef]]),++ef):(eu.push([1,er[ep]]),++ep)}else{s(ei,ef.start,ed,ef.start-ef.diag,eu);for(let er=ef.start;er<ef.end;++er)eu.push([0,et[er]]);s(ef.end,es,ef.end-ef.diag,ec,eu)}},a=(ei,es,ed,ec)=>{let eu=ei;for(;eu-es<ec&&eu<ed&&et[eu]===er[eu-es];)++eu;return{start:ei,end:eu,diag:es}},i=(ei,ec,eu,ef)=>{let ep,ev,ey,eS,eI;let eL=ec-ei,eB=ef-eu;if(0===eL||0===eB)return null;let eD=eL-eB,eF=eB+eL,eP=(eF%2==0?eF:eF+1)/2;for(es[1+eP]=ei,ed[1+eP]=ec+1,ep=0;ep<=eP;++ep){for(ev=-ep;ev<=ep;ev+=2){for(ey=ev+eP,ev===-ep||ev!==ep&&es[ey-1]<es[ey+1]?es[ey]=es[ey+1]:es[ey]=es[ey-1]+1,eI=(eS=es[ey])-ei+eu-ev;eS<ec&&eI<ef&&et[eS]===er[eI];)es[ey]=++eS,++eI;if(eD%2!=0&&eD-ep<=ev&&ev<=eD+ep&&ed[ey-eD]<=es[ey])return a(ed[ey-eD],ev+ei-eu,ec,ef)}for(ev=eD-ep;ev<=eD+ep;ev+=2){for(ey=ev+eP-eD,ev===eD-ep||ev!==eD+ep&&ed[ey+1]<=ed[ey-1]?ed[ey]=ed[ey+1]-1:ed[ey]=ed[ey-1],eI=(eS=ed[ey]-1)-ei+eu-ev;eS>=ei&&eI>=eu&&et[eS]===er[eI];)ed[ey]=eS--,eI--;if(eD%2==0&&-ep<=ev&&ev<=ep&&ed[ey]<=es[ey+eD])return a(ed[ey],ev+ei-eu,ec,ef)}}return null},ec=[];return s(0,et.length,0,er.length,ec),ec})(V(eX(er.childNodes),xC),et),es=0,q(ei,et=>{0===et[0]?es++:1===et[0]?(((et,er,ei)=>{let es=(et=>{let er;let ei=document.createElement("div"),es=document.createDocumentFragment();for(et&&(ei.innerHTML=et);er=ei.firstChild;)es.appendChild(er);return es})(er);if(et.hasChildNodes()&&ei<et.childNodes.length){let er=et.childNodes[ei];et.insertBefore(es,er)}else et.appendChild(es)})(er,et[1],es),es++):2===et[0]&&((et,er)=>{if(et.hasChildNodes()&&er<et.childNodes.length){let ei=et.childNodes[er];et.removeChild(ei)}})(er,es)}),er},sZ=Pe(()=>document.implementation.createHTMLDocument("undo")),SC=et=>{let er=G(V(eX(et.getBody().childNodes),xC),et=>et.length>0),ei=te(er,er=>{let ei=jg(et.serializer,er);return ei.length>0?[ei]:[]}),es=ei.join("");return -1!==es.indexOf("</iframe>")?{type:"fragmented",fragments:ei,content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:es,bookmark:null,beforeBookmark:null}},_C=(et,er,ei)=>{let es=ei?er.beforeBookmark:er.bookmark;"fragmented"===er.type?kC(er.fragments,et.getBody()):et.setContent(er.content,{format:"raw",no_selection:!C(es)||!Su(es)||!es.isFakeCaret}),es&&(et.selection.moveToBookmark(es),et.selection.scrollIntoView())},NC=et=>"fragmented"===et.type?et.fragments.join(""):et.content,RC=et=>{let er=bn("body",sZ());return So(er,NC(et)),q(Fo(er,"*[data-mce-bogus]"),xo),Eo(er)},AC=(et,er)=>!(!et||!er)&&(NC(et)===NC(er)||RC(et)===RC(er)),OC=et=>0===et.get(),TC=(et,er,ei)=>{OC(ei)&&(et.typing=er)},BC=(et,er)=>{et.typing&&(TC(et,!1,er),et.add())},DC=et=>({init:{bindEvents:E},undoManager:{beforeChange:(er,ei)=>{OC(er)&&ei.set(nU(et.selection))},add:(er,ei,es,ed,ec,eu)=>((et,er,ei,es,ed,ec,eu)=>{let ef=SC(et),ep=tU.extend(ec||{},ef);if(!OC(es)||et.removed)return null;let ev=er.data[ei.get()];if(et.dispatch("BeforeAddUndo",{level:ep,lastLevel:ev,originalEvent:eu}).isDefaultPrevented()||ev&&AC(ev,ep))return null;er.data[ei.get()]&&ed.get().each(et=>{er.data[ei.get()].beforeBookmark=et});let ey=o0(et);if(ey&&er.data.length>ey){for(let et=0;et<er.data.length-1;et++)er.data[et]=er.data[et+1];er.data.length--,ei.set(er.data.length)}ep.bookmark=nU(et.selection),ei.get()<er.data.length-1&&(er.data.length=ei.get()+1),er.data.push(ep),ei.set(er.data.length-1);let eS={level:ep,lastLevel:ev,originalEvent:eu};return ei.get()>0?(et.setDirty(!0),et.dispatch("AddUndo",eS),et.dispatch("change",eS)):et.dispatch("AddUndo",eS),ep})(et,er,ei,es,ed,ec,eu),undo:(er,ei,es)=>{let ed;return er.typing&&(er.add(),er.typing=!1,TC(er,!1,ei)),es.get()>0&&(es.set(es.get()-1),_C(et,ed=er.data[es.get()],!0),et.setDirty(!0),et.dispatch("Undo",{level:ed})),ed},redo:(er,ei)=>{let es;return er.get()<ei.length-1&&(er.set(er.get()+1),_C(et,es=ei[er.get()],!1),et.setDirty(!0),et.dispatch("Redo",{level:es})),es},clear:(er,ei)=>{er.data=[],ei.set(0),er.typing=!1,et.dispatch("ClearUndos")},reset:et=>{et.clear(),et.add()},hasUndo:(er,ei)=>ei.get()>0||er.typing&&er.data[0]&&!AC(SC(et),er.data[0]),hasRedo:(et,er)=>er.get()<et.data.length-1&&!et.typing,transact:(et,er,ei)=>(BC(et,er),et.beforeChange(),et.ignore(ei),et.add()),ignore:(et,er)=>((et,er)=>{try{et.set(et.get()+1),er()}finally{et.set(et.get()-1)}})(et,er),extra:(er,ei,es,ed)=>((et,er,ei,es,ed)=>{if(er.transact(es)){let es=er.data[ei.get()].bookmark,ec=er.data[ei.get()-1];_C(et,ec,!0),er.transact(ed)&&(er.data[ei.get()-1].beforeBookmark=es)}})(et,er,ei,es,ed)},formatter:{match:(er,ei,es,ed)=>kb(et,er,ei,es,ed),matchAll:(er,ei)=>((et,er,ei)=>{let es=[],ed={},ec=et.selection.getStart();return et.dom.getParent(ec,ec=>{for(let eu=0;eu<er.length;eu++){let ef=er[eu];!ed[ef]&&xb(et,ec,ef,ei)&&(ed[ef]=!0,es.push(ef))}},et.dom.getRoot()),es})(et,er,ei),matchNode:(er,ei,es,ed)=>xb(et,er,ei,es,ed),canApply:er=>((et,er)=>{let ei=et.formatter.get(er),es=et.dom;if(ei&&et.selection.isEditable()){let er=et.selection.getStart(),ed=ym(es,er);for(let et=ei.length-1;et>=0;et--){let er=ei[et];if(!xm(er))return!0;for(let et=ed.length-1;et>=0;et--)if(es.is(ed[et],er.selector))return!0}}return!1})(et,er),closest:er=>((et,er)=>{let n=er=>En(er,pn(et.getBody()));return I.from(et.selection.getStart(!0)).bind(ei=>hb(pn(ei),ei=>ue(er,er=>xb(et,ei.dom,er)?I.some(er):I.none()),n)).getOrNull()})(et,er),apply:(er,ei,es)=>Cv(et,er,ei,es),remove:(er,ei,es,ed)=>gv(et,er,ei,es,ed),toggle:(er,ei,es)=>((et,er,ei,es)=>{let ed=et.formatter.get(er);ed&&(!kb(et,er,ei,es)||"toggle"in ed[0]&&!ed[0].toggle?Cv(et,er,ei,es):gv(et,er,ei,es))})(et,er,ei,es),formatChanged:(er,ei,es,ed,ec)=>(((et,er,ei,es,ed,ec)=>{let eu=er.get();q(ei.split(","),er=>{let ei=xe(eu,er).getOrThunk(()=>{let et={withSimilar:{state:Da(!1),similar:!0,callbacks:[]},withoutSimilar:{state:Da(!1),similar:!1,callbacks:[]},withVars:[]};return eu[er]=et,et}),i=()=>{let ei=Ev(et);return kv(et,ei,er,ed,ec).isSome()};if(ez(ec)){let et=ed?ei.withSimilar:ei.withoutSimilar;et.callbacks.push(es),1===et.callbacks.length&&et.state.set(i())}else ei.withVars.push({state:Da(i()),similar:ed,vars:ec,callback:es})}),er.set(eu)})(et,er,ei,es,ed,ec),{unbind:()=>((et,er,ei)=>{let es=et.get();q(er.split(","),et=>xe(es,et).each(er=>{es[et]={withSimilar:{...er.withSimilar,callbacks:G(er.withSimilar.callbacks,et=>et!==ei)},withoutSimilar:{...er.withoutSimilar,callbacks:G(er.withoutSimilar.callbacks,et=>et!==ei)},withVars:G(er.withVars,et=>et.callback!==ei)}})),et.set(es)})(er,ei,es)})},editor:{getContent:er=>I.from(et.getBody()).fold(N("tree"===er.format?new Fg("body",11):""),ei=>qg(et,er,ei)),setContent:(er,ei)=>I.from(et.getBody()).map(es=>mb(er)?((et,er,ei,es)=>{Yh(et.parser.getNodeFilters(),et.parser.getAttributeFilters(),ei);let ed=Gg({validate:!1},et.schema).serialize(ei),ec=rL(pn(er))?ed:tU.trim(ed);return fb(et,ec,es.no_selection),{content:ei,html:ec}})(et,es,er,ei):((et,er,ei,es)=>{if(0===ei.length||/^\s+$/.test(ei)){let ed='<br data-mce-bogus="1">';"TABLE"===er.nodeName?ei="<tr><td>"+ed+"</td></tr>":/^(UL|OL)$/.test(er.nodeName)&&(ei="<li>"+ed+"</li>");let ec=nJ(et);return et.schema.isValidChild(er.nodeName.toLowerCase(),ec.toLowerCase())?(ei=ed,ei=et.dom.createHTML(ec,nZ(et),ei)):ei||(ei=ed),fb(et,ei,es.no_selection),{content:ei,html:ei}}{"raw"!==es.format&&(ei=Gg({validate:!1},et.schema).serialize(et.parser.parse(ei,{isRootContent:!0,insert:!0})));let ed=rL(pn(er))?ei:tU.trim(ei);return fb(et,ed,es.no_selection),{content:ed,html:ed}}})(et,es,er,ei)).getOr({content:er,html:mb(ei.content)?"":ei.content}),insertContent:(er,ei)=>ub(et,er,ei),addVisual:er=>((et,er)=>{let ei=et.dom,es=C(er)?er:et.getBody();q(ei.select("table,a",es),er=>{switch(er.nodeName){case"TABLE":let es=o7(et),ed=ei.getAttrib(er,"border");ed&&"0"!==ed||!et.hasVisual?ei.removeClass(er,es):ei.addClass(er,es);break;case"A":if(!ei.getAttrib(er,"href")){let es=ei.getAttrib(er,"name")||er.id,ed=at(et);es&&et.hasVisual?ei.addClass(er,ed):ei.removeClass(er,ed)}}}),et.dispatch("VisualAid",{element:er,hasVisual:et.hasVisual})})(et,er)},selection:{getContent:(er,ei)=>((et,er,ei={})=>{let es={...ei,format:er,get:!0,selection:!0,getInner:!0};return oC(et,es).fold(R,er=>{let ei=((et,er)=>{if("text"===er.format)return I.from(et.selection.getRng()).map(er=>{var ei;let es=I.from(et.dom.getParent(er.commonAncestorContainer,et.dom.isBlock)),ed=et.getBody(),ec=es.map(et=>et.nodeName).getOr("div").toLowerCase(),eu=pn(er.cloneContents());$g(eu),Vg(eu);let ef=et.dom.add(ed,ec,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},eu.dom),ep=wC(ef),ev=Fr(null!==(ei=ef.textContent)&&void 0!==ei?ei:"");if(et.dom.remove(ef),CC(ev,0)||CC(ev,ev.length-1)){let et=es.getOr(ed),er=wC(et),ei=er.indexOf(ep);return -1===ei?ep:(CC(er,ei-1)?" ":"")+ep+(CC(er,ei+ep.length)?" ":"")}return ep}).getOr("");{let ei=((et,er)=>{let ei=et.selection.getRng(),es=et.dom.create("body"),ed=et.selection.getSel(),ec=Rg(et,Ku(ed)),eu=er.contextual?yC(pn(et.getBody()),ec).dom:ei.cloneContents();return eu&&es.appendChild(eu),et.selection.serializer.serialize(es,er)})(et,er);return"tree"===er.format?ei:et.selection.isCollapsed()?"":ei}})(et,er);return rC(et,ei,er)})})(et,er,ei)},autocompleter:{addDecoration:er=>Bg(et,er),removeDecoration:()=>Dg(pn(et.getBody())).each(er=>{let ei=et.selection.getBookmark();xo(er),et.selection.moveToBookmark(ei)})},raw:{getModel:()=>I.none()}}),PC=et=>ke(et.plugins,"rtc"),LC=et=>et.rtcInstance?et.rtcInstance:DC(et),MC=et=>{let er=et.rtcInstance;if(er)return er;throw Error("Failed to get RTC instance not yet initialized.")},IC=et=>MC(et).init.bindEvents(),FC=et=>0===et.dom.length?(wo(et),I.none()):I.some(et),UC=(et,er,ei,es)=>{et.bind(et=>((es?Kp:Wp)(et.dom,es?et.dom.length:0),er.filter(tj).map(er=>((et,er,ei,es)=>{let ed=et.dom,ec=er.dom,eu=es?ed.length:ec.length;es?(Gp(ed,ec,!1,!es),ei.setStart(ec,eu)):(Gp(ec,ed,!1,!es),ei.setEnd(ec,eu))})(et,er,ei,es)))).orThunk(()=>{let et=er.filter(et=>Wm.isBookmarkNode(et.dom)).bind(es?Dn:Bn).or(er).filter(tj);return et.map(et=>((et,er)=>{An(et).each(ei=>{let es=et.dom;er&&Ip(ei,Li(es,0))?Wp(es,0):!er&&Fp(ei,Li(es,es.length))&&Kp(es,es.length)})})(et,es))})},zC=(et,er,ei)=>{if(ke(et,er)){let es=G(et[er],et=>et!==ei);0===es.length?delete et[er]:et[er]=es}},jC=et=>!(!et||!et.ownerDocument)&&Sn(pn(et.ownerDocument),pn(et)),HC=(et,er,ei,es)=>{let ed,ec;let{selectorChangedWithUnbind:eu}=((et,er)=>{let ei,es;let r=(er,ei)=>J(ei,ei=>et.is(ei,er)),s=er=>et.getParents(er,void 0,et.getRoot());return{selectorChangedWithUnbind:(et,ed)=>(ei||(ei={},es={},er.on("NodeChange",et=>{let er=et.element,ed=s(er),ec={};ge(ei,(et,er)=>{r(er,ed).each(ei=>{es[er]||(q(et,et=>{et(!0,{node:ei,selector:er,parents:ed})}),es[er]=et),ec[er]=et})}),ge(es,(et,ei)=>{ec[ei]||(delete es[ei],q(et,et=>{et(!1,{node:er,selector:ei,parents:ed})}))})})),ei[et]||(ei[et]=[]),ei[et].push(ed),r(et,s(er.selection.getStart())).each(()=>{es[et]=ei[et]}),{unbind:()=>{zC(ei,et,ed),zC(es,et,ed)}})}})(et,es),i=(et,er)=>((et,er,ei={})=>{let es={format:"html",...ei,set:!0,selection:!0,content:er};sC(et,es).each(er=>{let ei=((et,er)=>{if("raw"!==er.format){let ei=et.selection.getRng(),es=et.dom.getParent(ei.commonAncestorContainer,et.dom.isBlock),ed=es?{context:es.nodeName.toLowerCase()}:{},ec=et.parser.parse(er.content,{forced_root_block:!1,...ed,...er});return Gg({validate:!1},et.schema).serialize(ec)}return er.content})(et,er),es=et.selection.getRng();((et,er)=>{let ei=I.from(er.firstChild).map(pn),es=I.from(er.lastChild).map(pn);et.deleteContents(),et.insertNode(er);let ed=ei.bind(Bn).filter(tj).bind(FC),ec=es.bind(Dn).filter(tj).bind(FC);UC(ed,ei,et,!0),UC(ec,es,et,!1),et.collapse(!1)})(es,es.createContextualFragment(ei)),et.selection.setRng(es),Zf(et,es),aC(et,ei,er)})})(es,et,er),l=et=>{let er=c();er.collapse(!!et),u(er)},d=()=>er.getSelection?er.getSelection():er.document.selection,c=()=>{let ei;let a=(et,er,ei)=>{try{return er.compareBoundaryPoints(et,ei)}catch(et){return -1}},eu=er.document;if(C(es.bookmark)&&!xg(es)){let et=cg(es);if(et.isSome())return et.map(et=>Rg(es,[et])[0]).getOr(eu.createRange())}try{let et=d();et&&!Ho(et.anchorNode)&&(ei=et.rangeCount>0?et.getRangeAt(0):eu.createRange(),ei=Rg(es,[ei])[0])}catch(et){}if(ei||(ei=eu.createRange()),t1(ei.startContainer)&&ei.collapsed){let er=et.getRoot();ei.setStart(er,0),ei.setEnd(er,0)}return ed&&ec&&(0===a(ei.START_TO_START,ei,ed)&&0===a(ei.END_TO_END,ei,ed)?ei=ec:(ed=null,ec=null)),ei},u=(et,er)=>{var ei;if(!((ei=et)&&jC(ei.startContainer)&&jC(ei.endContainer)))return;let eu=d();if(et=es.dispatch("SetSelectionRange",{range:et,forward:er}).range,eu){ec=et;try{eu.removeAllRanges(),eu.addRange(et)}catch(et){}!1===er&&eu.extend&&(eu.collapse(et.endContainer,et.endOffset),eu.extend(et.startContainer,et.startOffset)),ed=eu.rangeCount>0?eu.getRangeAt(0):null}if(!et.collapsed&&et.startContainer===et.endContainer&&(null==eu?void 0:eu.setBaseAndExtent)&&et.endOffset-et.startOffset<2&&et.startContainer.hasChildNodes()){let er=et.startContainer.childNodes[et.startOffset];er&&"IMG"===er.nodeName&&(eu.setBaseAndExtent(et.startContainer,et.startOffset,et.endContainer,et.endOffset),eu.anchorNode===et.startContainer&&eu.focusNode===et.endContainer||eu.setBaseAndExtent(er,0,er,1))}es.dispatch("AfterSetSelectionRange",{range:et,forward:er})},m=()=>{let er=d(),ei=null==er?void 0:er.anchorNode,es=null==er?void 0:er.focusNode;if(!er||!ei||!es||Ho(ei)||Ho(es))return!0;let ed=et.createRng(),ec=et.createRng();try{ed.setStart(ei,er.anchorOffset),ed.collapse(!0),ec.setStart(es,er.focusOffset),ec.collapse(!0)}catch(et){return!0}return 0>=ed.compareBoundaryPoints(ed.START_TO_START,ec)},ef={dom:et,win:er,serializer:ei,editor:es,expand:(er={type:"word"})=>u(Df(et).expand(c(),er)),collapse:l,setCursorLocation:(er,ei)=>{let ed=et.createRng();C(er)&&C(ei)?(ed.setStart(er,ei),ed.setEnd(er,ei),u(ed),l(!1)):(em(et,ed,es.getBody(),!0),u(ed))},getContent:et=>((et,er={})=>{var ei;return ei=er.format?er.format:"html",MC(et).selection.getContent(ei,er)})(es,et),setContent:i,getBookmark:(et,er)=>ep.getBookmark(et,er),moveToBookmark:et=>ep.moveToBookmark(et),select:(er,ei)=>(I.from(er).bind(er=>I.from(er.parentNode).map(es=>{let ed=et.nodeIndex(er),ec=et.createRng();return ec.setStart(es,ed),ec.setEnd(es,ed+1),ei&&(em(et,ec,er,!0),em(et,ec,er,!1)),ec})).each(u),er),isCollapsed:()=>{let et=c(),er=d();return!(!et||et.item)&&(et.compareEndPoints?0===et.compareEndPoints("StartToEnd",et):!er||et.collapsed)},isEditable:()=>{let er=c(),ei=es.getBody().querySelectorAll('[data-mce-selected="1"]');return ei.length>0?ne(ei,er=>et.isEditable(er.parentElement)):er.startContainer===er.endContainer?et.isEditable(er.startContainer):et.isEditable(er.startContainer)&&et.isEditable(er.endContainer)},isForward:m,setNode:er=>(i(et.getOuterHTML(er)),er),getNode:()=>((et,er)=>{if(!er)return et;let ei=er.startContainer,es=er.endContainer,ed=er.startOffset,ec=er.endOffset,eu=er.commonAncestorContainer;er.collapsed||(ei===es&&ec-ed<2&&ei.hasChildNodes()&&(eu=ei.childNodes[ed]),tJ(ei)&&tJ(es)&&(ei=ei.length===ed?Ng(ei.nextSibling,!0):ei.parentNode,es=0===ec?Ng(es.previousSibling,!1):es.parentNode,ei&&ei===es&&(eu=ei)));let ef=tJ(eu)?eu.parentNode:eu;return tY(ef)?ef:et})(es.getBody(),c()),getSel:d,setRng:u,getRng:c,getStart:et=>Sg(es.getBody(),c(),et),getEnd:et=>_g(es.getBody(),c(),et),getSelectedBlocks:(er,ei)=>((et,er,ei,es)=>{let ed=[],ec=et.getRoot(),eu=et.getParent(ei||Sg(ec,er,er.collapsed),et.isBlock),ef=et.getParent(es||_g(ec,er,er.collapsed),et.isBlock);if(eu&&eu!==ec&&ed.push(eu),eu&&ef&&eu!==ef){let er;let ei=new zo(eu,ec);for(;(er=ei.next())&&er!==ef;)et.isBlock(er)&&ed.push(er)}return ef&&eu!==ef&&ef!==ec&&ed.push(ef),ed})(et,c(),er,ei),normalize:()=>{let er=c(),ei=d();if(!(Ku(ei).length>1)&&tm(es)){let ei=Of(et,er);return ei.each(et=>{u(et,m())}),ei.getOr(er)}return er},selectorChanged:(et,er)=>(eu(et,er),ef),selectorChangedWithUnbind:eu,getScrollContainer:()=>{let er,ei=et.getRoot();for(;ei&&"BODY"!==ei.nodeName;){if(ei.scrollHeight>ei.clientHeight){er=ei;break}ei=ei.parentNode}return er},scrollIntoView:(et,er)=>{C(et)?((et,er,ei)=>{(et.inline?Xf:Jf)(et,er,ei)})(es,et,er):Zf(es,c(),er)},placeCaretAt:(et,er)=>u(xf(et,er,es.getDoc())),getBoundingClientRect:()=>{let et=c();return et.collapsed?Li.fromRangeStart(et).getClientRects()[0]:et.getBoundingClientRect()},destroy:()=>{er=ed=ec=null,ev.destroy()}},ep=Wm(ef),ev=sf(ef,es);return ef.bookmarkManager=ep,ef.controlSelection=ev,ef},$C=(et,er,ei)=>{-1===tU.inArray(er,ei)&&(et.addAttributeFilter(ei,(et,er)=>{let ei=et.length;for(;ei--;)et[ei].attr(er,null)}),er.push(ei))},VC=(et,er)=>{let ei=["data-mce-selected"],es={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...et},ed=er&&er.dom?er.dom:Oa.DOM,ec=er&&er.schema?er.schema:ca(es),eu=tC(es,ec);return eu.addAttributeFilter("data-mce-tabindex",(et,er)=>{let ei=et.length;for(;ei--;){let es=et[ei];es.attr("tabindex",es.attr("data-mce-tabindex")),es.attr(er,null)}}),eu.addAttributeFilter("src,href,style",(et,er)=>{let ei="data-mce-"+er,ec=es.url_converter,eu=es.url_converter_scope,ef=et.length;for(;ef--;){let es=et[ef],ep=es.attr(ei);void 0!==ep?(es.attr(er,ep.length>0?ep:null),es.attr(ei,null)):(ep=es.attr(er),"style"===er?ep=ed.serializeStyle(ed.parseStyle(ep),es.name):ec&&(ep=ec.call(eu,ep,er,es.name)),es.attr(er,ep.length>0?ep:null))}}),eu.addAttributeFilter("class",et=>{let er=et.length;for(;er--;){let ei=et[er],es=ei.attr("class");es&&(es=es.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),ei.attr("class",es.length>0?es:null))}}),eu.addAttributeFilter("data-mce-type",(et,er,ei)=>{let es=et.length;for(;es--;){let er=et[es];if("bookmark"===er.attr("data-mce-type")&&!ei.cleanup){let et=I.from(er.firstChild).exists(et=>{var er;return!hr(null!==(er=et.value)&&void 0!==er?er:"")});et?er.unwrap():er.remove()}}}),eu.addNodeFilter("noscript",et=>{var er;let ei=et.length;for(;ei--;){let es=et[ei].firstChild;es&&(es.value=rQ.decode(null!==(er=es.value)&&void 0!==er?er:""))}}),eu.addNodeFilter("script,style",(et,er)=>{var ei;let r=et=>et.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,""),ed=et.length;for(;ed--;){let ec=et[ed],eu=ec.firstChild,ef=null!==(ei=null==eu?void 0:eu.value)&&void 0!==ei?ei:"";if("script"===er){let et=ec.attr("type");et&&ec.attr("type","mce-no/type"===et?null:et.replace(/^mce\-/,"")),"xhtml"===es.element_format&&eu&&ef.length>0&&(eu.value="// <![CDATA[\n"+r(ef)+"\n// ]]>")}else"xhtml"===es.element_format&&eu&&ef.length>0&&(eu.value="<!--\n"+r(ef)+"\n-->")}}),eu.addNodeFilter("#comment",et=>{let er=et.length;for(;er--;){let ei=et[er],ec=ei.value;es.preserve_cdata&&0===(null==ec?void 0:ec.indexOf("[CDATA["))?(ei.name="#cdata",ei.type=4,ei.value=ed.decode(ec.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==ec?void 0:ec.indexOf("mce:protected "))&&(ei.name="#text",ei.type=3,ei.raw=!0,ei.value=unescape(ec).substr(14))}}),eu.addNodeFilter("xml:namespace,input",(et,er)=>{let ei=et.length;for(;ei--;){let es=et[ei];7===es.type?es.remove():1===es.type&&("input"!==er||es.attr("type")||es.attr("type","text"))}}),eu.addAttributeFilter("data-mce-type",et=>{q(et,et=>{"format-caret"===et.attr("data-mce-type")&&(et.isEmpty(eu.schema.getNonEmptyElements())?et.remove():et.unwrap())})}),eu.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(et,er)=>{let ei=et.length;for(;ei--;)et[ei].attr(er,null)}),es.remove_trailing_brs&&Av(es,eu,eu.schema),{schema:ec,addNodeFilter:eu.addNodeFilter,addAttributeFilter:eu.addAttributeFilter,serialize:(et,ei={})=>{let ef={format:"html",...ei},ep=C(er)&&er.hasEventListeners("PreProcess")&&!ef.no_events?((et,er,ei)=>{let es;let ed=et.dom,ec=er.cloneNode(!0),eu=document.implementation;if(eu.createHTMLDocument){let et=eu.createHTMLDocument("");tU.each("BODY"===ec.nodeName?ec.childNodes:[ec],er=>{et.body.appendChild(et.importNode(er,!0))}),ec="BODY"!==ec.nodeName?et.body.firstChild:et.body,es=ed.doc,ed.doc=et}return((et,er)=>{et.dispatch("PreProcess",er)})(et,{...ei,node:ec}),es&&(ed.doc=es),ec})(er,et,ef):et,ev=((et,er,ei)=>{let es=Fr(ei.getInner?er.innerHTML:et.getOuterHTML(er));return ei.selection||rL(pn(er))?es:tU.trim(es)})(ed,ep,ef),ey=((et,er,ei)=>{let es=ei.selection?{forced_root_block:!1,...ei}:ei,ed=et.parse(er,es);return(et=>{let t=et=>"br"===(null==et?void 0:et.name),er=et.lastChild;if(t(er)){let et=er.prev;t(et)&&(er.remove(),et.remove())}})(ed),ed})(eu,ev,ef);return"tree"===ef.format?ey:((et,er,ei,es,ed)=>{let ec=Gg(er,ei).serialize(es);return((et,er,ei)=>{if(!er.no_events&&et){var es;let ed=(es={...er,content:ei},et.dispatch("PostProcess",es));return ed.content}return ei})(et,ed,ec)})(er,es,ec,ey,ef)},addRules:ec.addValidElements,setRules:ec.setValidElements,addTempAttr:O($C,eu,ei),getTempAttrs:N(ei),getNodeFilters:eu.getNodeFilters,getAttributeFilters:eu.getAttributeFilters,removeNodeFilter:eu.removeNodeFilter,removeAttributeFilter:eu.removeAttributeFilter}},qC=(et,er)=>{let ei=VC(et,er);return{schema:ei.schema,addNodeFilter:ei.addNodeFilter,addAttributeFilter:ei.addAttributeFilter,serialize:ei.serialize,addRules:ei.addRules,setRules:ei.setRules,addTempAttr:ei.addTempAttr,getTempAttrs:ei.getTempAttrs,getNodeFilters:ei.getNodeFilters,getAttributeFilters:ei.getAttributeFilters,removeNodeFilter:ei.removeNodeFilter,removeAttributeFilter:ei.removeAttributeFilter}},WC=(et,er,ei={})=>{let es={format:"html",...ei,set:!0,content:er};return sC(et,es).map(er=>{var ei;let es=(ei=er.content,LC(et).editor.setContent(ei,er));return aC(et,es.html,er),es.content}).getOr(er)},sQ="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),s0="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),s1="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),s2=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],QC=(et,er)=>{let ei=G(er,er=>ke(et,er));return ae(ei)},JC=et=>{let er=QC(et,sQ),ei=et.forced_root_block;return!1!==ei&&""!==ei||er.push("forced_root_block (false only)"),ae(er)},ZC=et=>QC(et,s0),ew=(et,er)=>{let ei=tU.makeMap(et.plugins," "),es=G(er,et=>ke(ei,et));return ae(es)},tw=et=>ew(et,s1),nw=et=>ew(et,s2.map(et=>et.name)),ow=et=>J(s2,er=>er.name===et).fold(()=>et,er=>er.replacedWith?`${et}, replaced by ${er.replacedWith}`:et),s3=Oa.DOM,sw=et=>I.from(et).each(et=>et.destroy()),s8=(()=>{let et={};return{add:(er,ei)=>{et[er]=ei},get:er=>et[er]?et[er]:{icons:{}},has:er=>ke(et,er)}})(),s5=Fa.ModelManager,lw=(et,er)=>er.dom[et],dw=(et,er)=>parseInt(lo(er,et),10),s6=O(lw,"clientWidth"),s9=O(lw,"clientHeight"),s4=O(dw,"margin-top"),s7=O(dw,"margin-left"),gw=et=>{let er=[],n=()=>{let er=et.theme;return er&&er.getNotificationManagerImpl?er.getNotificationManagerImpl():(()=>{let e=()=>{throw Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}})()},o=()=>I.from(er[0]),r=()=>{q(er,et=>{et.reposition()})},s=et=>{Z(er,er=>er===et).each(et=>{er.splice(et,1)})},a=(ei,es=!0)=>{var ed;return et.removed||!(ed=et.inline?et.getBody():et.getContentAreaContainer(),I.from(ed).map(pn)).map(Yn).getOr(!1)?{}:(es&&et.dispatch("BeforeOpenNotification",{notification:ei}),J(er,et=>{var er;return!((er=n().getArgs(et)).type!==ei.type||er.text!==ei.text||er.progressBar||er.timeout||ei.progressBar||ei.timeout)}).getOrThunk(()=>{et.editorManager.setActive(et);let es=n().open(ei,()=>{s(es),r(),o().fold(()=>et.focus(),et=>eg(pn(et.getEl())))});return er.push(es),r(),et.dispatch("OpenNotification",{notification:{...es}}),es}))},ei=N(er);return et.on("SkinLoaded",()=>{let er=oM(et);er&&a({text:er,type:"warning",timeout:0},!1),r()}),et.on("show ResizeEditor ResizeWindow NodeChange",()=>{requestAnimationFrame(r)}),et.on("remove",()=>{q(er.slice(),et=>{n().close(et)})}),{open:a,close:()=>{o().each(et=>{n().close(et),s(et),r()})},getNotifications:ei}},dt=Fa.PluginManager,dr=Fa.ThemeManager,bw=et=>{let er=[],n=()=>{let er=et.theme;return er&&er.getWindowManagerImpl?er.getWindowManagerImpl():(()=>{let e=()=>{throw Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}})()},o=(et,er)=>(...ei)=>er?er.apply(et,ei):void 0,r=ei=>{et.dispatch("CloseWindow",{dialog:ei}),0===(er=G(er,et=>et!==ei)).length&&et.focus()},s=ei=>{et.editorManager.setActive(et),dg(et),et.ui.show();let es=ei();return er.push(es),et.dispatch("OpenWindow",{dialog:es}),es};return et.on("remove",()=>{q(er,et=>{n().close(et)})}),{open:(et,er)=>s(()=>n().open(et,er,r)),openUrl:et=>s(()=>n().openUrl(et,r)),alert:(et,er,ei)=>{let es=n();es.alert(et,o(ei||es,er))},confirm:(et,er,ei)=>{let es=n();es.confirm(et,o(ei||es,er))},close:()=>{I.from(er[er.length-1]).each(et=>{n().close(et),r(et)})}}},vw=(et,er)=>{et.notificationManager.open({type:"error",text:er})},yw=(et,er)=>{et._skinLoaded?vw(et,er):et.on("SkinLoaded",()=>{vw(et,er)})},Cw=(et,er,ei)=>{Gm(et,er,{message:ei}),console.error(ei)},ww=(et,er,ei)=>ei?`Failed to load ${et}: ${ei} from url ${er}`:`Failed to load ${et} url: ${er}`,xw=(et,...er)=>{let ei=window.console;ei&&(ei.error?ei.error(et,...er):ei.log(et,...er))},kw=(et,er)=>{let ei=et.editorManager.baseURL+"/skins/content",es=`content${et.editorManager.suffix}.css`;return V(er,er=>/^[a-z0-9\-]+$/i.test(er)&&!et.inline?`${ei}/${er}/${es}`:et.documentBaseURI.toAbsolute(er))},Ew=(et,er)=>{let ei={};return{findAll:(es,ed=eG)=>{let ec=G(es?eX(es.getElementsByTagName("img")):[],er=>{let ei=er.src;return!er.hasAttribute("data-mce-bogus")&&!er.hasAttribute("data-mce-placeholder")&&!(!ei||ei===tP.transparentSrc)&&(He(ei,"blob:")?!et.isUploaded(ei)&&ed(er):!!He(ei,"data:")&&ed(er))}),eu=V(ec,et=>{let es=et.src;if(ke(ei,es))return ei[es].then(er=>eP(er)?er:{image:et,blobInfo:er.blobInfo});{let ed=((et,er)=>{let n=()=>Promise.reject("Invalid data URI");if(He(er,"blob:")){let ei=et.getByUri(er);return C(ei)?Promise.resolve(ei):(He(er,"blob:")?fetch(er).then(et=>et.ok?et.blob():Promise.reject()).catch(()=>Promise.reject({message:`Cannot convert ${er} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"})):He(er,"data:")?new Promise((et,ei)=>{Ov(er).bind(({type:et,data:er,base64Encoded:ei})=>Tv(et,er,ei)).fold(()=>ei("Invalid data URI"),et)}):Promise.reject("Unknown URI format")).then(er=>Bv(er).then(ei=>Pv(ei,!1,ei=>I.some(Lv(et,er,ei))).getOrThunk(n)))}return He(er,"data:")?Mv(et,er).fold(n,et=>Promise.resolve(et)):Promise.reject("Unknown image data format")})(er,es).then(er=>(delete ei[es],{image:et,blobInfo:er})).catch(et=>(delete ei[es],et));return ei[es]=ed,ed}});return Promise.all(eu)}}},Sw=()=>{let et={},t=(et,er)=>({status:et,resultUri:er}),n=er=>er in et;return{hasBlobUri:n,getResultUri:er=>{let ei=et[er];return ei?ei.resultUri:null},isPending:er=>!!n(er)&&1===et[er].status,isUploaded:er=>!!n(er)&&2===et[er].status,markPending:er=>{et[er]=t(1,null)},markUploaded:(er,ei)=>{et[er]=t(2,ei)},removeFailed:er=>{delete et[er]},destroy:()=>{et={}}}},dd=0,Nw=(et,er)=>{let ei={},o=(et,ei)=>new Promise((es,ed)=>{let ec=new XMLHttpRequest;ec.open("POST",er.url),ec.withCredentials=er.credentials,ec.upload.onprogress=et=>{ei(et.loaded/et.total*100)},ec.onerror=()=>{ed("Image upload failed due to a XHR Transport error. Code: "+ec.status)},ec.onload=()=>{var et,ei;if(ec.status<200||ec.status>=300)return void ed("HTTP Error: "+ec.status);let eu=JSON.parse(ec.responseText);eu&&eP(eu.location)?es((et=er.basePath,ei=eu.location,et?et.replace(/\/$/,"")+"/"+ei.replace(/^\//,""):ei)):ed("Invalid JSON: "+ec.responseText)};let eu=new FormData;eu.append("file",et.blob(),et.filename()),ec.send(eu)}),es=ej(er.handler)?er.handler:o,s=(et,er)=>({url:er,blobInfo:et,status:!0}),a=(et,er)=>({url:"",blobInfo:et,status:!1,error:er}),i=(et,er)=>{tU.each(ei[et],et=>{et(er)}),delete ei[et]};return{upload:(ed,ec)=>{var eu;return er.url||es!==o?(eu=ed,eu=tU.grep(eu,er=>!et.isUploaded(er.blobUri())),Promise.all(tU.map(eu,er=>et.isPending(er.blobUri())?(et=>{let er=et.blobUri();return new Promise(et=>{ei[er]=ei[er]||[],ei[er].push(et)})})(er):(et.markPending(er.blobUri()),new Promise(ei=>{let ed,eu;try{let c=()=>{ed&&(ed.close(),eu=E)},f=es=>{c(),et.removeFailed(er.blobUri()),i(er.blobUri(),a(er,es)),ei(a(er,es))};eu=et=>{et<0||et>100||I.from(ed).orThunk(()=>I.from(ec).map(D)).each(er=>{ed=er,er.progressBar.value(et)})},es(er,eu).then(es=>{c(),et.markUploaded(er.blobUri(),es),i(er.blobUri(),s(er,es)),ei(s(er,es))},et=>{f(eP(et)?{message:et}:et)})}catch(et){ei(a(er,et))}}))))):new Promise(et=>{et([])})}}},Rw=et=>()=>et.notificationManager.open({text:et.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),Aw=(et,er)=>Nw(er,{url:n7(et),basePath:ot(et),credentials:or(et),handler:oa(et)}),Ow=et=>{let er,ei;let es=(()=>{let et=[],t=et=>{if(!et.blob||!et.base64)throw Error("blob and base64 representations of the image are required for BlobInfo to be created");let er=et.id||"blobid"+dd+++(()=>{let e=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+e()+e()+e()})(),ei=et.name||er,es=et.blob;return{id:N(er),name:N(ei),filename:N(et.filename||ei+"."+(({"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"})[es.type.toLowerCase()]||"dat")),blob:N(es),base64:N(et.base64),blobUri:N(et.blobUri||URL.createObjectURL(es)),uri:N(et.uri)}},n=er=>J(et,er).getOrUndefined(),o=et=>n(er=>er.id()===et);return{create:(et,er,ei,es,ed)=>{if(eP(et))return t({id:et,name:es,filename:ed,blob:er,base64:ei});if(eM(et))return t(et);throw Error("Unknown input type")},add:er=>{o(er.id())||et.push(er)},get:o,getByUri:et=>n(er=>er.blobUri()===et),getByData:(et,er)=>n(ei=>ei.base64()===et&&ei.blob().type===er),findFirst:n,removeByUri:er=>{et=G(et,et=>et.blobUri()!==er||(URL.revokeObjectURL(et.blobUri()),!1))},destroy:()=>{q(et,et=>{URL.revokeObjectURL(et.blobUri())}),et=[]}}})(),ed=Sw(),ec=[],a=er=>ei=>et.selection?er(ei):[],i=(et,er,ei)=>{let es=0;do -1!==(es=et.indexOf(er,es))&&(et=et.substring(0,es)+ei+et.substr(es+er.length),es+=ei.length-er.length+1);while(-1!==es);return et},l=(et,er,ei)=>{let es=`src="${ei}"${ei===tP.transparentSrc?' data-mce-placeholder="1"':""}`;return et=i(et,`src="${er}"`,es),i(et,'data-mce-src="'+er+'"','data-mce-src="'+ei+'"')},d=(er,ei)=>{q(et.undoManager.data,et=>{"fragmented"===et.type?et.fragments=V(et.fragments,et=>l(et,er,ei)):et.content=l(et.content,er,ei)})},c=()=>(er||(er=Aw(et,ed)),p().then(a(ei=>{let ed=V(ei,et=>et.blobInfo);return er.upload(ed,Rw(et)).then(a(er=>{let ed=[],ec=!1,eu=V(er,(er,eu)=>{var ef;let{blobInfo:ep,image:ev}=ei[eu],ey=!1;return er.status&&n6(et)?(er.url&&!je(ev.src,er.url)&&(ec=!0),es.removeByUri(ev.src),PC(et)||((er,ei)=>{let es=et.convertURL(ei,"src");d(er.src,ei),Zt(pn(er),{src:n5(et)?ei+(-1===ei.indexOf("?")?"?":"&")+(new Date).getTime():ei,"data-mce-src":es})})(ev,er.url)):er.error&&(er.error.remove&&(d(ev.src,tP.transparentSrc),ed.push(ev),ey=!0),ef=er.error.message,yw(et,ns.translate(["Failed to upload image: {0}",ef]))),{element:ev,status:er.status,uploadUri:er.url,blobInfo:ep,removed:ey}});return ed.length>0&&!PC(et)?et.undoManager.transact(()=>{q(ko(ed),er=>{let ei=An(er);wo(er),ei.each(er=>{et.dom.isEmpty(er.dom)&&C(et.schema.getTextBlockElements()[Ht(er)])&&bo(er,hn('<br data-mce-bogus="1" />'))}),es.removeByUri(er.dom.src)})}):ec&&et.undoManager.dispatchChange(),eu}))}))),u=()=>n8(et)?c():Promise.resolve([]),g=et=>ne(ec,er=>er(et)),p=()=>(ei||(ei=Ew(ed,es)),ei.findAll(et.getBody(),g).then(a(er=>{let ei=G(er,er=>eP(er)?(yw(et,er),!1):"blob"!==er.uriType);return PC(et)||q(ei,et=>{d(et.image.src,et.blobInfo.blobUri()),et.image.src=et.blobInfo.blobUri(),et.image.removeAttribute("data-mce-src")}),ei}))),h=er=>er.replace(/src="(blob:[^"]+)"/g,(er,ei)=>{let ec=ed.getResultUri(ei);if(ec)return'src="'+ec+'"';let eu=es.getByUri(ei);return eu||(eu=X(et.editorManager.get(),(et,er)=>et||er.editorUpload&&er.editorUpload.blobCache.getByUri(ei),void 0)),eu?'src="data:'+eu.blob().type+";base64,"+eu.base64()+'"':er});return et.on("SetContent",()=>{n8(et)?u():p()}),et.on("RawSaveContent",et=>{et.content=h(et.content)}),et.on("GetContent",et=>{et.source_view||"raw"===et.format||"tree"===et.format||(et.content=h(et.content))}),et.on("PostRender",()=>{et.parser.addNodeFilter("img",et=>{q(et,et=>{let er=et.attr("src");if(!er||es.getByUri(er))return;let ei=ed.getResultUri(er);ei&&et.attr("src",ei)})})}),{blobCache:es,addFilter:et=>{ec.push(et)},uploadImages:c,uploadImagesAuto:u,scanForImages:p,destroy:()=>{es.destroy(),ed.destroy(),ei=er=null}}},dc={remove_similar:!0,inherit:!1},df={selector:"td,th",...dc},dp={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...df},tablecellverticalalign:{styles:{"vertical-align":"%value"},...df},tablecellbordercolor:{styles:{borderColor:"%value"},...df},tablecellclass:{classes:["%value"],...df},tableclass:{selector:"table",classes:["%value"],...dc},tablecellborderstyle:{styles:{borderStyle:"%value"},...df},tablecellborderwidth:{styles:{borderWidth:"%value"},...df}},dh=N(dp),db=tU.each,dy=Oa.DOM,Iw=et=>C(et)&&eM(et),Fw=(et,er)=>{let ei=er&&er.schema||ca({}),o=et=>{let er=eP(et)?{name:et,classes:[],attrs:{}}:et,ei=dy.create(er.name);return er.classes.length>0&&dy.addClass(ei,er.classes.join(" ")),dy.setAttribs(ei,er.attrs),ei},r=(et,er,es)=>{let ed;let ec=er[0],eu=Iw(ec)?ec.name:void 0,ef=((et,er)=>{let es=ei.getElementRule(et.nodeName.toLowerCase()),ed=null==es?void 0:es.parentsRequired;return!(!ed||!ed.length)&&(er&&H(ed,er)?er:ed[0])})(et,eu);if(ef)eu===ef?(ed=ec,er=er.slice(1)):ed=ef;else if(ec)ed=ec,er=er.slice(1);else if(!es)return et;let ep=ed?o(ed):dy.create("div");ep.appendChild(et),es&&tU.each(es,er=>{let ei=o(er);ep.insertBefore(ei,et)});let ev=Iw(ed)?ed.siblings:void 0;return r(ep,er,ev)},es=dy.create("div");if(et.length>0){let er=et[0],ei=o(er),ed=Iw(er)?er.siblings:void 0;es.appendChild(r(ei,et.slice(1),ed))}return es},Uw=et=>{let er="div",ei={name:er,classes:[],attrs:{},selector:et=tU.trim(et)};return"*"!==et&&(er=et.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(et,er,es,ed,ec)=>{switch(er){case"#":ei.attrs.id=es;break;case".":ei.classes.push(es);break;case":":-1!==tU.inArray("checked disabled enabled read-only required".split(" "),es)&&(ei.attrs[es]=es)}if("["===ed){let et=ec.match(/([\w\-]+)(?:\=\"([^\"]+))?/);et&&(ei.attrs[et[1]]=et[2])}return""})),ei.name=er||"div",ei},zw=(et,er)=>{var ei;let es="",ed=oV(et);if(""===ed)return"";let r=et=>eP(et)?et.replace(/%(\w+)/g,""):"",s=(er,ei)=>dy.getStyle(null!=ei?ei:et.getBody(),er,!0);if(eP(er)){let ei=et.formatter.get(er);if(!ei)return"";er=ei[0]}if("preview"in er){let et=er.preview;if(!1===et)return"";ed=et||ed}let ec,eu=er.block||er.inline||"span",ef=eP(ei=er.selector)?(ei=(ei=ei.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),tU.map(ei.split(/(?:>|\s+(?![^\[\]]+\]))/),et=>{let er=tU.map(et.split(/(?:~\+|~|\+)/),Uw),ei=er.pop();return er.length&&(ei.siblings=er),ei}).reverse()):[];ef.length>0?(ef[0].name||(ef[0].name=eu),eu=er.selector,ec=Fw(ef,et)):ec=Fw([eu],et);let ep=dy.select(eu,ec)[0]||ec.firstChild;db(er.styles,(et,er)=>{let ei=r(et);ei&&dy.setStyle(ep,er,ei)}),db(er.attributes,(et,er)=>{let ei=r(et);ei&&dy.setAttrib(ep,er,ei)}),db(er.classes,et=>{let er=r(et);dy.hasClass(ep,er)||dy.addClass(ep,er)}),et.dispatch("PreviewFormats"),dy.setStyles(ec,{position:"absolute",left:-65535}),et.getBody().appendChild(ec);let ev=s("fontSize"),ey=/px$/.test(ev)?parseInt(ev,10):0;return db(ed.split(" "),et=>{let er=s(et,ep);if(!("background-color"===et&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(er)&&"#ffffff"===Wu(er=s(et)).toLowerCase()||"color"===et&&"#000000"===Wu(er).toLowerCase())){if("font-size"===et&&/em|%$/.test(er)){if(0===ey)return;er=parseFloat(er)/(/%$/.test(er)?100:1)*ey+"px"}"border"===et&&er&&(es+="padding:0 2px;"),es+=et+":"+er+";"}}),et.dispatch("AfterPreviewFormats"),dy.remove(ec),es},jw=et=>{let er=(et=>{let er={},n=(et,ei)=>{et&&(eP(et)?(eU(ei)||(ei=[ei]),q(ei,et=>{ez(et.deep)&&(et.deep=!xm(et)),ez(et.split)&&(et.split=!xm(et)||km(et)),ez(et.remove)&&xm(et)&&!km(et)&&(et.remove="none"),xm(et)&&km(et)&&(et.mixed=!0,et.block_expand=!0),eP(et.classes)&&(et.classes=et.classes.split(/\s+/))}),er[et]=ei):ge(et,(et,er)=>{n(er,et)}))};return n((et=>{let er=et.dom,ei=et.schema.type,es={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:et=>{er.setStyle(et,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:et=>{er.setStyle(et,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{let et={inline:"span",styles:{textDecoration:"line-through"},exact:!0},er={inline:"strike",remove:"all",preserve_attributes:["class","style"]},es={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==ei?[es,et,er]:[et,es,er]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(et,er,ei)=>tY(et)&&et.hasAttribute("href"),onformat:(et,ei,es)=>{tU.each(es,(ei,es)=>{er.setAttrib(et,es,ei)})}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":et=>{var er;return null!==(er=null==et?void 0:et.customValue)&&void 0!==er?er:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return tU.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),et=>{es[et]={block:et,remove:"all"}}),es})(et)),n(dh()),n(o$(et)),{get:et=>C(et)?er[et]:er,has:et=>ke(er,et),register:n,unregister:et=>(et&&er[et]&&delete er[et],er)}})(et),ei=Da({});return(et=>{et.addShortcut("meta+b","","Bold"),et.addShortcut("meta+i","","Italic"),et.addShortcut("meta+u","","Underline");for(let er=1;er<=6;er++)et.addShortcut("access+"+er,"",["FormatBlock",!1,"h"+er]);et.addShortcut("access+7","",["FormatBlock",!1,"p"]),et.addShortcut("access+8","",["FormatBlock",!1,"div"]),et.addShortcut("access+9","",["FormatBlock",!1,"address"])})(et),(et=>{et.on("mouseup keydown",er=>{var ei;((et,er,ei)=>{let es=et.selection,ed=et.getBody();Ab(et,null,ei),(8===er||46===er)&&es.isCollapsed()&&"\uFEFF"===es.getStart().innerHTML&&Ab(et,ku(ed,es.getStart())),37!==er&&39!==er||Ab(et,ku(ed,es.getStart()))})(et,er.keyCode,tJ(ei=et.selection.getRng().endContainer)&&$e(ei.data,"\xa0"))})})(et),PC(et)||(ei.set({}),et.on("NodeChange",er=>{Sv(et,er.element,ei.get())}),et.on("FormatApply FormatRemove",er=>{let es=I.from(er.node).map(et=>rm(et)?et:et.startContainer).bind(et=>tY(et)?I.some(et):I.from(et.parentElement)).getOrThunk(()=>xv(et));Sv(et,es,ei.get())})),{get:er.get,has:er.has,register:er.register,unregister:er.unregister,apply:(er,ei,es)=>{((et,er,ei,es)=>{MC(et).formatter.apply(er,ei,es)})(et,er,ei,es)},remove:(er,ei,es,ed)=>{((et,er,ei,es,ed)=>{MC(et).formatter.remove(er,ei,es,ed)})(et,er,ei,es,ed)},toggle:(er,ei,es)=>{((et,er,ei,es)=>{MC(et).formatter.toggle(er,ei,es)})(et,er,ei,es)},match:(er,ei,es,ed)=>MC(et).formatter.match(er,ei,es,ed),closest:er=>MC(et).formatter.closest(er),matchAll:(er,ei)=>MC(et).formatter.matchAll(er,ei),matchNode:(er,ei,es,ed)=>MC(et).formatter.matchNode(er,ei,es,ed),canApply:er=>MC(et).formatter.canApply(er),formatChanged:(er,es,ed,ec)=>MC(et).formatter.formatChanged(ei,er,es,ed,ec),getCssText:O(zw,et)}},Hw=et=>{switch(et.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},$w=et=>{let er=za(),ei=Da(0),es=Da(0),ed={data:[],typing:!1,beforeChange:()=>{((et,er,ei)=>{MC(et).undoManager.beforeChange(er,ei)})(et,ei,er)},add:(ec,eu)=>MC(et).undoManager.add(ed,es,ei,er,ec,eu),dispatchChange:()=>{et.setDirty(!0);let er=SC(et);er.bookmark=nU(et.selection),et.dispatch("change",{level:er,lastLevel:ie(ed.data,es.get()).getOrUndefined()})},undo:()=>MC(et).undoManager.undo(ed,ei,es),redo:()=>{var er;return er=ed.data,MC(et).undoManager.redo(es,er)},clear:()=>{((et,er,ei)=>{MC(et).undoManager.clear(er,ei)})(et,ed,es)},reset:()=>{((et,er)=>{MC(et).undoManager.reset(er)})(et,ed)},hasUndo:()=>MC(et).undoManager.hasUndo(ed,es),hasRedo:()=>MC(et).undoManager.hasRedo(ed,es),transact:er=>MC(et).undoManager.transact(ed,ei,er),ignore:er=>{((et,er,ei)=>{MC(et).undoManager.ignore(er,ei)})(et,ei,er)},extra:(er,ei)=>{((et,er,ei,es,ed)=>{MC(et).undoManager.extra(er,ei,es,ed)})(et,ed,es,er,ei)}};return PC(et)||((et,er,ei)=>{let es=Da(!1),r=et=>{TC(er,!1,ei),er.add({},et)};et.on("init",()=>{er.add()}),et.on("BeforeExecCommand",et=>{let es=et.command;Hw(es)||(BC(er,ei),er.beforeChange())}),et.on("ExecCommand",et=>{let er=et.command;Hw(er)||r(et)}),et.on("ObjectResizeStart cut",()=>{er.beforeChange()}),et.on("SaveContent ObjectResized blur",r),et.on("dragend",r),et.on("keyup",ei=>{let ed=ei.keyCode;if(ei.isDefaultPrevented())return;let ec=tP.os.isMacOS()&&"Meta"===ei.key;(ed>=33&&ed<=36||ed>=37&&ed<=40||45===ed||ei.ctrlKey||ec)&&(r(),et.nodeChanged()),46!==ed&&8!==ed||et.nodeChanged(),es.get()&&er.typing&&!AC(SC(et),er.data[0])&&(et.isDirty()||et.setDirty(!0),et.dispatch("TypingUndo"),es.set(!1),et.nodeChanged())}),et.on("keydown",et=>{let ed=et.keyCode;if(et.isDefaultPrevented())return;if(ed>=33&&ed<=36||ed>=37&&ed<=40||45===ed)return void(er.typing&&r(et));let ec=et.ctrlKey&&!et.altKey||et.metaKey;if((ed<16||ed>20)&&224!==ed&&91!==ed&&!er.typing&&!ec)return er.beforeChange(),TC(er,!0,ei),er.add({},et),void es.set(!0);(tP.os.isMacOS()?et.metaKey:et.ctrlKey&&!et.altKey)&&er.beforeChange()}),et.on("mousedown",et=>{er.typing&&r(et)}),et.on("input",et=>{et.inputType&&("insertReplacementText"===et.inputType||"insertText"===et.inputType&&null===et.data||"insertFromPaste"===et.inputType||"insertFromDrop"===et.inputType)&&r(et)}),et.on("AddUndo Undo Redo ClearUndos",er=>{er.isDefaultPrevented()||et.nodeChanged()})})(et,ed,ei),et.addShortcut("meta+z","","Undo"),et.addShortcut("meta+y,meta+shift+z","","Redo"),ed},dk=[9,27,ld.HOME,ld.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,ld.DOWN,ld.UP,ld.LEFT,ld.RIGHT].concat(tP.browser.isFirefox()?[224]:[]),dR="data-mce-placeholder",Ww=et=>"keydown"===et.type||"keyup"===et.type,Kw=et=>{let er=et.keyCode;return er===ld.BACKSPACE||er===ld.DELETE},Gw=(et,er)=>({from:et,to:er}),Yw=(et,er)=>{let ei=pn(et),es=pn(er.container());return fh(ei,es).map(et=>({block:et,position:er}))},Xw=(et,er)=>Jn(er,et=>rT(et)||t5(et.dom),er=>En(er,et)).filter(tz).getOr(et),Qw=et=>{let er=(et=>{let er=Mn(et);return Z(er,rc).fold(N(er),et=>er.slice(0,et))})(et);return q(er,wo),er},Jw=(et,er)=>{let ei=pp(er,et);return J(ei.reverse(),et=>bs(et)).each(wo)},Zw=(et,er,ei,es)=>{if(bs(ei))return Pr(ei),a6(ei.dom);0===G(Pn(es),et=>!bs(et)).length&&bs(er)&&go(es,bn("br"));let ed=a5(ei.dom,Li.before(es.dom));return q(Qw(er),et=>{go(es,et)}),Jw(et,er),ed},ex=(et,er,ei)=>{if(bs(ei)){if(bs(er)){let et=Y((et=>{let t=(et,er)=>Fn(et).fold(()=>er,et=>kr(et)?t(et,er.concat(oi(et))):er);return t(et,[])})(ei),(et,er)=>(vo(et,er),er),Dr());Co(er),bo(er,et)}return wo(ei),a6(er.dom)}let es=a9(ei.dom);return q(Qw(er),et=>{bo(ei,et)}),Jw(et,er),es},tx=(et,er)=>{hu(et,er.dom).bind(et=>I.from(et.getNode())).map(pn).filter(Er).each(wo)},nx=(et,er,ei)=>(tx(!0,er),tx(!1,ei),(Sn(ei,er)?((et,er)=>{let ei=pp(er,et);return I.from(ei[ei.length-1])})(ei,er):I.none()).fold(O(ex,et,er,ei),O(Zw,et,er,ei))),ox=(et,er,ei,es)=>er?nx(et,es,ei):nx(et,ei,es),rx=(et,er)=>{var ei,es;let ed=pn(et.getBody()),ec=(ei=ed.dom,(es=et.selection.getRng()).collapsed?((et,er,ei)=>{let es=Yw(et,Li.fromRangeStart(ei)),ed=es.bind(ei=>fu(er,et,ei.position).bind(ei=>Yw(et,ei).map(ei=>t3(ei.position.getNode())&&!bs(ei.block)?hu(!1,ei.block.dom).bind(es=>es.isEqual(ei.position)?fu(er,et,es).bind(er=>Yw(et,er)):I.some(ei)).getOr(ei):ei)));return Mt(es,ed,Gw).filter(er=>!En(er.from.block,er.to.block)&&((et,er)=>{let ei=pn(et);return En(Xw(ei,er.from.block),Xw(ei,er.to.block))})(et,er)&&!1===t6(er.from.block.dom)&&!1===t6(er.to.block.dom)&&(et=>{let t=et=>rf(et)||_s(et.dom);return t(et.from.block)&&t(et.to.block)})(er))})(ei,er,es):I.none()).map(ei=>()=>{ox(ed,er,ei.from.block,ei.to.block).each(er=>{et.selection.setRng(er.toRange())})});return ec},sx=(et,er)=>{let ei=pn(er),es=O(En,et);return Qn(ei,rT,es).isSome()},ax=et=>{let er=pn(et.getBody());return((et,er)=>{let ei=a5(et.dom,Li.fromRangeStart(er)).isNone(),es=a8(et.dom,Li.fromRangeEnd(er)).isNone();return!(sx(et,er.startContainer)||sx(et,er.endContainer))&&ei&&es})(er,et.selection.getRng())?I.some(()=>{et.setContent(""),et.selection.setCursorLocation()}):((et,er)=>{let ei=er.getRng();return Mt(fh(et,pn(ei.startContainer)),fh(et,pn(ei.endContainer)),(es,ed)=>En(es,ed)?I.none():I.some(()=>{ei.deleteContents(),ox(et,!0,es,ed).each(et=>{er.setRng(et.toRange())})})).getOr(I.none())})(er,et.selection)},ix=(et,er)=>et.selection.isCollapsed()?I.none():ax(et),lx=(et,er,ei,es,ed)=>I.from(er._selectionOverrides.showCaret(et,ei,es,ed)),dx=(et,er)=>et.dispatch("BeforeObjectSelected",{target:er}).isDefaultPrevented()?I.none():I.some((et=>{let er=et.ownerDocument.createRange();return er.selectNode(et),er})(er)),cx=(et,er,ei)=>er.collapsed?((et,er,ei)=>{let es=Wc(1,et.getBody(),er),ed=Li.fromRangeStart(es),ec=ed.getNode();if(kc(ec))return lx(1,et,ec,!ed.isAtEnd(),!1);let eu=ed.getNode(!0);if(kc(eu))return lx(1,et,eu,!1,!1);let ef=$h(et.dom.getRoot(),ed.getNode());return kc(ef)?lx(1,et,ef,!1,ei):I.none()})(et,er,ei).getOr(er):er,ux=et=>lQ(et)||lY(et),mx=et=>l0(et)||lX(et),fx=(et,er,ei,es,ed,ec)=>{var eu;lx(es,et,ec.getNode(!ed),ed,!0).each(ei=>{if(er.collapsed){let et=er.cloneRange();ed?et.setEnd(ei.startContainer,ei.startOffset):et.setStart(ei.endContainer,ei.endOffset),et.deleteContents()}else er.deleteContents();et.selection.setRng(ei)}),eu=et.dom,tJ(ei)&&0===ei.data.length&&eu.remove(ei)},gx=(et,er)=>((et,er)=>{let ei=et.selection.getRng();if(!tJ(ei.commonAncestorContainer))return I.none();let es=er?iX.Forwards:iX.Backwards,ed=du(et.getBody()),ec=O(Xc,er?ed.next:ed.prev),eu=er?ux:mx,ef=Gc(es,et.getBody(),ei),ep=ec(ef),ev=ep?ih(er,ep):ep;if(!ev||!Qc(ef,ev))return I.none();if(eu(ev))return I.some(()=>fx(et,ei,ef.getNode(),es,er,ev));let ey=ec(ev);return ey&&eu(ey)&&Qc(ev,ey)?I.some(()=>fx(et,ei,ef.getNode(),es,er,ey)):I.none()})(et,er),px=(et,er)=>{let ei=et.getBody();return er?a6(ei).filter(lQ):a9(ei).filter(l0)},hx=et=>{let er=et.selection.getRng();return!er.collapsed&&(px(et,!0).exists(et=>et.isEqual(Li.fromRangeStart(er)))||px(et,!1).exists(et=>et.isEqual(Li.fromRangeEnd(er))))},dI=al([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),vx=(et,er,ei)=>fu(er,et,ei).bind(es=>{var ed;return C(ed=es.getNode())&&(rT(pn(ed))||rw(pn(ed)))||((et,er,ei,es)=>{let r=er=>kr(pn(er))&&!Uc(ei,es,et);return Kc(!er,ei).fold(()=>Kc(er,es).fold(eV,r),r)})(et,er,ei,es)?I.none():er&&t6(es.getNode())||!er&&t6(es.getNode(!0))?((et,er,ei,es)=>{let ed=es.getNode(!er);return fh(pn(et),pn(ei.getNode())).map(et=>bs(et)?dI.remove(et.dom):dI.moveToElement(ed)).orThunk(()=>I.some(dI.moveToElement(ed)))})(et,er,ei,es):er&&l0(ei)||!er&&lQ(ei)?I.some(dI.moveToPosition(es)):I.none()}),yx=(et,er)=>I.from($h(et.getBody(),er)),Cx=(et,er)=>{let ei=et.selection.getNode();return yx(et,ei).filter(t6).fold(()=>((et,er,ei)=>{var es;let ed=Wc(er?1:-1,et,ei),ec=Li.fromRangeStart(ed),eu=pn(et);return!er&&l0(ec)?I.some(dI.remove(ec.getNode(!0))):er&&lQ(ec)?I.some(dI.remove(ec.getNode())):!er&&lQ(ec)&&Np(eu,ec)?l5(eu,ec).map(et=>dI.remove(et.getNode())):er&&l0(ec)&&_p(eu,ec)?l6(eu,ec).map(et=>dI.remove(et.getNode())):((et,er)=>{let ei=er.getNode(!et),es=et?"after":"before";return tY(ei)&&ei.getAttribute("data-mce-caret")===es})(er,ec)?(y(es=ec.getNode(!er))?I.none():er&&t6(es.nextSibling)?I.some(dI.moveToElement(es.nextSibling)):!er&&t6(es.previousSibling)?I.some(dI.moveToElement(es.previousSibling)):I.none()).orThunk(()=>vx(et,er,ec)):vx(et,er,ec).bind(er=>er.fold(et=>I.some(dI.remove(et)),et=>I.some(dI.moveToElement(et)),er=>Uc(ec,er,et)?I.none():I.some(dI.moveToPosition(er))))})(et.getBody(),er,et.selection.getRng()).map(ei=>()=>ei.fold(ei=>(et._selectionOverrides.hideFakeCaret(),nh(et,er,pn(ei)),!0),ei=>{let es=er?Li.before(ei):Li.after(ei);return et.selection.setRng(es.toRange()),!0},er=>(et.selection.setRng(er.toRange()),!0))),()=>I.some(E))},wx=et=>{let er=et.dom,ei=et.selection,es=$h(et.getBody(),ei.getNode());if(t5(es)&&er.isBlock(es)&&er.isEmpty(es)){let et=er.create("br",{"data-mce-bogus":"1"});er.setHTML(es,""),es.appendChild(et),ei.setRng(Li.before(et).toRange())}return!0},xx=(et,er)=>et.selection.isCollapsed()?Cx(et,er):((et,er)=>{let ei=et.selection.getNode();return t6(ei)&&!t9(ei)?yx(et,ei.parentNode).filter(t6).fold(()=>I.some(()=>{q(Fo(pn(et.getBody()),".mce-offscreen-selection"),wo),nh(et,er,pn(et.selection.getNode())),gh(et)}),()=>I.some(E)):hx(et)?I.some(()=>{bh(et,et.selection.getRng(),pn(et.getBody()))}):I.none()})(et,er),kx=(et,er)=>et.selection.isCollapsed()?((et,er)=>{let ei=Li.fromRangeStart(et.selection.getRng());return fu(er,et.getBody(),ei).filter(et=>er?lW(et):lK(et)).bind(et=>zc(er?0:-1,et)).map(er=>()=>et.selection.select(er))})(et,er):I.none(),Sx=et=>tJ(et)&&"\uFEFF"===et.data[0],_x=et=>tJ(et)&&"\uFEFF"===et.data[et.data.length-1],Nx=et=>{var er;return(null!==(er=et.ownerDocument)&&void 0!==er?er:document).createTextNode("\uFEFF")},Rx=(et,er)=>et?(et=>{var er;if(tJ(et.previousSibling))return _x(et.previousSibling)||et.previousSibling.appendData("\uFEFF"),et.previousSibling;if(tJ(et))return Sx(et)||et.insertData(0,"\uFEFF"),et;{let ei=Nx(et);return null===(er=et.parentNode)||void 0===er||er.insertBefore(ei,et),ei}})(er):(et=>{var er,ei;if(tJ(et.nextSibling))return Sx(et.nextSibling)||et.nextSibling.insertData(0,"\uFEFF"),et.nextSibling;if(tJ(et))return _x(et)||et.appendData("\uFEFF"),et;{let es=Nx(et);return et.nextSibling?null===(er=et.parentNode)||void 0===er||er.insertBefore(es,et.nextSibling):null===(ei=et.parentNode)||void 0===ei||ei.appendChild(es),es}})(er),dT=O(Rx,!0),dL=O(Rx,!1),Tx=(et,er)=>tJ(et.container())?Rx(er,et.container()):Rx(er,et.getNode()),Bx=(et,er)=>{let ei=er.get();return ei&&et.container()===ei&&Hr(ei)},Dx=(et,er)=>er.fold(er=>{hc(et.get());let ei=dT(er);return et.set(ei),I.some(Li(ei,ei.length-1))},er=>a6(er).map(er=>{if(Bx(er,et)){let er=et.get();return Li(er,1)}{hc(et.get());let ei=Tx(er,!0);return et.set(ei),Li(ei,1)}}),er=>a9(er).map(er=>{if(Bx(er,et)){let er=et.get();return Li(er,er.length-1)}{hc(et.get());let ei=Tx(er,!1);return et.set(ei),Li(ei,ei.length-1)}}),er=>{hc(et.get());let ei=dL(er);return et.set(ei),I.some(Li(ei,1))}),Px=(et,er)=>{for(let ei=0;ei<et.length;ei++){let es=et[ei].apply(null,er);if(es.isSome())return es}return I.none()},dB=al([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Mx=(et,er)=>Fc(er,et)||et,Ix=(et,er,ei)=>{let es=l4(ei),ed=Mx(er,es.container());return ah(et,ed,es).fold(()=>a8(ed,es).bind(O(ah,et,ed)).map(et=>dB.before(et)),I.none)},Fx=(et,er)=>null===ku(et,er),Ux=(et,er,ei)=>ah(et,er,ei).filter(O(Fx,er)),zx=(et,er,ei)=>{let es=l7(ei);return Ux(et,er,es).bind(et=>a5(et,es).isNone()?I.some(dB.start(et)):I.none())},jx=(et,er,ei)=>{let es=l4(ei);return Ux(et,er,es).bind(et=>a8(et,es).isNone()?I.some(dB.end(et)):I.none())},Hx=(et,er,ei)=>{let es=l7(ei),ed=Mx(er,es.container());return ah(et,ed,es).fold(()=>a5(ed,es).bind(O(ah,et,ed)).map(et=>dB.after(et)),I.none)},$x=et=>!sh(qx(et)),Vx=(et,er,ei)=>Px([Ix,zx,jx,Hx],[et,er,ei]).filter($x),qx=et=>et.fold(R,R,R,R),Wx=et=>et.fold(N("before"),N("start"),N("end"),N("after")),Kx=et=>et.fold(dB.before,dB.before,dB.after,dB.after),Gx=et=>et.fold(dB.start,dB.start,dB.end,dB.end),Yx=(et,er,ei,es,ed,ec)=>Mt(ah(er,ei,es),ah(er,ei,ed),(er,es)=>er!==es&&((et,er,ei)=>{let es=Fc(er,et),ed=Fc(ei,et);return C(es)&&es===ed})(ei,er,es)?dB.after(et?er:es):ec).getOr(ec),Xx=(et,er)=>et.fold(eG,et=>!(Wx(et)===Wx(er)&&qx(et)===qx(er))),Qx=(et,er)=>et?er.fold(S(I.some,dB.start),I.none,S(I.some,dB.after),I.none):er.fold(I.none,S(I.some,dB.before),I.none,S(I.some,dB.end)),Jx=(et,er,ei)=>{let es=et?1:-1;return er.setRng(Li(ei.container(),ei.offset()+es).toRange()),er.getSel().modify("move",et?"forward":"backward","word"),!0};(ed=ey||(ey={}))[ed.Br=0]="Br",ed[ed.Block=1]="Block",ed[ed.Wrap=2]="Wrap",ed[ed.Eol=3]="Eol";let ek=(et,er)=>et===iX.Backwards?oe(er):er,tk=(et,er,ei)=>et===iX.Forwards?er.next(ei):er.prev(ei),nk=(et,er,ei,es)=>t3(es.getNode(er===iX.Forwards))?ey.Br:!1===Uc(ei,es)?ey.Block:ey.Wrap,ok=(et,er,ei,es)=>{let ed=du(ei),ec=es,eu=[];for(;ec;){let ei=tk(er,ed,ec);if(!ei)break;if(t3(ei.getNode(!1)))return er===iX.Forwards?{positions:ek(er,eu).concat([ei]),breakType:ey.Br,breakAt:I.some(ei)}:{positions:ek(er,eu),breakType:ey.Br,breakAt:I.some(ei)};if(ei.isVisible()){if(et(ec,ei)){let et=nk(0,er,ec,ei);return{positions:ek(er,eu),breakType:et,breakAt:I.some(ei)}}eu.push(ei),ec=ei}else ec=ei}return{positions:ek(er,eu),breakType:ey.Eol,breakAt:I.none()}},rk=(et,er,ei,es)=>er(ei,es).breakAt.map(es=>{let ed=er(ei,es).positions;return et===iX.Backwards?ed.concat(es):[es].concat(ed)}).getOr([]),sk=(et,er)=>X(et,(et,ei)=>et.fold(()=>I.some(ei),es=>Mt(le(es.getClientRects()),le(ei.getClientRects()),(et,ed)=>{let ec=Math.abs(er-et.left);return Math.abs(er-ed.left)<=ec?ei:es}).or(et)),I.none()),ak=(et,er)=>le(er.getClientRects()).bind(er=>sk(et,er.left)),dD=O(ok,Li.isAbove,-1),dF=O(ok,Li.isBelow,1),dP=O(rk,-1,dD),dM=O(rk,1,dF),uk=(et,er)=>dD(et,er).breakAt.isNone(),mk=(et,er)=>dF(et,er).breakAt.isNone(),fk=(et,er)=>ak(dP(et,er),er),gk=(et,er)=>ak(dM(et,er),er),hk=(et,er)=>Math.abs(et.left-er),bk=(et,er)=>Math.abs(et.right-er),vk=(et,er)=>Te(et,(et,ei)=>{let es=Math.min(hk(et,er),bk(et,er)),ed=Math.min(hk(ei,er),bk(ei,er));return ed===es&&Ee(ei,"node")&&t6(ei.node)||ed<es?ei:et}),yk=et=>{let t=er=>V(er,er=>{let ei=li(er);return ei.node=et,ei});if(tY(et))return t(et.getClientRects());if(tJ(et)){let er=et.ownerDocument.createRange();return er.setStart(et,0),er.setEnd(et,et.data.length),t(er.getClientRects())}return[]},Ck=et=>te(et,yk);(ec=eS||(eS={}))[ec.Up=-1]="Up",ec[ec.Down=1]="Down";let xk=(et,er,ei,es,ed,ec)=>{let eu=0,ef=[],l=es=>{let ec=Ck([es]);-1===et&&(ec=ec.reverse());for(let et=0;et<ec.length;et++){let es=ec[et];if(!ei(es,ep)){if(ef.length>0&&er(es,De(ef))&&eu++,es.line=eu,ed(es))return!0;ef.push(es)}}return!1},ep=De(ec.getClientRects());if(!ep)return ef;let ev=ec.getNode();return ev&&(l(ev),((et,er,ei,es)=>{let ed=es;for(;ed=Ic(ed,et,is,er);)if(ei(ed))return})(et,es,l,ev)),ef},dU=O(xk,eS.Up,ui,mi),dH=O(xk,eS.Down,mi,ui),Sk=et=>De(et.getClientRects()),_k=et=>er=>er.line>et,Nk=et=>er=>er.line===et,Rk=(et,er)=>{et.selection.setRng(er),Zf(et,et.selection.getRng())},Ak=(et,er,ei)=>I.some(cx(et,er,ei)),Ok=(et,er,ei,es,ed,ec)=>{let eu=er===iX.Forwards,ef=du(et.getBody()),ep=O(Xc,eu?ef.next:ef.prev),ev=eu?es:ed;if(!ei.collapsed){let es=gi(ei);if(ec(es))return lx(er,et,es,er===iX.Backwards,!1);if(hx(et)){let et=ei.cloneRange();return et.collapse(er===iX.Backwards),I.from(et)}}let ey=Gc(er,et.getBody(),ei);if(ev(ey))return dx(et,ey.getNode(!eu));let eS=ep(ey),eI=Xr(ei);if(!eS)return eI?I.some(ei):I.none();if(ev(eS=ih(eu,eS)))return lx(er,et,eS.getNode(!eu),eu,!1);let eL=ep(eS);return eL&&ev(eL)&&Qc(eS,eL)?lx(er,et,eL.getNode(!eu),eu,!1):eI?Ak(et,eS.toRange(),!1):I.none()},Tk=(et,er,ei,es,ed,ec)=>{let eu;let ef=Gc(er,et.getBody(),ei),ep=De(ef.getClientRects()),ev=er===eS.Down,ey=et.getBody();if(!ep)return I.none();if(hx(et)){let et=ev?Li.fromRangeEnd(ei):Li.fromRangeStart(ei);return(ev?gk:fk)(ey,et).orThunk(()=>I.from(et)).map(et=>et.toRange())}let eI=(ev?dH:dU)(ey,_k(1),ef),eL=G(eI,Nk(1)),eB=ep.left,eD=vk(eL,eB);if(eD&&ec(eD.node)){let ei=Math.abs(eB-eD.left),es=Math.abs(eB-eD.right);return lx(er,et,eD.node,ei<es,!1)}if(eu=es(ef)?ef.getNode():ed(ef)?ef.getNode(!0):gi(ei)){let ei=((et,er,ei,es)=>{let ed,ec,eu,ef;let ep=du(er),ev=[],ey=0;1===et?(ed=ep.next,ec=mi,eu=ui,ef=Li.after(es)):(ed=ep.prev,ec=ui,eu=mi,ef=Li.before(es));let eS=Sk(ef);do{if(!ef.isVisible())continue;let et=Sk(ef);if(eu(et,eS))continue;ev.length>0&&ec(et,De(ev))&&ey++;let er=li(et);if(er.position=ef,er.line=ey,ei(er))break;ev.push(er)}while(ef=ed(ef));return ev})(er,ey,_k(1),eu),es=vk(G(ei,Nk(1)),eB);if(es||(es=De(G(ei,Nk(0)))))return Ak(et,es.position.toRange(),!1)}return 0===eL.length?Bk(et,ev).filter(ev?ed:es).map(er=>cx(et,er.toRange(),!1)):I.none()},Bk=(et,er)=>{var ei,es;let ed=et.selection.getRng(),ec=er?Li.fromRangeEnd(ed):Li.fromRangeStart(ed),eu=(ei=ec.container(),es=et.getBody(),Qn(pn(ei),et=>t5(et.dom),et=>et.dom===es).map(et=>et.dom).getOr(es));if(er){let et=dF(eu,ec);return de(et.positions)}{let et=dD(eu,ec);return le(et.positions)}},Dk=(et,er,ei)=>Bk(et,er).filter(ei).exists(er=>(et.selection.setRng(er.toRange()),!0)),Pk=(et,er)=>{let ei=et.dom.createRng();ei.setStart(er.container(),er.offset()),ei.setEnd(er.container(),er.offset()),et.selection.setRng(ei)},Lk=(et,er)=>{et?er.setAttribute("data-mce-selected","inline-boundary"):er.removeAttribute("data-mce-selected")},Mk=(et,er,ei)=>Dx(er,ei).map(er=>(Pk(et,er),ei)),Ik=(et,er,ei)=>{let es=et.getBody(),ed=((et,er,ei)=>{let es=Li.fromRangeStart(et);if(et.collapsed)return es;{let ed=Li.fromRangeEnd(et);return ei?a5(er,ed).getOr(ed):a8(er,es).getOr(es)}})(et.selection.getRng(),es,ei);return((et,er,ei,es)=>{let ed=ih(et,es),ec=Vx(er,ei,ed);return Vx(er,ei,ed).bind(O(Qx,et)).orThunk(()=>((et,er,ei,es,ed)=>{let ec=ih(et,ed);return fu(et,ei,ec).map(O(ih,et)).fold(()=>es.map(Kx),ed=>Vx(er,ei,ed).map(O(Yx,et,er,ei,ec,ed)).filter(O(Xx,es))).filter($x)})(et,er,ei,ec,es))})(ei,O(rh,et),es,ed).bind(ei=>Mk(et,er,ei))},Fk=(et,er,ei)=>!!oj(et)&&Ik(et,er,ei).isSome(),Uk=(et,er,ei)=>!!oj(er)&&((et,er)=>{let ei=er.selection.getRng(),es=et?Li.fromRangeEnd(ei):Li.fromRangeStart(ei);return!!ej(er.selection.getSel().modify)&&(et&&qr(es)?Jx(!0,er.selection,es):!(et||!Wr(es))&&Jx(!1,er.selection,es))})(et,er),zk=et=>{let er=Da(null),ei=O(rh,et);return et.on("NodeChange",es=>{oj(et)&&(((et,er,ei)=>{let es=V(Fo(pn(er.getRoot()),'*[data-mce-selected="inline-boundary"]'),et=>et.dom),ed=G(es,et),ec=G(ei,et);q(re(ed,ec),O(Lk,!1)),q(re(ec,ed),O(Lk,!0))})(ei,et.dom,es.parents),((et,er)=>{let ei=er.get();if(et.selection.isCollapsed()&&!et.composing&&ei){let es=Li.fromRangeStart(et.selection.getRng());!Li.isTextPosition(es)||qr(es)||Wr(es)||(Pk(et,pc(ei,es)),er.set(null))}})(et,er),((et,er,ei,es)=>{if(er.selection.isCollapsed()){let ed=G(es,et);q(ed,es=>{let ed=Li.fromRangeStart(er.selection.getRng());Vx(et,er.getBody(),ed).bind(et=>Mk(er,ei,et))})}})(ei,et,er,es.parents))}),er},dq=O(Uk,!0),dz=O(Uk,!1),$k=(et,er,ei)=>{if(oj(et)){let es=Bk(et,er).getOrThunk(()=>{let ei=et.selection.getRng();return er?Li.fromRangeEnd(ei):Li.fromRangeStart(ei)});return Vx(O(rh,et),et.getBody(),es).exists(er=>{let es=Kx(er);return Dx(ei,es).exists(er=>(Pk(et,er),!0))})}return!1},Vk=(et,er)=>ei=>Dx(er,ei).map(er=>()=>Pk(et,er)),qk=(et,er,ei,es)=>{let ed=et.getBody(),ec=O(rh,et);et.undoManager.ignore(()=>{et.selection.setRng(((et,er)=>{let ei=document.createRange();return ei.setStart(et.container(),et.offset()),ei.setEnd(er.container(),er.offset()),ei})(ei,es)),uh(et),Vx(ec,ed,Li.fromRangeStart(et.selection.getRng())).map(Gx).bind(Vk(et,er)).each(P)}),et.nodeChanged()},Wk=(et,er,ei)=>{if(et.selection.isCollapsed()&&oj(et)){let es=Li.fromRangeStart(et.selection.getRng());return((et,er,ei,es)=>{var ed;let ec=(ed=et.getBody(),Fc(es.container(),ed)||ed),eu=O(rh,et),ef=Vx(eu,ec,es);return ef.bind(et=>ei?et.fold(N(I.some(Gx(et))),I.none,N(I.some(Kx(et))),I.none):et.fold(I.none,N(I.some(Kx(et))),I.none,N(I.some(Gx(et))))).map(Vk(et,er)).getOrThunk(()=>{let ed=gu(ei,ec,es),ep=ed.bind(et=>Vx(eu,ec,et));return Mt(ef,ep,()=>ah(eu,ec,es).bind(er=>Mt(a6(er),a9(er),(et,ei)=>{let es=ih(!0,et),ed=ih(!1,ei);return a8(er,es).forall(et=>et.isEqual(ed))}).getOr(!0)?I.some(()=>{nh(et,ei,pn(er))}):I.none())).getOrThunk(()=>ep.bind(()=>ed.map(ed=>()=>{ei?qk(et,er,es,ed):qk(et,er,ed,es)})))})})(et,er,ei,es)}return I.none()},Kk=(et,er)=>{let ei=pn(et.getBody()),es=pn(et.selection.getStart()),ed=pp(es,ei);return Z(ed,er).fold(N(ed),et=>ed.slice(0,et))},Gk=et=>1===zn(et),Yk=(et,er)=>{let ei=O(Lb,et);return te(er,et=>ei(et)?[et.dom]:[])},Xk=et=>{let er=Kk(et,rc);return Yk(et,er)},Qk=(et,er)=>{let ei=G(Kk(et,et=>rc(et)||zn(et)>1),Gk);return de(ei).bind(es=>{let ed=Li.fromRangeStart(et.selection.getRng());return ph(er,ed,es.dom)&&!Mb(es)?I.some(()=>((et,er,ei,es)=>{let ed=Yk(er,es);if(0===ed.length)nh(er,et,ei);else{let et=Pb(ei.dom,ed);er.selection.setRng(et.toRange())}})(er,et,es,ei)):I.none()})},Jk=(et,er)=>{let ei=et.selection.getStart(),es=((et,er)=>{let ei=er.parentElement;return t3(er)&&!eH(ei)&&et.dom.isEmpty(ei)})(et,ei)||Mb(pn(ei))?Pb(ei,er):((et,er)=>{let{caretContainer:ei,caretPosition:es}=Db(er);return et.insertNode(ei.dom),es})(et.selection.getRng(),er);et.selection.setRng(es.toRange())},Zk=et=>tJ(et.startContainer),eE=et=>{let er=et.selection.getRng();return 0===er.startOffset&&Zk(er)&&((et,er)=>{let ei=er.startContainer.parentElement;return!eH(ei)&&Lb(et,pn(ei))})(et,er)&&((et=>{let er=et.startContainer.parentNode,ei=et.endContainer.parentNode;return!eH(er)&&!eH(ei)&&er.isEqualNode(ei)})(er)&&(et=>{let er=et.endContainer;return et.endOffset===(tJ(er)?er.length:er.childNodes.length)})(er)||!er.endContainer.isEqualNode(er.commonAncestorContainer))},tE=(et,er)=>et.selection.isCollapsed()?Qk(et,er):(et=>{if(eE(et)){let er=Xk(et);return I.some(()=>{uh(et),((et,er)=>{let ei=re(er,Xk(et));ei.length>0&&Jk(et,ei)})(et,er)})}return I.none()})(et),nE=et=>Qn(et,et=>xu(et.dom),rc).isSome(),oE=et=>((et=>{let er=et.selection.getRng();return er.collapsed&&(Zk(er)||et.dom.isEmpty(er.startContainer))&&!nE(pn(et.selection.getStart()))})(et)&&Jk(et,[]),!0),rE=(et,er,ei)=>C(ei)?I.some(()=>{et._selectionOverrides.hideFakeCaret(),nh(et,er,pn(ei))}):I.none(),sE=(et,er)=>et.selection.isCollapsed()?((et,er)=>{let ei=er?lY:lX,es=er?iX.Forwards:iX.Backwards,ed=Gc(es,et.getBody(),et.selection.getRng());return ei(ed)?rE(et,er,ed.getNode(!er)):I.from(ih(er,ed)).filter(et=>ei(et)&&Qc(ed,et)).bind(ei=>rE(et,er,ei.getNode(!er)))})(et,er):((et,er)=>{let ei=et.selection.getNode();return t7(ei)?rE(et,er,ei):I.none()})(et,er),aE=et=>Xe(null!=et?et:"").getOr(0),iE=(et,er)=>(et||"table"===Ht(er)?"margin":"padding")+("rtl"===lo(er,"direction")?"-right":"-left"),lE=et=>{let er=cE(et);return!et.mode.isReadOnly()&&(er.length>1||ne(er,er=>{let ei=iE(of(et),er),es=uo(er,ei).map(aE).getOr(0);return"false"!==et.dom.getContentEditable(er.dom)&&es>0}))},dE=et=>ry(et)||rw(et),cE=et=>G(ko(et.selection.getSelectedBlocks()),et=>!dE(et)&&!An(et).exists(dE)&&Jn(et,et=>t5(et.dom)||t6(et.dom)).exists(et=>t5(et.dom))),uE=(et,er)=>{var ei,es;let{dom:ed}=et,ec=oh(et),eu=null!==(es=null===(ei=/[a-z%]+$/i.exec(ec))||void 0===ei?void 0:ei[0])&&void 0!==es?es:"px",ef=aE(ec),ep=of(et);q(cE(et),et=>{((et,er,ei,es,ed,ec)=>{let eu=iE(ei,pn(ec)),ef=aE(et.getStyle(ec,eu));if("outdent"===er){let er=Math.max(0,ef-es);et.setStyle(ec,eu,er?er+ed:"")}else{let er=ef+es+ed;et.setStyle(ec,eu,er)}})(ed,er,ep,ef,eu,et.dom)})},mE=et=>uE(et,"outdent"),fE=et=>{if(et.selection.isCollapsed()&&lE(et)){let er=et.dom,ei=et.selection.getRng(),es=Li.fromRangeStart(ei),ed=er.getParent(ei.startContainer,er.isBlock);if(null!==ed&&l1(pn(ed),es))return I.some(()=>mE(et))}return I.none()},gE=(et,er,ei)=>ue([fE,xx,gx,(et,ei)=>Wk(et,er,ei),rx,Hh,kx,sE,ix,tE],er=>er(et,ei)).filter(er=>et.selection.isEditable()),pE=(et,er)=>{et.addCommand("delete",()=>{((et,er)=>{gE(et,er,!1).fold(()=>{uh(et),gh(et)},P)})(et,er)}),et.addCommand("forwardDelete",()=>{((et,er)=>{gE(et,er,!0).fold(()=>ch(et,"ForwardDelete"),P)})(et,er)})},hE=et=>void 0===et.touches||1!==et.touches.length?I.none():I.some(et.touches[0]),bE=(et,er)=>ke(et,er.nodeName),vE=(et,er)=>!!tJ(er)||!!tY(er)&&!bE(et.getBlockElements(),er)&&!Lu(er)&&!As(et,er),yE=(et,er)=>!!(tJ(er)&&(0===er.data.length||/^\s+$/.test(er.data)&&(!er.nextSibling||bE(et,er.nextSibling)))),CE=et=>et.dom.create(nJ(et),nZ(et)),wE=et=>{let er=et.dom,ei=et.selection,es=et.schema,ed=es.getBlockElements(),ec=ei.getStart(),eu=et.getBody(),ef,ep,ev=!1,ey=nJ(et);if(!ec||!tY(ec))return;let eS=eu.nodeName.toLowerCase();if(!es.isValidChild(eS,ey.toLowerCase())||$(gp(pn(ec),pn(eu)),et=>bE(ed,et.dom)))return;let eI=ei.getRng(),{startContainer:eL,startOffset:eB,endContainer:eD,endOffset:eF}=eI,eP=xg(et),eM=eu.firstChild;for(;eM;)if(tY(eM)&&Ss(es,eM),vE(es,eM)){if(yE(ed,eM)){ep=eM,eM=eM.nextSibling,er.remove(ep);continue}ef||(ef=CE(et),eu.insertBefore(ef,eM),ev=!0),ep=eM,eM=eM.nextSibling,ef.appendChild(ep)}else ef=null,eM=eM.nextSibling;ev&&eP&&(eI.setStart(eL,eB),eI.setEnd(eD,eF),ei.setRng(eI),et.nodeChanged())},xE=(et,er,ei)=>{let es=pn(CE(et)),ed=Dr();bo(es,ed),ei(er,es);let ec=document.createRange();return ec.setStartBefore(ed.dom),ec.setEndBefore(ed.dom),ec},kE=et=>er=>-1!==(" "+er.attr("class")+" ").indexOf(et),EE=(et,er,ei)=>function(es){let ed=arguments,ec=ed[ed.length-2],eu=ec>0?er.charAt(ec-1):"";if('"'===eu)return es;if(">"===eu){let et=er.lastIndexOf("<",ec);if(-1!==et&&-1!==er.substring(et,ec).indexOf('contenteditable="false"'))return es}return'<span class="'+ei+'" data-mce-content="'+et.dom.encode(ed[0])+'">'+et.dom.encode("string"==typeof ed[1]?ed[1]:ed[0])+"</span>"},SE=(et,er)=>{er.hasAttribute("data-mce-caret")&&(Yr(er),et.selection.setRng(et.selection.getRng()),et.selection.scrollIntoView(er))},_E=(et,er)=>{let ei=eo(pn(et.getBody()),"*[data-mce-caret]").map(et=>et.dom).getOrNull();if(ei)return"compositionstart"===er.type?(er.preventDefault(),er.stopPropagation(),void SE(et,ei)):void(Vr(ei)&&(SE(et,ei),et.undoManager.add()))},RE=(et,er,ei)=>{let es=du(et.getBody()),ed=O(Xc,1===er?es.next:es.prev);if(ei.collapsed){let es=et.dom.getParent(ei.startContainer,"PRE");if(!es)return;if(!ed(Li.fromRangeStart(ei))){let ei=pn((et=>{let er=et.dom.create(nJ(et));return er.innerHTML='<br data-mce-bogus="1">',er})(et));1===er?po(pn(es),ei):go(pn(es),ei),et.selection.select(ei.dom,!0),et.selection.collapse()}}},AE=(et,er)=>((et,er)=>{let ei=er?iX.Forwards:iX.Backwards,es=et.selection.getRng();return Ok(et,ei,es,lQ,l0,t6).orThunk(()=>(RE(et,ei,es),I.none()))})(et,((et,er)=>{let ei=er?et.getEnd(!0):et.getStart(!0);return sh(ei)?!er:er})(et.selection,er)).exists(er=>(Rk(et,er),!0)),OE=(et,er)=>((et,er)=>{let ei=er?1:-1,es=et.selection.getRng();return Tk(et,ei,es,et=>lQ(et)||lJ(et),et=>l0(et)||lZ(et),t6).orThunk(()=>(RE(et,ei,es),I.none()))})(et,er).exists(er=>(Rk(et,er),!0)),TE=(et,er)=>Dk(et,er,er?l0:lQ),BE=(et,er)=>px(et,!er).map(ei=>{let es=ei.toRange(),ed=et.selection.getRng();return er?es.setStart(ed.startContainer,ed.startOffset):es.setEnd(ed.endContainer,ed.endOffset),es}).exists(er=>(Rk(et,er),!0)),DE=et=>H(["figcaption"],Ht(et)),PE=(et,er)=>!!et.selection.isCollapsed()&&((et,er)=>{let ei=pn(et.getBody()),es=Li.fromRangeStart(et.selection.getRng());return((et,er)=>{let ei=O(En,er);return Jn(pn(et.container()),rc,ei).filter(DE)})(es,ei).exists(()=>{if(er?mk(ei.dom,es):uk(ei.dom,es)){let es=xE(et,ei,er?bo:ho);return et.selection.setRng(es),!0}return!1})})(et,er),LE=(et,er)=>er?I.from(et.dom.getParent(et.selection.getNode(),"details")).map(er=>((et,er)=>{let ei=et.selection.getRng(),es=Li.fromRangeStart(ei);return!(et.getBody().lastChild!==er||!mk(er,es)||(et.execCommand("InsertNewBlockAfter"),0))})(et,er)).getOr(!1):I.from(et.dom.getParent(et.selection.getNode(),"summary")).bind(er=>I.from(et.dom.getParent(er,"details")).map(ei=>((et,er,ei)=>{let es=et.selection.getRng(),ed=Li.fromRangeStart(es);return!(et.getBody().firstChild!==er||!uk(ei,ed)||(et.execCommand("InsertNewBlockBefore"),0))})(et,ei,er))).getOr(!1),dj={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},IE=(et,er)=>er.keyCode===et.keyCode&&er.shiftKey===et.shiftKey&&er.altKey===et.altKey&&er.ctrlKey===et.ctrlKey&&er.metaKey===et.metaKey,FE=(et,...er)=>()=>et.apply(null,er),UE=(et,er)=>J(te(V(et,et=>({...dj,...et})),et=>IE(et,er)?[et]:[]),et=>et.action()),zE=(et,er)=>ue(te(V(et,et=>({...dj,...et})),et=>IE(et,er)?[et]:[]),et=>et.action()),jE=(et,er)=>{let ei=er?iX.Forwards:iX.Backwards,es=et.selection.getRng();return Ok(et,ei,es,lY,lX,t7).exists(er=>(Rk(et,er),!0))},HE=(et,er)=>{let ei=et.selection.getRng();return Tk(et,er?1:-1,ei,lY,lX,t7).exists(er=>(Rk(et,er),!0))},$E=(et,er)=>Dk(et,er,er?lX:lY),d$=al([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),dV={...d$,none:et=>d$.none(et)},WE=(et,er,ei)=>te(Mn(et),et=>xn(et,er)?ei(et)?[et]:[]:WE(et,er,ei)),KE=(et,er)=>to(et,"table",er),GE=(et,er,ei,es,ed=eG)=>{let ec=1===es;if(!ec&&ei<=0)return dV.first(et[0]);if(ec&&ei>=et.length-1)return dV.last(et[et.length-1]);{let ec=ei+es,eu=et[ec];return ed(eu)?dV.middle(er,eu):GE(et,er,ec,es,ed)}},YE=(et,er)=>KE(et,er).bind(er=>{let ei=WE(er,"th,td",eG);return Z(ei,er=>En(et,er)).map(et=>({index:et,all:ei}))}),XE=(et,er,ei,es,ed)=>{let ec=Fo(pn(ei),"td,th,caption").map(et=>et.dom),eu=G(te(ec,er=>{var ei;let es={left:(ei=li(er.getBoundingClientRect())).left- -1,top:ei.top- -1,right:ei.right+-2,bottom:ei.bottom+-2,width:ei.width+-1,height:ei.height+-1};return[{x:es.left,y:et(es),cell:er},{x:es.right,y:et(es),cell:er}]}),et=>er(et,ed));return X(eu,(et,er)=>et.fold(()=>I.some(er),et=>{let ei=Math.sqrt(Math.abs(et.x-es)+Math.abs(et.y-ed)),ec=Math.sqrt(Math.abs(er.x-es)+Math.abs(er.y-ed));return I.some(ec<ei?er:et)}),I.none()).map(et=>et.cell)},dG=O(XE,et=>et.bottom,(et,er)=>et.y<er),dW=O(XE,et=>et.top,(et,er)=>et.y>er),ZE=(et,er,ei)=>{let es=et(er,ei);return(es.breakType!==ey.Wrap||0!==es.positions.length)&&(t3(ei.getNode())||es.breakType!==ey.Br||1!==es.positions.length)?es.breakAt.isNone():!es.breakAt.exists(ei=>et(er,ei).breakAt.isSome())},dK=O(ZE,dD),dY=O(ZE,dF),nS=(et,er,ei,es)=>{let ed=et.selection.getRng(),ec=er?1:-1;return!(!xc()||!((et,er,ei)=>{let es=Li.fromRangeStart(er);return hu(!et,ei).exists(et=>et.isEqual(es))})(er,ed,ei)||(lx(ec,et,ei,!er,!1).each(er=>{Rk(et,er)}),0))},oS=(et,er,ei)=>{let es=((et,er)=>{let ei=er.getNode(et);return Yo(ei)?I.some(ei):I.none()})(!!er,ei),ed=!1===er;es.fold(()=>Rk(et,ei.toRange()),es=>hu(ed,et.getBody()).filter(et=>et.isEqual(ei)).fold(()=>Rk(et,ei.toRange()),ei=>((et,er,ei)=>{er.undoManager.transact(()=>{let es=xE(er,pn(ei),et?po:go);Rk(er,es)})})(er,et,es)))},rS=(et,er,ei,es)=>{let ed=et.selection.getRng(),ec=Li.fromRangeStart(ed),eu=et.getBody();if(!er&&dK(es,ec)){let es=le(ec.getClientRects()).bind(et=>dG(ei,et.left,et.top)).bind(et=>ak(a9(et).map(er=>dD(et,er).positions.concat(er)).getOr([]),ec)).orThunk(()=>le(ec.getClientRects()).bind(et=>sk(dP(eu,Li.before(ei)),et.left))).getOr(Li.before(ei));return oS(et,er,es),!0}if(er&&dY(es,ec)){let es=de(ec.getClientRects()).bind(et=>dW(ei,et.left,et.top)).bind(et=>ak(a6(et).map(er=>[er].concat(dF(et,er).positions)).getOr([]),ec)).orThunk(()=>le(ec.getClientRects()).bind(et=>sk(dM(eu,Li.after(ei)),et.left))).getOr(Li.after(ei));return oS(et,er,es),!0}return!1},sS=(et,er,ei)=>I.from(et.dom.getParent(et.selection.getNode(),"td,th")).bind(es=>I.from(et.dom.getParent(es,"table")).map(ed=>ei(et,er,ed,es))).getOr(!1),aS=(et,er)=>sS(et,er,nS),iS=(et,er)=>sS(et,er,rS),lS=(et,er,ei)=>ei.fold(I.none,I.none,(et,er)=>((et,er)=>{let n=et=>{for(let ei=0;ei<et.childNodes.length;ei++){let es=pn(et.childNodes[ei]);if(er(es))return I.some(es);let ed=n(et.childNodes[ei]);if(ed.isSome())return ed}return I.none()};return n(et.dom)})(er,Og).map(et=>(et=>{let er=lL.exact(et,0,et,0);return wf(er)})(et)),ei=>(et.execCommand("mceTableInsertRowAfter"),dS(et,er,ei))),dS=(et,er,ei)=>lS(et,er,YE(ei,void 0).fold(()=>dV.none(ei),et=>GE(et.all,ei,et.index,1,no))),cS=(et,er,ei)=>lS(et,er,YE(ei,void 0).fold(()=>dV.none(),et=>GE(et.all,ei,et.index,-1,no))),uS=(et,er)=>{let ei=["table","li","dl"],es=pn(et.getBody()),r=et=>{let er=Ht(et);return En(et,es)||H(ei,er)},ed=et.selection.getRng();return((et,er,ei=eV)=>ei(er)?I.none():H(et,Ht(er))?I.some(er):Zn(er,et.join(","),et=>xn(et,"table")||ei(et)))(["td","th"],pn(er?ed.endContainer:ed.startContainer),r).map(ei=>(KE(ei,r).each(er=>{et.model.table.clearSelectedCells(er.dom)}),et.selection.collapse(!er),(er?dS:cS)(et,r,ei).each(er=>{et.selection.setRng(er)}),!0)).getOr(!1)},mS=(et,er)=>({container:et,offset:er}),dX=Oa.DOM,gS=et=>er=>et===er?-1:0,pS=(et,er,ei)=>{if(tJ(et)&&er>=0)return I.some(mS(et,er));{let es=ai(dX);return I.from(es.backwards(et,er,gS(et),ei)).map(et=>mS(et.container,et.container.data.length))}},hS=(et,er,ei)=>{if(!tJ(et))return I.none();let es=et.data;if(er>=0&&er<=es.length)return I.some(mS(et,er));{let es=ai(dX);return I.from(es.backwards(et,er,gS(et),ei)).bind(et=>{let es=et.container.data;return hS(et.container,er+es.length,ei)})}},bS=(et,er,ei)=>{if(!tJ(et))return I.none();let es=et.data;if(er<=es.length)return I.some(mS(et,er));{let ed=ai(dX);return I.from(ed.forwards(et,er,gS(et),ei)).bind(et=>bS(et.container,er-es.length,ei))}},vS=(et,er,ei,es,ed)=>{let ec=ai(et,er=>et.isBlock(er)||H(["BR","IMG","HR","INPUT"],er.nodeName)||"false"===et.getContentEditable(er));return I.from(ec.backwards(er,ei,es,ed))},yS=et=>Fr(et.toString().replace(/\u00A0/g," ")),CS=et=>""!==et&&-1!==" \xa0\f\n\r	\v".indexOf(et),wS=(et,er)=>et.substring(er.length),xS=(et,er,ei,es=0)=>to(pn(er.startContainer),lH).fold(()=>((et,er,ei,es=0)=>{if(!er.collapsed||!tJ(er.startContainer))return I.none();let ed={text:"",offset:0},ec=et.getParent(er.startContainer,et.isBlock)||et.getRoot();return vS(et,er.startContainer,er.startOffset,(et,er,es)=>(ed.text=es+ed.text,ed.offset+=er,((et,er,ei)=>{let es;let ed=ei.charAt(0);for(es=er-1;es>=0;es--){let ec=et.charAt(es);if(CS(ec))return I.none();if(ed===ec&&je(et,ei,es,er))break}return I.some(es)})(ed.text,ed.offset,ei).getOr(er)),ec).bind(et=>{let ed=er.cloneRange();if(ed.setStart(et.container,et.offset),ed.setEnd(er.endContainer,er.endOffset),ed.collapsed)return I.none();let ec=yS(ed);return 0!==ec.lastIndexOf(ei)||wS(ec,ei).length<es?I.none():I.some({text:wS(ec,ei),range:ed,trigger:ei})})})(et,er,ei,es),er=>{let es=et.createRng();es.selectNode(er.dom);let ed=yS(es);return I.some({range:es,text:wS(ed,ei),trigger:ei})}),kS=et=>{if(3===et.nodeType)return mS(et,et.data.length);{let er=et.childNodes;return er.length>0?kS(er[er.length-1]):mS(et,er.length)}},ES=(et,er)=>{let ei=et.childNodes;return ei.length>0&&er<ei.length?ES(ei[er],0):ei.length>0&&1===et.nodeType&&ei.length===er?kS(ei[ei.length-1]):mS(et,er)},SS=(et,er,ei,es={})=>{var ed;let ec=er(),eu=null!==(ed=et.selection.getRng().startContainer.nodeValue)&&void 0!==ed?ed:"",ef=G(ec.lookupByTrigger(ei.trigger),er=>ei.text.length>=er.minChars&&er.matches.getOrThunk(()=>{var er;return er=et.dom,et=>{let ei=ES(et.startContainer,et.startOffset);return!((et,er)=>{var ei;let es=null!==(ei=et.getParent(er.container,et.isBlock))&&void 0!==ei?ei:et.getRoot();return vS(et,er.container,er.offset,(et,er)=>0===er?-1:er,es).filter(et=>{let er=et.container.data.charAt(et.offset-1);return!CS(er)}).isSome()})(er,ei)}})(ei.range,eu,ei.text));if(0===ef.length)return I.none();let ep=Promise.all(V(ef,et=>et.fetch(ei.text,et.maxResults,es).then(er=>({matchText:ei.text,items:er,columns:et.columns,onAction:et.onAction,highlightOn:et.highlightOn}))));return I.some({lookupData:ep,context:ei})};(eu=eI||(eI={}))[eu.Error=0]="Error",eu[eu.Value=1]="Value";let NS=(et,er,ei)=>et.stype===eI.Error?er(et.serror):ei(et.svalue),RS=et=>({stype:eI.Value,svalue:et}),AS=et=>({stype:eI.Error,serror:et}),TS=et=>eM(et)&&eJ(et).length>100?" removed due to size":JSON.stringify(et,null,2),BS=(et,er)=>AS([{path:et,getErrorInfo:er}]),DS=(et,er)=>({extract:(ei,es)=>xe(es,et).fold(()=>BS(ei,()=>'Choice schema did not contain choice key: "'+et+'"'),et=>xe(er,et).fold(()=>BS(ei,()=>'The chosen schema: "'+et+'" did not exist in branches: '+TS(er)),er=>er.extract(ei.concat(["branch: "+et]),es))),toString:()=>"chooseOn("+et+"). Possible values: "+eJ(er)}),PS=et=>(...er)=>{if(0===er.length)throw Error("Can't merge zero objects");let ei={};for(let es=0;es<er.length;es++){let ed=er[es];for(let er in ed)ke(ed,er)&&(ei[er]=et(ei[er],ed[er]))}return ei},dJ=PS((et,er)=>g(et)&&g(er)?dJ(et,er):er),dZ=(PS((et,er)=>er),et=>({tag:"defaultedThunk",process:N(et)})),IS=et=>{var er;let ei=(et=>{let er=[],ei=[];return q(et,et=>{NS(et,et=>ei.push(et),et=>er.push(et))}),{values:er,errors:ei}})(et);return ei.errors.length>0?(er=ei.errors,S(AS,ee)(er)):RS(ei.values)},FS=(et,er,ei)=>{switch(et.tag){case"field":return er(et.key,et.newKey,et.presence,et.prop);case"custom":return ei(et.newKey,et.instantiator)}},US=et=>({extract:(er,ei)=>{var es,ed;return(es=et(ei)).stype===eI.Error?BS(er,N(es.serror)):es},toString:N("val")}),dQ=US(RS),jS=(et,er,ei,es)=>es(xe(et,er).getOrThunk(()=>ei(et))),HS=(et,er,ei,es,ed)=>{var ec;let s=et=>ed.extract(er.concat([es]),et),a=et=>et.fold(()=>RS(I.none()),et=>{var ei;let ec=ed.extract(er.concat([es]),et);return ei=I.some,ec.stype===eI.Value?{stype:eI.Value,svalue:ei(ec.svalue)}:ec});switch(et.tag){case"required":return xe(ei,es).fold(()=>BS(er,()=>'Could not find valid *required* value for "'+es+'" in '+TS(ei)),s);case"defaultedThunk":return jS(ei,es,et.process,s);case"option":return a(xe(ei,es));case"defaultedOptionThunk":return ec=et.process,a(xe(ei,es).map(et=>!0===et?ec(ei):et));case"mergeWithThunk":return jS(ei,es,N({}),er=>{let es=dJ(et.process(ei),er);return s(es)})}},$S=et=>({extract:(er,ei)=>((et,er,ei)=>{let es={},ed=[];for(let ec of ei)FS(ec,(ei,ec,eu,ef)=>{let ep=HS(eu,et,er,ei,ef);NS(ep,et=>{ed.push(...et)},et=>{es[ec]=et})},(et,ei)=>{es[et]=ei(er)});return ed.length>0?AS(ed):RS(es)})(er,ei,et),toString:()=>{let er=V(et,et=>FS(et,(et,er,ei,es)=>et+" -> "+es.toString(),(et,er)=>"state("+et+")"));return"obj{\n"+er.join("\n")+"}"}}),VS=et=>({extract:(er,ei)=>{let es=V(ei,(ei,es)=>et.extract(er.concat(["["+es+"]"]),ei));return IS(es)},toString:()=>"array("+et.toString()+")"}),qS=(et,er,ei)=>{var es;return NS((es=er.extract([et],ei)).stype===eI.Error?{stype:eI.Error,serror:{input:ei,errors:es.serror}}:es,nH.error,nH.value)},WS=(et,er)=>DS(et,pe(er,$S)),d0=N(dQ),GS=(et,er)=>US(ei=>{let es=typeof ei;return et(ei)?RS(ei):AS(`Expected type: ${er} but got: ${es}`)}),d1=GS(e$,"number"),d2=GS(eP,"string"),d3=GS(eq,"boolean"),d8=GS(ej,"function"),ZS=(et,er,ei,es)=>({tag:"field",key:et,newKey:er,presence:ei,prop:es}),e_=(et,er)=>({tag:"custom",newKey:et,instantiator:er}),t_=(et,er)=>ZS(et,et,{tag:"required",process:{}},er),n_=et=>t_(et,d2),o_=et=>t_(et,d8),r_=(et,er)=>ZS(et,et,{tag:"option",process:{}},er),s_=et=>r_(et,d2),a_=(et,er,ei)=>ZS(et,et,dZ(er),ei),i_=(et,er)=>a_(et,er,d1),l_=(et,er,ei)=>{var es;return a_(et,er,(es=et=>H(ei,et)?nH.value(et):nH.error(`Unsupported value: "${et}", choose one of "${ei.join(", ")}".`),US(et=>es(et).fold(AS,RS))))},d_=(et,er)=>a_(et,er,d3),c_=(et,er)=>a_(et,er,d8),d5=n_("type"),d6=o_("fetch"),d9=o_("onAction"),d4=c_("onSetup",()=>E),d7=s_("text"),ce=s_("icon"),ct=s_("tooltip"),cr=s_("label"),cd=d_("active",!1),cc=d_("enabled",!0),cp=d_("primary",!1),x_=et=>a_("type",et,d2),cb=$S([d5,n_("trigger"),i_("minChars",1),ZS(ef="columns",ef,dZ(1),d0()),i_("maxResults",10),r_("matches",d8),d6,d9,a_("highlightOn",[],VS(d2))]),cy=[cc,ct,ce,d7,d4],ck=[cd].concat(cy),cw=[c_("predicate",eV),l_("scope","node",["node","editor"]),l_("position","selection",["node","selection","line"])],cR=cy.concat([x_("contextformbutton"),cp,d9,e_("original",R)]),cI=ck.concat([x_("contextformbutton"),cp,d9,e_("original",R)]),cL=cy.concat([x_("contextformbutton")]),cB=ck.concat([x_("contextformtogglebutton")]),cD=WS("type",{contextformbutton:cR,contextformtogglebutton:cI});$S([x_("contextform"),c_("initValue",N("")),cr,ZS(ep="commands",ep,{tag:"required",process:{}},VS(cD)),r_("launch",WS("type",{contextformbutton:cL,contextformtogglebutton:cB}))].concat(cw));let D_=et=>{let er=et.ui.registry.getAll().popups,ei=pe(er,et=>qS("Autocompleter",cb,{trigger:et.ch,...et}).fold(et=>{throw Error("Errors: \n"+(et=>{let er=et.length>10?et.slice(0,10).concat([{path:[],getErrorInfo:N("... (only showing first ten failures)")}]):et;return V(er,et=>"Failed path: ("+et.path.join(" > ")+")\n"+et.getErrorInfo())})(et.errors).join("\n")+"\n\nInput object: "+TS(et.input))},R)),es=Se(Ce(ei,et=>et.trigger)),ed=we(ei);return{dataset:ei,triggers:es,lookupByTrigger:et=>G(ed,er=>er.trigger===et)}},P_=et=>{let er=za(),ei=Da(!1),es=er.isSet,r=()=>{es()&&((et=>{MC(et).autocompleter.removeDecoration()})(et),(et=>{et.dispatch("AutocompleterEnd")})(et),ei.set(!1),er.clear())},ed=Pe(()=>D_(et)),a=ec=>{er.get().map(er=>xS(et.dom,et.selection.getRng(),er.trigger).bind(er=>SS(et,ed,er,ec))).getOrThunk(()=>((et,er)=>{var ei;let es=er(),ed=et.selection.getRng();return(ei=et.dom,ue(es.triggers,et=>xS(ei,ed,et))).bind(ei=>SS(et,er,ei))})(et,ed)).fold(r,ed=>{var ec;ec=ed.context,es()||(((et,er)=>{MC(et).autocompleter.addDecoration(er)})(et,ec.range),er.set({trigger:ec.trigger,matchLength:ec.text.length})),ed.lookupData.then(es=>{er.get().map(ec=>{let eu=ed.context;ec.trigger===eu.trigger&&(eu.text.length-ec.matchLength>=10?r():(er.set({...ec,matchLength:eu.text.length}),ei.get()?((et,er)=>{et.dispatch("AutocompleterUpdate",er)})(et,{lookupData:es}):(ei.set(!0),((et,er)=>{et.dispatch("AutocompleterStart",er)})(et,{lookupData:es}))))})})})};et.addCommand("mceAutocompleterReload",(et,er)=>{let ei=eM(er)?er.fetchOptions:{};a(ei)}),et.addCommand("mceAutocompleterClose",r),((et,er)=>{let ei=Ha(er.load,50);et.on("keypress compositionend",et=>{27!==et.which&&ei.throttle()}),et.on("keydown",et=>{let es=et.which;8===es?ei.throttle():27===es&&er.cancelIfNecessary()}),et.on("remove",ei.cancel)})(et,{cancelIfNecessary:r,load:a})},cF=xt().browser.isSafari(),M_=et=>Pr(pn(et)),I_=(et,er)=>{var ei;return 0===et.startOffset&&et.endOffset===(null===(ei=er.textContent)||void 0===ei?void 0:ei.length)},F_=(et,er)=>I.from(et.getParent(er.container(),"details")),U_=(et,er)=>F_(et,er).isSome(),z_=(et,er)=>{let ei=er.getNode();ez(ei)||et.selection.setCursorLocation(ei,er.offset())},j_=(et,er,ei)=>{let es=et.dom.getParent(er.container(),"details");if(es&&!es.open){let er=et.dom.select("summary",es)[0];er&&(ei?a6(er):a9(er)).each(er=>z_(et,er))}else z_(et,er)},H_=(et,er,ei)=>{let{dom:es,selection:ed}=et,ec=et.getBody();if("character"===ei){let ei=Li.fromRangeStart(ed.getRng()),eu=es.getParent(ei.container(),es.isBlock),ef=F_(es,ei),ep=eu&&es.isEmpty(eu),ev=eH(null==eu?void 0:eu.previousSibling),ey=eH(null==eu?void 0:eu.nextSibling);return!!(ep&&(er?ey:ev)&&gu(!er,ec,ei).exists(et=>U_(es,et)&&!Lt(ef,F_(es,et))))||gu(er,ec,ei).fold(eV,ei=>{let ed=F_(es,ei);if(U_(es,ei)&&!Lt(ef,ed)){if(er||j_(et,ei,!1),eu&&ep){if(er&&ev||!er&&ey)return!0;j_(et,ei,er),et.dom.remove(eu)}return!0}return!1})}return!1},$_=(et,er,ei,es)=>{let ed=et.selection.getRng(),ec=Li.fromRangeStart(ed),eu=et.getBody();return"selection"===es?((et,er)=>{let ei=er.startSummary.exists(er=>er.contains(et.startContainer)),es=er.startSummary.exists(er=>er.contains(et.endContainer)),ed=er.startDetails.forall(et=>er.endDetails.forall(er=>et!==er));return(ei||es)&&!(ei&&es)||ed})(ed,er):ei?er.startSummary.exists(et=>a9(et).exists(er=>t3(er.getNode())&&a5(et,er).exists(et=>et.isEqual(ec))||er.isEqual(ec)))||er.startDetails.exists(et=>a8(eu,ec).forall(er=>!et.contains(er.container()))):er.startSummary.exists(et=>a6(et).exists(et=>et.isEqual(ec)))||er.startDetails.exists(et=>a5(et,ec).forall(et=>er.startSummary.exists(er=>!er.contains(ec.container())&&er.contains(et.container()))))},V_=(et,er,ei)=>((et,er)=>{let ei=I.from(et.getParent(er.startContainer,"details")),es=I.from(et.getParent(er.endContainer,"details"));if(ei.isSome()||es.isSome()){let er=ei.bind(er=>I.from(et.select("summary",er)[0]));return I.some({startSummary:er,startDetails:ei,endDetails:es})}return I.none()})(et.dom,et.selection.getRng()).fold(()=>H_(et,er,ei),es=>$_(et,es,er,ei)||H_(et,er,ei))||cF&&((et,er,ei)=>{let es=et.selection,ed=es.getNode(),ec=es.getRng(),eu=Li.fromRangeStart(ec);return!!ra(ed)&&("selection"===ei&&I_(ec,ed)||ph(er,eu,ed)?M_(ed):et.undoManager.transact(()=>{let ec=es.getSel(),{anchorNode:eu,anchorOffset:ef,focusNode:ep,focusOffset:ev}=null!=ec?ec:{},c=()=>{C(eu)&&C(ef)&&C(ep)&&C(ev)&&(null==ec||ec.setBaseAndExtent(eu,ef,ep,ev))},u=(et,er)=>{q(et.childNodes,et=>{rm(et)&&er.appendChild(et)})},ey=et.dom.create("span",{"data-mce-bogus":"1"});u(ed,ey),ed.appendChild(ey),c(),"word"!==ei&&"line"!==ei||null==ec||ec.modify("extend",er?"right":"left",ei),!es.isCollapsed()&&I_(es.getRng(),ey)?M_(ed):(et.execCommand(er?"ForwardDelete":"Delete"),eu=null==ec?void 0:ec.anchorNode,ef=null==ec?void 0:ec.anchorOffset,ep=null==ec?void 0:ec.focusNode,ev=null==ec?void 0:ec.focusOffset,u(ey,ed),c()),et.dom.remove(ey)}),!0)})(et,er,ei)?I.some(E):I.none(),q_=et=>(er,ei,es={})=>{let ed=er.getBody(),ec={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:ed,currentTarget:ed,eventPhase:Event.AT_TARGET,originalTarget:ed,explicitOriginalTarget:ed,isTrusted:!1,srcElement:ed,cancelable:!1,preventDefault:E,inputType:ei},eu=fa(new InputEvent(et));return er.dispatch(et,{...eu,...ec,...es})},cP=q_("input"),cM=q_("beforeinput"),cU=xt(),cH=cU.os,cq=cH.isMacOS()||cH.isiOS(),cz=cU.browser.isFirefox(),J_=(et,er)=>{let ei=et.dom,es=et.schema.getMoveCaretBeforeOnEnterElements();if(!er)return;if(/^(LI|DT|DD)$/.test(er.nodeName)){let et=(et=>{for(;et;){if(tY(et)||tJ(et)&&et.data&&/[\r\n\s]/.test(et.data))return et;et=et.nextSibling}return null})(er.firstChild);et&&/^(UL|OL|DL)$/.test(et.nodeName)&&er.insertBefore(ei.doc.createTextNode("\xa0"),er.firstChild)}let ed=ei.createRng();if(er.normalize(),er.hasChildNodes()){let et=new zo(er,er),ei,ec=er;for(;ei=et.current();){if(tJ(ei)){ed.setStart(ei,0),ed.setEnd(ei,0);break}if(es[ei.nodeName.toLowerCase()]){ed.setStartBefore(ei),ed.setEndBefore(ei);break}ec=ei,ei=et.next()}ei||(ed.setStart(ec,0),ed.setEnd(ec,0))}else t3(er)?er.nextSibling&&ei.isBlock(er.nextSibling)?(ed.setStartBefore(er),ed.setEndBefore(er)):(ed.setStartAfter(er),ed.setEndAfter(er)):(ed.setStart(er,0),ed.setEnd(er,0));et.selection.setRng(ed),Zf(et,ed)},Z_=(et,er)=>{let ei=et.getRoot(),es,ed=er;for(;ed!==ei&&ed&&"false"!==et.getContentEditable(ed);){if("true"===et.getContentEditable(ed)){es=ed;break}ed=ed.parentNode}return ed!==ei?es:ei},eN=et=>I.from(et.dom.getParent(et.selection.getStart(!0),et.dom.isBlock)),tN=et=>{et.innerHTML='<br data-mce-bogus="1">'},nN=(et,er)=>{nJ(et).toLowerCase()===er.tagName.toLowerCase()&&((et,er,ei)=>{let es=et.dom;I.from(ei.style).map(es.parseStyle).each(et=>{let ei={...mo(pn(er)),...et};es.setStyles(er,ei)});let ed=I.from(ei.class).map(et=>et.split(/\s+/)),ec=I.from(er.className).map(et=>G(et.split(/\s+/),et=>""!==et));Mt(ed,ec,(et,ei)=>{let ed=G(ei,er=>!H(et,er)),ec=[...et,...ed];es.setAttrib(er,"class",ec.join(" "))});let eu=["style","class"],ef=ye(ei,(et,er)=>!H(eu,er));es.setAttribs(er,ef)})(et,er,nZ(et))},oN=(et,er,ei,es,ed=!0,ec)=>{let eu;let ef=et.dom,ep=et.schema,ev=nJ(et),ey=ei?ei.nodeName.toUpperCase():"",eS=er,eI=ep.getTextInlineElements(),eL=eu=ec||"TABLE"===ey||"HR"===ey?ef.create(ec||ev):ei.cloneNode(!1);if(ed)do if(eI[eS.nodeName]){if(xu(eS)||Lu(eS))continue;let et=eS.cloneNode(!1);ef.setAttrib(et,"id",""),eu.hasChildNodes()?et.appendChild(eu.firstChild):eL=et,eu.appendChild(et)}while((eS=eS.parentNode)&&eS!==es);else ef.setAttrib(eu,"style",null),ef.setAttrib(eu,"class",null);return nN(et,eu),tN(eL),eu},rN=(et,er)=>{let ei=null==et?void 0:et.parentNode;return C(ei)&&ei.nodeName===er},sN=et=>C(et)&&/^(OL|UL|LI)$/.test(et.nodeName),aN=et=>{let er=et.parentNode;return C(er)&&/^(LI|DT|DD)$/.test(er.nodeName)?er:et},iN=(et,er,ei)=>{let es=et[ei?"firstChild":"lastChild"];for(;es&&!tY(es);)es=es[ei?"nextSibling":"previousSibling"];return es===er},lN=(et,er)=>er&&"A"===er.nodeName&&et.isEmpty(er),dN=(et,er)=>et.nodeName===er||et.previousSibling&&et.previousSibling.nodeName===er,cN=(et,er)=>C(er)&&et.isBlock(er)&&!/^(TD|TH|CAPTION|FORM)$/.test(er.nodeName)&&!/^(fixed|absolute)/i.test(er.style.position)&&et.isEditable(er.parentNode)&&"false"!==et.getContentEditable(er),uN=(et,er,ei)=>tJ(er)?et?1===ei&&"\uFEFF"===er.data.charAt(ei-1)?0:ei:ei===er.data.length-1&&"\uFEFF"===er.data.charAt(ei)?er.data.length:ei:ei,cj={insert:(et,er)=>{var ei;let es,ed,ec,eu,ef,ep=!1,ev=et.dom,ey=et.schema.getNonEmptyElements(),eS=et.selection.getRng(),eI=nJ(et),eL=pn(eS.startContainer),eB=In(eL,eS.startOffset),eD=eB.exists(et=>qt(et)&&!no(et)),eF=eS.collapsed&&eD,b=er=>oN(et,ed,ez,eq,n2(et),er),v=et=>{let er;let ei=uN(et,ed,ec);if(tJ(ed)&&(et?ei>0:ei<ed.data.length))return!1;if(ed.parentNode===ez&&ep&&!et||et&&tY(ed)&&ed===ez.firstChild)return!0;if(dN(ed,"TABLE")||dN(ed,"HR"))return ep&&!et||!ep&&et;let es=new zo(ed,ez);for(tJ(ed)&&(et&&0===ei?es.prev():et||ei!==ed.data.length||es.next());er=es.current();){if(tY(er)){if(!er.getAttribute("data-mce-bogus")){let et=er.nodeName.toLowerCase();if(ey[et]&&"br"!==et)return!1}}else if(tJ(er)&&!ds(er.data))return!1;et?es.prev():es.next()}return!0},w=()=>{let er;return er=/^(H[1-6]|PRE|FIGURE)$/.test(eu)&&"HGROUP"!==ej?b(eI):b(),((et,er)=>{let ei=n3(et);return!y(er)&&(eP(ei)?H(tU.explode(ei),er.nodeName.toLowerCase()):ei)})(et,ef)&&cN(ev,ef)&&ev.isEmpty(ez,void 0,{includeZwsp:!0})?er=ev.split(ef,ez):ev.insertAfter(er,ez),J_(et,er),er};Of(ev,eS).each(et=>{eS.setStart(et.startContainer,et.startOffset),eS.setEnd(et.endContainer,et.endOffset)}),ed=eS.startContainer,ec=eS.startOffset;let eM=!(!er||!er.shiftKey),eU=!(!er||!er.ctrlKey);tY(ed)&&ed.hasChildNodes()&&!eF&&(ep=ec>ed.childNodes.length-1,ed=ed.childNodes[Math.min(ec,ed.childNodes.length-1)]||ed,ec=ep&&tJ(ed)?ed.data.length:0);let eq=Z_(ev,ed);if(!eq||((et,er)=>{let ei=et.dom.getParent(er,"ol,ul,dl");return null!==ei&&"false"===et.dom.getContentEditableParent(ei)})(et,ed))return;eM||(ed=((et,er,ei,es,ed)=>{var ec,eu;let ef=et.dom,ep=null!==(ec=Z_(ef,es))&&void 0!==ec?ec:ef.getRoot(),ev=ef.getParent(es,ef.isBlock);if(!ev||!cN(ef,ev)){if(!(ev=ev||ep).hasChildNodes()){let es=ef.create(er);return nN(et,es),ev.appendChild(es),ei.setStart(es,0),ei.setEnd(es,0),es}let ec,ey=es;for(;ey&&ey.parentNode!==ev;)ey=ey.parentNode;for(;ey&&!ef.isBlock(ey);)ec=ey,ey=ey.previousSibling;let eS=null===(eu=null==ec?void 0:ec.parentElement)||void 0===eu?void 0:eu.nodeName;if(ec&&eS&&et.schema.isValidChild(eS,er.toLowerCase())){let eu=ec.parentNode,ep=ef.create(er);for(nN(et,ep),eu.insertBefore(ep,ec),ey=ec;ey&&!ef.isBlock(ey);){let et=ey.nextSibling;ep.appendChild(ey),ey=et}ei.setStart(es,ed),ei.setEnd(es,ed)}}return es})(et,eI,eS,ed,ec));let ez=ev.getParent(ed,ev.isBlock)||ev.getRoot();ef=C(null==ez?void 0:ez.parentNode)?ev.getParent(ez.parentNode,ev.isBlock):null,eu=ez?ez.nodeName.toUpperCase():"";let ej=ef?ef.nodeName.toUpperCase():"";if("LI"!==ej||eU||(ez=ef,ef=ef.parentNode,eu=ej),tY(ef)&&(ei=ez,!eM&&ei.nodeName.toLowerCase()===nJ(et)&&et.dom.isEmpty(ei)&&((er,ei,es)=>{let ed=ei;for(;ed&&ed!==er&&eH(ed.nextSibling);){let er=ed.parentElement;if(!er||!ke(et.schema.getTextBlockElements(),er.nodeName.toLowerCase()))return rr(er);ed=er}return!1})(et.getBody(),ei)))return((et,er,ei)=>{var es,ed,ec;let eu=er(nJ(et)),ef=et.dom.getParent(ei,rr);ef&&(et.dom.insertAfter(eu,ef),J_(et,eu),(null!==(ec=null===(ed=null===(es=ei.parentElement)||void 0===es?void 0:es.childNodes)||void 0===ed?void 0:ed.length)&&void 0!==ec?ec:0)>1&&et.dom.remove(ei))})(et,b,ez);if(/^(LI|DT|DD)$/.test(eu)&&tY(ef)&&ev.isEmpty(ez))return void((et,er,ei,es,ed)=>{var ec,eu,ef;let ep=et.dom,ev=et.selection.getRng(),ey=ei.parentNode;if(ei===et.getBody()||!ey)return;sN(ec=ei)&&sN(ec.parentNode)&&(ed="LI");let eS=er(ed);if(iN(ei,es,!0)&&iN(ei,es,!1)){if(rN(ei,"LI")){let et=aN(ei);ep.insertAfter(eS,et),(null===(ef=(eu=ei).parentNode)||void 0===ef?void 0:ef.firstChild)===eu?ep.remove(et):ep.remove(ei)}else ep.replace(eS,ei)}else if(iN(ei,es,!0))rN(ei,"LI")?(ep.insertAfter(eS,aN(ei)),eS.appendChild(ep.doc.createTextNode(" ")),eS.appendChild(ei)):ey.insertBefore(eS,ei),ep.remove(es);else if(iN(ei,es,!1))ep.insertAfter(eS,aN(ei)),ep.remove(es);else{ei=aN(ei);let et=ev.cloneRange();et.setStartAfter(es),et.setEndAfter(ei);let er=et.extractContents();"LI"===ed&&er.firstChild&&"LI"===er.firstChild.nodeName?(eS=er.firstChild,ep.insertAfter(er,ei)):(ep.insertAfter(er,ei),ep.insertAfter(eS,ei)),ep.remove(es)}J_(et,eS)})(et,b,ef,ez,eI);if(!(eF||ez!==et.getBody()&&cN(ev,ez)))return;let e$=ez.parentNode;if(eF)es=b(eI),eB.fold(()=>{bo(eL,pn(es))},et=>{go(et,pn(es))}),et.selection.setCursorLocation(es,0);else if(jr(ez))es=Yr(ez),ev.isEmpty(ez)&&tN(ez),nN(et,es),J_(et,es);else if(v(!1))es=w();else if(v(!0)&&e$){es=e$.insertBefore(b(),ez);let er=pn(eS.startContainer).dom.hasChildNodes()&&eS.collapsed;J_(et,dN(ez,"HR")||er?es:ez)}else{let er=(et=>{let er=et.cloneRange();return er.setStart(et.startContainer,uN(!0,et.startContainer,et.startOffset)),er.setEnd(et.endContainer,uN(!1,et.endContainer,et.endOffset)),er})(eS).cloneRange();er.setEndAfter(ez);let ei=er.extractContents();q(Io(pn(ei),tj),et=>{let er=et.dom;er.nodeValue=Fr(er.data)}),(et=>{let er=et;do tJ(er)&&(er.data=er.data.replace(/^[\r\n]+/,"")),er=er.firstChild;while(er)})(ei),es=ei.firstChild,ev.insertAfter(ei,ez),((et,er,ei)=>{var es;let ed=[];if(!ei)return;let ec=ei;for(;ec=ec.firstChild;){if(et.isBlock(ec))return;tY(ec)&&!er[ec.nodeName.toLowerCase()]&&ed.push(ec)}let eu=ed.length;for(;eu--;)(!(ec=ed[eu]).hasChildNodes()||ec.firstChild===ec.lastChild&&""===(null===(es=ec.firstChild)||void 0===es?void 0:es.nodeValue)||lN(et,ec))&&et.remove(ec)})(ev,ey,es),((et,er)=>{er.normalize();let ei=er.lastChild;(!ei||tY(ei)&&/^(left|right)$/gi.test(et.getStyle(ei,"float",!0)))&&et.add(er,"br")})(ev,ez),ev.isEmpty(ez)&&tN(ez),es.normalize(),ev.isEmpty(es)?(ev.remove(es),w()):(nN(et,es),J_(et,es))}ev.setAttrib(es,"id",""),et.dispatch("NewBlock",{newBlock:es})},fakeEventName:"insertParagraph"},fN=(et,er,ei)=>{let es=et.dom.createRng();ei?(es.setStartBefore(er),es.setEndBefore(er)):(es.setStartAfter(er),es.setEndAfter(er)),et.selection.setRng(es),Zf(et,es)},gN=(et,er)=>{let ei=bn("br");go(pn(er),ei),et.undoManager.add()},pN=(et,er)=>{hN(et.getBody(),er)||po(pn(er),bn("br"));let ei=bn("br");po(pn(er),ei),fN(et,ei.dom,!1),et.undoManager.add()},hN=(et,er)=>!!t3(Li.after(er).getNode())||a8(et,Li.after(er)).map(et=>t3(et.getNode())).getOr(!1),bN=et=>et&&"A"===et.nodeName&&"href"in et,vN=et=>et.fold(eV,bN,bN,eV),yN=(et,er)=>{er.fold(E,O(gN,et),O(pN,et),E)},c$={insert:(et,er)=>{let ei=(et=>{let er=O(rh,et),ei=Li.fromRangeStart(et.selection.getRng());return Vx(er,et.getBody(),ei).filter(vN)})(et);ei.isSome()?ei.each(O(yN,et)):((et,er)=>{let ei=et.selection,es=et.dom,ed=ei.getRng(),ec,eu=!1;Of(es,ed).each(et=>{ed.setStart(et.startContainer,et.startOffset),ed.setEnd(et.endContainer,et.endOffset)});let ef=ed.startOffset,ep=ed.startContainer;if(tY(ep)&&ep.hasChildNodes()){let et=ef>ep.childNodes.length-1;ep=ep.childNodes[Math.min(ef,ep.childNodes.length-1)]||ep,ef=et&&tJ(ep)?ep.data.length:0}let ev=es.getParent(ep,es.isBlock),ey=ev&&ev.parentNode?es.getParent(ev.parentNode,es.isBlock):null,eS=ey?ey.nodeName.toUpperCase():"",eI=!(!er||!er.ctrlKey);"LI"!==eS||eI||(ev=ey),tJ(ep)&&ef>=ep.data.length&&(((et,er,ei)=>{let es;let ed=new zo(er,ei),ec=et.getNonEmptyElements();for(;es=ed.next();)if(ec[es.nodeName.toLowerCase()]||tJ(es)&&es.length>0)return!0;return!1})(et.schema,ep,ev||es.getRoot())||(ec=es.create("br"),ed.insertNode(ec),ed.setStartAfter(ec),ed.setEndAfter(ec),eu=!0)),ec=es.create("br"),Ii(es,ed,ec),fN(et,ec,eu),et.undoManager.add()})(et,er)},fakeEventName:"insertLineBreak"},wN=(et,er)=>eN(et).filter(et=>er.length>0&&xn(pn(et),er)).isSome(),cV=al([{br:[]},{block:[]},{none:[]}]),kN=(et,er)=>wN(et,n1(et)),EN=et=>(er,ei)=>eN(er).filter(et=>rw(pn(et))).isSome()===et,SN=(et,er)=>(ei,es)=>{let ed=eN(ei).fold(N(""),et=>et.nodeName.toUpperCase())===et.toUpperCase();return ed===er},_N=et=>{let er=Z_(et.dom,et.selection.getStart());return y(er)},NN=et=>SN("pre",et),RN=et=>(er,ei)=>nX(er)===et,AN=(et,er)=>wN(et,n0(et)),ON=(et,er)=>er,TN=et=>{let er=nJ(et),ei=Z_(et.dom,et.selection.getStart());return C(ei)&&et.schema.isValidChild(ei.nodeName,er)},BN=et=>{let er=et.selection.getRng(),ei=pn(er.startContainer),es=In(ei,er.startOffset).map(et=>qt(et)&&!no(et));return er.collapsed&&es.getOr(!0)},DN=(et,er)=>(ei,es)=>X(et,(et,er)=>et&&er(ei,es),!0)?I.some(er):I.none(),PN=(et,er,ei)=>{er.selection.isCollapsed()||(et=>{et.execCommand("delete")})(er),C(ei)&&cM(er,et.fakeEventName).isDefaultPrevented()||(et.insert(er,ei),C(ei)&&cP(er,et.fakeEventName))},LN=(et,er)=>{let n=()=>PN(c$,et,er),o=()=>PN(cj,et,er),ei=Px([DN([kN],cV.none()),DN([NN(!0),_N],cV.none()),DN([SN("summary",!0)],cV.br()),DN([NN(!0),RN(!1),ON],cV.br()),DN([NN(!0),RN(!1)],cV.block()),DN([NN(!0),RN(!0),ON],cV.block()),DN([NN(!0),RN(!0)],cV.br()),DN([EN(!0),ON],cV.br()),DN([EN(!0)],cV.block()),DN([AN],cV.br()),DN([ON],cV.br()),DN([TN],cV.block()),DN([BN],cV.block())],[et,!(!er||!er.shiftKey)]).getOr(cV.none());switch(nQ(et)){case"linebreak":ei.fold(n,n,E);break;case"block":ei.fold(o,o,E);break;case"invert":ei.fold(o,n,E);break;default:ei.fold(n,o,E)}},cG=xt(),cW=cG.os.isiOS()&&cG.browser.isSafari(),FN=(et,er)=>{var ei;er.isDefaultPrevented()||(er.preventDefault(),(ei=et.undoManager).typing&&(ei.typing=!1,ei.add()),et.undoManager.transact(()=>{LN(et,er)}))},cK=xt(),zN=et=>et.stopImmediatePropagation(),jN=et=>et.keyCode===ld.PAGE_UP||et.keyCode===ld.PAGE_DOWN,HN=(et,er,ei)=>{ei&&!et.get()?er.on("NodeChange",zN,!0):!ei&&et.get()&&er.off("NodeChange",zN),et.set(ei)},$N=(et,er)=>{let ei=er.container(),es=er.offset();return tJ(ei)?(ei.insertData(es,et),I.some(Li(ei,es+et.length))):Yc(er).map(ei=>{let es=vn(et);return er.isAtEnd()?po(ei,es):go(ei,es),Li(es.dom,et.length)})},cY=O($N,"\xa0"),cX=O($N," "),WN=et=>er=>{et.selection.setRng(er.toRange()),et.nodeChanged()},KN=et=>{let er=Li.fromRangeStart(et.selection.getRng()),ei=pn(et.getBody());if(et.selection.isCollapsed()){let es=O(rh,et),ed=Li.fromRangeStart(et.selection.getRng());return Vx(es,et.getBody(),ed).bind(et=>et.fold(et=>a5(ei.dom,Li.before(et)),et=>a6(et),et=>a9(et),et=>a8(ei.dom,Li.after(et)))).map(es=>()=>(Mp(ei,es)?cY(er):cX(er)).each(WN(et)))}return I.none()},GN=et=>{var er,ei;return It(tP.browser.isFirefox()&&et.selection.isEditable()&&(er=et.dom,ei=et.selection.getRng().startContainer,er.isEditable(er.getParent(ei,"summary"))),()=>{var er;let ei=pn(et.getBody());et.selection.isCollapsed()||et.getDoc().execCommand("Delete"),(Mp(ei,er=Li.fromRangeStart(et.selection.getRng()))?cY(er):cX(er)).each(WN(et))})},YN=et=>aZ(et)?[{keyCode:ld.TAB,action:FE(uS,et,!0)},{keyCode:ld.TAB,shiftKey:!0,action:FE(uS,et,!1)}]:[],XN=et=>{if(et.addShortcut("Meta+P","","mcePrint"),P_(et),PC(et))return Da(null);{let er,ei;let es=zk(et);return(et=>{et.on("keyup compositionstart",O(_E,et))})(et),((et,er)=>{et.on("keydown",ei=>{ei.isDefaultPrevented()||((et,er,ei)=>{let es=tP.os.isMacOS()||tP.os.isiOS();UE([{keyCode:ld.RIGHT,action:FE(AE,et,!0)},{keyCode:ld.LEFT,action:FE(AE,et,!1)},{keyCode:ld.UP,action:FE(OE,et,!1)},{keyCode:ld.DOWN,action:FE(OE,et,!0)},...es?[{keyCode:ld.UP,action:FE(BE,et,!1),metaKey:!0,shiftKey:!0},{keyCode:ld.DOWN,action:FE(BE,et,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:ld.RIGHT,action:FE(aS,et,!0)},{keyCode:ld.LEFT,action:FE(aS,et,!1)},{keyCode:ld.UP,action:FE(iS,et,!1)},{keyCode:ld.DOWN,action:FE(iS,et,!0)},{keyCode:ld.UP,action:FE(iS,et,!1)},{keyCode:ld.UP,action:FE(LE,et,!1)},{keyCode:ld.DOWN,action:FE(LE,et,!0)},{keyCode:ld.RIGHT,action:FE(jE,et,!0)},{keyCode:ld.LEFT,action:FE(jE,et,!1)},{keyCode:ld.UP,action:FE(HE,et,!1)},{keyCode:ld.DOWN,action:FE(HE,et,!0)},{keyCode:ld.RIGHT,action:FE(Fk,et,er,!0)},{keyCode:ld.LEFT,action:FE(Fk,et,er,!1)},{keyCode:ld.RIGHT,ctrlKey:!es,altKey:es,action:FE(dq,et,er)},{keyCode:ld.LEFT,ctrlKey:!es,altKey:es,action:FE(dz,et,er)},{keyCode:ld.UP,action:FE(PE,et,!1)},{keyCode:ld.DOWN,action:FE(PE,et,!0)}],ei).each(et=>{ei.preventDefault()})})(et,er,ei)})})(et,es),er=!1,et.on("keydown",ei=>{er=ei.keyCode===ld.BACKSPACE,ei.isDefaultPrevented()||((et,er,ei)=>{let es=ei.keyCode===ld.BACKSPACE?"deleteContentBackward":"deleteContentForward",ed=et.selection.isCollapsed(),ec=ed?"character":"selection",a=et=>ed?et?"word":"line":"selection";zE([{keyCode:ld.BACKSPACE,action:FE(fE,et)},{keyCode:ld.BACKSPACE,action:FE(xx,et,!1)},{keyCode:ld.DELETE,action:FE(xx,et,!0)},{keyCode:ld.BACKSPACE,action:FE(gx,et,!1)},{keyCode:ld.DELETE,action:FE(gx,et,!0)},{keyCode:ld.BACKSPACE,action:FE(Wk,et,er,!1)},{keyCode:ld.DELETE,action:FE(Wk,et,er,!0)},{keyCode:ld.BACKSPACE,action:FE(Hh,et,!1)},{keyCode:ld.DELETE,action:FE(Hh,et,!0)},{keyCode:ld.BACKSPACE,action:FE(V_,et,!1,ec)},{keyCode:ld.DELETE,action:FE(V_,et,!0,ec)},...cq?[{keyCode:ld.BACKSPACE,altKey:!0,action:FE(V_,et,!1,a(!0))},{keyCode:ld.DELETE,altKey:!0,action:FE(V_,et,!0,a(!0))},{keyCode:ld.BACKSPACE,metaKey:!0,action:FE(V_,et,!1,a(!1))}]:[{keyCode:ld.BACKSPACE,ctrlKey:!0,action:FE(V_,et,!1,a(!0))},{keyCode:ld.DELETE,ctrlKey:!0,action:FE(V_,et,!0,a(!0))}],{keyCode:ld.BACKSPACE,action:FE(kx,et,!1)},{keyCode:ld.DELETE,action:FE(kx,et,!0)},{keyCode:ld.BACKSPACE,action:FE(sE,et,!1)},{keyCode:ld.DELETE,action:FE(sE,et,!0)},{keyCode:ld.BACKSPACE,action:FE(ix,et,!1)},{keyCode:ld.DELETE,action:FE(ix,et,!0)},{keyCode:ld.BACKSPACE,action:FE(rx,et,!1)},{keyCode:ld.DELETE,action:FE(rx,et,!0)},{keyCode:ld.BACKSPACE,action:FE(tE,et,!1)},{keyCode:ld.DELETE,action:FE(tE,et,!0)}],ei).filter(er=>et.selection.isEditable()).each(er=>{ei.preventDefault(),cM(et,es).isDefaultPrevented()||(er(),cP(et,es))})})(et,es,ei)}),et.on("keyup",ei=>{var es;ei.isDefaultPrevented()||(es=er,UE([{keyCode:ld.BACKSPACE,action:FE(wx,et)},{keyCode:ld.DELETE,action:FE(wx,et)},...cq?[{keyCode:ld.BACKSPACE,altKey:!0,action:FE(oE,et)},{keyCode:ld.DELETE,altKey:!0,action:FE(oE,et)},...es?[{keyCode:cz?224:91,action:FE(oE,et)}]:[]]:[{keyCode:ld.BACKSPACE,ctrlKey:!0,action:FE(oE,et)},{keyCode:ld.DELETE,ctrlKey:!0,action:FE(oE,et)}]],ei)),er=!1}),ei=I.none(),et.on("keydown",er=>{er.keyCode===ld.ENTER&&(cW&&(et=>{if(!et.collapsed)return!1;let er=et.startContainer;if(tJ(er)){let ei=er.data.charAt(et.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(ei)}return!1})(et.selection.getRng())?(ei=I.some(et.selection.getBookmark()),et.undoManager.add()):FN(et,er))}),et.on("keyup",er=>{er.keyCode===ld.ENTER&&ei.each(()=>{et.undoManager.undo(),ei.fold(E,er=>et.selection.moveToBookmark(er)),FN(et,er),ei=I.none()})}),(et=>{et.on("keydown",er=>{er.isDefaultPrevented()||((et,er)=>{zE([{keyCode:ld.SPACEBAR,action:FE(KN,et)},{keyCode:ld.SPACEBAR,action:FE(GN,et)}],er).each(ei=>{er.preventDefault(),cM(et,"insertText",{data:" "}).isDefaultPrevented()||(ei(),cP(et,"insertText",{data:" "}))})})(et,er)})})(et),(et=>{et.on("input",er=>{er.isComposing||(et=>{let er=pn(et.getBody());et.selection.isCollapsed()&&Vp(er,Li.fromRangeStart(et.selection.getRng())).each(er=>{et.selection.setRng(er.toRange())})})(et)})})(et),(et=>{et.on("keydown",er=>{er.isDefaultPrevented()||((et,er)=>{UE([...YN(et)],er).each(et=>{er.preventDefault()})})(et,er)})})(et),((et,er)=>{et.on("keydown",ei=>{ei.isDefaultPrevented()||((et,er,ei)=>{let es=tP.os.isMacOS()||tP.os.isiOS();UE([{keyCode:ld.END,action:FE(TE,et,!0)},{keyCode:ld.HOME,action:FE(TE,et,!1)},...es?[]:[{keyCode:ld.HOME,action:FE(BE,et,!1),ctrlKey:!0,shiftKey:!0},{keyCode:ld.END,action:FE(BE,et,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:ld.END,action:FE($E,et,!0)},{keyCode:ld.HOME,action:FE($E,et,!1)},{keyCode:ld.END,action:FE($k,et,!0,er)},{keyCode:ld.HOME,action:FE($k,et,!1,er)}],ei).each(et=>{ei.preventDefault()})})(et,er,ei)})})(et,es),((et,er)=>{if(cK.os.isMacOS())return;let ei=Da(!1);et.on("keydown",er=>{jN(er)&&HN(ei,et,!0)}),et.on("keyup",es=>{es.isDefaultPrevented()||UE([{keyCode:ld.PAGE_UP,action:FE($k,et,!1,er)},{keyCode:ld.PAGE_DOWN,action:FE($k,et,!0,er)}],es),jN(es)&&ei.get()&&(HN(ei,et,!1),et.nodeChanged())})})(et,es),es}};let QN=class QN{constructor(et){let er;this.lastPath=[],this.editor=et;let ei=this;"onselectionchange"in et.getDoc()||et.on("NodeChange click mouseup keyup focus",ei=>{let es=et.selection.getRng(),ed={startContainer:es.startContainer,startOffset:es.startOffset,endContainer:es.endContainer,endOffset:es.endOffset};"nodechange"!==ei.type&&kf(ed,er)||et.dispatch("SelectionChange"),er=ed}),et.on("contextmenu",()=>{et.dispatch("SelectionChange")}),et.on("SelectionChange",()=>{let er=et.selection.getStart(!0);er&&tm(et)&&!ei.isSameElementPath(er)&&et.dom.isChildOf(er,et.getBody())&&et.nodeChanged({selectionChange:!0})}),et.on("mouseup",er=>{!er.isDefaultPrevented()&&tm(et)&&("IMG"===et.selection.getNode().nodeName?lP.setEditorTimeout(et,()=>{et.nodeChanged()}):et.nodeChanged())})}nodeChanged(et={}){let er;let ei=this.editor.selection;if(this.editor.initialized&&ei&&!o1(this.editor)&&!this.editor.mode.isReadOnly()){let es=this.editor.getBody();(er=ei.getStart(!0)||es).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(er,es)||(er=es);let ed=[];this.editor.dom.getParent(er,et=>et===es||(ed.push(et),!1)),this.editor.dispatch("NodeChange",{...et,element:er,parents:ed})}}isSameElementPath(et){let er;let ei=this.editor,es=oe(ei.dom.getParents(et,eG,ei.getBody()));if(es.length===this.lastPath.length){for(er=es.length;er>=0&&es[er]===this.lastPath[er];er--);if(-1===er)return this.lastPath=es,!0}return this.lastPath=es,!1}};let cJ=ti("image"),cZ=ti("event"),eR=et=>er=>{er[cZ]=et},cQ=eR(0),c0=eR(2),c1=eR(1),rR=et=>I.from(et[cZ]).exists(et=>0===et),c2=ti("mode"),aR=et=>er=>{er[c2]=et},iR=(et,er)=>aR(er)(et),c3=aR(0),c8=aR(2),c5=aR(1),uR=et=>er=>I.from(er[c2]).exists(er=>er===et),c6=uR(0),c9=uR(1),c4=["none","copy","link","move"],c7=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],hR=()=>{let et=new window.DataTransfer,er="move",ei="all",es={get dropEffect(){return er},set dropEffect(e){H(c4,e)&&(er=e)},get effectAllowed(){return ei},set effectAllowed(e){rR(es)&&H(c7,e)&&(ei=e)},get items(){var ed;return{...ed=et.items,get length(){return ed.length},add:(et,er)=>{if(c6(es)){if(!eP(et))return ed.add(et);if(!ez(er))return ed.add(et,er)}return null},remove:et=>{c6(es)&&ed.remove(et)},clear:()=>{c6(es)&&ed.clear()}}},get files(){return c9(es)?Object.freeze({length:0,item:et=>null}):et.files},get types(){return et.types},setDragImage:(er,ei,ed)=>{c6(es)&&(es[cJ]={image:er,x:ei,y:ed},et.setDragImage(er,ei,ed))},getData:er=>c9(es)?"":et.getData(er),setData:(er,ei)=>{c6(es)&&et.setData(er,ei)},clearData:er=>{c6(es)&&et.clearData(er)}};return c3(es),es},bR=(et,er)=>et.setData("text/html",er),ut="x-tinymce/html",ur=N(ut),ud="<!-- "+ut+" -->",wR=et=>ud+et,xR=et=>-1!==et.indexOf(ud),ug="%MCEPASTEBIN%",ER=et=>et.dom.get("mcepastebin"),SR=et=>C(et)&&"mcepastebin"===et.id,_R=et=>et===ug,NR=(et,er)=>(tU.each(er,er=>{et=u(er,RegExp)?et.replace(er,""):et.replace(er[0],er[1])}),et),RR=et=>NR(et,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(et,er,ei)=>er||ei?"\xa0":" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),AR=(et,er)=>({content:et,cancelled:er}),OR=(et,er)=>(et.insertContent(er,{merge:aM(et),paste:!0}),!0),TR=et=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(et),BR=(et,er,ei)=>!(et.selection.isCollapsed()||!TR(er))&&(et.undoManager.extra(()=>{ei(et,er)},()=>{et.execCommand("mceInsertLink",!1,er)}),!0),DR=(et,er,ei)=>!!(TR(er)&&$(sc(et),et=>$e(er.toLowerCase(),`.${et.toLowerCase()}`)))&&(et.undoManager.extra(()=>{ei(et,er)},()=>{et.insertContent('<img src="'+er+'">')}),!0),up=(es=0,()=>"mceclip"+es++),LR=et=>{let er=hR();return bR(er,et),c8(er),er},MR=(et,er,ei,es,ed)=>{let ec=((et,er,ei)=>{let es=et.dispatch("PastePreProcess",{content:er,internal:ei}),ed=((et,er)=>{let ei=tC({sanitize:aX(et)},et.schema);ei.addNodeFilter("meta",et=>{tU.each(et,et=>{et.remove()})});let es=ei.parse(er,{forced_root_block:!1,isRootContent:!0});return Gg({validate:!0},et.schema).serialize(es)})(et,es.content);return et.hasEventListeners("PastePostProcess")&&!es.isDefaultPrevented()?((et,er,ei)=>{let es=et.dom.create("div",{style:"display:none"},er),ed=et.dispatch("PastePostProcess",{node:es,internal:ei});return AR(ed.node.innerHTML,ed.isDefaultPrevented())})(et,ed,ei):AR(ed,es.isDefaultPrevented())})(et,er,ei);if(!ec.cancelled){let er=ec.content,n=()=>{es||!aU(et)?OR(et,er):tU.each([BR,DR,OR],ei=>!ei(et,er,OR))};ed?cM(et,"insertFromPaste",{dataTransfer:LR(er)}).isDefaultPrevented()||(n(),cP(et,"insertFromPaste")):n()}},IR=(et,er,ei,es)=>{let ed=ei||xR(er);MR(et,er.replace(ud,""),ed,!1,es)},FR=(et,er,ei)=>{let es=et.dom.encode(er).replace(/\r\n/g,"\n"),ed=((et,er,ei)=>{let es=et.split(/\n\n/),ed=((et,er)=>{let ei="<"+et,es=Ce(er,(et,er)=>er+'="'+rQ.encodeAllRaw(et)+'"');return es.length&&(ei+=" "+es.join(" ")),ei+">"})(er,ei),ec="</"+er+">",eu=V(es,et=>et.split(/\n/).join("<br />"));return 1===eu.length?eu[0]:V(eu,et=>ed+et+ec).join("")})(ms(es,aq(et)),nJ(et),nZ(et));MR(et,ed,!1,!0,ei)},UR=et=>{let er={};if(et&&et.types)for(let ei=0;ei<et.types.length;ei++){let es=et.types[ei];try{er[es]=et.getData(es)}catch(et){er[es]=""}}return er},zR=(et,er)=>er in et&&et[er].length>0,jR=et=>zR(et,"text/html")||zR(et,"text/plain"),HR=(et,er,ei)=>{let es="paste"===er.type?er.clipboardData:er.dataTransfer;if(aI(et)&&es){let ed=((et,er)=>{let ei=er.items?te(eX(er.items),et=>"file"===et.kind?[et.getAsFile()]:[]):[],es=er.files?eX(er.files):[];return G(ei.length>0?ei:es,(et=>{let er=sc(et);return et=>He(et.type,"image/")&&$(er,er=>(et=>{let er=et.toLowerCase(),ei={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return tU.hasOwn(ei,er)?"image/"+ei[er]:"image/"+er})(er)===et.type)})(et))})(et,es);if(ed.length>0)return er.preventDefault(),Promise.all(V(ed,et=>Bv(et).then(er=>({file:et,uri:er})))).then(er=>{ei&&et.selection.setRng(ei),q(er,er=>{((et,er)=>{Ov(er.uri).each(({data:ei,type:es,base64Encoded:ed})=>{let ec=ed?ei:btoa(ei),eu=er.file,ef=et.editorUpload.blobCache,ep=ef.getByData(ec,es),ev=null!=ep?ep:((et,er,ei,es)=>{let ed=up(),ec=n5(et)&&C(ei.name),eu=ec?((et,er)=>{let ei=er.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return C(ei)?et.dom.encode(ei[1]):void 0})(et,ei.name):ed,ef=ec?ei.name:void 0,ep=er.create(ed,ei,es,eu,ef);return er.add(ep),ep})(et,ef,eu,ec);IR(et,`<img src="${ev.blobUri()}">`,!1,!0)})})(et,er)})}),!0}return!1},$R=(et,er,ei,es,ed)=>{var ec;let eu=RR(ei),ef=zR(er,ur())||xR(ei),ep=!ef&&(ec=eu,!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(ec)),ev=TR(eu);(_R(eu)||!eu.length||ep&&!ev)&&(es=!0),(es||ev)&&(eu=zR(er,"text/plain")&&ep?er["text/plain"]:(et=>{let er=ca(),ei=tC({},er),es="",ed=er.getVoidElements(),ec=tU.makeMap("script noscript style textarea video audio iframe object"," "),eu=er.getBlockElements(),i=et=>{let ei=et.name;if("br"!==ei){if("wbr"!==ei){if(ed[ei]&&(es+=" "),ec[ei])es+=" ";else{if(3===et.type&&(es+=et.value),!(et.name in er.getVoidElements())){let er=et.firstChild;if(er)do i(er);while(er=er.next)}eu[ei]&&et.next&&(es+="\n","p"===ei&&(es+="\n"))}}}else es+="\n"};return et=NR(et,[/<!\[[^\]]+\]>/g]),i(ei.parse(et)),es})(eu)),_R(eu)||(es?FR(et,eu,ed):IR(et,eu,ef,ed))},VR=(et,er,ei)=>{let es;et.on("keydown",et=>{(ld.metaKeyPressed(et)&&86===et.keyCode||et.shiftKey&&45===et.keyCode)&&!et.isDefaultPrevented()&&(es=et.shiftKey&&86===et.keyCode)}),et.on("paste",ed=>{var ec,eu;if(ed.isDefaultPrevented()||tP.os.isAndroid()&&0===(null===(eu=null===(ec=ed.clipboardData)||void 0===ec?void 0:ec.items)||void 0===eu?void 0:eu.length))return;let ef="text"===ei.get()||es;es=!1;let ep=UR(ed.clipboardData);!jR(ep)&&HR(et,ed,er.getLastRng()||et.selection.getRng())||(zR(ep,"text/html")?(ed.preventDefault(),$R(et,ep,ep["text/html"],ef,!0)):zR(ep,"text/plain")&&zR(ep,"text/uri-list")?(ed.preventDefault(),$R(et,ep,ep["text/plain"],ef,!0)):(er.create(),lP.setEditorTimeout(et,()=>{let ei=er.getHtml();er.remove(),$R(et,ep,ei,ef,!1)},0)))}),(et=>{let t=et=>He(et,"webkit-fake-url"),n=et=>He(et,"data:");et.parser.addNodeFilter("img",(er,ei,es)=>{var ed;if(!aI(et)&&!0===(null===(ed=es.data)||void 0===ed?void 0:ed.paste))for(let ei of er){let er=ei.attr("src");eP(er)&&!ei.attr("data-mce-object")&&er!==tP.transparentSrc&&(t(er)||!az(et)&&n(er))&&ei.remove()}})})(et)},qR=(et,er,ei,es)=>{((et,er,ei)=>{if(!et)return!1;try{return et.clearData(),et.setData("text/html",er),et.setData("text/plain",ei),et.setData(ur(),er),!0}catch(et){return!1}})(et.clipboardData,er.html,er.text)?(et.preventDefault(),es()):ei(er.html,es)},WR=et=>(er,ei)=>{let{dom:es,selection:ed}=et,ec=es.create("div",{contenteditable:"false","data-mce-bogus":"all"}),eu=es.create("div",{contenteditable:"true"},er);es.setStyles(ec,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),ec.appendChild(eu),es.add(et.getBody(),ec);let ef=ed.getRng();eu.focus();let ep=es.createRng();ep.selectNodeContents(eu),ed.setRng(ep),lP.setEditorTimeout(et,()=>{ed.setRng(ef),es.remove(ec),ei()},0)},KR=et=>({html:wR(et.selection.getContent({contextual:!0})),text:et.selection.getContent({format:"text"})}),GR=et=>!et.selection.isCollapsed()||!!et.dom.getParent(et.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",et.getBody()),YR=(et,er)=>{var ei,es;return Df.getCaretRangeFromPoint(null!==(ei=er.clientX)&&void 0!==ei?ei:0,null!==(es=er.clientY)&&void 0!==es?es:0,et.getDoc())},XR=(et,er)=>{et.focus(),er&&et.selection.setRng(er)},uw=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,JR=et=>tU.trim(et).replace(uw,Wu).toLowerCase(),ZR=(et,er,ei)=>{let es=aF(et);if(ei||"all"===es||!aP(et))return er;let ed=es?es.split(/[, ]/):[];if(ed&&"none"!==es){let ei=et.dom,es=et.selection.getNode();er=er.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(et,er,ec,eu)=>{let ef=ei.parseStyle(ei.decode(ec)),ep={};for(let et=0;et<ed.length;et++){let er=ef[ed[et]],ec=er,eu=ei.getStyle(es,ed[et],!0);/color/.test(ed[et])&&(ec=JR(ec),eu=JR(eu)),eu!==ec&&(ep[ed[et]]=er)}let ev=ei.serializeStyle(ep,"span");return ev?er+' style="'+ev+'"'+eu:er+eu})}else er=er.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return er=er.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(et,er,ei,es)=>er+' style="'+ei+'"'+es)},eA=et=>{let er=Da(!1),ei=Da(aH(et)?"text":"html"),es=(et=>{let er=Da(null);return{create:()=>((et,er)=>{let{dom:ei,selection:es}=et,ed=et.getBody();er.set(es.getRng());let ec=ei.add(et.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},ug);tP.browser.isFirefox()&&ei.setStyle(ec,"left","rtl"===ei.getStyle(ed,"direction",!0)?65535:-65535),ei.bind(ec,"beforedeactivate focusin focusout",et=>{et.stopPropagation()}),ec.focus(),es.select(ec,!0)})(et,er),remove:()=>((et,er)=>{let ei=et.dom;if(ER(et)){let es;let ed=er.get();for(;es=ER(et);)ei.remove(es),ei.unbind(es);ed&&et.selection.setRng(ed)}er.set(null)})(et,er),getEl:()=>ER(et),getHtml:()=>(et=>{let er=et.dom,n=(et,ei)=>{et.appendChild(ei),er.remove(ei,!0)},[ei,...es]=G(et.getBody().childNodes,SR);q(es,et=>{n(ei,et)});let ed=er.select("div[id=mcepastebin]",ei);for(let et=ed.length-1;et>=0;et--){let es=er.create("div");ei.insertBefore(es,ed[et]),n(es,ed[et])}return ei?ei.innerHTML:""})(et),getLastRng:er.get}})(et);(tP.browser.isChromium()||tP.browser.isSafari())&&((et,er)=>{et.on("PastePreProcess",ei=>{ei.content=er(et,ei.content,ei.internal)})})(et,ZR),et.addCommand("mceTogglePlainTextPaste",()=>{"text"===ei.get()?(ei.set("html"),Zm(et,!1)):(ei.set("text"),Zm(et,!0)),et.focus()}),et.addCommand("mceInsertClipboardContent",(er,ei)=>{ei.html&&IR(et,ei.html,ei.internal,!1),ei.text&&FR(et,ei.text,!1)}),(et=>{let t=er=>ei=>{er(et,ei)},er=aL(et);ej(er)&&et.on("PastePreProcess",t(er));let ei=aB(et);ej(ei)&&et.on("PastePostProcess",t(ei))})(et),et.on("PreInit",()=>{et.on("cut",er=>{!er.isDefaultPrevented()&&GR(et)&&qR(er,KR(et),WR(et),()=>{if(tP.browser.isChromium()||tP.browser.isFirefox()){let er=et.selection.getRng();lP.setEditorTimeout(et,()=>{et.selection.setRng(er),et.execCommand("Delete")},0)}else et.execCommand("Delete")})}),et.on("copy",er=>{!er.isDefaultPrevented()&&GR(et)&&qR(er,KR(et),WR(et),E)}),aO(et)&&et.on("dragend dragover draggesture dragdrop drop drag",et=>{et.preventDefault(),et.stopPropagation()}),aI(et)||et.on("drop",et=>{let er=et.dataTransfer;er&&$(er.files,et=>/^image\//.test(et.type))&&et.preventDefault()}),et.on("drop",ei=>{if(ei.isDefaultPrevented())return;let es=YR(et,ei);if(y(es))return;let ed=UR(ei.dataTransfer),ec=zR(ed,ur());if((!jR(ed)||(et=>{let er=et["text/plain"];return!!er&&0===er.indexOf("file://")})(ed))&&HR(et,ei,es))return;let eu=ed[ur()],ef=eu||ed["text/html"]||ed["text/plain"],ep=((et,er,ei,es)=>{let ed=et.getParent(ei,et=>As(er,et));if(!eH(et.getParent(ei,"summary")))return!0;if(ed&&ke(es,"text/html")){let et=(new DOMParser).parseFromString(es["text/html"],"text/html").body;return!eH(et.querySelector(ed.nodeName.toLowerCase()))}return!1})(et.dom,et.schema,es.startContainer,ed),ev=er.get();ev&&!ep||ef&&(ei.preventDefault(),lP.setEditorTimeout(et,()=>{et.undoManager.transact(()=>{(eu||ev&&ep)&&et.execCommand("Delete"),XR(et,es);let er=RR(ef);ed["text/html"]?IR(et,er,ec,!0):FR(et,er,!0)})}))}),et.on("dragstart",et=>{er.set(!0)}),et.on("dragover dragend",ei=>{aI(et)&&!er.get()&&(ei.preventDefault(),XR(et,YR(et,ei))),"dragend"===ei.type&&er.set(!1)}),(et=>{et.on("input",er=>{if("deleteByDrag"===er.inputType){let er=G(et.dom.select("details"),et=>eH(et.querySelector("summary")));q(er,er=>{t3(er.firstChild)&&er.firstChild.remove();let ei=et.dom.create("summary");ei.appendChild(Dr().dom),er.prepend(ei)})}})})(et),VR(et,es,ei)})},oA=et=>t6(et.dom),rA=et=>er=>En(pn(et),er),sA=(et,er)=>Jn(pn(et),oA,rA(er)),aA=(et,er,ei)=>{let es=new zo(et,er),ed=ei?es.next.bind(es):es.prev.bind(es),ec=et;for(let er=ei?et:ed();er&&!t3(er);er=ed())ss(er)&&(ec=er);return ec},iA=et=>{let er=((et,er)=>{let ei=Li.fromRangeStart(et).getNode(),es=Jn(pn(ei),et=>t5(et.dom)||rc(et),rA(er)).getOr(pn(er)).dom,ed=aA(ei,es,!1),ec=aA(ei,es,!0),eu=document.createRange();return sA(ed,es).fold(()=>{tJ(ed)?eu.setStart(ed,0):eu.setStartBefore(ed)},et=>eu.setStartBefore(et.dom)),sA(ec,es).fold(()=>{tJ(ec)?eu.setEnd(ec,ec.data.length):eu.setEndAfter(ec)},et=>eu.setEndAfter(et.dom)),eu})(et.selection.getRng(),et.getBody());et.selection.setRng(ob(er))};(ev=eL||(eL={})).Before="before",ev.After="after";let dA=(et,er)=>Math.abs(et.left-er),cA=(et,er)=>Math.abs(et.right-er),uA=(et,er)=>X(G(et,et=>er>=et.top&&er<=et.bottom),(et,er)=>et.fold(()=>I.some(er),et=>{let ei=Math.min(er.left,et.left),es=Math.min(er.top,et.top),ed=Math.max(er.right,et.right),ec=Math.max(er.bottom,et.bottom);return I.some({top:es,right:ed,bottom:ec,left:ei,width:ed-ei,height:ec-es})}),I.none()).fold(()=>[[],et],er=>{let{pass:ei,fail:es}=K(et,et=>((et,er)=>{let ei=Math.max(0,Math.min(et.bottom,er.bottom)-Math.max(et.top,er.top))/Math.min(et.height,er.height);return et.top<er.bottom&&et.bottom>er.top&&ei>.5})(et,er));return[ei,es]}),mA=(et,er,ei)=>er>et.left&&er<et.right?0:Math.min(Math.abs(et.left-er),Math.abs(et.right-er)),fA=(et,er,ei)=>{let o=et=>ss(et.node)?I.some(et):tY(et.node)?fA(eX(et.node.childNodes),er,ei):I.none(),r=(et,es)=>{let ed=ae(et,(et,ed)=>es(et,er,ei)-es(ed,er,ei));return((et,es)=>{if(et.length>=2){let ed=o(et[0]).getOr(et[0]),ec=o(et[1]).getOr(et[1]);if(2>Math.abs(es(ed,er,ei)-es(ec,er,ei))){if(tJ(ed.node))return I.some(ed);if(tJ(ec.node))return I.some(ec)}}return I.none()})(ed,es).orThunk(()=>ue(ed,o))},[es,ed]=uA(Ck(et),ei),{pass:ec,fail:eu}=K(ed,et=>et.top<ei);return r(es,mA).orThunk(()=>r(eu,fi)).orThunk(()=>r(ec,fi))},gA=(et,er,ei)=>((et,er,ei)=>{let es=pn(et),ed=Nn(es),ec=Cn(ed,er,ei).filter(et=>Sn(es,et)).getOr(es);return((et,er,ei,es)=>{let r=(er,ed)=>{let ec=G(er.dom.childNodes,T(et=>tY(et)&&et.classList.contains("mce-drag-container")));return ed.fold(()=>fA(ec,ei,es),et=>{let er=G(ec,er=>er!==et.dom);return fA(er,ei,es)}).orThunk(()=>(En(er,et)?I.none():On(er)).bind(et=>r(et,I.some(er))))};return r(er,I.none())})(es,ec,er,ei)})(et,er,ei).filter(et=>Ec(et.node)).map(et=>({node:et.node,position:dA(et,er)<cA(et,er)?eL.Before:eL.After})),pA=et=>{var er,ei;let es=et.getBoundingClientRect(),ed=et.ownerDocument,ec=ed.documentElement,eu=ed.defaultView;return{top:es.top+(null!==(er=null==eu?void 0:eu.scrollY)&&void 0!==er?er:0)-ec.clientTop,left:es.left+(null!==(ei=null==eu?void 0:eu.scrollX)&&void 0!==ei?ei:0)-ec.clientLeft}},hA=et=>({target:et,srcElement:et}),bA=(et,er,ei,es)=>{let ed=((et,er)=>{let ei=(et=>{let er=hR(),ei=I.from(et[c2]);return c8(et),cQ(er),er.dropEffect=et.dropEffect,er.effectAllowed=et.effectAllowed,I.from(et[cJ]).each(et=>er.setDragImage(et.image,et.x,et.y)),q(et.types,ei=>{"Files"!==ei&&er.setData(ei,et.getData(ei))}),q(et.files,et=>er.items.add(et)),I.from(et[cZ]).each(et=>{((et,er)=>{eR(er)(et)})(er,et)}),ei.each(ei=>{iR(et,ei),iR(er,ei)}),er})(et);return"dragstart"===er?(cQ(ei),c3(ei)):"drop"===er?(c0(ei),c8(ei)):(c1(ei),c5(ei)),ei})(ei,et);return ez(es)?((et,er,ei)=>{let es=B("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:et,composedPath:es,initEvent:es,preventDefault:E,stopImmediatePropagation:E,stopPropagation:E,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:es,initMouseEvent:es,getModifierState:es,dataTransfer:ei,...hA(er)}})(et,er,ed):{...es,dataTransfer:ed,type:et,...hA(er)}},u_=((...et)=>er=>{for(let ei=0;ei<et.length;ei++)if(et[ei](er))return!0;return!1})(t6,t5),CA=(et,er,ei,es)=>{let ed=et.dom,ec=er.cloneNode(!0);ed.setStyles(ec,{width:ei,height:es}),ed.setAttrib(ec,"data-mce-selected",null);let eu=ed.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return ed.setStyles(eu,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:ei,height:es}),ed.setStyles(ec,{margin:0,boxSizing:"border-box"}),eu.appendChild(ec),eu},wA=(et,er)=>ei=>()=>{let es="left"===et?ei.scrollX:ei.scrollY;ei.scroll({[et]:es+er,behavior:"smooth"})},uI=wA("left",-32),uL=wA("left",32),uB=wA("top",-32),uD=wA("top",32),_A=et=>{et&&et.parentNode&&et.parentNode.removeChild(et)},NA=(et,er,ei,es,ed)=>{"dragstart"===er&&bR(es,et.dom.getOuterHTML(ei));let ec=bA(er,ei,es,ed);return et.dispatch(er,ec)},RA=(et,er)=>{let ei=ja((et,ei)=>{er._selectionOverrides.hideFakeCaret(),gA(er.getBody(),et,ei).fold(()=>er.selection.placeCaretAt(et,ei),es=>{let ed=er._selectionOverrides.showCaret(1,es.node,es.position===eL.Before,!1);ed?er.selection.setRng(ed):er.selection.placeCaretAt(et,ei)})},0);return er.on("remove",ei.cancel),es=>et.on(ed=>{var ec,eu,ef,ep,ev,ey;let eS=Math.max(Math.abs(es.screenX-ed.screenX),Math.abs(es.screenY-ed.screenY));if(!ed.dragging&&eS>10){let et=NA(er,"dragstart",ed.element,ed.dataTransfer,es);if(C(et.dataTransfer)&&(ed.dataTransfer=et.dataTransfer),et.isDefaultPrevented())return;ed.dragging=!0,er.focus()}if(ed.dragging){let eS=es.currentTarget===er.getDoc().documentElement,eI=(ef=er.inline?pA(er.getBody()):{left:0,top:0},ep=(et=>{let er=et.getBody();return et.inline?{left:er.scrollLeft,top:er.scrollTop}:{left:0,top:0}})(er),{pageX:(ey={pageX:(ev=((et,er)=>{if(er.target.ownerDocument!==et.getDoc()){let ei=pA(et.getContentAreaContainer()),es=(et=>{let er=et.getBody(),ei=et.getDoc().documentElement,es={left:er.scrollLeft,top:er.scrollTop},ed={left:er.scrollLeft||ei.scrollLeft,top:er.scrollTop||ei.scrollTop};return et.inline?es:ed})(et);return{left:er.pageX-ei.left+es.left,top:er.pageY-ei.top+es.top}}return{left:er.pageX,top:er.pageY}})(er,es)).left-ef.left+ep.left,pageY:ev.top-ef.top+ep.top}).pageX-ed.relX,pageY:ey.pageY+5});ec=ed.ghost,eu=er.getBody(),ec.parentNode!==eu&&eu.appendChild(ec),((et,er,ei,es,ed,ec,eu,ef,ep,ev,ey,eS)=>{let eI=0,eL=0;et.style.left=er.pageX+"px",et.style.top=er.pageY+"px",er.pageX+ei>ed&&(eI=er.pageX+ei-ed),er.pageY+es>ec&&(eL=er.pageY+es-ec),et.style.width=ei-eI+"px",et.style.height=es-eL+"px";let eB=ep.clientHeight,eD=ep.clientWidth,eF=eu+ep.getBoundingClientRect().top,eP=ef+ep.getBoundingClientRect().left;ey.on(et=>{et.intervalId.clear(),et.dragging&&eS&&(eu+8>=eB?et.intervalId.set(uD(ev)):eu-8<=0?et.intervalId.set(uB(ev)):ef+8>=eD?et.intervalId.set(uL(ev)):ef-8<=0?et.intervalId.set(uI(ev)):eF+16>=window.innerHeight?et.intervalId.set(uD(window)):eF-16<=0?et.intervalId.set(uB(window)):eP+16>=window.innerWidth?et.intervalId.set(uL(window)):eP-16<=0&&et.intervalId.set(uI(window)))})})(ed.ghost,eI,ed.width,ed.height,ed.maxX,ed.maxY,es.clientY,es.clientX,er.getContentAreaContainer(),er.getWin(),et,eS),ei.throttle(es.clientX,es.clientY)}})},AA=(et,er,ei)=>{et.on(et=>{et.intervalId.clear(),et.dragging&&ei.fold(()=>NA(er,"dragend",et.element,et.dataTransfer),ei=>NA(er,"dragend",et.element,et.dataTransfer,ei))}),OA(et)},OA=et=>{et.on(et=>{et.intervalId.clear(),_A(et.ghost)}),et.clear()},TA=et=>{let er=za(),ei=Oa.DOM,es=document,ed=RA(er,et),i=ei=>AA(er,et,I.some(ei));et.on("mousedown",ei=>{var es,ed;if(0===ei.button){let ec=J(et.dom.getParents(ei.target),u_).getOr(null);if(C(ec)&&(es=et.dom,ed=et.getBody(),t6(ec)&&ec!==ed&&es.isEditable(ec.parentElement))){let es=et.dom.getPos(ec),ed=et.getBody(),eu=et.getDoc().documentElement;er.set({element:ec,dataTransfer:hR(),dragging:!1,screenX:ei.screenX,screenY:ei.screenY,maxX:(et.inline?ed.scrollWidth:eu.offsetWidth)-2,maxY:(et.inline?ed.scrollHeight:eu.offsetHeight)-2,relX:ei.pageX-es.x,relY:ei.pageY-es.y,width:ec.offsetWidth,height:ec.offsetHeight,ghost:CA(et,ec,ec.offsetWidth,ec.offsetHeight),intervalId:Ua(100)})}}}),et.on("mousemove",ed),et.on("mouseup",ei=>{er.on(er=>{var es,ed,ec;if(er.intervalId.clear(),er.dragging){if(ed=(et=>{let er=et.getSel();if(C(er)){let et=er.getRangeAt(0).startContainer;return tJ(et)?et.parentNode:et}return null})(et.selection),ec=er.element,!y(ed)&&ed!==ec&&!et.dom.isChildOf(ed,ec)&&et.dom.isEditable(ed)){let ed=null!==(es=et.getDoc().elementFromPoint(ei.clientX,ei.clientY))&&void 0!==es?es:et.getBody();NA(et,"drop",ed,er.dataTransfer,ei).isDefaultPrevented()||et.undoManager.transact(()=>{((et,er)=>{let ei=et.getParent(er.parentNode,et.isBlock);_A(er),ei&&ei!==et.getRoot()&&et.isEmpty(ei)&&Pr(pn(ei))})(et.dom,er.element),(et=>{let er=et.getData("text/html");return""===er?I.none():I.some(er)})(er.dataTransfer).each(er=>et.insertContent(er)),et._selectionOverrides.hideFakeCaret()})}NA(et,"dragend",et.getBody(),er.dataTransfer,ei)}}),OA(er)}),ei.bind(es,"mousemove",ed),ei.bind(es,"mouseup",i),et.on("remove",()=>{ei.unbind(es,"mousemove",ed),ei.unbind(es,"mouseup",i)}),et.on("keydown",ei=>{ei.keyCode===ld.ESC&&AA(er,et,I.none())})},DA=(et,er)=>$h(et.getBody(),er),PA=et=>{let er;let ei=et.selection,es=et.dom,ed=et.getBody(),ec=wc(et,ed,es.isBlock,()=>xg(et)),eu="sel-"+es.uniqueId(),ef="data-mce-selected",l=et=>et!==ed&&(t6(et)||t7(et))&&es.isChildOf(et,ed)&&es.isEditable(et.parentNode),d=(er,es,ed,eu=!0)=>et.dispatch("ShowCaret",{target:es,direction:er,before:ed}).isDefaultPrevented()?null:(eu&&ei.scrollIntoView(es,-1===er),ec.show(ed,es)),c=et=>$r(et)||Kr(et)||Gr(et),u=et=>c(et.startContainer)||c(et.endContainer),m=er=>{let ei=et.schema.getVoidElements(),ed=es.createRng(),ec=er.startContainer,eu=er.startOffset,ef=er.endContainer,ep=er.endOffset;return ke(ei,ec.nodeName.toLowerCase())?0===eu?ed.setStartBefore(ec):ed.setStartAfter(ec):ed.setStart(ec,eu),ke(ei,ef.nodeName.toLowerCase())?0===ep?ed.setEndBefore(ef):ed.setEndAfter(ef):ed.setEnd(ef,ep),ed},f=(ec,ep)=>{if(!ec)return null;if(ec.collapsed){if(!u(ec)){let et=ep?1:-1,er=Gc(et,ed,ec),ei=er.getNode(!ep);if(C(ei)){if(Ec(ei))return d(et,ei,!!ep&&!er.isAtEnd(),!1);if(Hr(ei)&&t6(ei.nextSibling)){let et=es.createRng();return et.setStart(ei,0),et.setEnd(ei,0),et}}let eu=er.getNode(ep);if(C(eu)){if(Ec(eu))return d(et,eu,!ep&&!er.isAtEnd(),!1);if(Hr(eu)&&t6(eu.previousSibling)){let et=es.createRng();return et.setStart(eu,1),et.setEnd(eu,1),et}}}return null}let ev=ec.startContainer,ey=ec.startOffset,eS=ec.endOffset;if(tJ(ev)&&0===ey&&t6(ev.parentNode)&&(ev=ev.parentNode,ey=es.nodeIndex(ev),ev=ev.parentNode),!tY(ev))return null;if(eS===ey+1&&ev===ec.endContainer){let ed=ev.childNodes[ey];if(l(ed))return(ed=>{let ec=ed.cloneNode(!0),ep=et.dispatch("ObjectSelected",{target:ed,targetClone:ec});if(ep.isDefaultPrevented())return null;let ev=((er,ed)=>{let ec=pn(et.getBody()),ef=et.getDoc(),ep=eo(ec,"#"+eu).getOrThunk(()=>{let et=hn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',ef);return Jt(et,"id",eu),bo(ec,et),et}),ev=es.createRng();Co(ep),yo(ep,[vn("\xa0",ef),pn(ed),vn("\xa0",ef)]),ev.setStart(ep.dom.firstChild,1),ev.setEnd(ep.dom.lastChild,0),io(ep,{top:es.getPos(er,et.getBody()).y+"px"}),eg(ep);let ey=ei.getSel();return ey&&(ey.removeAllRanges(),ey.addRange(ev)),ev})(ed,ep.targetClone),ey=pn(ed);return q(Fo(pn(et.getBody()),`*[${ef}]`),et=>{En(ey,et)||on(et,ef)}),es.getAttrib(ed,ef)||ed.setAttribute(ef,"1"),er=ed,p(),ev})(ed)}return null},g=()=>{er&&er.removeAttribute(ef),eo(pn(et.getBody()),"#"+eu).each(wo),er=null},p=()=>{ec.hide()};return PC(et)||(et.on("click",er=>{es.isEditable(er.target)||(er.preventDefault(),et.focus())}),et.on("blur NewBlock",g),et.on("ResizeWindow FullscreenStateChanged",ec.reposition),et.on("tap",er=>{let ei=er.target,es=DA(et,ei);t6(es)?(er.preventDefault(),dx(et,es).each(f)):l(ei)&&dx(et,ei).each(f)},!0),et.on("mousedown",er=>{let ec=er.target;if(ec!==ed&&"HTML"!==ec.nodeName&&!es.isChildOf(ec,ed)||!((et,er,ei)=>{let es=pn(et.getBody()),ed=et.inline?es:pn(Nn(es).dom.documentElement),ec=((et,er,ei,es)=>{let ed=er.dom.getBoundingClientRect();return{x:ei-(et?ed.left+er.dom.clientLeft+s7(er):0),y:es-(et?ed.top+er.dom.clientTop+s4(er):0)}})(et.inline,ed,er,ei);return((et,er,ei)=>{let es=s6(et),ed=s9(et);return er>=0&&ei>=0&&er<=es&&ei<=ed})(ed,ec.x,ec.y)})(et,er.clientX,er.clientY))return;g(),p();let eu=DA(et,ec);t6(eu)?(er.preventDefault(),dx(et,eu).each(f)):gA(ed,er.clientX,er.clientY).each(es=>{var ed;er.preventDefault(),(ed=d(1,es.node,es.position===eL.Before,!1))&&ei.setRng(ed),tY(eu)?eu.focus():et.getBody().focus()})}),et.on("keypress",et=>{ld.modifierPressed(et)||t6(ei.getNode())&&et.preventDefault()}),et.on("GetSelectionRange",et=>{let ei=et.range;if(er){if(!er.parentNode)return void(er=null);(ei=ei.cloneRange()).selectNode(er),et.range=ei}}),et.on("SetSelectionRange",et=>{et.range=m(et.range);let er=f(et.range,et.forward);er&&(et.range=er)}),et.on("AfterSetSelectionRange",et=>{let er=et.range,ei=er.startContainer.parentElement;u(er)||tY(ei)&&"mcepastebin"===ei.id||p(),C(ei)&&es.hasClass(ei,"mce-offscreen-selection")||g()}),TA(et),o9(et)&&(et=>{let t=er=>{if(!er.isDefaultPrevented()){let ei=er.dataTransfer;ei&&(H(ei.types,"Files")||ei.files.length>0)&&(er.preventDefault(),"drop"===er.type&&yw(et,"Dropped file type is not supported"))}},n=er=>{hg(et,er.target)&&t(er)},o=()=>{let er=Oa.DOM,ei=et.dom,es=document,ed=et.inline?et.getBody():et.getDoc(),ec=["drop","dragover"];q(ec,et=>{er.bind(es,et,n),ei.bind(ed,et,t)}),et.on("remove",()=>{q(ec,et=>{er.unbind(es,et,n),ei.unbind(ed,et,t)})})};et.on("init",()=>{lP.setEditorTimeout(et,o,0)})})(et),(et=>{let er=ja(()=>{if(!et.removed&&et.getBody().contains(document.activeElement)){let er=et.selection.getRng();if(er.collapsed){let ei=cx(et,er,!1);et.selection.setRng(ei)}}},0);et.on("focus",()=>{er.throttle()}),et.on("blur",()=>{er.cancel()})})(et),(et=>{et.on("init",()=>{et.on("focusin",er=>{let ei=er.target;if(t7(ei)){let er=$h(et.getBody(),ei),es=t6(er)?er:ei;et.selection.getNode()!==es&&dx(et,es).each(er=>et.selection.setRng(er))}})})})(et)),{showCaret:d,showBlockCaretContainer:et=>{et.hasAttribute("data-mce-caret")&&(Yr(et),ei.scrollIntoView(et))},hideFakeCaret:p,destroy:()=>{ec.destroy(),er=null}}},LA=(et,er)=>{let ei=er;for(let er=et.previousSibling;tJ(er);er=er.previousSibling)ei+=er.data.length;return ei},MA=(et,er,ei,es,ed)=>{if(tJ(ei)&&(es<0||es>ei.data.length))return[];let ec=ed&&tJ(ei)?[LA(ei,es)]:[es],eu=ei;for(;eu!==er&&eu.parentNode;)ec.push(et.nodeIndex(eu,ed)),eu=eu.parentNode;return eu===er?ec.reverse():[]},IA=(et,er,ei,es,ed,ec,eu=!1)=>({start:MA(et,er,ei,es,eu),end:MA(et,er,ed,ec,eu)}),FA=(et,er)=>{let ei=er.slice(),es=ei.pop();return e$(es)?X(ei,(et,er)=>et.bind(et=>I.from(et.childNodes[er])),I.some(et)).bind(et=>tJ(et)&&(es<0||es>et.data.length)?I.none():I.some({node:et,offset:es})):I.none()},UA=(et,er)=>FA(et,er.start).bind(({node:ei,offset:es})=>FA(et,er.end).map(({node:et,offset:er})=>{let ed=document.createRange();return ed.setStart(ei,es),ed.setEnd(et,er),ed})),zA=(et,er,ei)=>{if(er&&et.isEmpty(er)&&!ei(er)){let es=er.parentNode;et.remove(er,tJ(er.firstChild)&&ds(er.firstChild.data)),zA(et,es,ei)}},jA=(et,er,ei,es=!0)=>{let ed=er.startContainer.parentNode,ec=er.endContainer.parentNode;er.deleteContents(),es&&!ei(er.startContainer)&&(tJ(er.startContainer)&&0===er.startContainer.data.length&&et.remove(er.startContainer),tJ(er.endContainer)&&0===er.endContainer.data.length&&et.remove(er.endContainer),zA(et,ed,ei),ed!==ec&&zA(et,ec,ei))},HA=(et,er)=>I.from(et.dom.getParent(er.startContainer,et.dom.isBlock)),$A=(et,er,ei)=>{let es=et.dynamicPatternsLookup({text:ei,block:er});return{...et,blockPatterns:cl(es).concat(et.blockPatterns),inlinePatterns:ul(es).concat(et.inlinePatterns)}},VA=(et,er,ei,es)=>{let ed=et.createRng();return ed.setStart(er,0),ed.setEnd(ei,es),ed.toString()},qA=(et,er,ei)=>{((et,er,ei)=>{if(tJ(et)&&0>=et.length)return I.some(mS(et,0));{let er=ai(dX);return I.from(er.forwards(et,0,gS(et),ei)).map(et=>mS(et.container,0))}})(er,0,er).each(es=>{var ed;let ec=es.container;bS(ec,ei.start.length,er).each(ei=>{let es=et.createRng();es.setStart(ec,0),es.setEnd(ei.container,ei.offset),jA(et,es,et=>et===er)});let eu=pn(ec),ef=vr(eu);/^\s[^\s]/.test(ef)&&(ed=ef.slice(1),rs.set(eu,ed))})},WA=(et,er)=>et.create("span",{"data-mce-type":"bookmark",id:er}),KA=(et,er)=>{let ei=et.createRng();return ei.setStartAfter(er.start),ei.setEndBefore(er.end),ei},GA=(et,er,ei)=>{let es=UA(et.getRoot(),ei).getOrDie("Unable to resolve path range"),ed=es.startContainer,ec=es.endContainer,eu=0===es.endOffset?ec:ec.splitText(es.endOffset),ef=0===es.startOffset?ed:ed.splitText(es.startOffset),ep=ef.parentNode;return{prefix:er,end:eu.parentNode.insertBefore(WA(et,er+"-end"),eu),start:ep.insertBefore(WA(et,er+"-start"),ef)}},YA=(et,er,ei)=>{zA(et,et.get(er.prefix+"-end"),ei),zA(et,et.get(er.prefix+"-start"),ei)},XA=et=>0===et.start.length,QA=(et,er,ei,es)=>{let ed=er.start;return vS(et,es.container,es.offset,(et,er)=>{let ei=et.data.substring(0,er),es=ei.lastIndexOf(ed.charAt(ed.length-1)),ec=ei.lastIndexOf(ed);return -1!==ec?ec+ed.length:-1!==es?es+1:-1},ei).bind(es=>{var ec,eu;let ef=null!==(eu=null===(ec=ei.textContent)||void 0===ec?void 0:ec.indexOf(ed))&&void 0!==eu?eu:-1;if(-1!==ef&&es.offset>=ef+ed.length){let er=et.createRng();return er.setStart(es.container,es.offset-ed.length),er.setEnd(es.container,es.offset),I.some(er)}{let ec=es.offset-ed.length;return hS(es.container,ec,ei).map(er=>{let ei=et.createRng();return ei.setStart(er.container,er.offset),ei.setEnd(es.container,es.offset),ei}).filter(et=>et.toString()===ed).orThunk(()=>QA(et,er,ei,mS(es.container,0)))}})},JA=(et,er,ei,es)=>{let ed=et.dom,ec=ed.getRoot(),eu=ei.pattern,ef=ei.position.container,ep=ei.position.offset;return hS(ef,ep-ei.pattern.end.length,er).bind(ev=>{let ey=IA(ed,ec,ev.container,ev.offset,ef,ep,es);if(XA(eu))return I.some({matches:[{pattern:eu,startRng:ey,endRng:ey}],position:ev});{let ef=ZA(et,ei.remainingPatterns,ev.container,ev.offset,er,es),ep=ef.getOr({matches:[],position:ev}),eS=ep.position,eI=((et,er,ei,es,ed,ec=!1)=>{if(0===er.start.length&&!ec){let er=et.createRng();return er.setStart(ei,es),er.setEnd(ei,es),I.some(er)}return pS(ei,es,ed).bind(ei=>QA(et,er,ed,ei).bind(et=>{var er;return ec&&(et.endContainer===ei.container&&et.endOffset===ei.offset||0===ei.offset&&(null===(er=et.endContainer.textContent)||void 0===er?void 0:er.length)===et.endOffset)?I.none():I.some(et)}))})(ed,eu,eS.container,eS.offset,er,ef.isNone());return eI.map(et=>{let er=((et,er,ei,es=!1)=>IA(et,er,ei.startContainer,ei.startOffset,ei.endContainer,ei.endOffset,es))(ed,ec,et,es);return{matches:ep.matches.concat([{pattern:eu,startRng:er,endRng:ey}]),position:mS(et.startContainer,et.startOffset)}})}})},ZA=(et,er,ei,es,ed,ec)=>{let eu=et.dom;return pS(ei,es,eu.getRoot()).bind(ef=>{let ep=VA(eu,ed,ei,es);for(let eu=0;eu<er.length;eu++){let ev=er[eu];if(!$e(ep,ev.end))continue;let ey=er.slice();ey.splice(eu,1);let eS=JA(et,ed,{pattern:ev,remainingPatterns:ey,position:ef},ec);if(eS.isNone()&&es>0)return ZA(et,er,ei,es-1,ed,ec);if(eS.isSome())return eS}return I.none()})},eO=(et,er,ei)=>{et.selection.setRng(ei),"inline-format"===er.type?q(er.format,er=>{et.formatter.apply(er)}):et.execCommand(er.cmd,!1,er.value)},tO=(et,er,ei,es,ed,ec)=>((et,er)=>{let ei=ne(et,et=>$(er,er=>et.pattern.start===er.pattern.start&&et.pattern.end===er.pattern.end));return et.length===er.length?ei?et:er:et.length>er.length?et:er})(ZA(et,ed.inlinePatterns,ei,es,er,ec).fold(()=>[],et=>et.matches),ZA(et,ae(ed.inlinePatterns,(et,er)=>er.end.length-et.end.length),ei,es,er,ec).fold(()=>[],et=>et.matches)),nO=(et,er)=>{if(0===er.length)return;let ei=et.dom,es=et.selection.getBookmark(),ed=((et,er)=>{let ei=ti("mce_textpattern"),es=Y(er,(er,es)=>{let ed=GA(et,ei+`_end${er.length}`,es.endRng);return er.concat([{...es,endMarker:ed}])},[]);return Y(es,(er,ed)=>{let ec=es.length-er.length-1,eu=XA(ed.pattern)?ed.endMarker:GA(et,ei+`_start${ec}`,ed.startRng);return er.concat([{...ed,startMarker:eu}])},[])})(ei,er);q(ed,er=>{let es=ei.getParent(er.startMarker.start,ei.isBlock),r=et=>et===es;XA(er.pattern)?((et,er,ei,es)=>{let ed=KA(et.dom,ei);jA(et.dom,ed,es),eO(et,er,ed)})(et,er.pattern,er.endMarker,r):((et,er,ei,es,ed)=>{let ec=et.dom,eu=KA(ec,es),ef=KA(ec,ei);jA(ec,ef,ed),jA(ec,eu,ed);let ep={prefix:ei.prefix,start:ei.end,end:es.start},ev=KA(ec,ep);eO(et,er,ev)})(et,er.pattern,er.startMarker,er.endMarker,r),YA(ei,er.endMarker,r),YA(ei,er.startMarker,r)}),et.selection.moveToBookmark(es)},oO=(et,er)=>{let ei=et.selection.getRng();return HA(et,ei).map(es=>{var ed;let ec=Math.max(0,ei.startOffset),eu=$A(er,es,null!==(ed=es.textContent)&&void 0!==ed?ed:""),ef=tO(et,es,ei.startContainer,ec,eu,!0),ep=((et,er,ei,es)=>{var ed;let ec=et.dom,eu=nJ(et);if(!ec.is(er,eu))return[];let ef=null!==(ed=er.textContent)&&void 0!==ed?ed:"";return((et,er)=>{let ei=ae(et,(et,er)=>er.start.length-et.start.length),es=er.replace("\xa0"," ");return J(ei,et=>0===er.indexOf(et.start)||0===es.indexOf(et.start))})(ei.blockPatterns,ef).map(et=>tU.trim(ef).length===et.start.length?[]:[{pattern:et,range:IA(ec,ec.getRoot(),er,0,er,0,!0)}]).getOr([])})(et,es,eu);return(ep.length>0||ef.length>0)&&(et.undoManager.add(),et.undoManager.extra(()=>{et.execCommand("mceInsertNewLine")},()=>{et.insertContent("\uFEFF"),nO(et,ef),((et,er)=>{if(0===er.length)return;let ei=et.selection.getBookmark();q(er,er=>((et,er)=>{let ei=et.dom,es=er.pattern,ed=UA(ei.getRoot(),er.range).getOrDie("Unable to resolve path range");return HA(et,ed).each(er=>{"block-format"===es.type?((et,er)=>{let ei=er.get(et);return eU(ei)&&le(ei).exists(et=>ke(et,"block"))})(es.format,et.formatter)&&et.undoManager.transact(()=>{qA(et.dom,er,es),et.formatter.apply(es.format)}):"block-command"===es.type&&et.undoManager.transact(()=>{qA(et.dom,er,es),et.execCommand(es.cmd,!1,es.value)})}),!0})(et,er)),et.selection.moveToBookmark(ei)})(et,ep);let er=et.selection.getRng(),ei=pS(er.startContainer,er.startOffset,et.dom.getRoot());et.execCommand("mceInsertNewLine"),ei.each(er=>{let ei=er.container;"\uFEFF"===ei.data.charAt(er.offset-1)&&(ei.deleteData(er.offset-1,1),zA(et.dom,ei.parentNode,er=>er===et.dom.getRoot()))})}),!0)}).getOr(!1)},rO=(et,er,ei)=>{for(let es=0;es<et.length;es++)if(ei(et[es],er))return!0;return!1},sO=et=>{let er=tU.each,ei=ld.BACKSPACE,es=ld.DELETE,ed=et.dom,ec=et.selection,eu=et.parser,ef=tP.browser,ep=ef.isFirefox(),ev=ef.isChromium()||ef.isSafari(),ey=tP.deviceType.isiPhone()||tP.deviceType.isiPad(),eS=tP.os.isMacOS()||tP.os.isiOS(),f=(er,ei)=>{try{et.getDoc().execCommand(er,!1,String(ei))}catch(et){}},g=et=>et.isDefaultPrevented(),p=()=>{et.shortcuts.add("meta+a",null,"SelectAll")},h=()=>{et.inline||ed.bind(et.getDoc(),"mousedown mouseup",er=>{let ei;if(er.target===et.getDoc().documentElement){if(ei=ec.getRng(),et.getBody().focus(),"mousedown"===er.type){if($r(ei.startContainer))return;ec.placeCaretAt(er.clientX,er.clientY)}else ec.setRng(ei)}})},b=()=>{Range.prototype.getClientRects||et.on("mousedown",er=>{if(!g(er)&&"HTML"===er.target.nodeName){let er=et.getBody();er.blur(),lP.setEditorTimeout(et,()=>{er.focus()})}})},v=()=>{let er=at(et);et.on("click",ei=>{let es=ei.target;/^(IMG|HR)$/.test(es.nodeName)&&ed.isEditable(es.parentNode)&&(ei.preventDefault(),et.selection.select(es),et.nodeChanged()),"A"===es.nodeName&&ed.hasClass(es,er)&&0===es.childNodes.length&&ed.isEditable(es.parentNode)&&(ei.preventDefault(),ec.select(es))})},y=()=>{et.on("keydown",et=>{if(!g(et)&&et.keyCode===ei&&ec.isCollapsed()&&0===ec.getRng().startOffset){let er=ec.getNode().previousSibling;if(er&&er.nodeName&&"table"===er.nodeName.toLowerCase())return et.preventDefault(),!1}return!0})},C=()=>{o2(et)||et.on("BeforeExecCommand mousedown",()=>{f("StyleWithCSS",!1),f("enableInlineTableEditing",!1),oB(et)||f("enableObjectResizing",!1)})},w=()=>{et.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},x=()=>{et.inline||et.on("keydown",()=>{document.activeElement===document.body&&et.getWin().focus()})},k=()=>{et.inline||(et.contentStyles.push("body {min-height: 150px}"),et.on("click",er=>{let ei;"HTML"===er.target.nodeName&&(ei=et.selection.getRng(),et.getBody().focus(),et.selection.setRng(ei),et.selection.normalize(),et.nodeChanged())}))},S=()=>{eS&&et.on("keydown",er=>{!ld.metaKeyPressed(er)||er.shiftKey||37!==er.keyCode&&39!==er.keyCode||(er.preventDefault(),et.selection.getSel().modify("move",37===er.keyCode?"backward":"forward","lineboundary"))})},_=()=>{et.on("click",et=>{let er=et.target;do if("A"===er.tagName)return void et.preventDefault();while(er=er.parentNode)}),et.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},N=()=>{et.on("init",()=>{et.dom.bind(et.getBody(),"submit",et=>{et.preventDefault()})})};return PC(et)?(ev&&(h(),v(),N(),p(),ey&&(x(),k(),_())),ep&&(b(),C(),w(),S())):(et.on("keydown",er=>{if(g(er)||er.keyCode!==ld.BACKSPACE)return;let ei=ec.getRng(),es=ei.startContainer,eu=ei.startOffset,ef=ed.getRoot(),ep=es;if(ei.collapsed&&0===eu){for(;ep.parentNode&&ep.parentNode.firstChild===ep&&ep.parentNode!==ef;)ep=ep.parentNode;"BLOCKQUOTE"===ep.nodeName&&(et.formatter.toggle("blockquote",void 0,ep),(ei=ed.createRng()).setStart(es,0),ei.setEnd(es,0),ec.setRng(ei))}}),(()=>{let t=et=>{let er=ed.create("body"),ei=et.cloneContents();return er.appendChild(ei),ec.serializer.serialize(er,{format:"html"})};et.on("keydown",er=>{let ec=er.keyCode;if(!g(er)&&(ec===es||ec===ei)&&et.selection.isEditable()){let ei=et.selection.isCollapsed(),es=et.getBody();if(ei&&(!ed.isEmpty(es)||(et=>{let er=pn(et);return $(Fo(er,'[contenteditable="true"]'),et=>On(et).exists(et=>!no(et)))})(es))||!ei&&!(er=>{let ei=t(er),es=ed.createRng();return es.selectNode(et.getBody()),ei===t(es)})(et.selection.getRng()))return;er.preventDefault(),et.setContent(""),es.firstChild&&ed.isBlock(es.firstChild)?et.selection.setCursorLocation(es.firstChild,0):et.selection.setCursorLocation(es,0),et.nodeChanged()}})})(),tP.windowsPhone||et.on("keyup focusin mouseup",er=>{ld.modifierPressed(er)||(et=>{let er=et.getBody(),ei=et.selection.getRng();return ei.startContainer===ei.endContainer&&ei.startContainer===er&&0===ei.startOffset&&ei.endOffset===er.childNodes.length})(et)||ec.normalize()},!0),ev&&(h(),v(),et.on("init",()=>{f("DefaultParagraphSeparator",nJ(et))}),N(),y(),eu.addNodeFilter("br",et=>{let er=et.length;for(;er--;)"Apple-interchange-newline"===et[er].attr("class")&&et[er].remove()}),ey?(x(),k(),_()):p()),ep&&(et.on("keydown",er=>{if(!g(er)&&er.keyCode===ei&&et.getBody().getElementsByTagName("hr").length&&ec.isCollapsed()&&0===ec.getRng().startOffset){let et=ec.getNode(),ei=et.previousSibling;if("HR"===et.nodeName)return ed.remove(et),void er.preventDefault();ei&&ei.nodeName&&"hr"===ei.nodeName.toLowerCase()&&(ed.remove(ei),er.preventDefault())}}),b(),(()=>{let n=()=>{let ei=ed.getAttribs(ec.getStart().cloneNode(!1));return()=>{let es=ec.getStart();es!==et.getBody()&&(ed.setAttrib(es,"style",null),er(ei,et=>{es.setAttributeNode(et.cloneNode(!0))}))}},o=()=>!ec.isCollapsed()&&ed.getParent(ec.getStart(),ed.isBlock)!==ed.getParent(ec.getEnd(),ed.isBlock);et.on("keypress",er=>{let ei;return!(!(g(er)||8!==er.keyCode&&46!==er.keyCode)&&o()&&(ei=n(),et.getDoc().execCommand("delete",!1),ei(),er.preventDefault(),1))}),ed.bind(et.getDoc(),"cut",er=>{if(!g(er)&&o()){let er=n();lP.setEditorTimeout(et,()=>{er()})}})})(),C(),et.on("SetContent ExecCommand",et=>{"setcontent"!==et.type&&"mceInsertLink"!==et.command||er(ed.select("a:not([data-mce-block])"),et=>{var er;let ei=et.parentNode,es=ed.getRoot();if((null==ei?void 0:ei.lastChild)===et){for(;ei&&!ed.isBlock(ei);){if((null===(er=ei.parentNode)||void 0===er?void 0:er.lastChild)!==ei||ei===es)return;ei=ei.parentNode}ed.add(ei,"br",{"data-mce-bogus":1})}})}),w(),S(),y(),et.on("drop",er=>{var ei;let es=null===(ei=er.dataTransfer)||void 0===ei?void 0:ei.getData("text/html");eP(es)&&/^<img[^>]*>$/.test(es)&&et.dispatch("dragend",new window.DragEvent("dragend",er))}))),{refreshContentEditable:E,isHidden:()=>{if(!ep||et.removed)return!1;let er=et.selection.getSel();return!er||!er.rangeCount||0===er.rangeCount}}},uF=Oa.DOM,iO=et=>et.inline?et.getElement().nodeName.toLowerCase():void 0,lO=et=>ye(et,et=>!1===ez(et)),dO=et=>{let er=et.options.get,ei=et.editorUpload.blobCache;return lO({allow_conditional_comments:er("allow_conditional_comments"),allow_html_data_urls:er("allow_html_data_urls"),allow_svg_data_urls:er("allow_svg_data_urls"),allow_html_in_named_anchor:er("allow_html_in_named_anchor"),allow_script_urls:er("allow_script_urls"),allow_unsafe_link_target:er("allow_unsafe_link_target"),convert_fonts_to_spans:er("convert_fonts_to_spans"),fix_list_elements:er("fix_list_elements"),font_size_legacy_values:er("font_size_legacy_values"),forced_root_block:er("forced_root_block"),forced_root_block_attrs:er("forced_root_block_attrs"),preserve_cdata:er("preserve_cdata"),inline_styles:er("inline_styles"),root_name:iO(et),sanitize:er("xss_sanitization"),validate:!0,blob_cache:ei,document:et.getDoc()})},cO=et=>{let er=et.options.get;return lO({custom_elements:er("custom_elements"),extended_valid_elements:er("extended_valid_elements"),invalid_elements:er("invalid_elements"),invalid_styles:er("invalid_styles"),schema:er("schema"),valid_children:er("valid_children"),valid_classes:er("valid_classes"),valid_elements:er("valid_elements"),valid_styles:er("valid_styles"),verify_html:er("verify_html"),padd_empty_block_inline_children:er("format_empty_lines")})},uO=et=>et.inline?et.ui.styleSheetLoader:et.dom.styleSheetLoader,mO=et=>{let er=uO(et),ei=oI(et),es=et.contentCSS,r=()=>{er.unloadAll(es),et.inline||et.ui.styleSheetLoader.unloadAll(ei)},s=()=>{et.removed?r():et.on("remove",r)};if(et.contentStyles.length>0){let er="";tU.each(et.contentStyles,et=>{er+=et+"\r\n"}),et.dom.addStyle(er)}let ed=Promise.all(((et,er,ei)=>{let es=[uO(et).loadAll(er)];return et.inline?es:es.concat([et.ui.styleSheetLoader.loadAll(ei)])})(et,es,ei)).then(s).catch(s),ec=oR(et);return ec&&((et,er)=>{let ei=pn(et.getBody()),es=qn(tK(ei)),ed=bn("style");Jt(ed,"type","text/css"),bo(ed,vn(er)),bo(es,ed),et.on("remove",()=>{wo(ed)})})(et,ec),ed},fO=et=>{!0!==et.removed&&(PC(et)||et.load({initial:!0,format:"html"}),et.startContent=et.getContent({format:"raw"}),(et=>{et.bindPendingEventDelegates(),et.initialized=!0,(et=>{et.dispatch("Init")})(et),et.focus(!0),(et=>{let er=et.dom.getRoot();et.inline||tm(et)&&et.selection.getStart(!0)!==er||a6(er).each(er=>{let ei=er.getNode(),es=Yo(ei)?a6(ei).getOr(er):er;et.selection.setRng(es.toRange())})})(et),et.nodeChanged({initial:!0});let er=ad(et);ej(er)&&er.call(et,et),(et=>{let er=ap(et);er&&lP.setEditorTimeout(et,()=>{let ei;(ei=!0===er?et:et.editorManager.get(er))&&!ei.destroyed&&(ei.focus(),ei.selection.scrollIntoView())},100)})(et)})(et))},gO=et=>{let er=et.getElement(),ei=et.getDoc();et.inline&&(uF.addClass(er,"mce-content-body"),et.contentDocument=ei=document,et.contentWindow=window,et.bodyElement=er,et.contentAreaContainer=er);let es=et.getBody();es.disabled=!0,et.readonly=o2(et),et._editableRoot=o3(et),!et.readonly&&et.hasEditableRoot()&&(et.inline&&"static"===uF.getStyle(es,"position",!0)&&(es.style.position="relative"),es.contentEditable="true"),es.disabled=!1,et.editorUpload=Ow(et),et.schema=ca(cO(et)),et.dom=Oa(ei,{keep_values:!0,url_converter:et.convertURL,url_converter_scope:et,update_styles:!0,root_element:et.inline?et.getBody():null,collect:et.inline,schema:et.schema,contentCssCors:os(et),referrerPolicy:od(et),onSetAttrib:er=>{et.dispatch("SetAttrib",er)}}),et.parser=(et=>{let er=tC(dO(et),et.schema);return er.addAttributeFilter("src,href,style,tabindex",(er,ei)=>{let es=et.dom,ed="data-mce-"+ei,ec=er.length;for(;ec--;){let eu=er[ec],ef=eu.attr(ei);if(ef&&!eu.attr(ed)){if(0===ef.indexOf("data:")||0===ef.indexOf("blob:"))continue;"style"===ei?((ef=es.serializeStyle(es.parseStyle(ef),eu.name)).length||(ef=null),eu.attr(ed,ef),eu.attr(ei,ef)):"tabindex"===ei?(eu.attr(ed,ef),eu.attr(ei,null)):eu.attr(ed,et.convertURL(ef,ei,eu.name))}}}),er.addNodeFilter("script",et=>{let er=et.length;for(;er--;){let ei=et[er],es=ei.attr("type")||"no/type";0!==es.indexOf("mce-")&&ei.attr("type","mce-"+es)}}),aK(et)&&er.addNodeFilter("#cdata",er=>{var ei;let es=er.length;for(;es--;){let ed=er[es];ed.type=8,ed.name="#comment",ed.value="[CDATA["+et.dom.encode(null!==(ei=ed.value)&&void 0!==ei?ei:"")+"]]"}}),er.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",er=>{let ei=er.length,es=et.schema.getNonEmptyElements();for(;ei--;){let et=er[ei];et.isEmpty(es)&&0===et.getAll("br").length&&et.append(new Fg("br",1))}}),er})(et),et.serializer=qC((et=>{let er=et.options.get;return{...dO(et),...cO(et),...lO({remove_trailing_brs:er("remove_trailing_brs"),pad_empty_with_br:er("pad_empty_with_br"),url_converter:er("url_converter"),url_converter_scope:er("url_converter_scope"),element_format:er("element_format"),entities:er("entities"),entity_encoding:er("entity_encoding"),indent:er("indent"),indent_after:er("indent_after"),indent_before:er("indent_before")})}})(et),et),et.selection=HC(et.dom,et.getWin(),et.serializer,et),et.annotator=qm(et),et.formatter=jw(et),et.undoManager=$w(et),et._nodeChangeDispatcher=new QN(et),et._selectionOverrides=PA(et),(et=>{let er=za(),ei=Da(!1),es=Ha(er=>{et.dispatch("longpress",{...er,type:"longpress"}),ei.set(!0)},400);et.on("touchstart",et=>{hE(et).each(ed=>{es.cancel();let ec={x:ed.clientX,y:ed.clientY,target:et.target};es.throttle(et),ei.set(!1),er.set(ec)})},!0),et.on("touchmove",ed=>{es.cancel(),hE(ed).each(es=>{er.on(ed=>{((et,er)=>{let ei=Math.abs(et.clientX-er.x),es=Math.abs(et.clientY-er.y);return ei>5||es>5})(es,ed)&&(er.clear(),ei.set(!1),et.dispatch("longpresscancel"))})})},!0),et.on("touchend touchcancel",ed=>{es.cancel(),"touchcancel"!==ed.type&&er.get().filter(et=>et.target.isEqualNode(ed.target)).each(()=>{ei.get()?ed.preventDefault():et.dispatch("tap",{...ed,type:"tap"})})},!0)})(et),(et=>{et.on("click",er=>{et.dom.getParent(er.target,"details")&&er.preventDefault()})})(et),et.parser.addNodeFilter("details",er=>{let ei=aQ(et);q(er,et=>{"expanded"===ei?et.attr("open","open"):"collapsed"===ei&&et.attr("open",null)})}),et.serializer.addNodeFilter("details",er=>{let ei=a0(et);q(er,et=>{"expanded"===ei?et.attr("open","open"):"collapsed"===ei&&et.attr("open",null)})}),(et=>{let er="contenteditable",ei=" "+tU.trim(aG(et))+" ",es=" "+tU.trim(aV(et))+" ",ed=kE(ei),ec=kE(es),eu=aW(et);eu.length>0&&et.on("BeforeSetContent",er=>{((et,er,ei)=>{let es=er.length,ed=ei.content;if("raw"!==ei.format){for(;es--;)ed=ed.replace(er[es],EE(et,ed,aV(et)));ei.content=ed}})(et,eu,er)}),et.parser.addAttributeFilter("class",et=>{let ei=et.length;for(;ei--;){let es=et[ei];ed(es)?es.attr(er,"true"):ec(es)&&es.attr(er,"false")}}),et.serializer.addAttributeFilter(er,et=>{let ei=et.length;for(;ei--;){let es=et[ei];(ed(es)||ec(es))&&(eu.length>0&&es.attr("data-mce-content")?(es.name="#text",es.type=3,es.raw=!0,es.value=es.attr("data-mce-content")):es.attr(er,null))}})})(et),PC(et)||((et=>{et.on("mousedown",er=>{er.detail>=3&&(er.preventDefault(),iA(et))})})(et),(et=>{let er=[",",".",";",":","!","?"],ei=[32],o=()=>{var er,ei;return er=aj(et),ei=a$(et),{inlinePatterns:ul(er),blockPatterns:cl(er),dynamicPatternsLookup:ei}},r=()=>et.options.isSet("text_patterns_lookup");et.on("keydown",er=>{if(13===er.keyCode&&!ld.modifierPressed(er)&&et.selection.isCollapsed()){let ei=o();(ei.inlinePatterns.length>0||ei.blockPatterns.length>0||r())&&oO(et,ei)&&er.preventDefault()}},!0);let s=()=>{if(et.selection.isCollapsed()){let er=o();(er.inlinePatterns.length>0||r())&&((et,er)=>{let ei=et.selection.getRng();HA(et,ei).map(es=>{let ed=Math.max(0,ei.startOffset-1),ec=VA(et.dom,es,ei.startContainer,ed),eu=$A(er,es,ec),ef=tO(et,es,ei.startContainer,ed,eu,!1);ef.length>0&&et.undoManager.transact(()=>{nO(et,ef)})})})(et,er)}};et.on("keyup",et=>{rO(ei,et,(et,er)=>et===er.keyCode&&!ld.modifierPressed(er))&&s()}),et.on("keypress",ei=>{rO(er,ei,(et,er)=>et.charCodeAt(0)===er.charCode)&&lP.setEditorTimeout(et,s)})})(et));let ed=XN(et);pE(et,ed),(et=>{et.on("NodeChange",O(wE,et))})(et),(et=>{var er;let ei=et.dom,es=nJ(et),ed=null!==(er=oF(et))&&void 0!==er?er:"",s=(er,ec)=>{if((et=>{if(Ww(et)){let er=et.keyCode;return!Kw(et)&&(ld.metaKeyPressed(et)||et.altKey||er>=112&&er<=123||H(dk,er))}return!1})(er))return;let eu=et.getBody(),ef=(!Ww(er)||!!(Kw(er)||"keyup"===er.type&&229===er.keyCode))&&((et,er,ei)=>{if(bs(pn(er),!1)){let es=er.firstElementChild;return!es||!et.getStyle(er.firstElementChild,"padding-left")&&!et.getStyle(er.firstElementChild,"padding-right")&&ei===es.nodeName.toLowerCase()}return!1})(ei,eu,es);(""!==ei.getAttrib(eu,dR)!==ef||ec)&&(ei.setAttrib(eu,dR,ef?ed:null),ei.setAttrib(eu,"aria-placeholder",ef?ed:null),((et,er)=>{et.dispatch("PlaceholderToggle",{state:er})})(et,ef),et.on(ef?"keydown":"keyup",s),et.off(ef?"keyup":"keydown",s))};Ge(ed)&&et.on("init",er=>{s(er,!0),et.on("change SetContent ExecCommand",s),et.on("paste",er=>lP.setEditorTimeout(et,()=>s(er)))})})(et),eA(et);let ec=xe(et.plugins,"rtc").bind(et=>I.from(et.setup)).fold(()=>(et.rtcInstance=DC(et),I.none()),er=>(et.rtcInstance=(()=>{let et=N(null),er=N("");return{init:{bindEvents:E},undoManager:{beforeChange:E,add:et,undo:et,redo:et,clear:E,reset:E,hasUndo:eV,hasRedo:eV,transact:et,ignore:E,extra:E},formatter:{match:eV,matchAll:N([]),matchNode:N(void 0),canApply:eV,closest:er,apply:E,remove:E,toggle:E,formatChanged:N({unbind:E})},editor:{getContent:er,setContent:N({content:"",html:""}),insertContent:N(""),addVisual:E},selection:{getContent:er},autocompleter:{addDecoration:E,removeDecoration:E},raw:{getModel:N(I.none())}}})(),I.some(()=>er().then(er=>(et.rtcInstance=(et=>{let t=et=>eM(et)?et:{},{init:er,undoManager:ei,formatter:es,editor:ed,selection:ec,autocompleter:eu,raw:ef}=et;return{init:{bindEvents:er.bindEvents},undoManager:{beforeChange:ei.beforeChange,add:ei.add,undo:ei.undo,redo:ei.redo,clear:ei.clear,reset:ei.reset,hasUndo:ei.hasUndo,hasRedo:ei.hasRedo,transact:(et,er,es)=>ei.transact(es),ignore:(et,er)=>ei.ignore(er),extra:(et,er,es,ed)=>ei.extra(es,ed)},formatter:{match:(et,er,ei,ed)=>es.match(et,t(er),ed),matchAll:es.matchAll,matchNode:es.matchNode,canApply:et=>es.canApply(et),closest:et=>es.closest(et),apply:(et,er,ei)=>es.apply(et,t(er)),remove:(et,er,ei,ed)=>es.remove(et,t(er)),toggle:(et,er,ei)=>es.toggle(et,t(er)),formatChanged:(et,er,ei,ed,ec)=>es.formatChanged(er,ei,ed,ec)},editor:{getContent:et=>ed.getContent(et),setContent:(et,er)=>({content:ed.setContent(et,er),html:""}),insertContent:(et,er)=>(ed.insertContent(et),""),addVisual:ed.addVisual},selection:{getContent:(et,er)=>ec.getContent(er)},autocompleter:{addDecoration:eu.addDecoration,removeDecoration:eu.removeDecoration},raw:{getModel:()=>I.some(ef.getRawModel())}}})(er),er.rtc.isRemote)))));(et=>{let er=et.getDoc(),ei=et.getBody();(et=>{et.dispatch("PreInit")})(et),ay(et)||(er.body.spellcheck=!1,uF.setAttrib(ei,"spellcheck","false")),et.quirks=sO(et),(et=>{et.dispatch("PostRender")})(et);let es=oT(et);void 0!==es&&(ei.dir=es);let ed=aw(et);ed&&et.on("BeforeSetContent",et=>{tU.each(ed,er=>{et.content=et.content.replace(er,et=>"<!--mce:protected "+escape(et)+"-->")})}),et.on("SetContent",()=>{et.addVisual(et.getBody())}),et.on("compositionstart compositionend",er=>{et.composing="compositionstart"===er.type})})(et),ec.fold(()=>{let er=(et=>{let er=!1,ei=setTimeout(()=>{er||et.setProgressState(!0)},500);return()=>{clearTimeout(ei),er=!0,et.setProgressState(!1)}})(et);mO(et).then(()=>{fO(et),er()})},er=>{et.setProgressState(!0),mO(et).then(()=>{er().then(er=>{et.setProgressState(!1),fO(et),IC(et)},er=>{et.notificationManager.open({type:"error",text:String(er)}),fO(et),IC(et)})})})},uP=Oa.DOM,uM=Oa.DOM,vO=(et,er)=>({editorContainer:et,iframeContainer:er,api:{}}),yO=et=>{let er=et.getElement();return et.inline?vO(null):(et=>{let er=uM.create("div");return uM.insertAfter(er,et),vO(er,er)})(er)},CO=async et=>{var er;et.dispatch("ScriptsLoaded"),(et=>{let er=tU.trim(n9(et)),ei=et.ui.registry.getAll().icons,es={...s8.get("default").icons,...s8.get(er).icons};ge(es,(er,es)=>{ke(ei,es)||et.ui.registry.addIcon(es,er)})})(et),(et=>{let er=oU(et);if(eP(er)){let ei=dr.get(er);et.theme=ei(et,dr.urls[er])||{},ej(et.theme.init)&&et.theme.init(et,dr.urls[er]||et.documentBaseUrl.replace(/\/$/,""))}else et.theme={}})(et),(et=>{let er=oq(et),ei=s5.get(er);et.model=ei(et,s5.urls[er])})(et),(et=>{let er=[];q(o5(et),ei=>{((et,er,ei)=>{let es=dt.get(ei),ed=dt.urls[ei]||et.documentBaseUrl.replace(/\/$/,"");if(ei=tU.trim(ei),es&&-1===tU.inArray(er,ei)){if(et.plugins[ei])return;try{let ec=es(et,ed)||{};et.plugins[ei]=ec,ej(ec.init)&&(ec.init(et,ed),er.push(ei))}catch(er){((et,er,ei)=>{let es=ns.translate(["Failed to initialize plugin: {0}",er]);Gm(et,"PluginLoadError",{message:es}),xw(es,ei),yw(et,es)})(et,ei,er)}}})(et,er,ei.replace(/^\-/,""))})})(et);let ei=await (et=>{let er=et.getElement();return et.orgDisplay=er.style.display,eP(oU(et))?(et=>{let er=et.theme.renderUI;return er?er():yO(et)})(et):ej(oU(et))?(et=>{let er=et.getElement(),ei=oU(et)(et,er);return ei.editorContainer.nodeType&&(ei.editorContainer.id=ei.editorContainer.id||et.id+"_parent"),ei.iframeContainer&&ei.iframeContainer.nodeType&&(ei.iframeContainer.id=ei.iframeContainer.id||et.id+"_iframecontainer"),ei.height=ei.iframeHeight?ei.iframeHeight:er.offsetHeight,ei})(et):yO(et)})(et);((et,er)=>{let ei={show:I.from(er.show).getOr(E),hide:I.from(er.hide).getOr(E),isEnabled:I.from(er.isEnabled).getOr(eG),setEnabled:ei=>{et.mode.isReadOnly()||I.from(er.setEnabled).each(et=>et(ei))}};et.ui={...et.ui,...ei}})(et,I.from(ei.api).getOr({})),et.editorContainer=ei.editorContainer,et.contentCSS=et.contentCSS.concat(kw(et,oy(et)),kw(et,oI(et))),et.inline?gO(et):(((et,er)=>{let ei=et.translate("Rich Text Area"),es=tn(pn(et.getElement()),"tabindex").bind(Xe),ed=((et,er,ei,es)=>{let ed=bn("iframe");return es.each(et=>Jt(ed,"tabindex",et)),Zt(ed,ei),Zt(ed,{id:et+"_ifr",frameBorder:"0",allowTransparency:"true",title:er}),un(ed,"tox-edit-area__iframe"),ed})(et.id,ei,n$(et),es).dom;ed.onload=()=>{ed.onload=null,et.dispatch("load")},et.contentAreaContainer=er.iframeContainer,et.iframeElement=ed,et.iframeHTML=(et=>{let er=nV(et)+"<html><head>";nG(et)!==et.documentBaseUrl&&(er+='<base href="'+et.documentBaseURI.getURI()+'" />'),er+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';let ei=nW(et),es=nK(et),ed=et.translate(ar(et));return nY(et)&&(er+='<meta http-equiv="Content-Security-Policy" content="'+nY(et)+'" />'),er+=`</head><body id="${ei}" class="mce-content-body ${es}" data-id="${et.id}" aria-label="${ed}"><br></body></html>`})(et),uP.add(er.iframeContainer,ed)})(et,er={editorContainer:ei.editorContainer,iframeContainer:ei.iframeContainer}),er.editorContainer&&(er.editorContainer.style.display=et.orgDisplay,et.hidden=uP.isHidden(er.editorContainer)),et.getElement().style.display="none",uP.setAttrib(et.id,"aria-hidden","true"),et.getElement().style.visibility=et.orgVisibility,(et=>{let er=et.iframeElement,n=()=>{et.contentDocument=er.contentDocument,gO(et)};if(aJ(et)||tP.browser.isFirefox()){let er=et.getDoc();er.open(),er.write(et.iframeHTML),er.close(),n()}else{let ei=_o(pn(er),"load",eG,()=>{ei.unbind(),n()});er.srcdoc=et.iframeHTML}})(et))},uU=Oa.DOM,xO=et=>"-"===et.charAt(0),kO=(et,er,ei)=>I.from(er).filter(et=>Ge(et)&&!s8.has(et)).map(er=>({url:`${et.editorManager.baseURL}/icons/${er}/icons${ei}.js`,name:I.some(er)})),EO=(et,er)=>{let ei=Ba.ScriptLoader,o=()=>{!et.removed&&(et=>{let er=oU(et);return!eP(er)||C(dr.get(er))})(et)&&(et=>{let er=oq(et);return C(s5.get(er))})(et)&&CO(et)};((et,er)=>{let ei=oU(et);if(eP(ei)&&!xO(ei)&&!ke(dr.urls,ei)){let es=oH(et),ed=es?et.documentBaseURI.toAbsolute(es):`themes/${ei}/theme${er}.js`;dr.load(ei,ed).catch(()=>{Cw(et,"ThemeLoadError",ww("theme",ed,ei))})}})(et,er),((et,er)=>{let ei=oq(et);if("plugin"!==ei&&!ke(s5.urls,ei)){let es=oz(et),ed=eP(es)?et.documentBaseURI.toAbsolute(es):`models/${ei}/model${er}.js`;s5.load(ei,ed).catch(()=>{Cw(et,"ModelLoadError",ww("model",ed,ei))})}})(et,er),((et,er)=>{let ei=oc(er),es=ou(er);if(!ns.hasCode(ei)&&"en"!==ei){let ed=Ge(es)?es:`${er.editorManager.baseURL}/langs/${ei}.js`;et.add(ed).catch(()=>{Cw(er,"LanguageLoadError",ww("language",ed,ei))})}})(ei,et),((et,er,ei)=>{let es=kO(er,"default",ei),ed=I.from(n4(er)).filter(Ge).map(et=>({url:et,name:I.none()})).orThunk(()=>kO(er,n9(er),""));q((et=>{let er=[],n=et=>{er.push(et)};for(let er=0;er<et.length;er++)et[er].each(n);return er})([es,ed]),ei=>{et.add(ei.url).catch(()=>{Cw(er,"IconsLoadError",ww("icons",ei.url,ei.name.getOrUndefined()))})})})(ei,et,er),((et,er)=>{let n=(er,ei)=>{dt.load(er,ei).catch(()=>{Cw(et,"PluginLoadError",ww("plugin",ei,er))})};ge(o6(et),(er,ei)=>{n(ei,er),et.options.set("plugins",o5(et).concat(ei))}),q(o5(et),et=>{!(et=tU.trim(et))||dt.urls[et]||xO(et)||n(et,`plugins/${et}/plugin${er}.js`)})})(et,er),ei.loadQueue().then(o,o)},uH=xt().deviceType,uq=uH.isPhone(),uz=uH.isTablet(),RO=et=>{if(y(et))return[];{let er=eU(et)?et:et.split(/[ ,]/),ei=V(er,e1);return G(ei,Ge)}},AO=(et,er)=>{var ei,es;let ed=((er,ei)=>{let es={},ed={};return ve(er,(er,ei)=>H(et,ei),be(es),be(ed)),{t:es,f:ed}})(er);return ei=ed.t,es=ed.f,{sections:N(ei),options:N(es)}},OO=(et,er)=>ke(et.sections(),er),TO=(et,er)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:xe(et,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...er?{menubar:!1}:{}}),BO=(et,er)=>{var ei;let es=null!==(ei=er.external_plugins)&&void 0!==ei?ei:{};return et&&et.external_plugins?tU.extend({},et.external_plugins,es):es},DO=(et,er,ei,es,ed)=>{var ec;let eu=et?{mobile:TO(null!==(ec=ed.mobile)&&void 0!==ec?ec:{},er)}:{},ef=AO(["mobile"],dJ(eu,ed)),ep=tU.extend(ei,es,ef.options(),et&&OO(ef,"mobile")?((et,er,ei={})=>{let es=et.sections(),ed=xe(es,er).getOr({});return tU.extend({},ei,ed)})(ef,"mobile"):{},{external_plugins:BO(es,ef.options())});return((et,er,ei,es)=>{var ed,ec;let eu=RO(ei.forced_plugins),ef=RO(es.plugins),ep=OO(er,ed="mobile")?er.sections()[ed]:{},ev=(ec=ep.plugins?RO(ep.plugins):ef,et&&OO(er,"mobile")?ec:ef),ey=[...RO(eu),...RO(ev)];return tU.extend(es,{forced_plugins:eu,plugins:ey})})(et,ef,es,ep)},PO=et=>{(et=>{let t=er=>()=>{q("left,center,right,justify".split(","),ei=>{er!==ei&&et.formatter.remove("align"+ei)}),"none"!==er&&(et.formatter.toggle("align"+er,void 0),et.nodeChanged())};et.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})})(et),(et=>{let t=er=>()=>{let ei=et.selection,es=ei.isCollapsed()?[et.dom.getParent(ei.getNode(),et.dom.isBlock)]:ei.getSelectedBlocks();return $(es,ei=>C(et.formatter.matchNode(ei,er)))};et.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")})(et)},LO=(et,er)=>{let ei=et.selection,es=et.dom;return/^ | $/.test(er)?((et,er,ei)=>{let es=pn(et.getRoot());return ei=Ip(es,Li.fromRangeStart(er))?ei.replace(/^ /,"&nbsp;"):ei.replace(/^&nbsp;/," "),Fp(es,Li.fromRangeEnd(er))?ei.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):ei.replace(/&nbsp;(<br( \/)?>)?$/," ")})(es,ei.getRng(),er):er},MO=(et,er)=>{if(et.selection.isEditable()){let{content:ei,details:es}=(et=>{if("string"!=typeof et){let er=tU.extend({paste:et.paste,data:{paste:et.paste}},et);return{content:et.content,details:er}}return{content:et,details:{}}})(er);sC(et,{...es,content:LO(et,ei),format:"html",set:!1,selection:!0}).each(er=>{var ei;let ed=(ei=er.content,LC(et).editor.insertContent(ei,es));aC(et,ed,er),et.addVisual()})}},uj={"font-size":"size","font-family":"face"},u$=Xt("font"),UO=et=>(er,ei)=>I.from(ei).map(pn).filter(tz).bind(ei=>{var es;return hb(pn(ei.dom),er=>uo(er,et).orThunk(()=>u$(er)?xe(uj,et).bind(et=>tn(er,et)):I.none()),et=>En(pn(er),et)).or((es=ei.dom,I.from(Oa.DOM.getStyle(es,et,!0))))}).getOr(""),uV=UO("font-size"),uG=S(et=>et.replace(/[\'\"\\]/g,"").replace(/,\s+/g,","),UO("font-family")),HO=et=>a6(et.getBody()).bind(et=>{let er=et.container();return I.from(tJ(er)?er.parentNode:er)}),$O=(et,er)=>{var ei;return ei=_(I.some,er),I.from(et.selection.getRng()).bind(er=>{let ei=et.getBody();return er.startContainer===ei&&0===er.startOffset?I.none():I.from(et.selection.getStart(!0))}).orThunk(O(HO,et)).map(pn).filter(tz).bind(ei)},VO=(et,er)=>{if(/^[0-9.]+$/.test(er)){let ei=parseInt(er,10);if(ei>=1&&ei<=7){let es=tU.explode(et.options.get("font_size_style_values")),ed=tU.explode(et.options.get("font_size_classes"));return ed.length>0?ed[ei-1]||er:es[ei-1]||er}}return er},qO=et=>{let er=et.split(/\s*,\s*/);return V(er,et=>-1===et.indexOf(" ")||He(et,'"')||He(et,"'")?et:`'${et}'`).join(",")},WO=(et,er)=>{let ei=et.dom,es=et.selection.getRng(),ed=er?et.selection.getStart():et.selection.getEnd(),ec=er?es.startContainer:es.endContainer,eu=Z_(ei,ec);if(!eu||!eu.isContentEditable)return;let ef=er?go:po,ep=nJ(et);((et,er,ei,es)=>{let ed=et.dom,s=et=>ed.isBlock(et)&&et.parentElement===ei,ec=s(er)?er:ed.getParent(es,s,ei);return I.from(ec).map(pn)})(et,ed,eu,ec).each(er=>{let ei=oN(et,ec,er.dom,eu,!1,ep);ef(er,pn(ei)),et.selection.setCursorLocation(ei,0),et.dispatch("NewBlock",{newBlock:ei}),cP(et,"insertParagraph")})},KO=et=>{PO(et),(et=>{et.editorCommands.addCommands({"Cut,Copy,Paste":er=>{let ei;let es=et.getDoc();try{es.execCommand(er)}catch(et){ei=!0}if("paste"!==er||es.queryCommandEnabled(er)||(ei=!0),ei||!es.queryCommandSupported(er)){let er=et.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(tP.os.isMacOS()||tP.os.isiOS())&&(er=er.replace(/Ctrl\+/g,"⌘+")),et.notificationManager.open({text:er,type:"error"})}}})})(et),(et=>{et.editorCommands.addCommands({mceAddUndoLevel:()=>{et.undoManager.add()},mceEndUndoLevel:()=>{et.undoManager.add()},Undo:()=>{et.undoManager.undo()},Redo:()=>{et.undoManager.redo()}})})(et),(et=>{et.editorCommands.addCommands({mceSelectNodeDepth:(er,ei,es)=>{let ed=0;et.dom.getParent(et.selection.getNode(),er=>!tY(er)||ed++!==es||(et.selection.select(er),!1),et.getBody())},mceSelectNode:(er,ei,es)=>{et.selection.select(es)},selectAll:()=>{let er=et.dom.getParent(et.selection.getStart(),t5);if(er){let ei=et.dom.createRng();ei.selectNodeContents(er),et.selection.setRng(ei)}}})})(et),(et=>{et.editorCommands.addCommands({mceCleanup:()=>{let er=et.selection.getBookmark();et.setContent(et.getContent()),et.selection.moveToBookmark(er)},insertImage:(er,ei,es)=>{MO(et,et.dom.createHTML("img",{src:es}))},insertHorizontalRule:()=>{et.execCommand("mceInsertContent",!1,"<hr>")},insertText:(er,ei,es)=>{MO(et,et.dom.encode(es))},insertHTML:(er,ei,es)=>{MO(et,es)},mceInsertContent:(er,ei,es)=>{MO(et,es)},mceSetContent:(er,ei,es)=>{et.setContent(es)},mceReplaceContent:(er,ei,es)=>{et.execCommand("mceInsertContent",!1,es.replace(/\{\$selection\}/g,et.selection.getContent({format:"text"})))},mceNewDocument:()=>{et.setContent(aD(et))}})})(et),(et=>{let t=(er,ei,es)=>{let ed=eP(es)?{href:es}:es,ec=et.dom.getParent(et.selection.getNode(),"a");eM(ed)&&eP(ed.href)&&(ed.href=ed.href.replace(/ /g,"%20"),ec&&ed.href||et.formatter.remove("link"),ed.href&&et.formatter.apply("link",ed,ec))};et.editorCommands.addCommands({unlink:()=>{if(et.selection.isEditable()){if(et.selection.isCollapsed()){let er=et.dom.getParent(et.selection.getStart(),"a");return void(er&&et.dom.remove(er,!0))}et.formatter.remove("link")}},mceInsertLink:t,createLink:t})})(et),et.editorCommands.addCommands({Indent:()=>{uE(et,"indent")},Outdent:()=>{mE(et)}}),et.editorCommands.addCommands({Outdent:()=>lE(et)},"state"),(et=>{et.editorCommands.addCommands({InsertNewBlockBefore:()=>{WO(et,!0)},InsertNewBlockAfter:()=>{WO(et,!1)}})})(et),(et=>{et.editorCommands.addCommands({insertParagraph:()=>{PN(cj,et)},mceInsertNewLine:(er,ei,es)=>{LN(et,es)},InsertLineBreak:(er,ei,es)=>{PN(c$,et)}})})(et),(et=>{et.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":er=>{et.getDoc().execCommand(er);let ei=et.dom.getParent(et.selection.getNode(),"ol,ul");if(ei){let er=ei.parentNode;if(er&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(er.nodeName)){let es=et.selection.getBookmark();et.dom.split(er,ei),et.selection.moveToBookmark(es)}}}})})(et),(et=>{et.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":er=>{let ei=et.dom.getParent(et.selection.getNode(),"ul,ol");return ei&&("insertunorderedlist"===er&&"UL"===ei.tagName||"insertorderedlist"===er&&"OL"===ei.tagName)}},"state")})(et),(et=>{let t=(er,ei)=>{et.formatter.toggle(er,ei),et.nodeChanged()};et.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":et=>{t(et)},"ForeColor,HiliteColor":(et,er,ei)=>{t(et,{value:ei})},BackColor:(et,er,ei)=>{t("hilitecolor",{value:ei})},FontName:(er,ei,es)=>{((et,er)=>{let ei=VO(et,er);et.formatter.toggle("fontname",{value:qO(ei)}),et.nodeChanged()})(et,es)},FontSize:(er,ei,es)=>{et.formatter.toggle("fontsize",{value:VO(et,es)}),et.nodeChanged()},LineHeight:(er,ei,es)=>{et.formatter.toggle("lineheight",{value:String(es)}),et.nodeChanged()},Lang:(et,er,ei)=>{var es;t(et,{value:ei.code,customValue:null!==(es=ei.customCode)&&void 0!==es?es:null})},RemoveFormat:er=>{et.formatter.remove(er)},mceBlockQuote:()=>{t("blockquote")},FormatBlock:(et,er,ei)=>{t(eP(ei)?ei:"p")},mceToggleFormat:(et,er,ei)=>{t(ei)}})})(et),(et=>{let t=er=>et.formatter.match(er);et.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":et=>t(et),mceBlockQuote:()=>t("blockquote")},"state"),et.editorCommands.addQueryValueHandler("FontName",()=>$O(et,er=>uG(et.getBody(),er.dom)).getOr("")),et.editorCommands.addQueryValueHandler("FontSize",()=>$O(et,er=>uV(et.getBody(),er.dom)).getOr("")),et.editorCommands.addQueryValueHandler("LineHeight",()=>$O(et,er=>{let ei=pn(et.getBody()),es=hb(er,et=>uo(et,"line-height"),O(En,ei));return es.getOrThunk(()=>{let et=parseFloat(lo(er,"line-height")),ei=parseFloat(lo(er,"font-size"));return String(et/ei)})}).getOr(""))})(et),(et=>{et.editorCommands.addCommands({mceRemoveNode:(er,ei,es)=>{let ed=null!=es?es:et.selection.getNode();if(ed!==et.getBody()){let er=et.selection.getBookmark();et.dom.remove(ed,!0),et.selection.moveToBookmark(er)}},mcePrint:()=>{et.getWin().print()},mceFocus:(er,ei,es)=>{et.removed||(!0===es?kg(et):(et=>{var er;let ei=et.selection,es=et.getBody(),ed=ei.getRng();et.quirks.refreshContentEditable(),C(et.bookmark)&&!xg(et)&&cg(et).each(er=>{et.selection.setRng(er),ed=er});let ec=(er=ei.getNode(),et.dom.getParent(er,er=>"true"===et.dom.getContentEditable(er)));if(ec&&et.dom.isChildOf(ec,es))return wg(ec),Cg(et,ed),void kg(et);et.inline||(tP.browser.isOpera()||wg(es),et.getWin().focus()),(tP.browser.isFirefox()||et.inline)&&(wg(es),Cg(et,ed)),kg(et)})(et))},mceToggleVisualAid:()=>{et.hasVisual=!et.hasVisual,et.addVisual()}})})(et)},uW=["toggleview"],YO=et=>H(uW,et.toLowerCase());let XO=class XO{constructor(et){this.commands={state:{},exec:{},value:{}},this.editor=et}execCommand(et,er=!1,ei,es){let ed=this.editor,ec=et.toLowerCase(),eu=null==es?void 0:es.skip_focus;if(ed.removed||("mcefocus"!==ec&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(ec)||eu?(et=>{cg(et).each(er=>et.selection.setRng(er))})(ed):ed.focus()),ed.dispatch("BeforeExecCommand",{command:et,ui:er,value:ei}).isDefaultPrevented()))return!1;let ef=this.commands.exec[ec];return!!ej(ef)&&(ef(ec,er,ei),ed.dispatch("ExecCommand",{command:et,ui:er,value:ei}),!0)}queryCommandState(et){if(!YO(et)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;let er=et.toLowerCase(),ei=this.commands.state[er];return!!ej(ei)&&ei(er)}queryCommandValue(et){if(!YO(et)&&this.editor.quirks.isHidden()||this.editor.removed)return"";let er=et.toLowerCase(),ei=this.commands.value[er];return ej(ei)?ei(er):""}addCommands(et,er="exec"){let ei=this.commands;ge(et,(et,es)=>{q(es.toLowerCase().split(","),es=>{ei[er][es]=et})})}addCommand(et,er,ei){let es=et.toLowerCase();this.commands.exec[es]=(et,es,ed)=>er.call(null!=ei?ei:this.editor,es,ed)}queryCommandSupported(et){let er=et.toLowerCase();return!!this.commands.exec[er]}addQueryStateHandler(et,er,ei){this.commands.state[et.toLowerCase()]=()=>er.call(null!=ei?ei:this.editor)}addQueryValueHandler(et,er,ei){this.commands.value[et.toLowerCase()]=()=>er.call(null!=ei?ei:this.editor)}};let uK="data-mce-contenteditable",JO=(et,er,ei)=>{try{et.getDoc().execCommand(er,!1,String(ei))}catch(et){}},ZO=(et,er)=>{et.dom.contentEditable=er?"true":"false"},eT=(et,er)=>{var ei;let es=pn(et.getBody());gn(es,ei="mce-content-readonly")&&!er?fn(es,ei):er&&un(es,ei),er?(et.selection.controlSelection.hideResizeRect(),et._selectionOverrides.hideFakeCaret(),(et=>{I.from(et.selection.getNode()).each(et=>{et.removeAttribute("data-mce-selected")})})(et),et.readonly=!0,ZO(es,!1),q(Fo(es,'*[contenteditable="true"]'),et=>{Jt(et,uK,"true"),ZO(et,!1)})):(et.readonly=!1,et.hasEditableRoot()&&ZO(es,!0),q(Fo(es,`*[${uK}="true"]`),et=>{on(et,uK),ZO(et,!0)}),JO(et,"StyleWithCSS",!1),JO(et,"enableInlineTableEditing",!1),JO(et,"enableObjectResizing",!1),(xg(et)||(et=>{let er=tK(pn(et.getElement()));return ng(er).filter(er=>!pg(er.dom)&&hg(et,er.dom)).isSome()})(et))&&et.focus(),(et=>{et.selection.setRng(et.selection.getRng())})(et),et.nodeChanged())},tT=et=>et.readonly,nT=et=>{et.parser.addAttributeFilter("contenteditable",er=>{tT(et)&&q(er,et=>{et.attr(uK,et.attr("contenteditable")),et.attr("contenteditable","false")})}),et.serializer.addAttributeFilter(uK,er=>{tT(et)&&q(er,et=>{et.attr("contenteditable",et.attr(uK))})}),et.serializer.addTempAttr(uK)},uY=["copy"],uX=tU.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");let sT=class sT{static isNative(et){return!!uX[et.toLowerCase()]}constructor(et){this.bindings={},this.settings=et||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||eV}fire(et,er){return this.dispatch(et,er)}dispatch(et,er){let ei=et.toLowerCase(),es=ga(ei,null!=er?er:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(es);let ed=this.bindings[ei];if(ed)for(let et=0,er=ed.length;et<er;et++){let er=ed[et];if(!er.removed){if(er.once&&this.off(ei,er.func),es.isImmediatePropagationStopped())return es;if(!1===er.func.call(this.scope,es))return es.preventDefault(),es}}return es}on(et,er,ei,es){if(!1===er&&(er=eV),er){let ed={func:er,removed:!1};es&&tU.extend(ed,es);let ec=et.toLowerCase().split(" "),eu=ec.length;for(;eu--;){let et=ec[eu],er=this.bindings[et];er||(er=[],this.toggleEvent(et,!0)),er=ei?[ed,...er]:[...er,ed],this.bindings[et]=er}}return this}off(et,er){if(et){let ei=et.toLowerCase().split(" "),es=ei.length;for(;es--;){let ed=ei[es],ec=this.bindings[ed];if(!ed)return ge(this.bindings,(et,er)=>{this.toggleEvent(er,!1),delete this.bindings[er]}),this;if(ec){if(er){let et=K(ec,et=>et.func===er);ec=et.fail,this.bindings[ed]=ec,q(et.pass,et=>{et.removed=!0})}else ec.length=0;ec.length||(this.toggleEvent(et,!1),delete this.bindings[ed])}}}else ge(this.bindings,(et,er)=>{this.toggleEvent(er,!1)}),this.bindings={};return this}once(et,er,ei){return this.on(et,er,ei,{once:!0})}has(et){et=et.toLowerCase();let er=this.bindings[et];return!(!er||0===er.length)}};let aT=et=>(et._eventDispatcher||(et._eventDispatcher=new sT({scope:et,toggleEvent:(er,ei)=>{sT.isNative(er)&&et.toggleNativeEvent&&et.toggleNativeEvent(er,ei)}})),et._eventDispatcher),uJ={fire(et,er,ei){return this.dispatch(et,er,ei)},dispatch(et,er,ei){if(this.removed&&"remove"!==et&&"detach"!==et)return ga(et.toLowerCase(),null!=er?er:{},this);let es=aT(this).dispatch(et,er);if(!1!==ei&&this.parent){let er=this.parent();for(;er&&!es.isPropagationStopped();)er.dispatch(et,es,!1),er=er.parent?er.parent():void 0}return es},on(et,er,ei){return aT(this).on(et,er,ei)},off(et,er){return aT(this).off(et,er)},once(et,er){return aT(this).once(et,er)},hasEventListeners(et){return aT(this).has(et)}},uZ=Oa.DOM,cT=(et,er)=>{if("selectionchange"===er)return et.getDoc();if(!et.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(er))return et.getDoc().documentElement;let ei=oP(et);return ei?(et.eventRoot||(et.eventRoot=uZ.select(ei)[0]),et.eventRoot):et.getBody()},uT=(et,er,ei)=>{et.hidden||tT(et)?tT(et)&&((et,er)=>{if("click"!==er.type||ld.metaKeyPressed(er))H(uY,er.type)&&et.dispatch(er.type,er);else{let ei=pn(er.target);to(ei,"a",er=>En(er,pn(et.getBody()))).bind(et=>tn(et,"href")).each(ei=>{if(er.preventDefault(),/^#/.test(ei)){let er=et.dom.select(`${ei},[name="${ze(ei,"#")}"]`);er.length&&et.selection.scrollIntoView(er[0],!0)}else window.open(ei,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")})}})(et,ei):et.dispatch(er,ei)},mT=(et,ei)=>{if(et.delegates||(et.delegates={}),et.delegates[ei]||et.removed)return;let es=cT(et,ei);if(oP(et)){if(er||(er={},et.editorManager.on("removeEditor",()=>{et.editorManager.activeEditor||er&&(ge(er,(er,ei)=>{et.dom.unbind(cT(et,ei))}),er=null)})),er[ei])return;let o=er=>{let es=er.target,ed=et.editorManager.get(),ec=ed.length;for(;ec--;){let et=ed[ec].getBody();(et===es||uZ.isChildOf(es,et))&&uT(ed[ec],ei,er)}};er[ei]=o,uZ.bind(es,ei,o)}else{let o=er=>{uT(et,ei,er)};uZ.bind(es,ei,o),et.delegates[ei]=o}},uQ={...uJ,bindPendingEventDelegates(){let et=this;tU.each(et._pendingNativeEvents,er=>{mT(et,er)})},toggleNativeEvent(et,er){"focus"!==et&&"blur"!==et&&(this.removed||(er?this.initialized?mT(this,et):this._pendingNativeEvents?this._pendingNativeEvents.push(et):this._pendingNativeEvents=[et]:this.initialized&&this.delegates&&(this.dom.unbind(cT(this,et),et,this.delegates[et]),delete this.delegates[et])))},unbindAllNativeEvents(){let et=this,er=et.getBody(),ei=et.dom;et.delegates&&(ge(et.delegates,(er,ei)=>{et.dom.unbind(cT(et,ei),ei,er)}),delete et.delegates),!et.inline&&er&&ei&&(er.onload=null,ei.unbind(et.getWin()),ei.unbind(et.getDoc())),ei&&(ei.unbind(er),ei.unbind(et.getContainer()))}},gT=et=>eP(et)?{value:et.split(/[ ,]/),valid:!0}:k(et,eP)?{value:et,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},pT=(et,er)=>et+(Ye(er.message)?"":`. ${er.message}`),hT=et=>et.valid,bT=(et,er,ei="")=>{let es=er(et);return eq(es)?es?{value:et,valid:!0}:{valid:!1,message:ei}:es},u0=["design","readonly"],yT=(et,er,ei,es)=>{let ed=ei[er.get()],ec=ei[es];try{ec.activate()}catch(et){return void console.error(`problem while activating editor mode ${es}:`,et)}ed.deactivate(),ed.editorReadOnly!==ec.editorReadOnly&&eT(et,ec.editorReadOnly),er.set(es),((et,er)=>{et.dispatch("SwitchMode",{mode:er})})(et,es)},u1=tU.each,u2=tU.explode,u3={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},u8=tU.makeMap("alt,ctrl,shift,meta,access"),ET=et=>{let er;let ei={},es=tP.os.isMacOS()||tP.os.isiOS();u1(u2(et.toLowerCase(),"+"),et=>{et in u8?ei[et]=!0:/^[0-9]{2,}$/.test(et)?ei.keyCode=parseInt(et,10):(ei.charCode=et.charCodeAt(0),ei.keyCode=u3[et]||et.toUpperCase().charCodeAt(0))});let ed=[ei.keyCode];for(er in u8)ei[er]?ed.push(er):ei[er]=!1;return ei.id=ed.join(","),ei.access&&(ei.alt=!0,es?ei.ctrl=!0:ei.shift=!0),ei.meta&&(es?ei.meta=!0:(ei.ctrl=!0,ei.meta=!1)),ei};let ST=class ST{constructor(et){this.shortcuts={},this.pendingPatterns=[],this.editor=et;let er=this;et.on("keyup keypress keydown",et=>{!er.hasModifier(et)&&!er.isFunctionKey(et)||et.isDefaultPrevented()||(u1(er.shortcuts,ei=>{er.matchShortcut(et,ei)&&(er.pendingPatterns=ei.subpatterns.slice(0),"keydown"===et.type&&er.executeShortcutAction(ei))}),er.matchShortcut(et,er.pendingPatterns[0])&&(1===er.pendingPatterns.length&&"keydown"===et.type&&er.executeShortcutAction(er.pendingPatterns[0]),er.pendingPatterns.shift()))})}add(et,er,ei,es){let ed=this,ec=ed.normalizeCommandFunc(ei);return u1(u2(tU.trim(et)),et=>{let ei=ed.createShortcut(et,er,ec,es);ed.shortcuts[ei.id]=ei}),!0}remove(et){let er=this.createShortcut(et);return!!this.shortcuts[er.id]&&(delete this.shortcuts[er.id],!0)}normalizeCommandFunc(et){let er=this;return"string"==typeof et?()=>{er.editor.execCommand(et,!1,null)}:tU.isArray(et)?()=>{er.editor.execCommand(et[0],et[1],et[2])}:et}createShortcut(et,er,ei,es){let ed=tU.map(u2(et,">"),ET);return ed[ed.length-1]=tU.extend(ed[ed.length-1],{func:ei,scope:es||this.editor}),tU.extend(ed[0],{desc:this.editor.translate(er),subpatterns:ed.slice(1)})}hasModifier(et){return et.altKey||et.ctrlKey||et.metaKey}isFunctionKey(et){return"keydown"===et.type&&et.keyCode>=112&&et.keyCode<=123}matchShortcut(et,er){return!!er&&er.ctrl===et.ctrlKey&&er.meta===et.metaKey&&er.alt===et.altKey&&er.shift===et.shiftKey&&!!(et.keyCode===er.keyCode||et.charCode&&et.charCode===er.charCode)&&(et.preventDefault(),!0)}executeShortcutAction(et){return et.func?et.func.call(et.scope):null}};let _T=()=>{let et=(()=>{let et={},er={},ei={},es={},ed={},ec={},eu={},ef={},l=(et,er)=>(ei,es)=>{et[ei.toLowerCase()]={...es,type:er}};return{addButton:l(et,"button"),addGroupToolbarButton:l(et,"grouptoolbarbutton"),addToggleButton:l(et,"togglebutton"),addMenuButton:l(et,"menubutton"),addSplitButton:l(et,"splitbutton"),addMenuItem:l(er,"menuitem"),addNestedMenuItem:l(er,"nestedmenuitem"),addToggleMenuItem:l(er,"togglemenuitem"),addAutocompleter:l(ei,"autocompleter"),addContextMenu:l(ed,"contextmenu"),addContextToolbar:l(ec,"contexttoolbar"),addContextForm:l(ec,"contextform"),addSidebar:l(eu,"sidebar"),addView:l(ef,"views"),addIcon:(et,er)=>es[et.toLowerCase()]=er,getAll:()=>({buttons:et,menuItems:er,icons:es,popups:ei,contextMenus:ed,contextToolbars:ec,sidebars:eu,views:ef})}})();return{addAutocompleter:et.addAutocompleter,addButton:et.addButton,addContextForm:et.addContextForm,addContextMenu:et.addContextMenu,addContextToolbar:et.addContextToolbar,addIcon:et.addIcon,addMenuButton:et.addMenuButton,addMenuItem:et.addMenuItem,addNestedMenuItem:et.addNestedMenuItem,addSidebar:et.addSidebar,addSplitButton:et.addSplitButton,addToggleButton:et.addToggleButton,addGroupToolbarButton:et.addGroupToolbarButton,addToggleMenuItem:et.addToggleMenuItem,addView:et.addView,getAll:et.getAll}},u5=Oa.DOM,u6=tU.extend,u9=tU.each;let OT=class OT{constructor(et,er,ei){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=ei,this.documentBaseUrl=ei.documentBaseURL,u6(this,uQ),this.id=et,this.hidden=!1;let es=DO(uq||uz,uq,er,ei.defaultOptions,er);this.options=((et,er)=>{let ei={},es={},r=(et,er,ei)=>{let ed=bT(er,ei);return hT(ed)?(es[et]=ed.value,!0):(console.warn(pT(`Invalid value passed for the ${et} option`,ed)),!1)},s=et=>ke(ei,et);return{register:(et,ed)=>{let ec=eP(ed.processor)?(et=>{let er=(()=>{switch(et){case"array":return eU;case"boolean":return eq;case"function":return ej;case"number":return e$;case"object":return eM;case"string":return eP;case"string[]":return gT;case"object[]":return et=>k(et,eM);case"regexp":return et=>u(et,RegExp);default:return eG}})();return ei=>bT(ei,er,`The value must be a ${et}.`)})(ed.processor):ed.processor,eu=((et,er,ei)=>{if(!ez(er)){let es=bT(er,ei);if(hT(es))return es.value;console.error(pT(`Invalid default value passed for the "${et}" option`,es))}})(et,ed.default,ec);ei[et]={...ed,default:eu,processor:ec},xe(es,et).orThunk(()=>xe(er,et)).each(er=>r(et,er,ec))},isRegistered:s,get:et=>xe(es,et).orThunk(()=>xe(ei,et).map(et=>et.default)).getOrUndefined(),set:(et,er)=>{if(s(et)){let es=ei[et];return es.immutable?(console.error(`"${et}" is an immutable option and cannot be updated`),!1):r(et,er,es.processor)}return console.warn(`"${et}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:et=>{let er=s(et);return er&&delete es[et],er},isSet:et=>ke(es,et)}})(0,es),(et=>{let er=et.options.register;er("id",{processor:"string",default:et.id}),er("selector",{processor:"string"}),er("target",{processor:"object"}),er("suffix",{processor:"string"}),er("cache_suffix",{processor:"string"}),er("base_url",{processor:"string"}),er("referrer_policy",{processor:"string",default:""}),er("language_load",{processor:"boolean",default:!0}),er("inline",{processor:"boolean",default:!1}),er("iframe_attrs",{processor:"object",default:{}}),er("doctype",{processor:"string",default:"<!DOCTYPE html>"}),er("document_base_url",{processor:"string",default:et.documentBaseUrl}),er("body_id",{processor:yl(et,"tinymce"),default:"tinymce"}),er("body_class",{processor:yl(et),default:""}),er("content_security_policy",{processor:"string",default:""}),er("br_in_pre",{processor:"boolean",default:!0}),er("forced_root_block",{processor:et=>{let er=eP(et)&&Ge(et);return er?{value:et,valid:er}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),er("forced_root_block_attrs",{processor:"object",default:{}}),er("newline_behavior",{processor:et=>{let er=H(["block","linebreak","invert","default"],et);return er?{value:et,valid:er}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),er("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),er("no_newline_selector",{processor:"string",default:""}),er("keep_styles",{processor:"boolean",default:!0}),er("end_container_on_empty_block",{processor:et=>eq(et)||eP(et)?{valid:!0,value:et}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),er("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),er("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),er("font_size_classes",{processor:"string",default:""}),er("automatic_uploads",{processor:"boolean",default:!0}),er("images_reuse_filename",{processor:"boolean",default:!1}),er("images_replace_blob_uris",{processor:"boolean",default:!0}),er("icons",{processor:"string",default:""}),er("icons_url",{processor:"string",default:""}),er("images_upload_url",{processor:"string",default:""}),er("images_upload_base_path",{processor:"string",default:""}),er("images_upload_credentials",{processor:"boolean",default:!1}),er("images_upload_handler",{processor:"function"}),er("language",{processor:"string",default:"en"}),er("language_url",{processor:"string",default:""}),er("entity_encoding",{processor:"string",default:"named"}),er("indent",{processor:"boolean",default:!0}),er("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),er("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),er("indent_use_margin",{processor:"boolean",default:!1}),er("indentation",{processor:"string",default:"40px"}),er("content_css",{processor:et=>{let er=!1===et||eP(et)||k(et,eP);return er?eP(et)?{value:V(et.split(","),e1),valid:er}:eU(et)?{value:et,valid:er}:!1===et?{value:[],valid:er}:{value:et,valid:er}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:oY(et)?[]:["default"]}),er("content_style",{processor:"string"}),er("content_css_cors",{processor:"boolean",default:!1}),er("font_css",{processor:et=>{let er=eP(et)||k(et,eP);return er?{value:eU(et)?et:V(et.split(","),e1),valid:er}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),er("inline_boundaries",{processor:"boolean",default:!0}),er("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),er("object_resizing",{processor:et=>{let er=eq(et)||eP(et);return er?!1===et||nq.isiPhone()||nq.isiPad()?{value:"",valid:er}:{value:!0===et?"table,img,figure.image,div,video,iframe":et,valid:er}:{valid:!1,message:"Must be boolean or a string"}},default:!nz}),er("resize_img_proportional",{processor:"boolean",default:!0}),er("event_root",{processor:"object"}),er("service_message",{processor:"string"}),er("theme",{processor:et=>!1===et||eP(et)||ej(et),default:"silver"}),er("theme_url",{processor:"string"}),er("formats",{processor:"object"}),er("format_empty_lines",{processor:"boolean",default:!1}),er("format_noneditable_selector",{processor:"string",default:""}),er("preview_styles",{processor:et=>{let er=!1===et||eP(et);return er?{value:!1===et?"":et,valid:er}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),er("custom_ui_selector",{processor:"string",default:""}),er("hidden_input",{processor:"boolean",default:!0}),er("submit_patch",{processor:"boolean",default:!0}),er("encoding",{processor:"string"}),er("add_form_submit_trigger",{processor:"boolean",default:!0}),er("add_unload_trigger",{processor:"boolean",default:!0}),er("custom_undo_redo_levels",{processor:"number",default:0}),er("disable_nodechange",{processor:"boolean",default:!1}),er("readonly",{processor:"boolean",default:!1}),er("editable_root",{processor:"boolean",default:!0}),er("plugins",{processor:"string[]",default:[]}),er("external_plugins",{processor:"object"}),er("forced_plugins",{processor:"string[]"}),er("model",{processor:"string",default:et.hasPlugin("rtc")?"plugin":"dom"}),er("model_url",{processor:"string"}),er("block_unsupported_drop",{processor:"boolean",default:!0}),er("visual",{processor:"boolean",default:!0}),er("visual_table_class",{processor:"string",default:"mce-item-table"}),er("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),er("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),er("setup",{processor:"function"}),er("init_instance_callback",{processor:"function"}),er("url_converter",{processor:"function",default:et.convertURL}),er("url_converter_scope",{processor:"object",default:et}),er("urlconverter_callback",{processor:"function"}),er("allow_conditional_comments",{processor:"boolean",default:!1}),er("allow_html_data_urls",{processor:"boolean",default:!1}),er("allow_svg_data_urls",{processor:"boolean"}),er("allow_html_in_named_anchor",{processor:"boolean",default:!1}),er("allow_script_urls",{processor:"boolean",default:!1}),er("allow_unsafe_link_target",{processor:"boolean",default:!1}),er("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),er("fix_list_elements",{processor:"boolean",default:!1}),er("preserve_cdata",{processor:"boolean",default:!1}),er("remove_trailing_brs",{processor:"boolean",default:!0}),er("pad_empty_with_br",{processor:"boolean",default:!1}),er("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),er("element_format",{processor:"string",default:"html"}),er("entities",{processor:"string"}),er("schema",{processor:"string",default:"html5"}),er("convert_urls",{processor:"boolean",default:!0}),er("relative_urls",{processor:"boolean",default:!0}),er("remove_script_host",{processor:"boolean",default:!0}),er("custom_elements",{processor:"string"}),er("extended_valid_elements",{processor:"string"}),er("invalid_elements",{processor:"string"}),er("invalid_styles",{processor:vl}),er("valid_children",{processor:"string"}),er("valid_classes",{processor:vl}),er("valid_elements",{processor:"string"}),er("valid_styles",{processor:vl}),er("verify_html",{processor:"boolean",default:!0}),er("auto_focus",{processor:et=>eP(et)||!0===et}),er("browser_spellcheck",{processor:"boolean",default:!1}),er("protect",{processor:"array"}),er("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),er("deprecation_warnings",{processor:"boolean",default:!0}),er("a11y_advanced_options",{processor:"boolean",default:!1}),er("api_key",{processor:"string"}),er("paste_block_drop",{processor:"boolean",default:!1}),er("paste_data_images",{processor:"boolean",default:!0}),er("paste_preprocess",{processor:"function"}),er("paste_postprocess",{processor:"function"}),er("paste_webkit_styles",{processor:"string",default:"none"}),er("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),er("paste_merge_formats",{processor:"boolean",default:!0}),er("smart_paste",{processor:"boolean",default:!0}),er("paste_as_text",{processor:"boolean",default:!1}),er("paste_tab_spaces",{processor:"number",default:4}),er("text_patterns",{processor:et=>k(et,eM)||!1===et?{value:ml(!1===et?[]:et),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),er("text_patterns_lookup",{processor:et=>ej(et)?{value:er=>{let ei=et(er);return ml(ei)},valid:!0}:{valid:!1,message:"Must be a single function"},default:et=>[]}),er("noneditable_class",{processor:"string",default:"mceNonEditable"}),er("editable_class",{processor:"string",default:"mceEditable"}),er("noneditable_regexp",{processor:et=>k(et,hl)?{value:et,valid:!0}:hl(et)?{value:[et],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),er("table_tab_navigation",{processor:"boolean",default:!0}),er("highlight_on_focus",{processor:"boolean",default:!1}),er("xss_sanitization",{processor:"boolean",default:!0}),er("details_initial_state",{processor:et=>{let er=H(["inherited","collapsed","expanded"],et);return er?{value:et,valid:er}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),er("details_serialized_state",{processor:et=>{let er=H(["inherited","collapsed","expanded"],et);return er?{value:et,valid:er}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),er("init_content_sync",{processor:"boolean",default:!1}),er("newdocument_content",{processor:"string",default:""}),et.on("ScriptsLoaded",()=>{er("directionality",{processor:"string",default:ns.isRtl()?"rtl":void 0}),er("placeholder",{processor:"string",default:nj.getAttrib(et.getElement(),"placeholder")})})})(this);let ed=this.options.get;ed("deprecation_warnings")&&(((et,er)=>{let ei=JC(et),es=tw(er),ed=es.length>0,ec=ei.length>0,eu="mobile"===er.theme;if(ed||ec||eu){let et=eu?`

Themes:
- mobile`:"",er=ed?`

Plugins:
- ${es.join("\n- ")}`:"",ef=ec?`

Options:
- ${ei.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+et+er+ef)}})(er,es),((et,er)=>{let ei=ZC(et),es=nw(er),ed=es.length>0,ec=ei.length>0;if(ed||ec){let et=ed?`

Plugins:
- ${es.map(ow).join("\n- ")}`:"",er=ec?`

Options:
- ${ei.join("\n- ")}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+et+er)}})(er,es));let ec=ed("suffix");ec&&(ei.suffix=ec),this.suffix=ei.suffix;let eu=ed("base_url");eu&&ei._setBaseUrl(eu),this.baseUri=ei.baseURI;let ef=od(this);ef&&(Ba.ScriptLoader._setReferrerPolicy(ef),Oa.DOM.styleSheetLoader._setReferrerPolicy(ef));let ep=o8(this);C(ep)&&Oa.DOM.styleSheetLoader._setContentCssCors(ep),Fa.languageLoad=ed("language_load"),Fa.baseURL=ei.baseURL,this.setDirty(!1),this.documentBaseURI=new Hy(nG(this),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=oY(this),this.hasVisual=o4(this),this.shortcuts=new ST(this),this.editorCommands=new XO(this),KO(this);let ev=ed("cache_suffix");ev&&(tP.cacheSuffix=ev.replace(/^[\?\&]+/,"")),this.ui={registry:_T(),styleSheetLoader:void 0,show:E,hide:E,setEnabled:E,isEnabled:eG},this.mode=(et=>{let er=Da("design"),ei=Da({design:{activate:E,deactivate:E,editorReadOnly:!1},readonly:{activate:E,deactivate:E,editorReadOnly:!0}});return et.serializer?nT(et):et.on("PreInit",()=>{nT(et)}),et.on("ShowCaret",er=>{tT(et)&&er.preventDefault()}),et.on("ObjectSelected",er=>{tT(et)&&er.preventDefault()}),{isReadOnly:()=>tT(et),set:es=>((et,er,ei,es)=>{if(es!==ei.get()){if(!ke(er,es))throw Error(`Editor mode '${es}' is invalid`);et.initialized?yT(et,ei,er,es):et.on("init",()=>yT(et,ei,er,es))}})(et,ei.get(),er,es),get:()=>er.get(),register:(et,er)=>{ei.set(((et,er,ei)=>{if(H(u0,er))throw Error(`Cannot override default mode ${er}`);return{...et,[er]:{...ei,deactivate:()=>{try{ei.deactivate()}catch(et){console.error(`problem while deactivating editor mode ${er}:`,et)}}}}})(ei.get(),et,er))}}})(this),ei.dispatch("SetupEditor",{editor:this});let ey=aa(this);ej(ey)&&ey.call(this,this)}render(){(et=>{let er=et.id;ns.setCode(oc(et));let n=()=>{uU.unbind(window,"ready",n),et.render()};if(!Ca.Event.domLoaded)return void uU.bind(window,"ready",n);if(!et.getElement())return;let ei=pn(et.getElement()),es=rn(ei);et.on("remove",()=>{W(ei.dom.attributes,et=>on(ei,et.name)),Zt(ei,es)}),et.ui.styleSheetLoader=rj.forElement(ei,{contentCssCors:o8(et),referrerPolicy:od(et)}),oY(et)?et.inline=!0:(et.orgVisibility=et.getElement().style.visibility,et.getElement().style.visibility="hidden");let ed=et.getElement().form||uU.getParent(er,"form");ed&&(et.formElement=ed,oX(et)&&!tX(et.getElement())&&(uU.insertAfter(uU.create("input",{type:"hidden",name:er}),er),et.hasHiddenInput=!0),et.formEventDelegate=er=>{et.dispatch(er.type,er)},uU.bind(ed,"submit reset",et.formEventDelegate),et.on("reset",()=>{et.resetContent()}),!oJ(et)||ed.submit.nodeType||ed.submit.length||ed._mceOldSubmit||(ed._mceOldSubmit=ed.submit,ed.submit=()=>(et.editorManager.triggerSave(),et.setDirty(!1),ed._mceOldSubmit(ed)))),et.windowManager=bw(et),et.notificationManager=gw(et),"xml"===et.options.get("encoding")&&et.on("GetContent",et=>{et.save&&(et.content=uU.encode(et.content))}),oZ(et)&&et.on("submit",()=>{et.initialized&&et.save()}),oQ(et)&&(et._beforeUnload=()=>{!et.initialized||et.destroyed||et.isHidden()||et.save({format:"raw",no_events:!0,set_dirty:!1})},et.editorManager.on("BeforeUnload",et._beforeUnload)),et.editorManager.add(et),EO(et,et.suffix)})(this)}focus(et){this.execCommand("mceFocus",!1,et)}hasFocus(){return xg(this)}translate(et){return ns.translate(et)}getParam(et,er,ei){let es=this.options;return es.isRegistered(et)||(C(ei)?es.register(et,{processor:ei,default:er}):es.register(et,{processor:eG,default:er})),es.isSet(et)||ez(er)?es.get(et):er}hasPlugin(et,er){return!(!H(o5(this),et)||er&&void 0===dt.get(et))}nodeChanged(et){this._nodeChangeDispatcher.nodeChanged(et)}addCommand(et,er,ei){this.editorCommands.addCommand(et,er,ei)}addQueryStateHandler(et,er,ei){this.editorCommands.addQueryStateHandler(et,er,ei)}addQueryValueHandler(et,er,ei){this.editorCommands.addQueryValueHandler(et,er,ei)}addShortcut(et,er,ei,es){this.shortcuts.add(et,er,ei,es)}execCommand(et,er,ei,es){return this.editorCommands.execCommand(et,er,ei,es)}queryCommandState(et){return this.editorCommands.queryCommandState(et)}queryCommandValue(et){return this.editorCommands.queryCommandValue(et)}queryCommandSupported(et){return this.editorCommands.queryCommandSupported(et)}show(){this.hidden&&(this.hidden=!1,this.inline?this.getBody().contentEditable="true":(u5.show(this.getContainer()),u5.hide(this.id)),this.load(),this.dispatch("show"))}hide(){this.hidden||(this.save(),this.inline?(this.getBody().contentEditable="false",this===this.editorManager.focusedEditor&&(this.editorManager.focusedEditor=null)):(u5.hide(this.getContainer()),u5.setStyle(this.id,"display",this.orgDisplay)),this.hidden=!0,this.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(et,er){this.dispatch("ProgressState",{state:et,time:er})}load(et={}){let er=this.getElement();if(this.removed)return"";if(er){let ei={...et,load:!0},es=tX(er)?er.value:er.innerHTML,ed=this.setContent(es,ei);return ei.no_events||this.dispatch("LoadContent",{...ei,element:er}),ed}return""}save(et={}){let er=this,ei=er.getElement();if(!ei||!er.initialized||er.removed)return"";let es={...et,save:!0,element:ei},ed=er.getContent(es),ec={...es,content:ed};if(ec.no_events||er.dispatch("SaveContent",ec),"raw"===ec.format&&er.dispatch("RawSaveContent",ec),ed=ec.content,tX(ei))ei.value=ed;else{!et.is_removing&&er.inline||(ei.innerHTML=ed);let es=u5.getParent(er.id,"form");es&&u9(es.elements,et=>et.name!==er.id||(et.value=ed,!1))}return ec.element=es.element=ei=null,!1!==ec.set_dirty&&er.setDirty(!1),ed}setContent(et,er){return WC(this,et,er)}getContent(et){return((et,er={})=>{var ei;let es=(ei=er.format?er.format:"html",{...er,format:ei,get:!0,getInner:!0});return oC(et,es).fold(R,er=>{let ei=LC(et).editor.getContent(er);return rC(et,ei,er)})})(this,et)}insertContent(et,er){er&&(et=u6({content:et},er)),this.execCommand("mceInsertContent",!1,et)}resetContent(et){void 0===et?WC(this,this.startContent,{format:"raw"}):WC(this,et),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(et){let er=!this.isNotDirty;this.isNotDirty=!et,et&&et!==er&&this.dispatch("dirty")}getContainer(){return this.container||(this.container=this.editorContainer||u5.get(this.id+"_parent")),this.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=u5.get(this.id)),this.targetElm}getWin(){if(!this.contentWindow){let et=this.iframeElement;et&&(this.contentWindow=et.contentWindow)}return this.contentWindow}getDoc(){if(!this.contentDocument){let et=this.getWin();et&&(this.contentDocument=et.document)}return this.contentDocument}getBody(){var et,er;let ei=this.getDoc();return null!==(er=null!==(et=this.bodyElement)&&void 0!==et?et:null==ei?void 0:ei.body)&&void 0!==er?er:null}convertURL(et,er,ei){let es=this.options.get,ed=ac(this);return ej(ed)?ed.call(this,et,ei,!0,er):!es("convert_urls")||"link"===ei||eM(ei)&&"LINK"===ei.nodeName||0===et.indexOf("file:")||0===et.length?et:es("relative_urls")?this.documentBaseURI.toRelative(et):et=this.documentBaseURI.toAbsolute(et,es("remove_script_host"))}addVisual(et){((et,er)=>{MC(et).editor.addVisual(er)})(this,et)}setEditableRoot(et){this._editableRoot!==et&&(this._editableRoot=et,this.readonly||(this.getBody().contentEditable=String(this.hasEditableRoot()),this.nodeChanged()),((et,er)=>{et.dispatch("EditableRootStateChange",{state:er})})(this,et))}hasEditableRoot(){return this._editableRoot}remove(){(et=>{if(!et.removed){let{_selectionOverrides:er,editorUpload:ei}=et,es=et.getBody(),ed=et.getElement();es&&et.save({is_removing:!0}),et.removed=!0,et.unbindAllNativeEvents(),et.hasHiddenInput&&C(null==ed?void 0:ed.nextSibling)&&s3.remove(ed.nextSibling),(et=>{et.dispatch("remove")})(et),et.editorManager.remove(et),!et.inline&&es&&s3.setStyle(et.id,"display",et.orgDisplay),(et=>{et.dispatch("detach")})(et),s3.remove(et.getContainer()),sw(er),sw(ei),et.destroy()}})(this)}destroy(et){((et,er)=>{let{selection:ei,dom:es}=et;et.destroyed||(er||et.removed?(er||(et.editorManager.off("beforeunload",et._beforeUnload),et.theme&&et.theme.destroy&&et.theme.destroy(),sw(ei),sw(es)),(et=>{let er=et.formElement;er&&(er._mceOldSubmit&&(er.submit=er._mceOldSubmit,delete er._mceOldSubmit),s3.unbind(er,"submit reset",et.formEventDelegate))})(et),(et=>{et.contentAreaContainer=et.formElement=et.container=et.editorContainer=null,et.bodyElement=et.contentDocument=et.contentWindow=null,et.iframeElement=et.targetElm=null;let er=et.selection;if(er){let ei=er.dom;et.selection=er.win=er.dom=ei.doc=null}})(et),et.destroyed=!0):et.remove())})(this,et)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}};let u4=Oa.DOM,u7=tU.each,me,mt=!1,mr=[],MT=et=>{let er=et.type;u7(md.get(),ei=>{switch(er){case"scroll":ei.dispatch("ScrollWindow",et);break;case"resize":ei.dispatch("ResizeWindow",et)}})},IT=et=>{if(et!==mt){let er=Oa.DOM;et?(er.bind(window,"resize",MT),er.bind(window,"scroll",MT)):(er.unbind(window,"resize",MT),er.unbind(window,"scroll",MT)),mt=et}},FT=et=>{let er=mr;return mr=G(mr,er=>et!==er),md.activeEditor===et&&(md.activeEditor=mr.length>0?mr[0]:null),md.focusedEditor===et&&(md.focusedEditor=null),er.length!==mr.length},ma="CSS1Compat"!==document.compatMode,md={...uJ,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"7.0",releaseDate:"2023-08-30",i18n:ns,activeEditor:null,focusedEditor:null,setup(){let et="",er="",ei=Hy.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(ei)&&(ei=ei.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(ei)||(ei+="/"));let es=window.tinymce||window.tinyMCEPreInit;if(es)et=es.base||es.baseURL,er=es.suffix;else{let ei=document.getElementsByTagName("script");for(let es=0;es<ei.length;es++){let ed=ei[es].src||"";if(""===ed)continue;let ec=ed.substring(ed.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(ed)){-1!==ec.indexOf(".min")&&(er=".min"),et=ed.substring(0,ed.lastIndexOf("/"));break}}if(!et&&document.currentScript){let ei=document.currentScript.src;-1!==ei.indexOf(".min")&&(er=".min"),et=ei.substring(0,ei.lastIndexOf("/"))}}this.baseURL=new Hy(ei).toAbsolute(et),this.documentBaseURL=ei,this.baseURI=new Hy(this.baseURL),this.suffix=er,this.on("AddEditor",O(vg,this)),this.on("RemoveEditor",O(yg,this))},overrideDefaults(et){let er=et.base_url;er&&this._setBaseUrl(er);let ei=et.suffix;ei&&(this.suffix=ei),this.defaultOptions=et;let es=et.plugin_base_urls;void 0!==es&&ge(es,(et,er)=>{Fa.PluginManager.urls[er]=et})},init(et){let er;let ei=this,es=tU.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),r=et=>{er=et},s=()=>{let er,ed=0,ec=[];u4.unbind(window,"ready",s),(er=>{let es=et.onpageload;es&&es.apply(ei,[])})(),er=((et,er)=>{let ei=[],es=ej(er)?et=>$(ei,ei=>er(ei,et)):et=>H(ei,et);for(let er=0,ed=et.length;er<ed;er++){let ed=et[er];es(ed)||ei.push(ed)}return ei})(tP.browser.isIE()||tP.browser.isEdge()?(xw("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):ma?(xw("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):eP(et.selector)?u4.select(et.selector):C(et.target)?[et.target]:[]),tU.each(er,et=>{var er;(er=ei.get(et.id))&&er.initialized&&!(er.getContainer()||er.getBody()).parentNode&&(FT(er),er.unbindAllNativeEvents(),er.destroy(!0),er.removed=!0)}),0===(er=tU.grep(er,et=>!ei.get(et.id))).length?r([]):u7(er,eu=>{let ef;et.inline&&eu.tagName.toLowerCase() in es?xw("Could not initialize inline editor on invalid inline target element",eu):((et,es,eu)=>{let ef=new OT(et,es,ei);ec.push(ef),ef.on("init",()=>{++ed===er.length&&r(ec)}),ef.targetElm=ef.targetElm||eu,ef.render()})(((ef=eu.id)||(ef=xe(eu,"name").filter(et=>!u4.get(et)).getOrThunk(u4.uniqueId),eu.setAttribute("id",ef)),ef),et,eu)})};return u4.bind(window,"ready",s),new Promise(et=>{er?et(er):r=er=>{et(er)}})},get(et){return 0==arguments.length?mr.slice(0):eP(et)?J(mr,er=>er.id===et).getOr(null):e$(et)&&mr[et]?mr[et]:null},add(et){let er=this,ei=er.get(et.id);return ei===et||(null===ei&&mr.push(et),IT(!0),er.activeEditor=et,er.dispatch("AddEditor",{editor:et}),me||(me=et=>{let ei=er.dispatch("BeforeUnload");if(ei.returnValue)return et.preventDefault(),et.returnValue=ei.returnValue,ei.returnValue},window.addEventListener("beforeunload",me))),et},createEditor(et,er){return this.add(new OT(et,er,this))},remove(et){let er;let ei=this;if(et){if(!eP(et))return er=et,eH(ei.get(er.id))?null:(FT(er)&&ei.dispatch("RemoveEditor",{editor:er}),0===mr.length&&window.removeEventListener("beforeunload",me),er.remove(),IT(mr.length>0),er);u7(u4.select(et),et=>{(er=ei.get(et.id))&&ei.remove(er)})}else for(let et=mr.length-1;et>=0;et--)ei.remove(mr[et])},execCommand(et,er,ei){var es;let ed=eM(ei)?null!==(es=ei.id)&&void 0!==es?es:ei.index:ei;switch(et){case"mceAddEditor":if(!this.get(ed)){let et=ei.options;new OT(ed,et,this).render()}return!0;case"mceRemoveEditor":{let et=this.get(ed);return et&&et.remove(),!0}case"mceToggleEditor":{let et=this.get(ed);return et?et.isHidden()?et.show():et.hide():this.execCommand("mceAddEditor",!1,ei),!0}}return!!this.activeEditor&&this.activeEditor.execCommand(et,er,ei)},triggerSave:()=>{u7(mr,et=>{et.save()})},addI18n:(et,er)=>{ns.add(et,er)},translate:et=>ns.translate(et),setActive(et){let er=this.activeEditor;this.activeEditor!==et&&(er&&er.dispatch("deactivate",{relatedTarget:et}),et.dispatch("activate",{relatedTarget:er})),this.activeEditor=et},_setBaseUrl(et){this.baseURL=new Hy(this.documentBaseURL).toAbsolute(et.replace(/\/+$/,"")),this.baseURI=new Hy(this.baseURL)}};md.setup();let mf=(()=>{let et=za();return{FakeClipboardItem:et=>({items:et,types:eJ(et),getType:er=>xe(et,er).getOrUndefined()}),write:er=>{et.set(er)},read:()=>et.get().getOrUndefined(),clear:et.clear}})(),mg=Math.min,mp=Math.max,mw=Math.round,qT=(et,er,ei)=>{let es=er.x,ed=er.y,ec=et.w,eu=et.h,ef=er.w,ep=er.h,ev=(ei||"").split("");return"b"===ev[0]&&(ed+=ep),"r"===ev[1]&&(es+=ef),"c"===ev[0]&&(ed+=mw(ep/2)),"c"===ev[1]&&(es+=mw(ef/2)),"b"===ev[3]&&(ed-=eu),"r"===ev[4]&&(es-=ec),"c"===ev[3]&&(ed-=mw(eu/2)),"c"===ev[4]&&(es-=mw(ec/2)),WT(es,ed,ec,eu)},WT=(et,er,ei,es)=>({x:et,y:er,w:ei,h:es}),mN=(()=>{let et={},er={};return{load:(ei,es)=>{let ed=`Script at URL "${es}" failed to load`,ec=`Script at URL "${es}" did not call \`tinymce.Resource.add('${ei}', data)\` within 1 second`;if(void 0!==et[ei])return et[ei];{let eu=new Promise((et,eu)=>{let ef=((et,er,ei=1e3)=>{let es=!1,ed=null,s=et=>(...er)=>{es||(es=!0,null!==ed&&(clearTimeout(ed),ed=null),et.apply(null,er))},ec=s(et),eu=s(er);return{start:(...et)=>{es||null!==ed||(ed=setTimeout(()=>eu.apply(null,et),ei))},resolve:ec,reject:eu}})(et,eu);er[ei]=ef.resolve,Ba.ScriptLoader.loadScript(es).then(()=>ef.start(ec),()=>ef.reject(ed))});return et[ei]=eu,eu}},add:(ei,es)=>{void 0!==er[ei]&&(er[ei](es),delete er[ei]),et[ei]=Promise.resolve(es)},unload:er=>{delete et[er]}}})();try{let et="__storage_test__";(ei=window.localStorage).setItem(et,et),ei.removeItem(et)}catch(et){ei=(()=>{let et={},er=[],ei={getItem:er=>et[er]||null,setItem:(ei,es)=>{er.push(ei),et[ei]=String(es)},key:et=>er[et],removeItem:ei=>{er=er.filter(et=>et===ei),delete et[ei]},clear:()=>{er=[],et={}},length:0};return Object.defineProperty(ei,"length",{get:()=>er.length,configurable:!1,enumerable:!1}),ei})()}let m_={geom:{Rect:{inflate:(et,er,ei)=>WT(et.x-er,et.y-ei,et.w+2*er,et.h+2*ei),relativePosition:qT,findBestRelativePosition:(et,er,ei,es)=>{for(let ed=0;ed<es.length;ed++){let ec=qT(et,er,es[ed]);if(ec.x>=ei.x&&ec.x+ec.w<=ei.w+ei.x&&ec.y>=ei.y&&ec.y+ec.h<=ei.h+ei.y)return es[ed]}return null},intersect:(et,er)=>{let ei=mp(et.x,er.x),es=mp(et.y,er.y),ed=mg(et.x+et.w,er.x+er.w),ec=mg(et.y+et.h,er.y+er.h);return ed-ei<0||ec-es<0?null:WT(ei,es,ed-ei,ec-es)},clamp:(et,er,ei)=>{let es=et.x,ed=et.y,ec=et.x+et.w,eu=et.y+et.h,ef=er.x+er.w,ep=er.y+er.h,ev=mp(0,er.x-es),ey=mp(0,er.y-ed),eS=mp(0,ec-ef),eI=mp(0,eu-ep);return es+=ev,ed+=ey,ei&&(ec+=ev,eu+=ey,es-=eS,ed-=eI),WT(es,ed,(ec-=eS)-es,(eu-=eI)-ed)},create:WT,fromClientRect:et=>WT(et.left,et.top,et.width,et.height)}},util:{Delay:lP,Tools:tU,VK:ld,URI:Hy,EventDispatcher:sT,Observable:uJ,I18n:ns,LocalStorage:ei,ImageUploader:et=>{let er=Sw(),ei=Aw(et,er);return{upload:(er,es=!0)=>ei.upload(er,es?Rw(et):void 0)}}},dom:{EventUtils:Ca,TreeWalker:zo,TextSeeker:ai,DOMUtils:Oa,ScriptLoader:Ba,RangeUtils:Df,Serializer:qC,StyleSheetLoader:Ls,ControlSelection:sf,BookmarkManager:Wm,Selection:HC,Event:Ca.Event},html:{Styles:ua,Entities:rQ,Node:Fg,Schema:ca,DomParser:tC,Writer:Kg,Serializer:Gg},Env:tP,AddOnManager:Fa,Annotator:qm,Formatter:jw,UndoManager:$w,EditorCommands:XO,WindowManager:bw,NotificationManager:gw,EditorObservable:uQ,Shortcuts:ST,Editor:OT,FocusManager:lF,EditorManager:md,DOM:Oa.DOM,ScriptLoader:Ba.ScriptLoader,PluginManager:dt,ThemeManager:dr,ModelManager:s5,IconManager:s8,Resource:mN,FakeClipboard:mf,trim:tU.trim,isArray:tU.isArray,is:tU.is,toArray:tU.toArray,makeMap:tU.makeMap,each:tU.each,map:tU.map,grep:tU.grep,inArray:tU.inArray,extend:tU.extend,walk:tU.walk,resolve:tU.resolve,explode:tU.explode,_addCacheSuffix:tU._addCacheSuffix},mR=tU.extend(md,m_);window.tinymce=mR,window.tinyMCE=mR,(et=>{if("object"==typeof module)try{module.exports=et}catch(et){}})(mR)}();